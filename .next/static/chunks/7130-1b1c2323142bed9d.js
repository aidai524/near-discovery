"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7130],{87130:function(e,n,t){let a;t.d(n,{Wr:function(){return x},Bq:function(){return _},Vr:function(){return k}});var s=t(67294),i=t(13012),r=t(64146),d=t(96430),p=t(21004),y=t(99376);let o=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"AddressInsufficientBalance",type:"error"},{inputs:[],name:"FailedInnerCall",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"toAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"bool",name:"isUserDeposit",type:"bool"}],name:"DepositToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"GasSent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"PermitUsed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"toAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"chainId",type:"uint256"}],name:"TransferFromPermitted",type:"event"},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_dstChainId",type:"uint256"},{internalType:"address",name:"_toAddress",type:"address"},{internalType:"bool",name:"isUserDeposit",type:"bool"}],name:"depositEth",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_toAddress",type:"address"},{internalType:"uint256",name:"_dstChainId",type:"uint256"},{internalType:"bool",name:"isUserDeposit",type:"bool"}],name:"depositToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"address",name:"_owner",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxEtherDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"maxTokenDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{components:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Fuel.PermitParams",name:"_params",type:"tuple"}],name:"permitAndRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"sendGas",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxEtherUnits",type:"uint256"}],name:"setMaxEtherDeposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_tokens",type:"address[]"},{internalType:"uint256[]",name:"_maxTokenUnits",type:"uint256[]"}],name:"setMaxTokenDeposits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_toAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_dstChainId",type:"uint256"}],name:"transferFromPermitted",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userEtherDeposits",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"userTokenDeposits",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];async function u(){let e=new d.SuperBridgeStore("dapdap-v2","gas");return await e.init(),a=e,e}async function l(){return a||u()}async function m(e){let n=await l();await n.update(e)}async function c(){let e=await l(),n=await e.readAll();return n||[]}u();let T="0xe1dA6F46d757699f6D783a2876E01937a1eCa9a9",b="https://refueler.bobdev.link/api/v1/refuel",f=null;async function h(e,n){var t,a;let s,i;if(!f){let e=await fetch("".concat(b,"/supportedChains")).then(e=>e.json());e&&e.data&&(f=e.data)}return e&&(s=null===(t=f.supported_src_chains)||void 0===t?void 0:t.filter(n=>Number(n.chain_id)===e.chainId)),n&&(i=null===(a=f.supported_dst_chains)||void 0===a?void 0:a.filter(e=>Number(e.chain_id)===n.chainId)),{hasFrom:s,hasTo:i}}async function w(e,n){if(n.isNative)return Promise.resolve(!0);let t=await fetch("".concat(b,"/").concat(e.chain_name,"/").concat(e.chain_id,"/supportedSourceTokens")).then(e=>e.json()),a=t.data.tokens;return a.some(e=>e.token_address===n.address)}async function v(e,n,t,a){let s=await fetch("".concat(b,"/estimateExpectedReceived"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseInt(a).toString(),amount_decimal:t.decimals,dest_chain_id:n.chain_id,dest_chain_name:n.chain_name,src_chain_name:e.chain_name,token_address:t.address})}).then(e=>e.json());return 2e4!==s.returnCode?0:s.data.expected_received}function _(e){let{fromChain:n,toChain:t,fromToken:a}=e,[i,r]=(0,s.useState)(!1),[d,p]=(0,s.useState)();(0,s.useEffect)(()=>{n&&t&&a?h(n,t).then(e=>{let{hasFrom:n,hasTo:t}=e;(null==n?void 0:n.length)&&(null==t?void 0:t.length)?w(n[0],a).then(e=>{r(e),p(n[0])}):(r(!1),p(null))}):(r(!1),p(null))},[n,t,a]);let y=async(e,n)=>{fetch("".concat(b,"/").concat(e.chain_name,"/").concat(e.chain_id,"/").concat(n,"/sendGasStatus")).then(e=>e.json())};return{isSupported:i,supportedChainFrom:d,getStatus:y}}function x(e){let{fromChain:n,toChain:t,fromToken:a,value:u}=e,[l,c]=(0,s.useState)("0"),[b,f]=(0,s.useState)(!1),{fail:w,success:_}=(0,y.Z)();async function x(e,s,r,d){if(!b){f(!0);try{let p;if(null==a?void 0:a.isNative){let e=await k(s,r,d);p=e.transactionHash}else{let n=await I(e,s,r,d);p=n.transactionHash}if(!p){w({title:"Transaction failed"}),f(!1);return}return await m({hash:p,status:3,fromChainName:null==n?void 0:n.chainName,fromChainId:null==n?void 0:n.chainId,fromChainIcon:null==n?void 0:n.icon,fromAddress:s,toChainName:null==t?void 0:t.chainName,toChainId:null==t?void 0:t.chainId,toChainIcon:null==t?void 0:t.icon,toAddress:s,fromTokenSymbol:null==a?void 0:a.symbol,fromTokenIcon:null==a?void 0:a.icon,amount:new i.Z(r).mul(10**a.decimals).toString(),time:Date.now()}),_({title:"Transaction success",text:""}),f(!1),p}catch(e){w({title:"Transaction failed",text:(0,p.Id)(e)}),f(!1)}}}async function k(e,n,a){let s=new r.CH(T,o,a),i=await s.depositEth(null==t?void 0:t.chainId,e,!0,{value:n});return i.wait()}async function I(e,n,a,s){let p=parseInt(a).toString();await (0,d.approve)(e,new i.Z(p),T,s);let y=new r.CH(T,o,s),u=await y.depositToken(e,p,n,null==t?void 0:t.chainId,!0);return u.wait()}return(0,s.useEffect)(()=>{if(!n||!t||!a){c("0");return}h(n,t).then(e=>{let{hasFrom:n,hasTo:s}=e,r=n[0],d=s[0],p=new i.Z(u).mul(10**a.decimals);v(r,d,a,p).then(e=>{c(new i.Z(e).div(10**t.nativeCurrency.decimals).toString())})})},[n,t,a,u]),{receive:l,isLoading:b,deposit:x}}function k(){let[e,n]=(0,s.useState)([]);async function t(){c().then(e=>{e&&Array.isArray(e)&&e.forEach(async e=>{if(3===e.status){let n=await a({chainId:e.fromChainId},e.hash);n&&(e.status=2,m(e))}}),n(e||[])})}(0,s.useEffect)(()=>{t();let e=setInterval(()=>{t()},3e4);return()=>{clearInterval(e)}},[]);let a=async(e,n)=>{let{hasFrom:t}=await h(e,null);if(t&&t.length){let e=await fetch("".concat(b,"/").concat(t[0].chain_name,"/").concat(t[0].chain_id,"/").concat(n,"/sendGasStatus")).then(e=>e.json());if(2e4===e.returnCode&&"processing"!==e.data.status)return!0}return!1};return{transactionList:e,refreshTransaction:t}}}}]);