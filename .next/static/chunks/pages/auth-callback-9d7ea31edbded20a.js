(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8474],{72023:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,process=__webpack_require__(34155);!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,r){return function(n){return new Sha256(r,!0).update(n)[t]()}},createMethod=function(t){var r=createOutputMethod("hex",t);NODE_JS&&(r=nodeWrap(r,t)),r.create=function(){return new Sha256(t)},r.update=function(t){return r.create().update(t)};for(var n=0;n<OUTPUT_TYPES.length;++n){var s=OUTPUT_TYPES[n];r[s]=createOutputMethod(s,t)}return r},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if("string"==typeof t)return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(null==t)throw Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,r){return function(n,s){return new HmacSha256(n,r,!0).update(s)[t]()}},createHmacMethod=function(t){var r=createHmacOutputMethod("hex",t);r.create=function(r){return new HmacSha256(r,t)},r.update=function(t,n){return r.create(t).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var s=OUTPUT_TYPES[n];r[s]=createHmacOutputMethod(s,t)}return r};function Sha256(t,r){r?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function HmacSha256(t,r,n){var s,o=typeof t;if("string"===o){var u,l=[],p=t.length,y=0;for(s=0;s<p;++s)(u=t.charCodeAt(s))<128?l[y++]=u:(u<2048?l[y++]=192|u>>6:(u<55296||u>=57344?l[y++]=224|u>>12:(u=65536+((1023&u)<<10|1023&t.charCodeAt(++s)),l[y++]=240|u>>18,l[y++]=128|u>>12&63),l[y++]=128|u>>6&63),l[y++]=128|63&u);t=l}else if("object"===o){if(null===t)throw Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw Error(ERROR)}else throw Error(ERROR);t.length>64&&(t=new Sha256(r,!0).update(t).array());var w=[],m=[];for(s=0;s<64;++s){var v=t[s]||0;w[s]=92^v,m[s]=54^v}Sha256.call(this,r,n),this.update(m),this.oKeyPad=w,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(t){if(!this.finalized){var r,n=typeof t;if("string"!==n){if("object"===n){if(null===t)throw Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw Error(ERROR)}else throw Error(ERROR);r=!0}for(var s,o,u=0,l=t.length,p=this.blocks;u<l;){if(this.hashed&&(this.hashed=!1,p[0]=this.block,p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0),r)for(o=this.start;u<l&&o<64;++u)p[o>>2]|=t[u]<<SHIFT[3&o++];else for(o=this.start;u<l&&o<64;++u)(s=t.charCodeAt(u))<128?p[o>>2]|=s<<SHIFT[3&o++]:(s<2048?p[o>>2]|=(192|s>>6)<<SHIFT[3&o++]:(s<55296||s>=57344?p[o>>2]|=(224|s>>12)<<SHIFT[3&o++]:(s=65536+((1023&s)<<10|1023&t.charCodeAt(++u)),p[o>>2]|=(240|s>>18)<<SHIFT[3&o++],p[o>>2]|=(128|s>>12&63)<<SHIFT[3&o++]),p[o>>2]|=(128|s>>6&63)<<SHIFT[3&o++]),p[o>>2]|=(128|63&s)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=p[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,r=this.lastByteIndex;t[16]=this.block,t[r>>2]|=EXTRA[3&r],this.block=t[16],r>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t,r,n,s,o,u,l,p,y,w,m,v=this.h0,_=this.h1,A=this.h2,S=this.h3,I=this.h4,k=this.h5,U=this.h6,B=this.h7,E=this.blocks;for(t=16;t<64;++t)r=((o=E[t-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,n=((o=E[t-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,E[t]=E[t-16]+r+E[t-7]+n<<0;for(t=0,m=_&A;t<64;t+=4)this.first?(this.is224?(p=300032,B=(o=E[0]-1413257819)-150054599<<0,S=o+24177077<<0):(p=704751109,B=(o=E[0]-210244248)-1521486534<<0,S=o+143694565<<0),this.first=!1):(r=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),n=(I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7),s=(p=v&_)^v&A^m,o=B+n+(l=I&k^~I&U)+K[t]+E[t],u=r+s,B=S+o<<0,S=o+u<<0),r=(S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10),n=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),s=(y=S&v)^S&_^p,o=U+n+(l=B&I^~B&k)+K[t+1]+E[t+1],u=r+s,U=A+o<<0,r=((A=o+u<<0)>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10),n=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),s=(w=A&S)^A&v^y,o=k+n+(l=U&B^~U&I)+K[t+2]+E[t+2],u=r+s,k=_+o<<0,r=((_=o+u<<0)>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10),n=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7),s=(m=_&A)^_&S^w,o=I+n+(l=k&U^~k&B)+K[t+3]+E[t+3],u=r+s,I=v+o<<0,v=o+u<<0;this.h0=this.h0+v<<0,this.h1=this.h1+_<<0,this.h2=this.h2+A<<0,this.h3=this.h3+S<<0,this.h4=this.h4+I<<0,this.h5=this.h5+k<<0,this.h6=this.h6+U<<0,this.h7=this.h7+B<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,r=this.h1,n=this.h2,s=this.h3,o=this.h4,u=this.h5,l=this.h6,p=this.h7,y=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[u>>28&15]+HEX_CHARS[u>>24&15]+HEX_CHARS[u>>20&15]+HEX_CHARS[u>>16&15]+HEX_CHARS[u>>12&15]+HEX_CHARS[u>>8&15]+HEX_CHARS[u>>4&15]+HEX_CHARS[15&u]+HEX_CHARS[l>>28&15]+HEX_CHARS[l>>24&15]+HEX_CHARS[l>>20&15]+HEX_CHARS[l>>16&15]+HEX_CHARS[l>>12&15]+HEX_CHARS[l>>8&15]+HEX_CHARS[l>>4&15]+HEX_CHARS[15&l];return this.is224||(y+=HEX_CHARS[p>>28&15]+HEX_CHARS[p>>24&15]+HEX_CHARS[p>>20&15]+HEX_CHARS[p>>16&15]+HEX_CHARS[p>>12&15]+HEX_CHARS[p>>8&15]+HEX_CHARS[p>>4&15]+HEX_CHARS[15&p]),y},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,r=this.h1,n=this.h2,s=this.h3,o=this.h4,u=this.h5,l=this.h6,p=this.h7,y=[t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o,u>>24&255,u>>16&255,u>>8&255,255&u,l>>24&255,l>>16&255,l>>8&255,255&l];return this.is224||y.push(p>>24&255,p>>16&255,p>>8&255,255&p),y},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),r=new DataView(t);return r.setUint32(0,this.h0),r.setUint32(4,this.h1),r.setUint32(8,this.h2),r.setUint32(12,this.h3),r.setUint32(16,this.h4),r.setUint32(20,this.h5),r.setUint32(24,this.h6),this.is224||r.setUint32(28,this.h7),t},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return exports}).call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()},91543:function(t,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth-callback",function(){return n(80717)}])},1552:function(t,r,n){"use strict";n.d(r,{I:function(){return u}});var s=n(11163),o=n(67294);function u(){let t=(0,s.useRouter)(),r=(0,o.useCallback)(function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!window)return;let n=localStorage.getItem("signInRedirectUrl")||"/";localStorage.removeItem("signInRedirectUrl"),r?window.location.href=n:t.replace(n)},[t]),n=(0,o.useCallback)(()=>{window&&(["/","/signin","/signup","/verify-email","/auth-callback"].includes(t.pathname)||localStorage.setItem("signInRedirectUrl",t.asPath))},[t]),u=(0,o.useCallback)(function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(),t.push(r?"/signup":"/signin")},[t,n]);return{redirect:r,requestAuthentication:u,saveCurrentUrl:n}}},80717:function(t,r,n){"use strict";n.r(r);var s=n(82729),o=n(85893),u=n(91259),l=n(68447),p=n(11163),y=n(67294),w=n(68458),m=n(51991),v=n(1552),_=n(99376),A=n(65752),S=n(6386);function I(){let t=(0,s._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 80vh;\n  width: 100%;\n"]);return I=function(){return t},t}let k=()=>{let t=(0,p.useRouter)(),[r,n]=(0,y.useState)("Loading..."),{redirect:s}=(0,v.I)(),w=(0,_.Z)(),m=(0,y.useRef)(null);return(0,y.useEffect)(()=>{if(m.current)return;let r=window.location.href;if((0,u.JB)(S.l,r)){let o=new URL(r),p=new URLSearchParams(o.search),y=p.get("accountId"),v=p.get("publicKey"),_="true"===p.get("isRecovery"),I=window.localStorage.getItem("emailForSignIn");for(;!I;)I=window.prompt("Please provide your email for confirmation");n("Verifying email..."),m.current=(0,u.P6)(S.l,I,window.location.href).then(async t=>{window.localStorage.removeItem("emailForSignIn");let r=l.KeyPair.fromRandom("ED25519"),o=t.user;if(o.emailVerified){n(_?"Recovering account...":"Creating account...");let t={...y&&y.includes(".")?{near_account_id:y}:{},create_account_options:{full_access_keys:[v],limited_access_keys:[{public_key:r.getPublicKey().toString(),receiver_id:A.mB,allowance:"250000000000000",method_names:""}]},oidc_token:o.accessToken},u=new Headers;u.append("Content-Type","application/json");let l={method:"POST",mode:"cors",body:JSON.stringify(t),headers:u};await fetch("".concat(A.L5.fastAuth.mpcRecoveryUrl,"/").concat(_?"add_key":"new_account"),l).then(async t=>{if(!t.ok)throw console.log(t),Error("Network response was not ok");n(_?"Account recovered successfully!":"Account created successfully!");let o=JSON.parse(window.localStorage.getItem("fast-auth:account-creation-data")||JSON.stringify({})),u=await t.json(),l=o.accountId||u.near_account_id;if(!l)throw"Could not find account creation data";window.localStorage.setItem("fast-auth:account-creation-data",JSON.stringify({...o,limitedAccessKey:r.toString(),accountId:l,isCreated:!0})),n("Redirecting to app..."),s(!0)})}}).catch(r=>{console.log(r);let n={"auth/expired-action-code":"Link expired, please try again.","auth/invalid-action-code":"Link expired, please try again.","auth/invalid-email":"Invalid email address.","auth/user-disabled":"User disabled","auth/missing-email":"No email found, please try again."},s=n[r.code]||r.message;t.push("/signup"),w.fail({title:s})})}else t.push("/signup")},[]),(0,o.jsx)(U,{children:r})};k.getLayout=m.wQ,r.default=k;let U=w.ZP.div.withConfig({componentId:"sc-f4f4451e-0"})(I())},65752:function(t,r,n){"use strict";n.d(r,{$9:function(){return u},L5:function(){return l},QW:function(){return o},mB:function(){return p}});var s=n(34155);let o={mainnet:{networkId:"mainnet",viewAccountId:"near",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",fastAuth:{mpcRecoveryUrl:"https://mpc-recovery-leader-mainnet-cg7nolnlpa-ue.a.run.app",authHelperUrl:"https://api.kitwallet.app",accountIdSuffix:"near",firebase:{apiKey:"AIzaSyDhxTQVeoWdnbpYTocBAABbLULGf6H5khQ",authDomain:"near-fastauth-prod.firebaseapp.com",projectId:"near-fastauth-prod",storageBucket:"near-fastauth-prod.appspot.com",messagingSenderId:"829449955812",appId:"1:829449955812:web:532436aa35572be60abff1",measurementId:"G-T2PPJ8QRYY"}}},testnet:{networkId:"testnet",viewAccountId:"testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",fastAuth:{mpcRecoveryUrl:"https://mpc-recovery-7tk2cmmtcq-ue.a.run.app",authHelperUrl:"https://testnet-api.kitwallet.app",accountIdSuffix:"testnet",firebase:{apiKey:"AIzaSyDAh6lSSkEbpRekkGYdDM5jazV6IQnIZFU",authDomain:"pagoda-oboarding-dev.firebaseapp.com",projectId:"pagoda-oboarding-dev",storageBucket:"pagoda-oboarding-dev.appspot.com",messagingSenderId:"116526963563",appId:"1:116526963563:web:053cb0c425bf514007ca2e",measurementId:"G-HF2NBGE60S"}}}},u=s.env.NEXT_PUBLIC_NETWORK_ID||"mainnet",l=o[u],p="testnet"===u?"v1.social08.testnet":"social.near"},6386:function(t,r,n){"use strict";n.d(r,{l:function(){return p}});var s=n(83977),o=n(91259),u=n(65752);let l=(0,s.ZF)(u.L5.fastAuth.firebase),p=(0,o.v0)(l)},55024:function(){}},function(t){var r=function(r){return t(t.s=r)};t.O(0,[4473,3096,533,4722,1693,1072,5317,5732,8264,2601,8447,5524,1991,9774,2888,179],function(){return r(91543)}),_N_E=t.O()}]);