(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7616],{47805:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return r(14873)}])},13841:function(n,e,r){"use strict";r.d(e,{z:function(){return m}});var a=r(82729),t=r(85893),o=r(67294),i=r(68458);function l(){let n=(0,a._)(["\n  all: unset;\n  box-sizing: border-box;\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  width: ",";\n  height: ",";\n  padding: ",";\n  font: ",";\n  font-weight: 600;\n  line-height: 1;\n  border-radius: 100px;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: 0 0 0 0px var(--violet4);\n  cursor: pointer;\n  transition: all 200ms;\n  text-decoration: none !important;\n\n  &:hover {\n    background: ",";\n    color: ",";\n    border: 1px solid ",";\n  }\n  &:focus {\n    background: ",";\n    color: ",";\n    border: 1px solid ",";\n    box-shadow: 0 0 0 4px var(--violet4);\n  }\n  &:active {\n    background: ",";\n    color: ",";\n    border: 1px solid ",";\n  }\n\n  ","\n\n  ","\n"]);return l=function(){return n},n}function c(){let n=(0,a._)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: ",";\n\n  i {\n    font-size: ",";\n    line-height: ",";\n    color: ",";\n  }\n\n  ","\n"]);return c=function(){return n},n}function s(){let n=(0,a._)([""]);return s=function(){return n},n}function d(){let n=(0,a._)(["\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  margin: calc("," * -0.5) auto 0;\n  width: ",";\n  height: ",";\n  font-size: ",";\n  line-height: ",";\n  animation: spin 800ms infinite linear;\n\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return d=function(){return n},n}let u={primary:{outline:{background:"var(--sand1)",border:"var(--sand6)",color:"var(--violet8)",iconColor:"var(--violet9)",hover:{border:"var(--violet6)"},focus:{border:"var(--violet9)"},active:{background:"var(--violet2)",border:"var(--violet7)"}},solid:{background:"var(--sand12)",border:"var(--sand12)",color:"var(--sand1)",iconColor:"var(--sand9)",hover:{background:"var(--sand11)",border:"var(--sand11)"},focus:{},active:{}}},secondary:{outline:{background:"var(--sand1)",border:"var(--sand6)",color:"var(--sand12)",iconColor:"var(--sand10)",hover:{border:"var(--sand8)"},focus:{border:"var(--violet8)"},active:{background:"var(--sand3)",border:"var(--sand8)"}},solid:{background:"var(--sand3)",border:"var(--sand6)",color:"var(--sand12)",iconColor:"var(--sand11)",hover:{background:"var(--sand4)"},focus:{border:"var(--violet8)"},active:{background:"var(--sand5)"}}},destructive:{outline:{background:"var(--sand1)",border:"var(--sand6)",color:"var(--red8)",iconColor:"var(--red9)",hover:{border:"var(--red6)"},focus:{border:"var(--violet8)"},active:{background:"var(--red2)",border:"var(--red7)"}},solid:{background:"var(--red9)",border:"var(--red8)",color:"var(--red12)",iconColor:"var(--red11)",hover:{background:"var(--red10)"},focus:{border:"var(--red11)"},active:{background:"var(--red8)"}}},affirmative:{outline:{background:"var(--sand1)",border:"var(--sand6)",color:"var(--green11)",iconColor:"var(--green10)",hover:{border:"var(--green9)"},focus:{border:"var(--violet8)"},active:{background:"var(--green2)",border:"var(--green8)"}},solid:{background:"var(--green9)",border:"var(--green8)",color:"var(--green12)",iconColor:"var(--green11)",hover:{background:"var(--green10)"},focus:{border:"var(--green11)"},active:{background:"var(--green8)"}}}};u.primary.ghost={...u.primary.outline,border:"hsla(0, 0%, 100%, 0)",background:"hsla(0, 0%, 100%, 0)"},u.secondary.ghost={...u.secondary.outline,border:"hsla(0, 0%, 100%, 0)",background:"hsla(0, 0%, 100%, 0)"},u.destructive.ghost={...u.destructive.outline,border:"hsla(0, 0%, 100%, 0)",background:"hsla(0, 0%, 100%, 0)"},u.affirmative.ghost={...u.affirmative.outline,border:"hsla(0, 0%, 100%, 0)",background:"hsla(0, 0%, 100%, 0)"};let v={small:{font:"var(--text-xs)",gap:"6px",height:"32px",icon:"14px",paddingX:"16px"},default:{font:"var(--text-s)",gap:"8px",height:"40px",icon:"18px",paddingX:"20px"},large:{font:"var(--text-base)",gap:"8px",height:"48px",icon:"18px",paddingX:"24px"}};function f(n,e,r,a){return"default"===r?u[n][e][a]:u[n][e][r][a]||u[n][e][a]}let p=i.ZP.button.withConfig({componentId:"sc-b122c373-0"})(l(),n=>n.icon?v[n.size].height:void 0,n=>v[n.size].height,n=>n.icon?"0":"0 ".concat(v[n.size].paddingX),n=>v[n.size].font,n=>f(n.variant,n.fill,"default","background"),n=>f(n.variant,n.fill,"default","color"),n=>f(n.variant,n.fill,"default","border"),n=>f(n.variant,n.fill,"hover","background"),n=>f(n.variant,n.fill,"hover","color"),n=>f(n.variant,n.fill,"hover","border"),n=>f(n.variant,n.fill,"focus","background"),n=>f(n.variant,n.fill,"focus","color"),n=>f(n.variant,n.fill,"focus","border"),n=>f(n.variant,n.fill,"active","background"),n=>f(n.variant,n.fill,"active","color"),n=>f(n.variant,n.fill,"active","border"),n=>n.loading&&"\n        pointer-events: none;\n      ",n=>n.disabled&&"\n        opacity: 1;\n        background: ".concat("ghost"===n.fill?"hsla(0, 0%, 100%, 0)":"var(--sand3)",";\n        border-color: var(--sand3);\n        color: var(--sand8);\n        pointer-events: none;\n    \n        i {\n          color: var(--sand8) !important;\n        }\n      ")),h=i.ZP.span.withConfig({componentId:"sc-b122c373-1"})(c(),n=>v[n.size].gap,n=>v[n.size].icon,n=>v[n.size].icon,n=>n.icon?void 0:f(n.variant,n.fill,"default","iconColor"),n=>n.loading&&"\n        opacity: 0;\n      "),g=i.ZP.span.withConfig({componentId:"sc-b122c373-2"})(s()),b=i.ZP.i.withConfig({componentId:"sc-b122c373-3"})(d(),n=>v[n.size].icon,n=>v[n.size].icon,n=>v[n.size].icon,n=>v[n.size].icon,n=>v[n.size].icon),m=(0,o.forwardRef)((n,e)=>{let{disabled:r,fill:a="solid",href:o,icon:i,iconLeft:l,iconRight:c,label:s,loading:d,size:u="default",type:v="button",variant:f="primary",...m}=n,x=o?{as:"a",href:o}:{type:v,disabled:r||d};i&&(x["aria-label"]=s);let y={disabled:r,fill:a,icon:i,loading:d,size:u,variant:f};return(0,t.jsx)(p,{ref:e,...y,...x,...m,children:(0,t.jsxs)(t.Fragment,{children:[d&&(0,t.jsx)(b,{...y,className:"ph-bold ph-circle-notch"}),(0,t.jsx)(h,{...y,children:i?(0,t.jsx)("i",{className:i}):(0,t.jsxs)(t.Fragment,{children:[l&&(0,t.jsx)("i",{className:l}),(0,t.jsx)(g,{children:s}),c&&(0,t.jsx)("i",{className:c})]})})]})})});m.displayName="Button"},14873:function(n,e,r){"use strict";r.r(e);var a=r(82729),t=r(85893),o=r(85790),i=r(41664),l=r.n(i),c=r(11163),s=r(67294),d=r(87536),u=r(68458),v=r(13841),f=r(51991),p=r(99376),h=r(86938),g=r(4179),b=r(65752),m=r(37102),x=r(69234);function y(){let n=(0,a._)(["\n  color: hsla(8, 100%, 33%, 1);\n"]);return y=function(){return n},n}function w(){let n=(0,a._)(["\n  width: 100%;\n  height: calc(100vh - 66px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f2f1ea;\n  padding: 0 16px;\n"]);return w=function(){return n},n}function k(){let n=(0,a._)(["\n  max-width: 450px;\n  width: 100%;\n  margin: 16px auto;\n  background-color: #ffffff;\n  padding: 16px;\n  border-radius: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n"]);return k=function(){return n},n}function I(){let n=(0,a._)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n\n  label {\n    font-size: 12px;\n    font-weight: 500;\n  }\n\n  input {\n    padding: 8px 12px;\n    border: 1px solid #e5e5e5;\n    border-radius: 10px;\n    font-size: 14px;\n    margin-top: 4px;\n    min-height: 50px;\n    cursor: text;\n\n    &:focus {\n      outline: none;\n      border: 1px solid #e5e5e5;\n    }\n  }\n\n  .subText {\n    font-size: 0.75rem;\n    padding: 8px 0;\n\n    .error {\n      color: hsla(8, 100%, 33%, 1);\n    }\n\n    .success {\n      color: hsla(155, 66%, 32%, 1);\n    }\n  }\n"]);return I=function(){return n},n}let j=u.ZP.p.withConfig({componentId:"sc-2ae3b570-0"})(y()),C=()=>{var n,e,r,a,i;let u;let f=(0,c.useRouter)(),y=(0,p.Z)(),w=(0,g.q)(n=>n.setSrc),[k,I]=(0,s.useState)(null),[C,N]=(0,s.useState)(null),{register:U,handleSubmit:A,watch:P,setValue:E,formState:{errors:R,touchedFields:T},clearErrors:L}=(0,d.cI)(),Z=P(),D=(0,h.t)(n=>n.signedIn);(0,s.useEffect)(()=>{let n=async()=>{let n=await (0,o.isPassKeyAvailable)();n||y.info({title:"",text:"Passkey support is required for account creation. Try using an updated version of Chrome or Safari to create an account."})};n()},[]),(0,s.useEffect)(()=>{D&&f.push("/")},[f,D]),(0,s.useEffect)(()=>{w(null)},[w]);let q=(0,s.useCallback)(async n=>{I(null);try{var e,r,a;if(!n)return;let t=await fetch(b.L5.nodeUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"dontcare",method:"query",params:{request_type:"view_account",finality:"final",account_id:"".concat(n,".").concat(b.L5.fastAuth.accountIdSuffix)}})}),o=await t.json();if((null==o?void 0:null===(r=o.error)||void 0===r?void 0:null===(e=r.cause)||void 0===e?void 0:e.name)=="UNKNOWN_ACCOUNT")return I(!0);if(null==o?void 0:null===(a=o.result)||void 0===a?void 0:a.code_hash)return I(!1)}catch(n){console.log(n),I(!1)}},[]),K=A(async n=>{if((null==n?void 0:n.username)&&n.email)try{let e="".concat(n.username,".").concat(b.L5.fastAuth.accountIdSuffix),{publicKey:r,accountId:a,email:t}=await (0,m.Q)(e,n.email,!1);f.push("/verify-email?publicKey=".concat(encodeURIComponent(r),"&accountId=").concat(encodeURIComponent(a),"&email=").concat(encodeURIComponent(t)))}catch(n){y.fail({title:n.message})}});(0,s.useEffect)(()=>{var n;if(L("username"),!(null==Z?void 0:null===(n=Z.username)||void 0===n?void 0:n.length)){N(null),I(null);return}let e=x.b1.test(null==Z?void 0:Z.username);N(e),e&&q(null==Z?void 0:Z.username)},[q,L,null==Z?void 0:Z.username]);let B="";return(null==Z?void 0:null===(n=Z.username)||void 0===n?void 0:n.length)?C?null===k?B="Checking availability...":k?(B="".concat(null==Z?void 0:Z.username,".").concat(b.L5.fastAuth.accountIdSuffix," is available!"),u="success"):(B="".concat(null==Z?void 0:Z.username,".").concat(b.L5.fastAuth.accountIdSuffix," is taken, try something else."),u="error"):(B="Accounts must be lowercase and may contain - or _, but they may not begin or end with a special character or have two consecutive special characters.",u="error"):B="Use a suggested ID or customize your own.",(0,t.jsx)(_,{children:(0,t.jsxs)(S,{onSubmit:K,children:[(0,t.jsxs)("header",{children:[(0,t.jsx)("h1",{children:"Create account"}),(0,t.jsx)("p",{className:"desc",children:"Use this account to sign in everywhere on NEAR, no password required."})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{...U("email",{required:"Please enter a valid email address",pattern:{value:x.s9,message:"Please enter a valid email address"}}),onChange:n=>{L("email"),E("email",n.target.value),!(0,x.vV)(n.target.value)||(null==Z?void 0:Z.username)&&(null==T?void 0:T.username)||E("username",(0,x.ie)(n.target.value))},placeholder:"user_name@email.com",type:"email",required:!0}),"string"==typeof(null===(e=R.email)||void 0===e?void 0:e.message)&&(0,t.jsx)(j,{role:"alert",children:null===(r=R.email)||void 0===r?void 0:r.message})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)("label",{htmlFor:"username",children:"Account ID"}),(0,t.jsx)("input",{autoComplete:"webauthn username",...U("username",{required:"Please enter a valid account ID",pattern:{value:x.b1,message:"Please enter a valid account ID"},validate:()=>{if(!k)return"Please enter a valid account ID"}}),placeholder:"user_name.near"}),(0,t.jsx)("p",{className:"subText",children:(0,t.jsx)("span",{className:u||"",children:B})}),"string"==typeof(null===(a=R.username)||void 0===a?void 0:a.message)&&(0,t.jsx)(j,{role:"alert",children:null===(i=R.username)||void 0===i?void 0:i.message})]}),(0,t.jsx)(v.z,{label:"Continue",variant:"affirmative",type:"submit"}),(0,t.jsx)("hr",{style:{borderColor:"hsl(55, 1.7%, 51.9%)"}}),(0,t.jsxs)("p",{children:["Already have an account?"," ",(0,t.jsx)(l(),{href:"/signin",style:{color:"hsla(246, 57%, 61%, 1)",fontWeight:500},children:"Sign In"})]})]})})};C.getLayout=f.wQ,e.default=C;let _=u.ZP.div.withConfig({componentId:"sc-2ae3b570-1"})(w()),S=u.ZP.form.withConfig({componentId:"sc-2ae3b570-2"})(k()),z=u.ZP.div.withConfig({componentId:"sc-2ae3b570-3"})(I())},4179:function(n,e,r){"use strict";r.d(e,{q:function(){return t}});var a=r(64529);let t=(0,a.Ue)(n=>({src:null,setSrc:e=>n(()=>({src:e}))}))},37102:function(n,e,r){"use strict";r.d(e,{Q:function(){return i}});var a=r(85790),t=r(91259);r(39803);var o=r(6386);let i=async(n,e,r)=>{let i=await (0,a.createKey)(e),l=i.getPublicKey().toString();if(!l)throw Error("No public key found");return window.localStorage.setItem("fast-auth:account-creation-data",JSON.stringify({accountId:n,isCreated:!1})),await (0,t.oo)(o.l,e,{url:encodeURI("".concat(window.location.origin,"/auth-callback?publicKey=").concat(l,"&accountId=").concat(n)+(r?"&isRecovery=true":"")),handleCodeInApp:!0}),window.localStorage.setItem("emailForSignIn",e),{email:e,publicKey:l,accountId:n}}},65752:function(n,e,r){"use strict";r.d(e,{$9:function(){return o},L5:function(){return i},QW:function(){return t},mB:function(){return l}});var a=r(34155);let t={mainnet:{networkId:"mainnet",viewAccountId:"near",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org",fastAuth:{mpcRecoveryUrl:"https://mpc-recovery-leader-mainnet-cg7nolnlpa-ue.a.run.app",authHelperUrl:"https://api.kitwallet.app",accountIdSuffix:"near",firebase:{apiKey:"AIzaSyDhxTQVeoWdnbpYTocBAABbLULGf6H5khQ",authDomain:"near-fastauth-prod.firebaseapp.com",projectId:"near-fastauth-prod",storageBucket:"near-fastauth-prod.appspot.com",messagingSenderId:"829449955812",appId:"1:829449955812:web:532436aa35572be60abff1",measurementId:"G-T2PPJ8QRYY"}}},testnet:{networkId:"testnet",viewAccountId:"testnet",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",fastAuth:{mpcRecoveryUrl:"https://mpc-recovery-7tk2cmmtcq-ue.a.run.app",authHelperUrl:"https://testnet-api.kitwallet.app",accountIdSuffix:"testnet",firebase:{apiKey:"AIzaSyDAh6lSSkEbpRekkGYdDM5jazV6IQnIZFU",authDomain:"pagoda-oboarding-dev.firebaseapp.com",projectId:"pagoda-oboarding-dev",storageBucket:"pagoda-oboarding-dev.appspot.com",messagingSenderId:"116526963563",appId:"1:116526963563:web:053cb0c425bf514007ca2e",measurementId:"G-HF2NBGE60S"}}}},o=a.env.NEXT_PUBLIC_NETWORK_ID||"mainnet",i=t[o],l="testnet"===o?"v1.social08.testnet":"social.near"},6386:function(n,e,r){"use strict";r.d(e,{l:function(){return l}});var a=r(83977),t=r(91259),o=r(65752);let i=(0,a.ZF)(o.L5.fastAuth.firebase),l=(0,t.v0)(i)},69234:function(n,e,r){"use strict";r.d(e,{b1:function(){return o},ie:function(){return a},s9:function(){return t},vV:function(){return i}});let a=n=>n.split("@")[0].toLowerCase().replace(/[^a-zA-Z0-9_\-]/g,"-"),t=/\S+@\S+\.\S+/,o=/^([a-z\d]+[-_])*[a-z\d]+$/,i=n=>t.test(n)},89214:function(){},85568:function(){},55024:function(){}},function(n){n.O(0,[4473,3714,3096,5204,533,4722,1693,1072,5317,5732,292,8264,7536,4455,5524,1991,9774,2888,179],function(){return n(n.s=47805)}),_N_E=n.O()}]);