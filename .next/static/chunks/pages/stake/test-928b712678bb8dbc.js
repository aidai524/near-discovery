(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5522],{8850:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake/test",function(){return e(32470)}])},32470:function(n,t,e){"use strict";e.r(t),e.d(t,{Page:function(){return Y},default:function(){return $}});var i=e(85893),a=e(67294),o=e(51991),r=e(82729),s=e(68458),c=e(6992),u=e(63043),l=e(80132),d=e(17479),h=e(32704),f=e(8433),g=e(63658),p=e(67618);async function m(n){let t=await fetch("https://api.allorigins.win/get?url=https://stake.lido.fi/api/sma-steth-apr",{}).then(n=>n.json());return(null==t?void 0:t.contents)?Number(t.contents.replaceAll('"',"")):0}var b=e(64146),x=e(13012),w=e(99376);let v=/([^(]+)\(/,y=[{constant:!1,inputs:[{name:"_referral",type:"address"}],name:"submit",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"}];async function E(n,t){try{var e;let i=await C(n,t),a=await t.getGasPrice(),o=await t.estimateGas({...i,value:null==i?void 0:null===(e=i.value)||void 0===e?void 0:e.toString(),gasPrice:a.toString()});return{gasEstimate:o,gasPrice:a}}catch(n){console.log(n)}return null}async function C(n,t){let e=new b.CH("0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",y,t),i=await e.populateTransaction.submit("0x0000000000000000000000000000000000000000",{value:n});return i}var S=e(45270),Z=e(37346),k=e(61890),I=e(620),j=e(93862),N=e(93200);function _(){let n=(0,r._)(["\n   \n"]);return _=function(){return n},n}function L(){let n=(0,r._)(["\n    padding: 10px 20px 20px;\n"]);return L=function(){return n},n}function T(){let n=(0,r._)(["\n    margin: 0 auto;\n    display: block;\n    height: 48px;\n    width: calc(100% - 40px);\n    line-height: 48px;\n    text-align: center;\n    border-radius: 8px;\n    color: #000;\n    background: linear-gradient(180deg, #EEF3BF 0%, #E9F456 100%);\n"]);return T=function(){return n},n}let P=s.ZP.div.withConfig({componentId:"sc-a266917-0"})(_()),H=s.ZP.div.withConfig({componentId:"sc-a266917-1"})(L()),z=s.ZP.button.withConfig({componentId:"sc-a266917-2"})(T()),A={chainId:1,name:"stETH",symbol:"stETH",icon:"https://etherscan.io/token/images/bnwstETH.png",decimals:18,isNative:!1,address:"0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84"};var F=()=>{let{chainId:n,account:t,provider:e}=(0,f.Z)(),{onConnect:o}=(0,d.Z)(),[{settingChain:r},s]=(0,l.Um)(),[c,b]=(0,a.useState)(""),{addAction:y}=(0,h.Z)("dapp"),[_,L]=(0,a.useState)(N.p[0]),[T,F]=(0,a.useState)(N.T[N.p[0].chainId][0]),[B,D]=(0,a.useState)(!1),[M,O]=(0,a.useState)(!1),[R,G]=(0,a.useState)("Confirm"),[X,Q]=(0,a.useState)(1),U=(0,Z.O)(n=>n.price),W=(0,u.Z)(c,{wait:500}),{balance:q,loading:J}=(0,p.Z)({currency:T,updater:X,isNative:T.isNative,isPure:!1}),{balance:K,loading:V}=(0,p.Z)({currency:A,updater:X,isNative:!1,isPure:!1}),{apr:Y}=function(n){let[t,e]=(0,a.useState)(0);return(0,a.useEffect)(()=>{(null==n?void 0:n.chainId)?m(n.chainId).then(e):e(0)},[n]),{apr:t}}(_),{rate:$,recived:nn,exchangeRate:nt,transactionCost:ne,deposit:ni,isLoading:na}=function(n){let{amount:t,provider:e,account:i,isError:o,chainId:r}=n,{fail:s,success:c}=(0,w.Z)(),[u,l]=(0,a.useState)(0),[d,h]=(0,a.useState)(""),[f,g]=(0,a.useState)("1"),[p,m]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[S,Z]=(0,a.useState)(19200);async function k(n,t){try{let e=new x.Z(n).mul(1e18).toNumber().toFixed();y(!0);let i=await I(e,t);return c({title:"Transaction successed"}),y(!1),i.transactionHash}catch(n){console.log(n),s({title:n.name?n.name:"Transaction failed",text:function(n){let t=n.match(v);return t&&t.length>1?t[1]:n}(n.message)}),y(!1)}}async function I(n,t){new x.Z(d).mul(1e18).toString().split(".")[0];let e=await C(n,t);console.log("transactionData:",e);let i=await t.sendTransaction({...e});return i.wait()}return(0,a.useEffect)(()=>{t&&!isNaN(Number(t))?h(t.toString()):h("")},[t,u]),(0,a.useEffect)(()=>{if(t&&!isNaN(Number(t))&&!o&&e){let n=new x.Z(t.toString()).mul(1e18).toString();E(n,null==e?void 0:e.getSigner()).then(n=>{n?(Z(n.gasEstimate),m(new x.Z(n.gasEstimate.mul(n.gasPrice).toString()).div(1e18).toString())):m("")})}else m("")},[t,o,d]),{rate:u,recived:d,exchangeRate:f,deposit:k,transactionCost:p,isLoading:b}}({amount:W,provider:e,account:t,isError:M,chainId:Number(null==_?void 0:_.chainId)}),{value:no}=(0,S.Z)({prices:U,amount:W,symbol:T.symbol}),{value:nr}=(0,S.Z)({prices:U,amount:nn,symbol:"wstETH"}),{value:ns}=(0,S.Z)({prices:U,amount:ne,symbol:"ETH"});return(0,a.useEffect)(()=>{if(!n){O(!1),G("Connect Wallet");return}if((null==_?void 0:_.chainId)!==n){D(!0),O(!1),G("Switch to ".concat(_.chainName," Chain"));return}if(D(!1),!W||isNaN(Number(W))){O(!0),G("Enter an amount");return}if(Number(W)>=Number(q)){O(!0),G("Insufficient balance");return}O(!1),G("Confirm")},[W,q,n,_]),(0,i.jsxs)(P,{children:[(0,i.jsx)(k.Z,{ethLoading:J,ethBalance:q,ezETHLoading:V,ezETHbalance:K,apr:Y,currentToken:T,symbol:"stETH"}),(0,i.jsxs)(H,{children:[(0,i.jsx)(j.Z,{recived:c,outputMoney:no,balance:q,chainIcon:_.icon,tokenIcon:null==T?void 0:T.icon,symbol:T.symbol,title:"Restake",balanceLoading:J,tokenAmountChange:b}),(0,i.jsx)(j.Z,{recived:nn,outputMoney:nr,balance:K,chainIcon:_.icon,tokenIcon:A.icon,symbol:"stETH",title:"Receive",balanceLoading:V})]}),(0,i.jsxs)(z,{style:{opacity:M?.2:1},onClick:async()=>{if(!t){o();return}if(B){s({chainId:"0x".concat(_.chainId.toString(16))});return}if(!M&&!na){let n=await ni(W,e.getSigner());n&&y({type:"Staking",fromChainId:_.chainId,toChainId:_.chainId,token:T,amount:c,template:"Lido Stake",add:!1,status:1,action:"Staking",transactionHash:n,action_network_id:_.chainName}),Q(X+1)}},children:[na?(0,i.jsx)(g.Z,{size:18}):null," ",R]}),(0,i.jsx)(I.Z,{exchangeRate:nt,transactionCostMoney:ns,rewardFee:"9.99%",symbol:"stETH"})]})},B=e(79878),D=e(78824);function M(){let n=(0,r._)(["\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 51;\n"]);return M=function(){return n},n}function O(){let n=(0,r._)(["\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n"]);return O=function(){return n},n}function R(){let n=(0,r._)(["\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 420px;\n    min-height: 467px;\n    background-color: rgba(38, 40, 54, 1);\n    border: 1px solid rgba(55, 58, 83, 1);\n    border-radius: 16px;\n"]);return R=function(){return n},n}function G(){let n=(0,r._)(["\n    padding: 20px;\n"]);return G=function(){return n},n}function X(){let n=(0,r._)(["\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    right: 20px;\n    top: 27px;\n    cursor: pointer;\n    color: rgba(151, 154, 190, 1);\n"]);return X=function(){return n},n}let Q=s.ZP.div.withConfig({componentId:"sc-2e93c48a-0"})(M()),U=s.ZP.div.withConfig({componentId:"sc-2e93c48a-1"})(O()),W=s.ZP.div.withConfig({componentId:"sc-2e93c48a-2"})(R()),q=s.ZP.div.withConfig({componentId:"sc-2e93c48a-3"})(G()),J=s.ZP.div.withConfig({componentId:"sc-2e93c48a-4"})(X()),K={renzo:D.Z.src,lido:"/_next/static/media/lido.7d0b1007.svg"};var V=n=>{let{stakeType:t,onClose:e}=n;(0,B._)(n=>n.chains);let{chainId:o,account:r}=(0,f.Z)(),[s,u]=(0,a.useState)(),[l,d]=(0,a.useState)(!1);return(0,i.jsxs)(Q,{children:[(0,i.jsx)(U,{}),(0,i.jsxs)(W,{children:[(0,i.jsx)(J,{onClick:()=>{console.log(222,e),e&&e()},children:(0,i.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M7.73284 6.00004L11.7359 1.99701C12.0368 1.696 12.0882 1.2593 11.8507 1.0219L10.9779 0.14909C10.7404 -0.0884124 10.3043 -0.0363122 10.0028 0.264491L6.00013 4.26743L1.99719 0.264591C1.69619 -0.036712 1.25948 -0.0884125 1.02198 0.14939L0.149174 1.0223C-0.0882277 1.2594 -0.0368271 1.6961 0.264576 1.99711L4.26761 6.00004L0.264576 10.0033C-0.0363271 10.3041 -0.0884277 10.7405 0.149174 10.978L1.02198 11.8509C1.25948 12.0884 1.69619 12.0369 1.99719 11.736L6.00033 7.73276L10.0029 11.7354C10.3044 12.037 10.7405 12.0884 10.978 11.8509L11.8508 10.978C12.0882 10.7405 12.0368 10.3041 11.736 10.0029L7.73284 6.00004Z",fill:"#979ABE"})})}),(0,i.jsx)(q,{children:(0,i.jsx)("img",{src:K[t]})}),"renzo"===t&&(0,i.jsx)(c.Z,{}),"lido"===t&&(0,i.jsx)(F,{})]})]})};let Y=()=>{let[n,t]=(0,a.useState)(!1),[e,o]=(0,a.useState)(!1);return(0,i.jsxs)("div",{style:{padding:50},children:[n&&(0,i.jsx)(V,{stakeType:"renzo",onClose:()=>{t(!1)}}),e&&(0,i.jsx)(V,{stakeType:"lido",onClose:()=>{o(!1)}}),(0,i.jsx)("button",{onClick:()=>t(!0),children:"renzo"}),(0,i.jsx)("button",{onClick:()=>o(!0),style:{marginLeft:20},children:"lido"}),(0,i.jsx)("button",{onClick:()=>window.location.href="./etherFi",style:{marginLeft:20},children:"etherFi"})]})};Y.getLayout=o.wQ;var $=Y}},function(n){n.O(0,[4473,3714,533,4722,1693,1072,5317,4146,4742,5524,1991,5763,8241,9774,2888,179],function(){return n(n.s=8850)}),_N_E=n.O()}]);