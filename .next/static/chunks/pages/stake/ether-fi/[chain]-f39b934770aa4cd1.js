(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3246],{68493:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake/ether-fi/[chain]",function(){return t(31463)}])},1575:function(e,n,t){"use strict";t.d(n,{Z:function(){return G}});var i=t(82729),a=t(85893),o=t(63043),c=t(67294),r=t(68458),s=t(80132),u=t(17479),l=t(8433),d=t(32704),f=t(63658),h=t(67618),p=t(21004);async function m(e){let n=await fetch("https://api.allorigins.win/get?url=https://stake.lido.fi/api/sma-steth-apr",{}).then(e=>e.json());return(null==n?void 0:n.contents)?Number(n.contents.replaceAll('"',"")):0}var g=t(82169),x=t(64146),b=t(13012),w=t(99376);let E=/([^(]+)\(/,y=[{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getConversionAmount",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"view",type:"function"}],v=[{inputs:[{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"minAmountOut",type:"uint256"}],name:"deposit",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"payable",type:"function"}],C={81457:"0xc42853c0C6624F42fcB8219aCeb67Ad188087DCB",59144:"0x241a91F095B2020890Bc8518bea168C195518344",34443:"0xc42853c0C6624F42fcB8219aCeb67Ad188087DCB",8453:"0xF2c5519c634796B73dE90c7Dc27B4fEd560fC3ca"};async function I(e,n){let t=new g.r(n.rpcUrls[0]),i=new x.CH(C[n.chainId],y,t),a=await i.getConversionAmount("0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",e);return a._hex?new b.Z(Number(a._hex)).div(1e18).toString():""}async function N(e,n,t){try{var i;let a=await T(e,n,t),o=await t.getGasPrice(),c=await t.estimateGas({...a,value:null==a?void 0:null===(i=a.value)||void 0===i?void 0:i.toString(),gasPrice:o.toString()});return{gasEstimate:c,gasPrice:o}}catch(e){console.log(e)}return null}let S={81457:"0x52c4221cb805479954cde5accff8c4dcaf96623b",59144:"0x823106E745A62D0C2FC4d27644c62aDE946D9CCa",34443:"0x52c4221Cb805479954CDE5accfF8C4DcaF96623B",8453:"0xc38e046dFDAdf15f7F56853674242888301208a5"};async function T(e,n,t){if(!S[n.chainId])return;let i=new x.CH(S[n.chainId],v,t),a=await i.populateTransaction.deposit("0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",e,new b.Z(e).mul(new b.Z(.9)).toNumber().toFixed(),{value:e});return a}var Z=t(45270),k=t(37346),_=t(29265),j=t(61890),A=t(93862),H=t(93200);function F(){let e=(0,i._)(["\n   width: 478px;\n   border: 1px solid rgba(55, 58, 83, 1);\n   border-radius: 16px;\n   margin: 20px auto;\n   padding: 20px 0;\n   position: relative;\n"]);return F=function(){return e},e}function P(){let e=(0,i._)(["\n    padding: 10px 20px 20px;\n"]);return P=function(){return e},e}function B(){let e=(0,i._)(["\n    \n    font-weight: 400;\n    line-height: 16.8px;\n    margin-top: 20px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .title {\n        color: #fff;\n        font-weight: 700;\n        font-size: 18px;\n    }\n    .desc {\n        color: rgba(151, 154, 190, 1);\n        font-size: 14px;\n    }\n"]);return B=function(){return e},e}function D(){let e=(0,i._)(["\n    margin: 0 auto;\n    display: block;\n    height: 48px;\n    width: calc(100% - 40px);\n    line-height: 48px;\n    text-align: center;\n    border-radius: 8px;\n    color: #fff;\n    background: linear-gradient(90deg, #3E9BF1 0%, #9C5DF3 100%);\n"]);return D=function(){return e},e}let L=r.ZP.div.withConfig({componentId:"sc-b9b5a43d-0"})(F()),O=r.ZP.div.withConfig({componentId:"sc-b9b5a43d-1"})(P()),z=r.ZP.div.withConfig({componentId:"sc-b9b5a43d-2"})(B()),M=r.ZP.button.withConfig({componentId:"sc-b9b5a43d-3"})(D()),q={81457:{chainId:81457,name:"weETH",symbol:"weETH",icon:"https://etherscan.io/token/images/etherfiweeth_32.png",decimals:18,isNative:!1,address:"0x04C0599Ae5A44757c0af6F9eC3b93da8976c150A"},59144:{chainId:59144,name:"weETH",symbol:"weETH",icon:"https://etherscan.io/token/images/etherfiweeth_32.png",decimals:18,isNative:!1,address:"0x1Bf74C010E6320bab11e2e5A532b5AC15e0b8aA6"},34443:{chainId:34443,name:"weETH",symbol:"weETH",icon:"https://etherscan.io/token/images/etherfiweeth_32.png",decimals:18,isNative:!1,address:"0x04C0599Ae5A44757c0af6F9eC3b93da8976c150A"},8453:{chainId:34443,name:"weETH",symbol:"weETH",icon:"https://etherscan.io/token/images/etherfiweeth_32.png",decimals:18,isNative:!1,address:"0x04C0599Ae5A44757c0af6F9eC3b93da8976c150A"}};var G=e=>{let{chainIndex:n}=e,{chainId:t,account:i,provider:r}=(0,l.Z)(),[{settingChain:g},x]=(0,s.Um)(),[y,v]=(0,c.useState)(""),[C,S]=(0,c.useState)(!1),{onConnect:F}=(0,u.Z)(),{addAction:P}=(0,d.Z)("dapp"),[B,D]=(0,c.useState)(H.p[n]),[G,R]=(0,c.useState)(H.T[H.p[n].chainId][0]),[U,X]=(0,c.useState)(!1),[Q,W]=(0,c.useState)(!1),[J,K]=(0,c.useState)("Confirm"),[V,Y]=(0,c.useState)(1),[$,ee]=(0,c.useState)(q[B.chainId]),en=(0,k.O)(e=>e.price),et=(0,o.Z)(y,{wait:500}),{balance:ei,loading:ea}=(0,h.Z)({currency:G,updater:V,isNative:G.isNative,isPure:!1}),{balance:eo,loading:ec}=(0,h.Z)({currency:$,updater:V,isNative:!1,isPure:!1}),{apr:er}=function(e){let[n,t]=(0,c.useState)(0);return(0,c.useEffect)(()=>{(null==e?void 0:e.chainId)?m(e.chainId).then(t):t(0)},[e]),{apr:n}}(B),{rate:es,recived:eu,exchangeRate:el,transactionCost:ed,deposit:ef,isLoading:eh}=function(e){let{amount:n,provider:t,account:i,isError:a,chain:o}=e,{fail:r,success:s}=(0,w.Z)(),[u,l]=(0,c.useState)(0),[d,f]=(0,c.useState)(""),[h,p]=(0,c.useState)("1"),[m,g]=(0,c.useState)(""),[x,y]=(0,c.useState)(!1),[v,C]=(0,c.useState)(19200);async function S(e,n){try{let t=new b.Z(Number(e).toFixed(18)).mul(1e18).toString();y(!0);let i=await Z(t,n);return s({title:"Transaction successed"}),y(!1),i.transactionHash}catch(e){console.log(e),r({title:e.name?e.name:"Transaction failed",text:function(e){let n=e.match(E);return n&&n.length>1?n[1]:e}(e.message)}),y(!1)}}async function Z(e,n){let t=await T(e,o,n),i=await n.sendTransaction({...t});return i.wait()}return(0,c.useEffect)(()=>{if(n&&!isNaN(Number(n))){let e=new b.Z(Number(n).toFixed(18)).mul(1e18).toString();I(e,o).then(f)}else f("")},[n,u]),(0,c.useEffect)(()=>{if(n&&!isNaN(Number(n))&&!a&&t){let e=new b.Z(Number(n).toFixed(18)).mul(1e18).toString();N(e,o,null==t?void 0:t.getSigner()).then(e=>{e?(C(e.gasEstimate),g(new b.Z(e.gasEstimate.mul(e.gasPrice).toString()).div(1e18).toString())):g("")})}else g("")},[n,a,d]),(0,c.useEffect)(()=>{let e=new b.Z(1).mul(1e18).toString();I(e,o).then(p)},[]),{rate:u,recived:d,exchangeRate:h,deposit:S,transactionCost:m,isLoading:x}}({amount:et,provider:r,account:i,isError:Q,chain:B}),{value:ep}=(0,Z.Z)({prices:en,amount:et,symbol:G.symbol}),{value:em}=(0,Z.Z)({prices:en,amount:eu,symbol:"weETH"}),{value:eg}=(0,Z.Z)({prices:en,amount:ed,symbol:"ETH"});return(0,c.useEffect)(()=>{if(!t){W(!1),K("Connect Wallet");return}if((null==B?void 0:B.chainId)!==t){X(!0),W(!1),K("Switch to ".concat(B.chainName," Chain"));return}if(X(!1),!et||isNaN(Number(et))){W(!0),K("Enter an amount");return}if(Number(et)>=Number(ei)){W(!0),K("Insufficient balance");return}W(!1),K("Confirm")},[et,ei,t,B]),(0,a.jsxs)(L,{children:[(0,a.jsx)(j.Z,{ethLoading:ea,ethBalance:ei,ezETHLoading:ec,ezETHbalance:eo,apr:er,currentToken:G,symbol:"weETH"}),(0,a.jsxs)(O,{children:[(0,a.jsx)(z,{children:(0,a.jsx)("div",{className:"title",children:"Stake"})}),(0,a.jsx)(A.Z,{recived:y,outputMoney:ep,balance:ei,chainIcon:B.icon,tokenIcon:null==G?void 0:G.icon,symbol:G.symbol,balanceLoading:ea,tokenAmountChange:v,tokenChange:()=>{S(!0)}}),(0,a.jsxs)(z,{children:[(0,a.jsx)("div",{className:"title",children:"Receive"}),(0,a.jsxs)("div",{className:"desc",children:["1 ETH = ",(0,p._2)(el)," weETH"]})]}),(0,a.jsx)(A.Z,{recived:eu,outputMoney:em,balance:eo,chainIcon:B.icon,tokenIcon:$.icon,symbol:"weETH",balanceLoading:ec})]}),(0,a.jsxs)(M,{style:{opacity:Q?.2:1},onClick:async()=>{if(!i){F();return}if(U){x({chainId:"0x".concat(B.chainId.toString(16))});return}if(!Q&&!eh){let e=await ef(et,r.getSigner());e&&P({type:"Staking",fromChainId:B.chainId,toChainId:B.chainId,token:G,amount:y,template:"ether.fi",add:!1,status:1,action:"Staking",transactionHash:e,action_network_id:B.chainName}),Y(V+1)}},children:[eh?(0,a.jsx)(f.Z,{size:18}):null," ",J]}),C?(0,a.jsx)(_.Z,{chains:H.p.filter(e=>[81457,59144,8453,34443].indexOf(e.chainId)>-1),tokens:H.T,chain:B,token:G,onClose:()=>{S(!1)},onChainTokenChange:(e,n)=>{D(e),R(n),ee(q[e.chainId])}}):null]})}},31463:function(e,n,t){"use strict";t.r(n),t.d(n,{Page:function(){return E}});var i=t(82729),a=t(85893),o=t(67294),c=t(68458),r=t(41664),s=t.n(r),u=t(11163),l=t(51991),d=t(1575);function f(){let e=(0,i._)(["\n  margin: 0 8%;\n  color: #ffffff;\n  padding-top: 50px;\n"]);return f=function(){return e},e}function h(){let e=(0,i._)(["\n  color: #979abe;\n  font-size: 14px;\n  margin-bottom: 32px;\n  a {\n    text-decoration: none;\n    color: #979abe;\n    display: inline-block;\n    cursor: pointer;\n  }\n  svg {\n    margin: 0 8px;\n  }\n  span {\n    color: #ffffff;\n  }\n"]);return h=function(){return e},e}function p(){let e=(0,i._)(["\ntext-align: center;\n  .icon {\n    height: 48px;\n  }\n"]);return p=function(){return e},e}let m=c.ZP.div.withConfig({componentId:"sc-f2d973fd-0"})(f()),g=c.ZP.div.withConfig({componentId:"sc-f2d973fd-1"})(h()),x=c.ZP.div.withConfig({componentId:"sc-f2d973fd-2"})(p()),b=(0,a.jsx)("svg",{width:"5",height:"8",viewBox:"0 0 5 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M1 1L4 4L1 7",stroke:"#979ABE",strokeLinecap:"round"})}),w={linea:6,blast:4,base:3,mode:5},E=()=>{let[e,n]=(0,o.useState)(null),t=(0,u.useRouter)();return(0,o.useEffect)(()=>{var e;console.log("router:",t),(null===(e=t.query)||void 0===e?void 0:e.chain)&&n(w[t.query.chain])},[t]),console.log("chainIndex:",e),(0,a.jsxs)(m,{children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(s(),{href:"/",children:"Home"}),b,(0,a.jsx)(s(),{href:"/alldapps",children:"dApps"}),b,(0,a.jsx)("span",{children:"ether.fi"})]}),(0,a.jsx)(x,{children:(0,a.jsx)("img",{className:"icon",src:"/images/apps/etherfi.png"})}),!!e&&(0,a.jsx)(d.Z,{chainIndex:e})]})};E.getLayout=l.wQ,n.default=E}},function(e){e.O(0,[4473,3714,533,4722,1693,1072,5317,4146,4742,5524,1991,5763,9774,2888,179],function(){return e(e.s=68493)}),_N_E=e.O()}]);