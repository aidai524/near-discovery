(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{5507:function(t,e){"use strict";function r(t){if(Array.isArray(t)){let e=[],n=0;for(let i=0;i<t.length;i++){let o=r(t[i]);e.push(o),n+=o.length}return h(o(n,192),...e)}let e=m(t);return 1===e.length&&e[0]<128?e:h(o(e.length,128),e)}function n(t,e,r){if(r>t.length)throw Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return t.slice(e,r)}function i(t){if(0===t[0])throw Error("invalid RLP: extra zeros");return c(u(t))}function o(t,e){if(t<56)return Uint8Array.from([t+e]);let r=f(t),n=r.length/2,i=f(e+55+n);return Uint8Array.from(l(i+r))}function s(t,e=!1){if(null==t||0===t.length)return Uint8Array.from([]);let r=m(t),o=function t(e){let r,o,s,a,u;let c=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(r=l-127,s=128===l?Uint8Array.from([]):n(e,1,r),2===r&&s[0]<128)throw Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:e.slice(r)}}if(l<=191){if(o=l-182,e.length-1<o)throw Error("invalid RLP: not enough bytes for string length");if((r=i(n(e,1,o)))<=55)throw Error("invalid RLP: expected string length to be greater than 55");return{data:s=n(e,o,r+o),remainder:e.slice(r+o)}}if(l<=247){for(a=n(e,1,r=l-191);a.length;)u=t(a),c.push(u.data),a=u.remainder;return{data:c,remainder:e.slice(r)}}{if((r=i(n(e,1,o=l-246)))<56)throw Error("invalid RLP: encoded list too short");let s=o+r;if(s>e.length)throw Error("invalid RLP: total length is larger than the data");for(a=n(e,o,s);a.length;)u=t(a),c.push(u.data),a=u.remainder;return{data:c,remainder:e.slice(s)}}}(r);if(e)return o;if(0!==o.remainder.length)throw Error("invalid RLP: remainder must be zero");return o.data}Object.defineProperty(e,"__esModule",{value:!0}),e.RLP=e.utils=e.decode=e.encode=void 0,e.encode=r,e.decode=s;let a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function u(t){let e="";for(let r=0;r<t.length;r++)e+=a[t[r]];return e}function c(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw Error("Invalid byte sequence");return e}function l(t){if("string"!=typeof t)throw TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=2*r;e[r]=c(t.slice(n,n+2))}return e}function h(...t){if(1===t.length)return t[0];let e=t.reduce((t,e)=>t+e.length,0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){let i=t[e];r.set(i,n),n+=i.length}return r}function d(t){return new TextEncoder().encode(t)}function f(t){if(t<0)throw Error("Invalid integer as argument, must be unsigned!");let e=t.toString(16);return e.length%2?`0${e}`:e}function p(t){return t.length>=2&&"0"===t[0]&&"x"===t[1]}function m(t){if(t instanceof Uint8Array)return t;if("string"==typeof t){if(p(t)){var e;return l((e="string"!=typeof t?t:p(t)?t.slice(2):t).length%2?`0${e}`:e)}return d(t)}if("number"==typeof t||"bigint"==typeof t)return t?l(f(t)):Uint8Array.from([]);if(null==t)return Uint8Array.from([]);throw Error("toBytes: received unsupported type "+typeof t)}e.utils={bytesToHex:u,concatBytes:h,hexToBytes:l,utf8ToBytes:d},e.RLP={encode:r,decode:s}},78e3:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.accountBodyToRLP=e.accountBodyToSlim=e.accountBodyFromSlim=e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;let i=r(5507),o=r(82192),s=r(95053),a=r(58040),u=r(38289),c=r(66219),l=r(38480),h=r(24712),d=BigInt(0);class f{constructor(t=d,e=d,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=t,this.balance=e,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(t){let{nonce:e,balance:r,storageRoot:n,codeHash:i}=t;return new f(void 0!==e?(0,u.bufferToBigInt)((0,u.toBuffer)(e)):void 0,void 0!==r?(0,u.bufferToBigInt)((0,u.toBuffer)(r)):void 0,void 0!==n?(0,u.toBuffer)(n):void 0,void 0!==i?(0,u.toBuffer)(i):void 0)}static fromRlpSerializedAccount(t){let e=(0,u.arrToBufArr)(i.RLP.decode(Uint8Array.from(t)));if(!Array.isArray(e))throw Error("Invalid serialized account input. Must be array");return this.fromValuesArray(e)}static fromValuesArray(t){let[e,r,n,i]=t;return new f((0,u.bufferToBigInt)(e),(0,u.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<d)throw Error("nonce must be greater than zero");if(this.balance<d)throw Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw Error("codeHash must have a length of 32")}raw(){return[(0,u.bigIntToUnpaddedBuffer)(this.nonce),(0,u.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return n.from(i.RLP.encode((0,u.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}function p(t){let[e,r,n,i]=t;return[e,r,0===(0,u.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,u.arrToBufArr)(i).length?c.KECCAK256_NULL:i]}e.Account=f,e.isValidAddress=function(t){try{(0,l.assertIsString)(t)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(t)},e.toChecksumAddress=function(t,e){(0,l.assertIsHexString)(t);let r=(0,h.stripHexPrefix)(t).toLowerCase(),i="";if(void 0!==e){let t=(0,u.bufferToBigInt)((0,u.toBuffer)(e));i=t.toString()+"0x"}let s=n.from(i+r,"utf8"),c=(0,a.bytesToHex)((0,o.keccak256)(s)),d="0x";for(let t=0;t<r.length;t++)parseInt(c[t],16)>=8?d+=r[t].toUpperCase():d+=r[t];return d},e.isValidChecksumAddress=function(t,r){return(0,e.isValidAddress)(t)&&(0,e.toChecksumAddress)(t,r)===t},e.generateAddress=function(t,e){return((0,l.assertIsBuffer)(t),(0,l.assertIsBuffer)(e),(0,u.bufferToBigInt)(e)===BigInt(0))?n.from((0,o.keccak256)(i.RLP.encode((0,u.bufArrToArr)([t,null])))).slice(-20):n.from((0,o.keccak256)(i.RLP.encode((0,u.bufArrToArr)([t,e])))).slice(-20)},e.generateAddress2=function(t,e,r){if((0,l.assertIsBuffer)(t),(0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(r),20!==t.length)throw Error("Expected from to be of length 20");if(32!==e.length)throw Error("Expected salt to be of length 32");let i=(0,o.keccak256)(n.concat([n.from("ff","hex"),t,e,(0,o.keccak256)(r)]));return(0,u.toBuffer)(i).slice(-20)},e.isValidPrivate=function(t){return s.secp256k1.utils.isValidPrivateKey(t)},e.isValidPublic=function(t,e=!1){if((0,l.assertIsBuffer)(t),64===t.length)try{return s.secp256k1.ProjectivePoint.fromHex(n.concat([n.from([4]),t])),!0}catch(t){return!1}if(!e)return!1;try{return s.secp256k1.ProjectivePoint.fromHex(t),!0}catch(t){return!1}},e.pubToAddress=function(t,e=!1){if((0,l.assertIsBuffer)(t),e&&64!==t.length&&(t=n.from(s.secp256k1.ProjectivePoint.fromHex(t).toRawBytes(!1).slice(1))),64!==t.length)throw Error("Expected pubKey to be of length 64");return n.from((0,o.keccak256)(t)).slice(-20)},e.publicToAddress=e.pubToAddress,e.privateToPublic=function(t){return(0,l.assertIsBuffer)(t),n.from(s.secp256k1.ProjectivePoint.fromPrivateKey(t).toRawBytes(!1).slice(1))},e.privateToAddress=function(t){return(0,e.publicToAddress)((0,e.privateToPublic)(t))},e.importPublic=function(t){return(0,l.assertIsBuffer)(t),64!==t.length&&(t=n.from(s.secp256k1.ProjectivePoint.fromHex(t).toRawBytes(!1).slice(1))),t},e.zeroAddress=function(){let t=(0,u.zeros)(20);return(0,u.bufferToHex)(t)},e.isZeroAddress=function(t){try{(0,l.assertIsString)(t)}catch(t){return!1}let r=(0,e.zeroAddress)();return r===t},e.accountBodyFromSlim=p;let m=new Uint8Array(0);e.accountBodyToSlim=function(t){let[e,r,n,i]=t;return[e,r,(0,u.arrToBufArr)(n).equals(c.KECCAK256_RLP)?m:n,(0,u.arrToBufArr)(i).equals(c.KECCAK256_NULL)?m:i]},e.accountBodyToRLP=function(t,e=!0){let r=e?p(t):t;return(0,u.arrToBufArr)(i.RLP.encode(r))}},13415:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.Address=void 0;let i=r(78e3),o=r(38289);class s{constructor(t){if(20!==t.length)throw Error("Invalid address length");this.buf=t}static zero(){return new s((0,o.zeros)(20))}static fromString(t){if(!(0,i.isValidAddress)(t))throw Error("Invalid address");return new s((0,o.toBuffer)(t))}static fromPublicKey(t){if(!n.isBuffer(t))throw Error("Public key should be Buffer");let e=(0,i.pubToAddress)(t);return new s(e)}static fromPrivateKey(t){if(!n.isBuffer(t))throw Error("Private key should be Buffer");let e=(0,i.privateToAddress)(t);return new s(e)}static generate(t,e){if("bigint"!=typeof e)throw Error("Expected nonce to be a bigint");return new s((0,i.generateAddress)(t.buf,(0,o.bigIntToBuffer)(e)))}static generate2(t,e,r){if(!n.isBuffer(e))throw Error("Expected salt to be a Buffer");if(!n.isBuffer(r))throw Error("Expected initCode to be a Buffer");return new s((0,i.generateAddress2)(t.buf,e,r))}equals(t){return this.buf.equals(t.buf)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){let t=(0,o.bufferToBigInt)(this.buf),e=BigInt(0),r=BigInt("0xffff");return t>=e&&t<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return n.from(this.buf)}}e.Address=s},67285:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncEventEmitter=void 0;let n=r(17187);async function i(t,e,r){let n;for await(let i of e)try{i.length<2?i.call(t,r):await new Promise((e,n)=>{i.call(t,r,t=>{t?n(t):e()})})}catch(t){n=t}if(n)throw n}class o extends n.EventEmitter{emit(t,...e){let[r,n]=e,o=this._events[t]??[];return void 0===n&&"function"==typeof r&&(n=r,r=void 0),("newListener"===t||"removeListener"===t)&&(r={event:r,fn:n},n=void 0),i(this,(o=Array.isArray(o)?o:[o]).slice(),r).then(n).catch(n),this.listenerCount(t)>0}once(t,e){let r;let n=this;if("function"!=typeof e)throw TypeError("listener must be a function");return r=e.length>=2?function(i,o){n.removeListener(t,r),e(i,o)}:function(i){n.removeListener(t,r),e(i,r)},n.on(t,r),n}first(t,e){let r=this._events[t]??[];if("function"!=typeof e)throw TypeError("listener must be a function");return Array.isArray(r)||(this._events[t]=r=[r]),r.unshift(e),this}before(t,e,r){return this.beforeOrAfter(t,e,r)}after(t,e,r){return this.beforeOrAfter(t,e,r,"after")}beforeOrAfter(t,e,r,n){let i,o,s=this._events[t]??[],a="after"===n?1:0;if("function"!=typeof r)throw TypeError("listener must be a function");if("function"!=typeof e)throw TypeError("target must be a function");for(Array.isArray(s)||(this._events[t]=s=[s]),o=s.length,i=s.length;i--;)if(s[i]===e){o=i+a;break}return s.splice(o,0,r),this}on(t,e){return super.on(t,e)}addListener(t,e){return super.addListener(t,e)}prependListener(t,e){return super.prependListener(t,e)}prependOnceListener(t,e){return super.prependOnceListener(t,e)}removeAllListeners(t){return super.removeAllListeners(t)}removeListener(t,e){return super.removeListener(t,e)}eventNames(){return super.eventNames()}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(t){return super.setMaxListeners(t)}}e.AsyncEventEmitter=o},38289:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.intToUnpaddedBuffer=e.bigIntToUnpaddedBuffer=e.bigIntToHex=e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.short=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToInt=e.bigIntToBuffer=e.bufferToBigInt=e.bufferToHex=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;let i=r(38480),o=r(24712);e.intToHex=function(t){if(!Number.isSafeInteger(t)||t<0)throw Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`},e.intToBuffer=function(t){let r=(0,e.intToHex)(t);return n.from((0,o.padToEven)(r.slice(2)),"hex")},e.zeros=function(t){return n.allocUnsafe(t).fill(0)};let s=function(t,r,n){let i=(0,e.zeros)(r);return n?t.length<r?(t.copy(i),i):t.slice(0,r):t.length<r?(t.copy(i,r-t.length),i):t.slice(-r)};e.setLengthLeft=function(t,e){return(0,i.assertIsBuffer)(t),s(t,e,!1)},e.setLengthRight=function(t,e){return(0,i.assertIsBuffer)(t),s(t,e,!0)};let a=function(t){let e=t[0];for(;t.length>0&&"0"===e.toString();)e=(t=t.slice(1))[0];return t};function u(t){let r=(0,e.bufferToHex)(t);return"0x"===r?BigInt(0):BigInt(r)}function c(t){return(0,e.toBuffer)("0x"+t.toString(16))}e.unpadBuffer=function(t){return(0,i.assertIsBuffer)(t),a(t)},e.unpadArray=function(t){return(0,i.assertIsArray)(t),a(t)},e.unpadHexString=function(t){return(0,i.assertIsHexString)(t),"0x"+a(t=(0,o.stripHexPrefix)(t))},e.toBuffer=function(t){if(null==t)return n.allocUnsafe(0);if(n.isBuffer(t)||Array.isArray(t)||t instanceof Uint8Array)return n.from(t);if("string"==typeof t){if(!(0,o.isHexString)(t))throw Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${t}`);return n.from((0,o.padToEven)((0,o.stripHexPrefix)(t)),"hex")}if("number"==typeof t)return(0,e.intToBuffer)(t);if("bigint"==typeof t){if(t<BigInt(0))throw Error(`Cannot convert negative bigint to buffer. Given: ${t}`);let e=t.toString(16);return e.length%2&&(e="0"+e),n.from(e,"hex")}if(t.toArray)return n.from(t.toArray());if(t.toBuffer)return n.from(t.toBuffer());throw Error("invalid type")},e.bufferToHex=function(t){return"0x"+(t=(0,e.toBuffer)(t)).toString("hex")},e.bufferToBigInt=u,e.bigIntToBuffer=c,e.bufferToInt=function(t){let e=Number(u(t));if(!Number.isSafeInteger(e))throw Error("Number exceeds 53 bits");return e},e.fromSigned=function(t){return BigInt.asIntN(256,u(t))},e.toUnsigned=function(t){return c(BigInt.asUintN(256,t))},e.addHexPrefix=function(t){return"string"!=typeof t?t:(0,o.isHexPrefixed)(t)?t:"0x"+t},e.short=function(t,e=50){let r=n.isBuffer(t)?t.toString("hex"):t;return r.length<=e?r:r.slice(0,e)+"…"},e.toUtf8=function(t){if((t=(0,o.stripHexPrefix)(t)).length%2!=0)throw Error("Invalid non-even hex string input for toUtf8() provided");let e=n.from(t.replace(/^(00)+|(00)+$/g,""),"hex");return e.toString("utf8")},e.baToJSON=function(t){if(n.isBuffer(t))return`0x${t.toString("hex")}`;if(t instanceof Array){let r=[];for(let n=0;n<t.length;n++)r.push((0,e.baToJSON)(t[n]));return r}},e.validateNoLeadingZeroes=function(t){for(let[e,r]of Object.entries(t))if(void 0!==r&&r.length>0&&0===r[0])throw Error(`${e} cannot have leading zeroes, received: ${r.toString("hex")}`)},e.arrToBufArr=function t(e){return Array.isArray(e)?e.map(e=>t(e)):n.from(e)},e.bufArrToArr=function t(e){return Array.isArray(e)?e.map(e=>t(e)):Uint8Array.from(e??[])},e.bigIntToHex=t=>"0x"+t.toString(16),e.bigIntToUnpaddedBuffer=function(t){return(0,e.unpadBuffer)(c(t))},e.intToUnpaddedBuffer=function(t){return(0,e.unpadBuffer)((0,e.intToBuffer)(t))}},66219:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_WITHDRAWALS_PER_PAYLOAD=e.RLP_EMPTY_STRING=e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.SECP256K1_ORDER_DIV_2=e.SECP256K1_ORDER=e.MAX_INTEGER_BIGINT=e.MAX_INTEGER=e.MAX_UINT64=void 0;let n=r(48764),i=r(95053);e.MAX_UINT64=BigInt("0xffffffffffffffff"),e.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),e.SECP256K1_ORDER=i.secp256k1.CURVE.n,e.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),e.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=n.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=n.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=n.Buffer.from(e.KECCAK256_RLP_S,"hex"),e.RLP_EMPTY_STRING=n.Buffer.from([128]),e.MAX_WITHDRAWALS_PER_PAYLOAD=16},33791:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compactBytesToNibbles=e.bytesToNibbles=e.nibblesToCompactBytes=e.nibblesToBytes=e.hasTerminator=void 0,e.hasTerminator=t=>t.length>0&&16===t[t.length-1],e.nibblesToBytes=(t,e)=>{for(let r=0,n=0;n<t.length;r+=1,n+=2)e[r]=t[n]<<4|t[n+1]},e.nibblesToCompactBytes=t=>{let r=0;(0,e.hasTerminator)(t)&&(r=1,t=t.subarray(0,t.length-1));let n=new Uint8Array(t.length/2+1);return n[0]=r<<5,(1&t.length)==1&&(n[0]|=16,n[0]|=t[0],t=t.subarray(1)),(0,e.nibblesToBytes)(t,n.subarray(1)),n},e.bytesToNibbles=t=>{let e=2*t.length+1,r=new Uint8Array(e);for(let e=0;e<t.length;e++){let n=t[e];r[2*e]=n/16,r[2*e+1]=n%16}return r[e-1]=16,r},e.compactBytesToNibbles=t=>{if(0===t.length)return t;let r=(0,e.bytesToNibbles)(t);r[0]<2&&(r=r.subarray(0,r.length-1));let n=2-(1&r[0]);return r.subarray(n)}},38480:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.assertIsString=e.assertIsArray=e.assertIsBuffer=e.assertIsHexString=void 0;let i=r(24712);e.assertIsHexString=function(t){if(!(0,i.isHexString)(t)){let e=`This method only supports 0x-prefixed hex strings but input was: ${t}`;throw Error(e)}},e.assertIsBuffer=function(t){if(!n.isBuffer(t)){let e=`This method only supports Buffer but input was: ${t}`;throw Error(e)}},e.assertIsArray=function(t){if(!Array.isArray(t)){let e=`This method only supports number arrays but input was: ${t}`;throw Error(e)}},e.assertIsString=function(t){if("string"!=typeof t){let e=`This method only supports strings but input was: ${t}`;throw Error(e)}}},92730:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.toAscii=e.stripHexPrefix=e.padToEven=e.isHexString=e.isHexPrefixed=e.getKeys=e.getBinarySize=e.fromUtf8=e.fromAscii=e.arrayContainsArray=void 0,i(r(66219),e),i(r(4554),e),i(r(78e3),e),i(r(13415),e),i(r(44683),e),i(r(85026),e),i(r(38289),e),i(r(21200),e),i(r(33791),e),i(r(67285),e);var o=r(24712);Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return o.arrayContainsArray}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return o.fromAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return o.fromUtf8}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return o.getBinarySize}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return o.getKeys}}),Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return o.isHexPrefixed}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return o.isHexString}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return o.padToEven}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return o.stripHexPrefix}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return o.toAscii}}),i(r(43543),e),i(r(10438),e)},24712:function(t,e,r){"use strict";var n=r(48764).Buffer;function i(t){if("string"!=typeof t)throw Error(`[isHexPrefixed] input must be type 'string', received type ${typeof t}`);return"0"===t[0]&&"x"===t[1]}function o(t){let e=t;if("string"!=typeof e)throw Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}Object.defineProperty(e,"__esModule",{value:!0}),e.isHexString=e.getKeys=e.fromAscii=e.fromUtf8=e.toAscii=e.arrayContainsArray=e.getBinarySize=e.padToEven=e.stripHexPrefix=e.isHexPrefixed=void 0,e.isHexPrefixed=i,e.stripHexPrefix=t=>{if("string"!=typeof t)throw Error(`[stripHexPrefix] input must be type 'string', received ${typeof t}`);return i(t)?t.slice(2):t},e.padToEven=o,e.getBinarySize=function(t){if("string"!=typeof t)throw Error(`[getBinarySize] method requires input type 'string', received ${typeof t}`);return n.byteLength(t,"utf8")},e.arrayContainsArray=function(t,e,r){if(!0!==Array.isArray(t))throw Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof t}'`);if(!0!==Array.isArray(e))throw Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof e}'`);return e[!0===r?"some":"every"](e=>t.indexOf(e)>=0)},e.toAscii=function(t){let e="",r=0,n=t.length;for("0x"===t.substring(0,2)&&(r=2);r<n;r+=2){let n=parseInt(t.substr(r,2),16);e+=String.fromCharCode(n)}return e},e.fromUtf8=function(t){let e=n.from(t,"utf8");return`0x${o(e.toString("hex")).replace(/^0+|0+$/g,"")}`},e.fromAscii=function(t){let e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r),i=n.toString(16);e+=i.length<2?`0${i}`:i}return`0x${e}`},e.getKeys=function(t,e,r){if(!Array.isArray(t))throw Error(`[getKeys] method expects input 'params' to be an array, got ${typeof t}`);if("string"!=typeof e)throw Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof t}`);let n=[];for(let i=0;i<t.length;i++){let o=t[i][e];if(!0!==r||o){if("string"!=typeof o)throw Error(`invalid abi - expected type 'string', received ${typeof o}`)}else o="";n.push(o)}return n},e.isHexString=function(t,e){return"string"==typeof t&&!!t.match(/^0x[0-9A-Fa-f]*$/)&&(void 0===e||!(e>0)||t.length===2+2*e)}},43543:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lock=void 0;class r{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(t=>this.promiseResolverQueue.push(t))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;let t=this.promiseResolverQueue.shift();t&&t(!0)}}}e.Lock=r},10438:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getProvider=e.fetchFromProvider=void 0;let n=r(64898),i=async(t,e)=>{let r=await (0,n.default)(t,{headers:{"content-type":"application/json"},type:"json",data:{method:e.method,params:e.params,jsonrpc:"2.0",id:1}});return r.result};e.fetchFromProvider=i,e.getProvider=t=>{if("string"==typeof t)return t;if(t?.connection?.url!==void 0)return t.connection.url;throw Error("Must provide valid provider URL or Web3Provider")}},85026:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.hashPersonalMessage=e.isValidSignature=e.fromRpcSig=e.toCompactSig=e.toRpcSig=e.ecrecover=e.ecsign=void 0;let i=r(82192),o=r(95053),s=r(38289),a=r(66219),u=r(38480);function c(t,e){return t===BigInt(0)||t===BigInt(1)?t:void 0===e?t-BigInt(27):t-(e*BigInt(2)+BigInt(35))}function l(t){return t===BigInt(0)||t===BigInt(1)}e.ecsign=function(t,e,r){let i=o.secp256k1.sign(t,e),s=i.toCompactRawBytes(),a=n.from(s.slice(0,32)),u=n.from(s.slice(32,64)),c=void 0===r?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(r)*BigInt(2);return{r:a,s:u,v:c}},e.ecrecover=function(t,e,r,i,a){let u=n.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(i,32)],64),h=c(e,a);if(!l(h))throw Error("Invalid signature v value");let d=o.secp256k1.Signature.fromCompact(u).addRecoveryBit(Number(h)),f=d.recoverPublicKey(t);return n.from(f.toRawBytes(!1).slice(1))},e.toRpcSig=function(t,e,r,i){let o=c(t,i);if(!l(o))throw Error("Invalid signature v value");return(0,s.bufferToHex)(n.concat([(0,s.setLengthLeft)(e,32),(0,s.setLengthLeft)(r,32),(0,s.toBuffer)(t)]))},e.toCompactSig=function(t,e,r,i){let o=c(t,i);if(!l(o))throw Error("Invalid signature v value");let a=r;return(t>BigInt(28)&&t%BigInt(2)===BigInt(1)||t===BigInt(1)||t===BigInt(28))&&(a=n.from(r),a[0]|=128),(0,s.bufferToHex)(n.concat([(0,s.setLengthLeft)(e,32),(0,s.setLengthLeft)(a,32)]))},e.fromRpcSig=function(t){let e,r,n;let i=(0,s.toBuffer)(t);if(i.length>=65)e=i.slice(0,32),r=i.slice(32,64),n=(0,s.bufferToBigInt)(i.slice(64));else if(64===i.length)e=i.slice(0,32),r=i.slice(32,64),n=BigInt((0,s.bufferToInt)(i.slice(32,33))>>7),r[0]&=127;else throw Error("Invalid signature length");return n<27&&(n+=BigInt(27)),{v:n,r:e,s:r}},e.isValidSignature=function(t,e,r,n=!0,i){if(32!==e.length||32!==r.length||!l(c(t,i)))return!1;let o=(0,s.bufferToBigInt)(e),u=(0,s.bufferToBigInt)(r);return o!==BigInt(0)&&!(o>=a.SECP256K1_ORDER)&&u!==BigInt(0)&&!(u>=a.SECP256K1_ORDER)&&(!n||!(u>=a.SECP256K1_ORDER_DIV_2))},e.hashPersonalMessage=function(t){(0,u.assertIsBuffer)(t);let e=n.from(`\u0019Ethereum Signed Message:
${t.length}`,"utf-8");return n.from((0,i.keccak256)(n.concat([e,t])))}},21200:function(t,e,r){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=void 0;let o=r(38289),s=r(24712);(i=n=e.TypeOutput||(e.TypeOutput={}))[i.Number=0]="Number",i[i.BigInt=1]="BigInt",i[i.Buffer=2]="Buffer",i[i.PrefixedHexString=3]="PrefixedHexString",e.toType=function(t,e){if(null===t)return null;if(void 0===t)return;if("string"!=typeof t||(0,s.isHexString)(t)){if("number"==typeof t&&!Number.isSafeInteger(t))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)")}else throw Error(`A string must be provided with a 0x-prefix, given: ${t}`);let r=(0,o.toBuffer)(t);switch(e){case n.Buffer:return r;case n.BigInt:return(0,o.bufferToBigInt)(r);case n.Number:{let t=(0,o.bufferToBigInt)(r);if(t>BigInt(Number.MAX_SAFE_INTEGER))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(t)}case n.PrefixedHexString:return(0,o.bufferToHex)(r);default:throw Error("unknown outputType")}}},4554:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GWEI_TO_WEI=void 0,e.GWEI_TO_WEI=BigInt(1e9)},44683:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.Withdrawal=void 0;let i=r(13415),o=r(38289),s=r(21200);class a{constructor(t,e,r,n){this.index=t,this.validatorIndex=e,this.address=r,this.amount=n}static fromWithdrawalData(t){let{index:e,validatorIndex:r,address:n,amount:o}=t,u=(0,s.toType)(e,s.TypeOutput.BigInt),c=(0,s.toType)(r,s.TypeOutput.BigInt),l=new i.Address((0,s.toType)(n,s.TypeOutput.Buffer)),h=(0,s.toType)(o,s.TypeOutput.BigInt);return new a(u,c,l,h)}static fromValuesArray(t){if(4!==t.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${t.length}`);let[e,r,n,i]=t;return a.fromWithdrawalData({index:e,validatorIndex:r,address:n,amount:i})}static toBufferArray(t){let e;let{index:r,validatorIndex:o,address:a,amount:u}=t,c=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?n.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),l=(0,s.toType)(o,s.TypeOutput.BigInt)===BigInt(0)?n.alloc(0):(0,s.toType)(o,s.TypeOutput.Buffer);e=a instanceof i.Address?a.buf:(0,s.toType)(a,s.TypeOutput.Buffer);let h=(0,s.toType)(u,s.TypeOutput.BigInt)===BigInt(0)?n.alloc(0):(0,s.toType)(u,s.TypeOutput.Buffer);return[c,l,e,h]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,o.bigIntToHex)(this.index),validatorIndex:(0,o.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,o.bigIntToHex)(this.amount)}}}e.Withdrawal=a},40185:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(16247),i=r(58180);async function o({erc20Address:t,options:e}){var r,o,s,a,u;e=null!=e?e:{};let c=null!==(s=null!==(r=e.nearProvider)&&void 0!==r?r:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,n.getNearProvider)(),l=(0,n.getBridgeParams)(),h=null!==(a=e.auroraEvmAccount)&&void 0!==a?a:l.auroraEvmAccount,d=null!==(u=e.nep141Factory)&&void 0!==u?u:l.nep141Factory,f=t.replace("0x","").toLowerCase()+"."+d,p=await i.aurora.getErc20FromNep141({nep141Address:f,nearProvider:c,auroraEvmAccount:h});return p}e.default=o},39531:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkUnlock=e.unlock=e.proofAlreadyUsed=e.checkSync=e.checkFinality=e.checkBurn=e.burn=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.parseBurnReceipt=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=r(58180),c=r(20548),l=a(r(77191)),h=r(14455),d=r(84854),f=r(93694),p=r(57206),m=s(r(22241)),g=r(16247),y=r(22326),v=r(41249),w=r(87073),b=a(r(40185));e.SOURCE_NETWORK="aurora",e.DESTINATION_NETWORK="ethereum",e.TRANSFER_TYPE="@near-eth/aurora-erc20/bridged-erc20/sendToEthereum";let _="burn-bridged-erc20-to-ethereum",M="await-finality-bridged-erc20-to-ethereum",E="sync-bridged-erc20-to-ethereum",A="unlock-bridged-erc20-to-ethereum",S=[_,M,E,A];class I extends Error{}let T={completedStep:null,errors:[],status:m.ACTION_NEEDED,type:e.TRANSFER_TYPE,finalityBlockHeights:[],nearOnEthClientBlockHeight:null,burnHashes:[],burnReceipts:[],nearBurnHashes:[],nearBurnReceiptIds:[],nearBurnReceiptBlockHeights:[],unlockHashes:[],unlockReceipts:[]};async function k(t){switch(t.completedStep){case null:return await L(t);case M:return await K(t);case E:return await j(t);default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function N(t){switch(t.completedStep){case null:return await B(t);case _:return await D(t);case M:return await K(t);case E:return await U(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function x(t,e){let r=t.transaction_outcome.outcome.receipt_ids;if(1!==r.length)throw new I(`Burn expects only one receipt, got ${r.length}.
      Full withdrawal transaction: ${JSON.stringify(t)}`);let n=r[0],i=t.receipts_outcome.find(t=>t.id===n).outcome,o=i.receipt_ids[0],s=t.receipts_outcome.find(t=>t.id===o).outcome,a=s.status.SuccessReceiptId,u=t.receipts_outcome.find(t=>t.id===a).block_hash,c=await e.block({blockId:u}),l=Number(c.header.height);return{id:a,blockHeight:l}}async function P({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}){var o,s,a;i=null!=i?i:{};let u=(0,g.getBridgeParams)(),l=null!==(o=i.provider)&&void 0!==o?o:(0,g.getAuroraProvider)(),h=null!==(s=i.auroraErc20Address)&&void 0!==s?s:await (0,b.default)({erc20Address:n,options:i}),d=new c.ethers.Contract(h,null!==(a=i.auroraErc20Abi)&&void 0!==a?a:u.auroraErc20Abi,l),f=d.filters.Transfer(r,"0x0000000000000000000000000000000000000000"),p=await d.queryFilter(f,t,e),m=await Promise.all(p.map(async t=>{let e=await l.getTransactionReceipt(t.transactionHash);return e})),v=m.filter(t=>t.logs.find(t=>t.topics[0]===y.EXIT_TO_ETHEREUM_SIGNATURE));return v.map(t=>t.transactionHash)}async function O({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}){let o=await P({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}),s=await Promise.all(o.map(async t=>await C(t,r,i)));return s}async function C(t,e="todo",r){var i,o,s,a,u,f;let p,m,v,M;r=null!=r?r:{};let E=null!==(s=null!==(i=r.nearProvider)&&void 0!==i?i:null===(o=r.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,g.getNearProvider)(),A="NA";if(/^0x[A-Fa-f0-9]{64}$/.test(t)){let e=null!==(a=r.auroraProvider)&&void 0!==a?a:(0,g.getAuroraProvider)(),i=await e.send("eth_getTransactionReceipt",[t]);m=n.from(i.nearTransactionHash.slice(2),"hex"),p=l.default.encode(m);let o=i.logs.find(t=>t.topics[0]===y.BURN_SIGNATURE);A="0x"+o.topics[1].slice(26),M=i.logs.find(t=>t.topics[0]===y.EXIT_TO_ETHEREUM_SIGNATURE).address.toLowerCase(),v=t}else p=t,m=d.utils.serialize.base_decode(p);let S=await E.txStatus(m,e);if(S.status.Unknown)throw Error(`Withdraw transaction pending: ${t}`);if(S.status.Failure)throw Error(`Withdraw transaction failed: ${t}`);let I=await x(S,E),k=S.receipts_outcome.find(t=>t.id===I.id).outcome,N=k.status.SuccessValue;if(!N)throw Error(`Invalid burnTx successValue: '${N}'
      Full withdrawal transaction: ${JSON.stringify(S)}`);class P{constructor(t){Object.assign(this,t)}}let O=new Map([[P,{kind:"struct",fields:[["flag","u8"],["amount","u128"],["token",[20]],["recipient",[20]]]}]]),C=(0,h.deserialize)(O,P,n.from(N,"base64")),R=C.amount.toString(),L="0x"+n.from(C.recipient).toString("hex"),B="0x"+n.from(C.token).toString("hex"),D=null!==(u=r.symbol)&&void 0!==u?u:await (0,w.getSymbol)({erc20Address:B,options:r}),F=null!==(f=r.decimals)&&void 0!==f?f:await (0,w.getDecimals)({erc20Address:B,options:r});v||(v=c.ethers.utils.keccak256(n.from(S.transaction.actions[0].FunctionCall.args,"base64")),M=await (0,b.default)({erc20Address:B,options:r}));let j=await E.block({blockId:S.transaction_outcome.block_hash}),U={...T,id:Math.random().toString().slice(2),startTime:new Date(j.header.timestamp/1e6).toISOString(),amount:R,completedStep:_,destinationTokenName:D,recipient:L,sender:A,sourceTokenName:"a"+D,sourceToken:M,symbol:D,decimals:F,burnHashes:[v],nearBurnHashes:[p],nearBurnReceiptIds:[I.id],nearBurnReceiptBlockHeights:[I.blockHeight]};return await K(U,r)}async function R({erc20Address:t,amount:e,recipient:r,options:n}){var i,o,s,a,u,c;n=null!=n?n:{};let l=null!==(i=n.provider)&&void 0!==i?i:(0,g.getSignerProvider)(),h=null!==(o=n.auroraErc20Address)&&void 0!==o?o:await (0,b.default)({erc20Address:t,options:n}),d=null!==(s=n.symbol)&&void 0!==s?s:await (0,w.getSymbol)({erc20Address:h,options:{provider:l,erc20Abi:n.auroraErc20Abi}}),p=null!==(a=n.decimals)&&void 0!==a?a:await (0,w.getDecimals)({erc20Address:h,options:{provider:l,erc20Abi:n.auroraErc20Abi}}),m=null!==(u=n.signer)&&void 0!==u?u:l.getSigner(),y=null!==(c=n.sender)&&void 0!==c?c:(await m.getAddress()).toLowerCase(),v={...T,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:e.toString(),destinationTokenName:d,recipient:r,sender:y,sourceToken:h,sourceTokenName:"a"+d,symbol:d,decimals:p};return v=await L(v,n),"undefined"!=typeof window&&(v=await (0,f.track)(v)),v}async function L(t,e){var r,n,i,o;e=null!=e?e:{};let s=(0,g.getBridgeParams)(),a=null!==(r=e.provider)&&void 0!==r?r:(0,g.getSignerProvider)(),u=(await a.getNetwork()).chainId,l=null!==(n=e.auroraChainId)&&void 0!==n?n:s.auroraChainId;if(u!==l)throw Error(`Wrong aurora network for lock, expected: ${l}, got: ${u}`);let h=new c.ethers.Contract(t.sourceToken,null!==(i=e.auroraErc20Abi)&&void 0!==i?i:s.auroraErc20Abi,null!==(o=e.signer)&&void 0!==o?o:a.getSigner()),d=await a.getBlockNumber()-20,f=await h.withdrawToEthereum(t.recipient,t.amount,{gasLimit:1e5});return{...t,status:m.IN_PROGRESS,ethCache:{from:f.from,to:f.to,data:f.data,nonce:f.nonce,safeReorgHeight:d},burnHashes:[...t.burnHashes,f.hash]}}async function B(t,e){var r,i,o,s,a,u;let c;e=null!=e?e:{};let h=(0,g.getBridgeParams)(),d=null!==(r=e.provider)&&void 0!==r?r:(0,g.getAuroraProvider)(),f=H(t.burnHashes),p=(await d.getNetwork()).chainId,y=null!==(i=e.auroraChainId)&&void 0!==i?i:h.auroraChainId;if(p!==y)throw Error(`Wrong aurora network for checkLock, expected: ${y}, got: ${p}`);let w=await d.send("eth_getTransactionReceipt",[f]);if(!w){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,data:t.ethCache.data,to:t.ethCache.to},r=await (0,v.findReplacementTx)(d,t.ethCache.safeReorgHeight,e);if(!r)return t;w=await d.send("eth_getTransactionReceipt",[r.hash])}catch(e){if(console.error(e),e instanceof v.TxValidationError)return{...t,errors:[...t.errors,e.message],status:m.FAILED};throw e}}if(!w)return t;if("0x1"!==w.status){let e=`Aurora transaction failed: ${w.transactionHash}`;return{...t,status:m.FAILED,errors:[...t.errors,e],burnReceipts:[...t.burnReceipts,w]}}w.transactionHash!==f&&(t={...t,burnHashes:[...t.burnHashes,w.transactionHash],burnReceipts:[...t.burnReceipts,w]});let b=n.from(w.nearTransactionHash.slice(2),"hex"),M=l.default.encode(b),E=null!==(a=null!==(o=e.nearProvider)&&void 0!==o?o:null===(s=e.nearAccount)||void 0===s?void 0:s.connection.provider)&&void 0!==a?a:(0,g.getNearProvider)(),A=await E.txStatus(b,null!==(u=e.auroraRelayerAccount)&&void 0!==u?u:h.auroraRelayerAccount);if(A.status.Unknown)return t;if(A.status.Failure)return{...t,errors:[...t.errors,"NEAR relay.aurora transaction failed."],status:m.FAILED};try{c=await x(A,E)}catch(e){if(e instanceof I)return{...t,errors:[...t.errors,e.message],status:m.FAILED};throw e}let S=await E.block({blockId:A.transaction_outcome.block_hash});return{...t,status:m.IN_PROGRESS,completedStep:_,startTime:new Date(S.header.timestamp/1e6).toISOString(),burnReceipts:[...t.burnReceipts,w],nearBurnHashes:[...t.nearBurnHashes,M],nearBurnReceiptIds:[...t.nearBurnReceiptIds,c.id],nearBurnReceiptBlockHeights:[...t.nearBurnReceiptBlockHeights,c.blockHeight]}}async function D(t,e){var r,n,i;e=null!=e?e:{};let o=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,g.getNearProvider)(),s=H(t.nearBurnReceiptBlockHeights),a=Number((await o.block({finality:"final"})).header.height);return a<=s?t:{...t,completedStep:M,status:m.IN_PROGRESS,finalityBlockHeights:[...t.finalityBlockHeights,a]}}async function K(t,e){var r,n,i,o,s,a,c,l,h,d,f,p,y,v,w;let b;if("string"==typeof t)return await C(t,"todo",e);e=null!=e?e:{};let _=(0,g.getBridgeParams)(),M=null!==(r=e.provider)&&void 0!==r?r:(0,g.getEthProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(n=e.sendToEthereumSyncInterval)&&void 0!==n?n:_.sendToEthereumSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let S=(await M.getNetwork()).chainId,I=null!==(i=e.ethChainId)&&void 0!==i?i:_.ethChainId;if(S!==I)throw Error(`Wrong eth network for checkSync, expected: ${I}, got: ${S}`);let T=H(t.nearBurnReceiptBlockHeights),k=await (0,u.nearOnEthSyncHeight)(M,null!==(o=e.ethClientAddress)&&void 0!==o?o:_.ethClientAddress,null!==(s=e.ethClientAbi)&&void 0!==s?s:_.ethClientAbi),N=null!==(l=null!==(a=e.nearProvider)&&void 0!==a?a:null===(c=e.nearAccount)||void 0===c?void 0:c.connection.provider)&&void 0!==l?l:(0,g.getNearProvider)();if(!(k>T))return{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),nearOnEthClientBlockHeight:k,status:m.IN_PROGRESS};if(b=await (0,u.findNearProof)(H(t.nearBurnReceiptIds),null!==(h=e.nep141Factory)&&void 0!==h?h:_.nep141Factory,k,N,M,null!==(d=e.ethClientAddress)&&void 0!==d?d:_.ethClientAddress,null!==(f=e.ethClientAbi)&&void 0!==f?f:_.ethClientAbi),await F(M,b,null!==(p=e.erc20LockerAddress)&&void 0!==p?p:_.erc20LockerAddress,null!==(y=e.erc20LockerAbi)&&void 0!==y?y:_.erc20LockerAbi)){try{let{transactions:r,block:n}=await (0,u.findFinalizationTxOnEthereum)({usedProofPosition:"3",proof:b,connectorAddress:null!==(v=e.erc20LockerAddress)&&void 0!==v?v:_.erc20LockerAddress,connectorAbi:null!==(w=e.erc20LockerAbi)&&void 0!==w?w:_.erc20LockerAbi,finalizationEvent:"Unlocked",recipient:t.recipient,amount:t.amount,provider:M});t={...t,finishTime:new Date(1e3*n.timestamp).toISOString(),unlockHashes:[...t.unlockHashes,...r]}}catch(t){console.error(t)}return{...t,completedStep:A,nearOnEthClientBlockHeight:k,status:m.COMPLETE,errors:[...t.errors,"Unlock proof already used."]}}return{...t,completedStep:E,nearOnEthClientBlockHeight:k,status:m.ACTION_NEEDED,proof:b}}async function F(t,e,r,n){let i=new c.ethers.Contract(r,n,t),o=await i.usedProofs_("0x"+l.default.decode(e.outcome_proof.outcome.receipt_ids[0]).toString("hex"));return o}async function j(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,g.getBridgeParams)(),l=null!==(r=e.provider)&&void 0!==r?r:(0,g.getSignerProvider)(),h=(await l.getNetwork()).chainId,d=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(h!==d)throw Error(`Wrong eth network for checkSync, expected: ${d}, got: ${h}`);if((t=await K(t,e)).status!==m.ACTION_NEEDED)return t;let f=t.proof,p=(0,u.borshifyOutcomeProof)(f),y=new c.ethers.Contract(null!==(i=e.erc20LockerAddress)&&void 0!==i?i:a.erc20LockerAddress,null!==(o=e.erc20LockerAbi)&&void 0!==o?o:a.erc20LockerAbi,null!==(s=e.signer)&&void 0!==s?s:l.getSigner()),v=await l.getBlockNumber()-20,w=await y.unlockToken(p,t.nearOnEthClientBlockHeight);return{...t,status:m.IN_PROGRESS,ethCache:{from:w.from,to:w.to,nonce:w.nonce,data:w.data,safeReorgHeight:v},unlockHashes:[...t.unlockHashes,w.hash]}}async function U(t,e){var r,n;e=null!=e?e:{};let i=(0,g.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,g.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkUnlock, expected: ${a}, got: ${s}`);let u=H(t.unlockHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,v.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof v.TxValidationError)return{...t,errors:[...t.errors,e.message],status:m.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:m.FAILED,errors:[...t.errors,e],unlockReceipts:[...t.unlockReceipts,c]}}c.transactionHash!==u&&(t={...t,unlockHashes:[...t.unlockHashes,c.transactionHash]});let l=await o.getBlock(c.blockNumber);return{...t,status:m.COMPLETE,completedStep:A,finishTime:new Date(1e3*l.timestamp).toISOString(),unlockReceipts:[...t.unlockReceipts,c]}}e.i18n={en_US:{steps:t=>(0,p.stepsFor)(t,S,{[_]:`Start transfer of ${(0,g.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from Aurora`,[M]:"Confirming in Aurora",[E]:"Confirming in Aurora. This can take around 16 hours. Feel free to return to this window later, to complete the final step of the transfer.",[A]:`Deposit ${(0,g.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Ethereum`}),statusMessage:t=>{if(t.status===m.FAILED)return"Failed";if(t.status===m.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from Aurora";case E:return"Ready to deposit in Ethereum";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to Ethereum";case _:case M:return"Confirming transfer";case E:return"Depositing in Ethereum";case A:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===m.FAILED)return"Retry";if(t.status!==m.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case E:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=k,e.checkStatus=N,e.parseBurnReceipt=x,e.findAllTransactions=P,e.findAllTransfers=O,e.recover=C,e.initiate=R,e.burn=L,e.checkBurn=B,e.checkFinality=D,e.checkSync=K,e.proofAlreadyUsed=F,e.unlock=j,e.checkUnlock=U;let H=t=>t[t.length-1]},87073:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSymbol=e.getDecimals=void 0;let n=r(20548),i=r(16247),o=r(58180),s={};async function a({erc20Address:t,options:e}){var r,n;let a;if(void 0!==s[t])return s[t];e=null!=e?e:{};let u=(0,i.getBridgeParams)(),c=null!==(r=e.provider)&&void 0!==r?r:(0,i.getEthProvider)(),l=null!==(n=e.erc20Abi)&&void 0!==n?n:u.erc20Abi;try{a=await o.erc20.getDecimals({erc20Address:t,provider:c,erc20Abi:l}),s[t]=a}catch{console.log(`Failed to read token decimals for: ${t}`),a=0}return a}e.getDecimals=a;let u={};async function c({erc20Address:t,options:e}){var r,s,a,c;let l;if(void 0!==u[t])return u[t];e=null!=e?e:{};let h=(0,i.getBridgeParams)();try{let n=null!==(a=null!==(r=e.nearProvider)&&void 0!==r?r:null===(s=e.nearAccount)||void 0===s?void 0:s.connection.provider)&&void 0!==a?a:(0,i.getNearProvider)(),u=null!==(c=e.nep141Factory)&&void 0!==c?c:h.nep141Factory,d=t.replace("0x","").toLowerCase()+"."+u,f=await o.nep141.getMetadata({nep141Address:d,nearProvider:n});l=f.icon}catch(t){console.warn(t)}if(!l){let e=`https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${n.ethers.utils.getAddress(t)}/logo.png`;l=await new Promise(t=>{let r=new Image;r.onload=()=>t(e),r.onerror=()=>t(null),r.src=e})}return u[t]=l,l}let l={};async function h({erc20Address:t,options:e}){var r,n;let s;if(l[t])return l[t];e=null!=e?e:{};let a=(0,i.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,i.getEthProvider)(),c=null!==(n=e.erc20Abi)&&void 0!==n?n:a.erc20Abi;try{s=await o.erc20.getSymbol({erc20Address:t,provider:u,erc20Abi:c}),l[t]=s}catch{console.log(`Failed to read token symbol for: ${t}`),s="0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2"===t.toLowerCase()?"MKR":t.slice(0,5)+"…"}return s}async function d({erc20Address:t,options:e}){let[r,n,i]=await Promise.all([a({erc20Address:t,options:e}),c({erc20Address:t,options:e}),h({erc20Address:t,options:e})]);return{erc20Address:t,decimals:r,icon:n,symbol:i}}e.getSymbol=h,e.default=d},25288:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.checkSync=e.checkLock=e.lock=e.checkApprove=e.approve=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let a=r(20548),u=r(93694),c=r(57206),l=s(r(22241)),h=r(16247),d=r(41249),f=r(58180),p=r(87073);e.SOURCE_NETWORK="ethereum",e.DESTINATION_NETWORK="aurora",e.TRANSFER_TYPE="@near-eth/aurora-erc20/natural-erc20/sendToAurora";let m="lock-natural-erc20-to-aurora",g="sync-natural-erc20-to-aurora",y="mint-natural-erc20-to-aurora",v=[m,g,y],w={completedStep:null,errors:[],status:l.ACTION_NEEDED,type:e.TRANSFER_TYPE,completedConfirmations:0,lockHashes:[],lockReceipts:[],neededConfirmations:20,mintHashes:[]};async function b(t){switch(t.completedStep){case null:return await k(t);case m:return await x(t);default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function _(t){switch(t.completedStep){case null:return await N(t);case m:return await x(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function M({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}){var o,s,u,c;i=null!=i?i:{};let l=(0,h.getBridgeParams)(),d=null!==(o=i.provider)&&void 0!==o?o:(0,h.getEthProvider)(),f=new a.ethers.Contract(null!==(s=i.erc20LockerAddress)&&void 0!==s?s:l.erc20LockerAddress,null!==(u=i.erc20LockerAbi)&&void 0!==u?u:l.erc20LockerAbi,d),p=f.filters.Locked(n,r),m=await f.queryFilter(p,t,e),g=null!==(c=i.auroraEvmAccount)&&void 0!==c?c:l.auroraEvmAccount+":";return m.filter(t=>t.args.accountId.startsWith(g)).map(t=>t.transactionHash)}async function E({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}){let o=await M({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}),s=await Promise.all(o.map(async t=>await A(t,i)));return s}async function A(t,e){var r,n,i,o,s,u;e=null!=e?e:{};let c=(0,h.getBridgeParams)(),d=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),f=await d.getTransactionReceipt(t),g=new a.ethers.Contract(null!==(n=e.erc20LockerAddress)&&void 0!==n?n:c.erc20LockerAddress,null!==(i=e.erc20LockerAbi)&&void 0!==i?i:c.erc20LockerAbi,d),y=g.filters.Locked(),v=await g.queryFilter(y,f.blockNumber,f.blockNumber),b=v.find(e=>e.transactionHash===t);if(!b)throw Error("Unable to process lock transaction event.");let _=b.args.token,M=b.args.amount.toString(),E=b.args.sender,A=b.args.accountId,[S,I]=A.split(":");if(S!==(null!==(o=e.auroraEvmAccount)&&void 0!==o?o:c.auroraEvmAccount))throw Error("Failed to parse auroraEvmAccount in protocol message");if(!/^(0x)?([A-Fa-f0-9]{40})$/.test(I))throw Error("Failed to parse recipient in protocol message");let T=null!==(s=e.symbol)&&void 0!==s?s:await (0,p.getSymbol)({erc20Address:_,options:e}),k=null!==(u=e.decimals)&&void 0!==u?u:await (0,p.getDecimals)({erc20Address:_,options:e}),N=await b.getBlock(),P={...w,id:Math.random().toString().slice(2),startTime:new Date(1e3*N.timestamp).toISOString(),amount:M,completedStep:m,destinationTokenName:"a"+T,recipient:"0x"+I,sender:E,sourceToken:_,sourceTokenName:T,symbol:T,decimals:k,status:l.IN_PROGRESS,lockHashes:[t],lockReceipts:[f]};return await x(P,e)}async function S({erc20Address:t,amount:e,recipient:r,options:n}){var i,o,s,a,c;n=null!=n?n:{};let l=null!==(i=n.provider)&&void 0!==i?i:(0,h.getSignerProvider)(),d=null!==(o=n.symbol)&&void 0!==o?o:await (0,p.getSymbol)({erc20Address:t,options:n}),f=null!==(s=n.decimals)&&void 0!==s?s:await (0,p.getDecimals)({erc20Address:t,options:n}),m=null!==(a=n.signer)&&void 0!==a?a:l.getSigner(),g=null!==(c=n.sender)&&void 0!==c?c:(await m.getAddress()).toLowerCase(),y={...w,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:e.toString(),destinationTokenName:"a"+d,recipient:r,sender:g,sourceToken:t,sourceTokenName:d,symbol:d,decimals:f};return y=await k(y,n),"undefined"!=typeof window&&(y=await (0,u.track)(y)),y}async function I({erc20Address:t,amount:e,options:r}){var n,i,o,s,u;r=null!=r?r:{};let c=(0,h.getBridgeParams)(),d=null!==(n=r.provider)&&void 0!==n?n:(0,h.getSignerProvider)(),f=(await d.getNetwork()).chainId,p=null!==(i=r.ethChainId)&&void 0!==i?i:c.ethChainId;if(f!==p)throw Error(`Wrong eth network for approve, expected: ${p}, got: ${f}`);let m=await d.getBlockNumber()-20,g=new a.ethers.Contract(t,null!==(o=r.erc20Abi)&&void 0!==o?o:c.erc20Abi,null!==(s=r.signer)&&void 0!==s?s:d.getSigner()),y=await g.approve(null!==(u=r.erc20LockerAddress)&&void 0!==u?u:c.erc20LockerAddress,e);return{...w,amount:e.toString(),sourceToken:t,ethCache:{from:y.from,to:y.to,safeReorgHeight:m,data:y.data,nonce:y.nonce},approvalHashes:[y.hash],approvalReceipts:[],status:l.IN_PROGRESS}}async function T(t,e){var r,n;e=null!=e?e:{};let i=(0,h.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkApprove, expected: ${a}, got: ${s}`);let u=P(t.approvalHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,d.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof d.TxValidationError)return{...t,errors:[...t.errors,e.message],status:l.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,approvalReceipts:[...t.approvalReceipts,c],errors:[...t.errors,e],status:l.FAILED}}return c.transactionHash!==u&&(t={...t,approvalHashes:[...t.approvalHashes,c.transactionHash]}),{...t,approvalReceipts:[...t.approvalReceipts,c],completedStep:"approve-natural-erc20-to-aurora",status:l.ACTION_NEEDED}}async function k(t,e){var r,n,i,o,s,u;e=null!=e?e:{};let c=(0,h.getBridgeParams)(),d=null!==(r=e.provider)&&void 0!==r?r:(0,h.getSignerProvider)(),f=(await d.getNetwork()).chainId,p=null!==(n=e.ethChainId)&&void 0!==n?n:c.ethChainId;if(f!==p)throw Error(`Wrong eth network for lock, expected: ${p}, got: ${f}`);let m=new a.ethers.Contract(null!==(i=e.erc20LockerAddress)&&void 0!==i?i:c.erc20LockerAddress,null!==(o=e.erc20LockerAbi)&&void 0!==o?o:c.erc20LockerAbi,null!==(s=e.signer)&&void 0!==s?s:d.getSigner()),g=null!==(u=e.auroraEvmAccount)&&void 0!==u?u:c.auroraEvmAccount,y=await d.getBlockNumber()-20,v=await m.lockToken(t.sourceToken,t.amount,g+":"+t.recipient.slice(2));return{...t,status:l.IN_PROGRESS,ethCache:{from:v.from,to:v.to,safeReorgHeight:y,data:v.data,nonce:v.nonce},lockHashes:[...t.lockHashes,v.hash]}}async function N(t,e){var r,n;e=null!=e?e:{};let i=(0,h.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),s=P(t.lockHashes),a=(await o.getNetwork()).chainId,u=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(a!==u)throw Error(`Wrong eth network for checkLock, expected: ${u}, got: ${a}`);let c=await o.getTransactionReceipt(s);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,d.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof d.TxValidationError)return{...t,errors:[...t.errors,e.message],status:l.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:l.FAILED,errors:[...t.errors,e],lockReceipts:[...t.lockReceipts,c]}}c.transactionHash!==s&&(t={...t,lockHashes:[...t.lockHashes,c.transactionHash]});let f=await o.getBlock(c.blockHash);return{...t,status:l.IN_PROGRESS,completedStep:m,startTime:new Date(1e3*f.timestamp).toISOString(),lockReceipts:[...t.lockReceipts,c]}}async function x(t,e){var r,i,o,s,a,u,c,d,p,m,g,v;let w;if("string"==typeof t)return await A(t,e);e=null!=e?e:{};let b=(0,h.getBridgeParams)(),_=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),M=null!==(s=null!==(i=e.nearProvider)&&void 0!==i?i:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,h.getNearProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(a=e.sendToNearSyncInterval)&&void 0!==a?a:b.sendToNearSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let E=P(t.lockReceipts),S=E.blockNumber,I=await (0,f.ethOnNearSyncHeight)(null!==(u=e.nearClientAccount)&&void 0!==u?u:b.nearClientAccount,M),T=Math.max(0,I-S),k=t.checkSyncInterval;if(T>t.neededConfirmations){w=await (0,f.findEthProof)("Locked",E.transactionHash,null!==(c=e.erc20LockerAddress)&&void 0!==c?c:b.erc20LockerAddress,null!==(d=e.erc20LockerAbi)&&void 0!==d?d:b.erc20LockerAbi,_);let r=await M.query({request_type:"call_function",account_id:null!==(p=e.nep141Factory)&&void 0!==p?p:b.nep141Factory,method_name:"is_used_proof",args_base64:n.from(w).toString("base64"),finality:"optimistic"}),i=JSON.parse(n.from(r.result).toString());if(i){if(e.callIndexer)try{let r;let{transactions:i,timestamps:o}=await (0,f.findFinalizationTxOnNear)({proof:n.from(w).toString("base64"),connectorAccount:null!==(m=e.nep141Factory)&&void 0!==m?m:b.nep141Factory,eventRelayerAccount:null!==(g=e.eventRelayerAccount)&&void 0!==g?g:b.eventRelayerAccount,finalizationMethod:"deposit",callIndexer:e.callIndexer});o.length>0&&(r=new Date(o[0]/1e6).toISOString()),t={...t,finishTime:r,mintHashes:[...t.mintHashes,...i]}}catch(t){console.error(t)}return{...t,completedStep:y,completedConfirmations:T,status:l.COMPLETE,errors:[...t.errors,"Transfer already finalized."]}}let o=null!==(v=e.maxFindEthProofInterval)&&void 0!==v?v:b.maxFindEthProofInterval;k=2*t.checkSyncInterval>o?t.checkSyncInterval:2*t.checkSyncInterval}return{...t,nextCheckSyncTimestamp:new Date(Date.now()+k),checkSyncInterval:k,completedConfirmations:T,status:l.IN_PROGRESS}}e.i18n={en_US:{steps:t=>(0,c.stepsFor)(t,v,{[m]:`Start transfer of ${(0,h.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from Ethereum`,[g]:`Wait for ${t.neededConfirmations} transfer confirmations for security`,[y]:`Deposit ${(0,h.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Aurora`}),statusMessage:t=>{if(t.status===l.FAILED)return"Failed";if(t.status===l.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from Ethereum";case g:return"Ready to deposit in Aurora";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to Aurora";case m:return`Confirming transfer ${t.completedConfirmations+1} of ${t.neededConfirmations}`;case g:return"Depositing in Aurora";case y:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===l.FAILED)return"Retry";if(t.status!==l.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case g:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=b,e.checkStatus=_,e.findAllTransactions=M,e.findAllTransfers=E,e.recover=A,e.initiate=S,e.approve=I,e.checkApprove=T,e.lock=k,e.checkLock=N,e.checkSync=x;let P=t=>t[t.length-1]},84442:function(t,e,r){"use strict";/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i,o,s,a=r(58633)("http-errors"),u=r(66644),c=r(82737),l=r(35717),h=r(72953);function d(t){return Number(String(t).charAt(0)+"00")}function f(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function p(t){return"Error"!==t.substr(-5)?t+"Error":t}t.exports=function t(){for(var e,r,n=500,i={},o=0;o<arguments.length;o++){var s=arguments[o];if(s instanceof Error){n=(e=s).status||e.statusCode||n;continue}switch(typeof s){case"string":r=s;break;case"number":n=s,0!==o&&a("non-first-argument status code; replace with createError("+s+", ...)");break;case"object":i=s}}"number"==typeof n&&(n<400||n>=600)&&a("non-error status code; use only 4xx or 5xx status codes"),("number"!=typeof n||!c[n]&&(n<400||n>=600))&&(n=500);var u=t[n]||t[d(n)];for(var l in e||Error.captureStackTrace(e=u?new u(r):Error(r||c[n]),t),u&&e instanceof u&&e.status===n||(e.expose=n<500,e.status=e.statusCode=n),i)"status"!==l&&"statusCode"!==l&&(e[l]=i[l]);return e},t.exports.HttpError=function(){function t(){throw TypeError("cannot construct abstract class")}return l(t,Error),t}(),t.exports.isHttpError=(n=t.exports.HttpError,function(t){return!!t&&"object"==typeof t&&(t instanceof n||t instanceof Error&&"boolean"==typeof t.expose&&"number"==typeof t.statusCode&&t.status===t.statusCode)}),i=t.exports,o=c.codes,s=t.exports.HttpError,o.forEach(function(t){var e,r=h(c[t]);switch(d(t)){case 400:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!0,i}(s,r,t);break;case 500:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!1,i}(s,r,t)}e&&(i[t]=e,i[r]=e)}),i["I'mateapot"]=a.function(i.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')},58633:function(t){"use strict";function e(t,e){if("function"!=typeof t)throw TypeError("argument fn must be a function");return t}function r(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw TypeError("must call property on owner object");if(!n.configurable)throw TypeError("property must be configurable")}/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.exports=function(t){if(!t)throw TypeError("argument namespace is required");function n(t){}return n._file=void 0,n._ignored=!0,n._namespace=t,n._traced=!1,n._warned=Object.create(null),n.function=e,n.property=r,n}},51796:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;let s=o(r(60849)),a=o(r(27812)),u=r(81169),c=r(7746),l=r(25532),h=r(48067),d=r(50169),f=r(73764),p=r(64166),m=o(r(21612));function g(t){return JSON.parse(n.from(t).toString())}function y(t){return n.from(JSON.stringify(t))}class v{constructor(t,e){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=e}get ready(){let t=a.default("Account.ready()");return t("not needed anymore, always ready"),Promise.resolve()}async fetchState(){let t=a.default("Account.fetchState()");t("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(t,e){if(!i.env.NEAR_NO_LOGS)for(let r of e)console.log(`Receipt${r.receiptIds.length>1?"s":""}: ${r.receiptIds.join(", ")}`),this.printLogs(t,r.logs,"	"),r.failure&&console.warn(`	Failure [${t}]: ${r.failure}`)}printLogs(t,e,r=""){if(!i.env.NEAR_NO_LOGS)for(let n of e)console.log(`${r}Log [${t}]: ${n}`)}async signTransaction(t,e){let r=await this.findAccessKey(t,e);if(!r)throw new c.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");let{accessKey:n}=r,i=await this.connection.provider.block({finality:"final"}),o=i.header.hash,s=++n.nonce;return await u.signTransaction(t,s,e,l.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...t){return"string"==typeof t[0]?this.signAndSendTransactionV1(t[0],t[1]):this.signAndSendTransactionV2(t[0])}signAndSendTransactionV1(t,e){let r=a.default("Account.signAndSendTransaction(receiverId, actions");return r("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:t,actions:e})}async signAndSendTransactionV2({receiverId:t,actions:e,returnError:r}){let n,i;let o=await m.default(500,12,1.5,async()=>{[n,i]=await this.signTransaction(t,e);let r=i.transaction.publicKey;try{return await this.connection.provider.sendTransaction(i)}catch(e){if("InvalidNonce"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} with new nonce.`),delete this.accessKeyByPublicKeyCache[r.toString()],null;if("Expired"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} due to expired block hash`),null;throw e.context=new c.ErrorContext(l.baseEncode(n)),e}});if(!o)throw new c.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");let s=[o.transaction_outcome,...o.receipts_outcome].reduce((t,e)=>e.outcome.logs.length||"object"==typeof e.outcome.status&&"object"==typeof e.outcome.status.Failure?t.concat({receiptIds:e.outcome.receipt_ids,logs:e.outcome.logs,failure:void 0!==e.outcome.status.Failure?f.parseRpcError(e.outcome.status.Failure):null}):t,[]);if(this.printLogsAndFailures(i.transaction.receiverId,s),!r&&"object"==typeof o.status&&"object"==typeof o.status.Failure){if(o.status.Failure.error_message&&o.status.Failure.error_type)throw new c.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type);throw f.parseResultError(o)}return o}async findAccessKey(t,e){let r=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!r)return null;let n=this.accessKeyByPublicKeyCache[r.toString()];if(void 0!==n)return{publicKey:r,accessKey:n};try{let t=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:r.toString(),finality:"optimistic"});if(this.accessKeyByPublicKeyCache[r.toString()])return{publicKey:r,accessKey:this.accessKeyByPublicKeyCache[r.toString()]};return this.accessKeyByPublicKeyCache[r.toString()]=t,{publicKey:r,accessKey:t}}catch(t){if("AccessKeyDoesNotExist"==t.type)return null;throw t}}async createAndDeployContract(t,e,r,n){let i=u.fullAccessKey();await this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(n),u.addKey(h.PublicKey.from(e),i),u.deployContract(r)]});let o=new v(this.connection,t);return o}async sendMoney(t,e){return this.signAndSendTransaction({receiverId:t,actions:[u.transfer(e)]})}async createAccount(t,e,r){let n=u.fullAccessKey();return this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(r),u.addKey(h.PublicKey.from(e),n)]})}async deleteAccount(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteAccount(t)]})}async deployContract(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deployContract(t)]})}encodeJSContractArgs(t,e,r){return n.concat([n.from(t),n.from([0]),n.from(e),n.from([0]),n.from(r)])}async functionCall(...t){return"string"==typeof t[0]?this.functionCallV1(t[0],t[1],t[2],t[3],t[4]):this.functionCallV2(t[0])}functionCallV1(t,e,r,n,i){let o=a.default("Account.functionCall(contractId, methodName, args, gas, amount)");return o("use `Account.functionCall(FunctionCallOptions)` instead"),r=r||{},this.validateArgs(r),this.signAndSendTransaction({receiverId:t,actions:[u.functionCall(e,r,n||p.DEFAULT_FUNCTION_CALL_GAS,i)]})}functionCallV2({contractId:t,methodName:e,args:r={},gas:n=p.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:i,walletMeta:o,walletCallbackUrl:s,stringify:a,jsContract:c}){let l;if(this.validateArgs(r),c){let o=this.encodeJSContractArgs(t,e,JSON.stringify(r));l=["call_js_contract",o,n,i,null,!0]}else{let t=void 0===a?u.stringifyJsonOrBytes:a;l=[e,r,n,i,t,!1]}return this.signAndSendTransaction({receiverId:c?this.connection.jsvmAccountId:t,actions:[u.functionCall.apply(void 0,l)],walletMeta:o,walletCallbackUrl:s})}async addKey(t,e,r,n){let i;return r||(r=[]),Array.isArray(r)||(r=[r]),i=e?u.functionCallAccessKey(e,r,n):u.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[u.addKey(h.PublicKey.from(t),i)]})}async deleteKey(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteKey(h.PublicKey.from(t))]})}async stake(t,e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.stake(e,h.PublicKey.from(t))]})}validateArgs(t){let e=void 0!==t.byteLength&&t.byteLength===t.length;if(!e&&(Array.isArray(t)||"object"!=typeof t))throw new d.PositionalArgsError}async viewFunction(t,e,r={},{parse:i=g,stringify:o=y,jsContract:s=!1}={}){let a;this.validateArgs(r),a=s?this.encodeJSContractArgs(t,e,Object.keys(r).length>0?JSON.stringify(r):""):o(r);let u=await this.connection.provider.query({request_type:"call_function",account_id:s?this.connection.jsvmAccountId:t,method_name:s?"view_js_contract":e,args_base64:a.toString("base64"),finality:"optimistic"});return u.logs&&this.printLogs(t,u.logs),u.result&&u.result.length>0&&i(n.from(u.result))}async viewState(t,e={finality:"optimistic"}){let{values:r}=await this.connection.provider.query({request_type:"view_state",...e,account_id:this.accountId,prefix_base64:n.from(t).toString("base64")});return r.map(({key:t,value:e})=>({key:n.from(t,"base64"),value:n.from(e,"base64")}))}async getAccessKeys(){let t=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(t)?t:t.keys}async getAccountDetails(){let t=await this.getAccessKeys(),e=t.filter(t=>"FullAccess"!==t.access_key.permission).map(t=>{let e=t.access_key.permission;return{contractId:e.FunctionCall.receiver_id,amount:e.FunctionCall.allowance,publicKey:t.public_key}});return{authorizedApps:e}}async getAccountBalance(){let t=await this.connection.provider.experimental_protocolConfig({finality:"final"}),e=await this.state(),r=new s.default(t.runtime_config.storage_amount_per_byte),n=new s.default(e.storage_usage).mul(r),i=new s.default(e.locked),o=new s.default(e.amount).add(i),a=o.sub(s.default.max(i,n));return{total:o.toString(),stateStaked:n.toString(),staked:i.toString(),available:a.toString()}}}e.Account=v},93896:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;let n=r(69967);class i{}e.AccountCreator=i;class o extends i{constructor(t,e){super(),this.masterAccount=t,this.initialBalance=e}async createAccount(t,e){await this.masterAccount.createAccount(t,e,this.initialBalance)}}e.LocalAccountCreator=o;class s extends i{constructor(t,e){super(),this.connection=t,this.helperUrl=e}async createAccount(t,e){await n.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:e.toString()}))}}e.UrlAccountCreator=s},93058:function(t,e,r){"use strict";var n,i,o,s,a,u,c=r(48764).Buffer,l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account2FA=e.AccountMultisig=e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=void 0;let h=l(r(60849)),d=l(r(27812)),f=r(51796),p=r(45362),m=r(48067),g=r(81169),y=r(7746),v=r(69967);e.MULTISIG_STORAGE_KEY="__multisigRequest",e.MULTISIG_ALLOWANCE=new h.default(p.parseNearAmount("1")),e.MULTISIG_GAS=new h.default("100000000000000"),e.MULTISIG_DEPOSIT=new h.default("0"),e.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],e.MULTISIG_CONFIRM_METHODS=["confirm"],(n=s=e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})).CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",n.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",n.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",n.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",n.METHOD_NOT_FOUND="Contract method is not found",(i=a=e.MultisigStateStatus||(e.MultisigStateStatus={}))[i.INVALID_STATE=0]="INVALID_STATE",i[i.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",i[i.VALID_STATE=2]="VALID_STATE",i[i.UNKNOWN_STATE=3]="UNKNOWN_STATE",(o=u||(u={}))[o.INVALID_CODE=0]="INVALID_CODE",o[o.VALID_CODE=1]="VALID_CODE",o[o.UNKNOWN_CODE=2]="UNKNOWN_CODE";let w={[e.MULTISIG_STORAGE_KEY]:null};class b extends f.Account{constructor(t,e,r){super(t,e),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}async signAndSendTransactionWithAccount(t,e){return super.signAndSendTransaction({receiverId:t,actions:e})}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:r}){let n;let{accountId:i}=this,o=c.from(JSON.stringify({request:{receiver_id:t,actions:A(r,i,t)}}));try{n=await super.signAndSendTransaction({receiverId:i,actions:[g.functionCall("add_request_and_confirm",o,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(e){if(e.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(t,r);throw e}if(!n.status)throw Error("Request failed");let s={...n.status};if(!s.SuccessValue||"string"!=typeof s.SuccessValue)throw Error("Request failed");return this.setRequest({accountId:i,actions:r,requestId:parseInt(c.from(s.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(n),this.deleteUnconfirmedRequests(),n}async checkMultisigCodeAndStateStatus(t){let r=t?u.UNKNOWN_CODE:u.VALID_CODE;try{return t?await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.deployContract(t),g.functionCall("delete_request",{request_id:4294967295},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]}):await this.deleteRequest(4294967295),{codeStatus:u.VALID_CODE,stateStatus:a.VALID_STATE}}catch(t){if(new RegExp(s.CANNOT_DESERIALIZE_STATE).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.INVALID_STATE};if(new RegExp(s.MULTISIG_NOT_INITIALIZED).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.STATE_NOT_INITIALIZED};if(new RegExp(s.NO_SUCH_REQUEST).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.VALID_STATE};if(new RegExp(s.METHOD_NOT_FOUND).test(t&&t.message))return{codeStatus:u.INVALID_CODE,stateStatus:a.UNKNOWN_STATE};throw t}}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:t},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}async deleteAllRequests(){let t=await this.getRequestIds();t.length&&await Promise.all(t.map(t=>this.deleteRequest(t)))}async deleteUnconfirmedRequests(){let t=await this.getRequestIds(),{requestId:r}=this.getRequest();for(let n of t)if(n!=r)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:n},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(t){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(e.MULTISIG_STORAGE_KEY)||"{}"):w[e.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(e.MULTISIG_STORAGE_KEY,JSON.stringify(t));w[e.MULTISIG_STORAGE_KEY]=t}}e.AccountMultisig=b;class _ extends b{constructor(t,e,r){super(t,e,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}async signAndSendTransaction(...t){if("string"!=typeof t[0])return this.__signAndSendTransaction(t[0]);{let e=d.default("Account.signAndSendTransaction(receiverId, actions");return e("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:t[0],actions:t[1]})}}async __signAndSendTransaction({receiverId:t,actions:e}){await super.signAndSendTransaction({receiverId:t,actions:e}),await this.sendCode();let r=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(r),r}async deployMultisig(t){let{accountId:r}=this,n=(await this.getRecoveryMethods()).data.filter(({kind:t,publicKey:e})=>("phrase"===t||"ledger"===t)&&null!==e).map(t=>t.publicKey),i=(await this.getAccessKeys()).filter(({public_key:t,access_key:{permission:e}})=>"FullAccess"===e&&!n.includes(t)).map(t=>t.public_key).map(M),o=M((await this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),s=c.from(JSON.stringify({num_confirmations:2})),u=[...i.map(t=>g.deleteKey(t)),...i.map(t=>g.addKey(t,g.functionCallAccessKey(r,e.MULTISIG_CHANGE_METHODS,null))),g.addKey(o,g.functionCallAccessKey(r,e.MULTISIG_CONFIRM_METHODS,null)),g.deployContract(t)],l=u.concat(g.functionCall("new",s,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);let{stateStatus:h}=await this.checkMultisigCodeAndStateStatus(t);switch(h){case a.STATE_NOT_INITIALIZED:return await super.signAndSendTransactionWithAccount(r,l);case a.VALID_STATE:return await super.signAndSendTransactionWithAccount(r,u);case a.INVALID_STATE:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}async disableWithFAK({contractBytes:t,cleanupContractBytes:e}){let r=[];e&&(await this.deleteAllRequests().catch(t=>t),r=await this.get2faDisableCleanupActions(e));let n=await this.get2faDisableKeyConversionActions(),i=[...r,...n,g.deployContract(t)],o=await this.findAccessKey(this.accountId,i);if(o&&o.accessKey&&"FullAccess"!==o.accessKey.permission)throw new y.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,i)}async get2faDisableCleanupActions(t){let r=await this.viewState("").catch(t=>{let e=t.cause&&t.cause.name;if("NO_CONTRACT_CODE"==e)return[];throw"TOO_LARGE_CONTRACT_STATE"==e?new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):t}),n=r.map(({key:t})=>t.toString("base64"));return r.length?[g.deployContract(t),g.functionCall("clean",{keys:n},e.MULTISIG_GAS,new h.default("0"))]:[]}async get2faDisableKeyConversionActions(){let{accountId:t}=this,e=await this.getAccessKeys(),r=e.filter(({access_key:t})=>"FullAccess"!==t.permission).filter(({access_key:e})=>{let r=e.permission.FunctionCall;return r.receiver_id===t&&4===r.method_names.length&&r.method_names.includes("add_request_and_confirm")}),n=m.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[g.deleteKey(n),...r.map(({public_key:t})=>g.deleteKey(m.PublicKey.from(t))),...r.map(({public_key:t})=>g.addKey(m.PublicKey.from(t),g.fullAccessKey()))]}async disable(t,e){let r;let{stateStatus:n}=await this.checkMultisigCodeAndStateStatus();if(n!==a.VALID_STATE&&n!==a.STATE_NOT_INITIALIZED)throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");await this.deleteAllRequests().catch(t=>r=t);let i=await this.get2faDisableCleanupActions(e).catch(t=>{if("ContractHasExistingState"===t.type)throw r||t;throw t}),o=[...i,...await this.get2faDisableKeyConversionActions(),g.deployContract(t)];return console.log("disabling 2fa for",this.accountId),await this.signAndSendTransaction({receiverId:this.accountId,actions:o})}async sendCodeDefault(){let{accountId:t}=this,{requestId:e}=this.getRequest(),r=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:t,method:r,requestId:e}),e}async getCodeDefault(t){throw Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){let t=await this.get2faMethod(),e=await this.getCode(t);try{let t=await this.verifyCode(e);return t}catch(t){if(console.warn("Error validating security code:",t),t.toString().includes("invalid 2fa code provided")||t.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw t}}async verifyCodeDefault(t){let{accountId:e}=this,r=this.getRequest();if(!r)throw Error("no request pending");let{requestId:n}=r;return await this.postSignedJson("/2fa/verify",{accountId:e,securityCode:t,requestId:n})}async getRecoveryMethods(){let{accountId:t}=this;return{accountId:t,data:await this.postSignedJson("/account/recoveryMethods",{accountId:t})}}async get2faMethod(){let{data:t}=await this.getRecoveryMethods();if(t&&t.length&&(t=t.find(t=>0===t.kind.indexOf("2fa-"))),!t)return null;let{kind:e,detail:r}=t;return{kind:e,detail:r}}async signatureFor(){let{accountId:t}=this,e=await this.connection.provider.block({finality:"final"}),r=e.header.height.toString(),n=await this.connection.signer.signMessage(c.from(r),t,this.connection.networkId),i=c.from(n.signature).toString("base64");return{blockNumber:r,blockNumberSignature:i}}async postSignedJson(t,e){return await v.fetchJson(this.helperUrl+t,JSON.stringify({...e,...await this.signatureFor()}))}}e.Account2FA=_;let M=t=>m.PublicKey.from(t),E=t=>t.toString().replace("ed25519:",""),A=(t,r,n)=>t.map(t=>{let i=t.enum,{gas:o,publicKey:s,methodName:a,args:u,deposit:l,accessKey:h,code:d}=t[i],f={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:s&&E(s)||void 0,method_name:a,args:u&&c.from(u).toString("base64")||void 0,code:d&&c.from(d).toString("base64")||void 0,amount:l&&l.toString()||void 0,deposit:l&&l.toString()||"0",permission:void 0};if(h&&(n===r&&"fullAccess"!==h.permission.enum&&(f.permission={receiver_id:r,allowance:e.MULTISIG_ALLOWANCE.toString(),method_names:e.MULTISIG_CHANGE_METHODS}),"functionCall"===h.permission.enum)){let{receiverId:t,methodNames:e,allowance:r}=h.permission.functionCall;f.permission={receiver_id:t,allowance:r&&r.toString()||void 0,method_names:e}}return f})},59534:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;let n=r(55290);async function i(t){return new n.Near(t)}e.connect=i},84854:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=o(r(3989)),s(r(43521),e),s(r(59534),e),r(58010)},43521:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.WalletAccount=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;let s=o(r(7746));e.providers=s;let a=o(r(40577));e.utils=a;let u=o(r(81169));e.transactions=u;let c=o(r(50835));e.validators=c;let l=r(51796);Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return l.Account}});let h=o(r(93058));e.multisig=h;let d=o(r(93896));e.accountCreator=d;let f=r(84006);Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return f.Connection}});let p=r(31652);Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return p.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return p.InMemorySigner}});let m=r(41013);Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return m.Contract}});let g=r(48067);Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}});let y=r(55290);Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return y.Near}});let v=r(87099);Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletAccount",{enumerable:!0,get:function(){return v.WalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},84006:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;let n=r(7746),i=r(31652);class o{constructor(t,e,r,n){this.networkId=t,this.provider=e,this.signer=r,this.jsvmAccountId=n}static fromConfig(t){let e=function(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new n.JsonRpcProvider({...t.args});default:throw Error(`Unknown provider type ${t.type}`)}}(t.provider),r=function(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new i.InMemorySigner(t.keyStore);default:throw Error(`Unknown signer type ${t.type}`)}}(t.signer);return new o(t.networkId,e,r,t.jsvmAccountId)}}e.Connection=o},64166:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FUNCTION_CALL_GAS=void 0;let i=n(r(60849));e.DEFAULT_FUNCTION_CALL_GAS=new i.default("30000000000000")},41013:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;let i=n(r(60849)),o=n(r(27812)),s=r(7746),a=r(50169);function u(t,e){return({[t]:(...t)=>e(...t)})[t]}let c=t=>t&&void 0!==t.byteLength&&t.byteLength===t.length,l=t=>"[object Object]"===Object.prototype.toString.call(t);class h{constructor(t,e,r){this.account=t,this.contractId=e;let{viewMethods:n=[],changeMethods:i=[]}=r;n.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(e={},r={},...n)=>{if(n.length||!(l(e)||c(e))||!l(r))throw new a.PositionalArgsError;return this.account.viewFunction(this.contractId,t,e,r)})})}),i.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(...e)=>{if(e.length&&(e.length>3||!(l(e[0])||c(e[0]))))throw new a.PositionalArgsError;if(e.length>1||!(e[0]&&e[0].args)){let r=o.default("contract.methodName(args, gas, amount)");return r("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:t,args:e[0],gas:e[1],amount:e[2]})}return this._changeMethod({methodName:t,...e[0]})})})})}async _changeMethod({args:t,methodName:e,gas:r,amount:n,meta:o,callbackUrl:u}){!function(t){for(let e of Object.keys(t)){let r=t[e];if(r&&!i.default.isBN(r)&&isNaN(r))throw new a.ArgumentTypeError(e,"number, decimal string or BN",r)}}({gas:r,amount:n});let c=await this.account.functionCall({contractId:this.contractId,methodName:e,args:t,gas:r,attachedDeposit:n,walletMeta:o,walletCallbackUrl:u});return s.getTransactionLastResult(c)}}e.Contract=h},3989:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;let n=r(71860);Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});let i=r(64674);Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return i.InMemoryKeyStore}});let o=r(50827);Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return o.BrowserLocalStorageKeyStore}});let s=r(134);Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},50827:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;let n=r(71860),i=r(48067);class o extends n.KeyStore{constructor(t=window.localStorage,e="near-api-js:keystore:"){super(),this.localStorage=t,this.prefix=e}async setKey(t,e,r){this.localStorage.setItem(this.storageKeyForSecretKey(t,e),r.toString())}async getKey(t,e){let r=this.localStorage.getItem(this.storageKeyForSecretKey(t,e));return r?i.KeyPair.fromString(r):null}async removeKey(t,e){this.localStorage.removeItem(this.storageKeyForSecretKey(t,e))}async clear(){for(let t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)}async getNetworks(){let t=new Set;for(let e of this.storageKeys())if(e.startsWith(this.prefix)){let r=e.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())}async getAccounts(t){let e=[];for(let r of this.storageKeys())if(r.startsWith(this.prefix)){let n=r.substring(this.prefix.length).split(":");n[1]===t&&e.push(n[0])}return e}storageKeyForSecretKey(t,e){return`${this.prefix}${e}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}e.BrowserLocalStorageKeyStore=o},64674:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;let n=r(71860),i=r(48067);class o extends n.KeyStore{constructor(){super(),this.keys={}}async setKey(t,e,r){this.keys[`${e}:${t}`]=r.toString()}async getKey(t,e){let r=this.keys[`${e}:${t}`];return r?i.KeyPair.fromString(r):null}async removeKey(t,e){delete this.keys[`${e}:${t}`]}async clear(){this.keys={}}async getNetworks(){let t=new Set;return Object.keys(this.keys).forEach(e=>{let r=e.split(":");t.add(r[1])}),Array.from(t.values())}async getAccounts(t){let e=[];return Object.keys(this.keys).forEach(r=>{let n=r.split(":");n[n.length-1]===t&&e.push(n.slice(0,n.length-1).join(":"))}),e}toString(){return"InMemoryKeyStore"}}e.InMemoryKeyStore=o},71860:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;class r{}e.KeyStore=r},134:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;let n=r(71860);class i extends n.KeyStore{constructor(t,e={writeKeyStoreIndex:0}){super(),this.options=e,this.keyStores=t}async setKey(t,e,r){await this.keyStores[this.options.writeKeyStoreIndex].setKey(t,e,r)}async getKey(t,e){for(let r of this.keyStores){let n=await r.getKey(t,e);if(n)return n}return null}async removeKey(t,e){for(let r of this.keyStores)await r.removeKey(t,e)}async clear(){for(let t of this.keyStores)await t.clear()}async getNetworks(){let t=new Set;for(let e of this.keyStores)for(let r of(await e.getNetworks()))t.add(r);return Array.from(t)}async getAccounts(t){let e=new Set;for(let r of this.keyStores)for(let n of(await r.getAccounts(t)))e.add(n);return Array.from(e)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}e.MergeKeyStore=i},55290:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;let i=n(r(60849)),o=r(51796),s=r(84006),a=r(41013),u=r(93896);class c{constructor(t){if(this.config=t,this.connection=s.Connection.fromConfig({networkId:t.networkId,provider:{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||t.deps&&t.deps.keyStore},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){let e=new i.default(t.initialBalance?t.initialBalance:"500000000000000000000000000");this.accountCreator=new u.LocalAccountCreator(new o.Account(this.connection,t.masterAccount),e)}else t.helperUrl?this.accountCreator=new u.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}async account(t){let e=new o.Account(this.connection,t);return e}async createAccount(t,e){if(!this.accountCreator)throw Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(t,e),new o.Account(this.connection,t)}async loadContract(t,e){let r=new o.Account(this.connection,e.sender);return new a.Contract(r,t,e)}async sendTokens(t,e,r){console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead.");let n=new o.Account(this.connection,e),i=await n.sendMoney(r,t);return i.transaction_outcome.id}}e.Near=c},7746:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.JsonRpcProvider=e.Provider=void 0;let n=r(75834);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}});let i=r(41578);Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return i.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}})},41578:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.ErrorContext=e.TypedError=void 0;let s=o(r(27812)),a=r(75834),u=r(69967),c=r(50169);Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return c.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return c.ErrorContext}});let l=r(25532),h=o(r(21612)),d=r(73764),f=123;class p extends a.Provider{constructor(t){if(super(),null!=t&&"object"==typeof t)this.connection=t;else{let e=s.default("JsonRpcProvider(url?: string)");e("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:t}}}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_commit",[n.from(e).toString("base64")])}async sendTransactionAsync(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_async",[n.from(e).toString("base64")])}async txStatus(t,e){return"string"==typeof t?this.txStatusString(t,e):this.txStatusUint8Array(t,e)}async txStatusUint8Array(t,e){return this.sendJsonRpc("tx",[l.baseEncode(t),e])}async txStatusString(t,e){return this.sendJsonRpc("tx",[t,e])}async txStatusReceipts(t,e){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[l.baseEncode(t),e])}async query(...t){let e;if(1===t.length)e=await this.sendJsonRpc("query",t[0]);else{let[r,n]=t;e=await this.sendJsonRpc("query",[r,n])}if(e&&e.error)throw new c.TypedError(`Querying ${t} failed: ${e.error}.
${JSON.stringify(e,null,2)}`,d.getErrorTypeFromErrorMessage(e.error));return e}async block(t){let{finality:e}=t,{blockId:r}=t;if("object"!=typeof t){let e=s.default("JsonRpcProvider.block(blockId)");e("use `block({ blockId })` or `block({ finality })` instead"),r=t}return this.sendJsonRpc("block",{block_id:r,finality:e})}async blockChanges(t){let{finality:e}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:e})}async chunk(t){return this.sendJsonRpc("chunk",[t])}async validators(t){return this.sendJsonRpc("validators",[t])}async experimental_genesisConfig(){let t=s.default("JsonRpcProvider.experimental_protocolConfig()");return t("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(t){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",t)}async experimental_lightClientProof(t){let e=s.default("JsonRpcProvider.experimental_lightClientProof(request)");return e("use `lightClientProof` instead"),await this.lightClientProof(t)}async lightClientProof(t){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)}async accessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:n,finality:r})}async singleAccessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:n,finality:r})}async accountChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:n,finality:r})}async contractStateChanges(t,e,r=""){let{finality:n}=e,{blockId:i}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:r,block_id:i,finality:n})}async contractCodeChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:n,finality:r})}async gasPrice(t){return await this.sendJsonRpc("gas_price",[t])}async sendJsonRpc(t,e){let r=await h.default(500,12,1.5,async()=>{try{let r={method:t,params:e,id:f++,jsonrpc:"2.0"},n=await u.fetchJson(this.connection,JSON.stringify(r));if(n.error){if("object"==typeof n.error.data){if("string"==typeof n.error.data.error_message&&"string"==typeof n.error.data.error_type)throw new c.TypedError(n.error.data.error_message,n.error.data.error_type);throw d.parseRpcError(n.error.data)}{let t=`[${n.error.code}] ${n.error.message}: ${n.error.data}`;if("Timeout"===n.error.data||t.includes("Timeout error")||t.includes("query has timed out"))throw new c.TypedError(t,"TimeoutError");throw new c.TypedError(t,d.getErrorTypeFromErrorMessage(n.error.data))}}return n}catch(r){if("TimeoutError"===r.type)return i.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${t} as it has timed out`,e),null;throw r}}),{result:n}=r;if(void 0===n)throw new c.TypedError(`Exceeded 12 attempts for request to ${t}.`,"RetriesExceeded");return n}}e.JsonRpcProvider=p},75834:function(t,e,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionLastResult=e.Provider=e.IdType=e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,(n=e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})).Unknown="Unknown",n.Pending="Pending",n.Failure="Failure",(i=e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={})).NotStarted="NotStarted",i.Started="Started",i.Failure="Failure",(o=e.IdType||(e.IdType={})).Transaction="transaction",o.Receipt="receipt";class a{}e.Provider=a,e.getTransactionLastResult=function(t){if("object"==typeof t.status&&"string"==typeof t.status.SuccessValue){let e=s.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch(t){return e}}return null}},31652:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySigner=e.Signer=void 0;let i=n(r(72023)),o=r(48067),s=r(64674);class a{}e.Signer=a;class u extends a{constructor(t){super(),this.keyStore=t}static async fromKeyPair(t,e,r){let n=new s.InMemoryKeyStore;return await n.setKey(t,e,r),new u(n)}async createKey(t,e){let r=o.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(e,t,r),r.getPublicKey()}async getPublicKey(t,e){let r=await this.keyStore.getKey(e,t);return null===r?null:r.getPublicKey()}async signMessage(t,e,r){let n=new Uint8Array(i.default.sha256.array(t));if(!e)throw Error("InMemorySigner requires provided account id");let o=await this.keyStore.getKey(r,e);if(null===o)throw Error(`Key for ${e} not found in ${r}`);return o.sign(n)}toString(){return`InMemorySigner(${this.keyStore})`}}e.InMemorySigner=u},81169:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.signTransaction=e.createTransaction=e.SCHEMA=e.Action=e.SignedTransaction=e.Transaction=e.Signature=e.deleteAccount=e.deleteKey=e.addKey=e.stake=e.transfer=e.functionCall=e.stringifyJsonOrBytes=e.deployContract=e.createAccount=e.DeleteAccount=e.DeleteKey=e.AddKey=e.Stake=e.Transfer=e.FunctionCall=e.DeployContract=e.CreateAccount=e.IAction=e.functionCallAccessKey=e.fullAccessKey=e.AccessKey=e.AccessKeyPermission=e.FullAccessPermission=e.FunctionCallPermission=void 0;let o=i(r(72023)),s=r(64766),a=r(25532),u=r(48067);class c extends s.Assignable{}e.FunctionCallPermission=c;class l extends s.Assignable{}e.FullAccessPermission=l;class h extends s.Enum{}e.AccessKeyPermission=h;class d extends s.Assignable{}e.AccessKey=d,e.fullAccessKey=function(){return new d({nonce:0,permission:new h({fullAccess:new l({})})})},e.functionCallAccessKey=function(t,e,r){return new d({nonce:0,permission:new h({functionCall:new c({receiverId:t,allowance:r,methodNames:e})})})};class f extends s.Assignable{}e.IAction=f;class p extends f{}e.CreateAccount=p;class m extends f{}e.DeployContract=m;class g extends f{}e.FunctionCall=g;class y extends f{}e.Transfer=y;class v extends f{}e.Stake=v;class w extends f{}e.AddKey=w;class b extends f{}e.DeleteKey=b;class _ extends f{}function M(t){let e=void 0!==t.byteLength&&t.byteLength===t.length,r=e?t:n.from(JSON.stringify(t));return r}e.DeleteAccount=_,e.createAccount=function(){return new I({createAccount:new p({})})},e.deployContract=function(t){return new I({deployContract:new m({code:t})})},e.stringifyJsonOrBytes=M,e.functionCall=function(t,e,r,n,i=M,o=!1){return new I(o?{functionCall:new g({methodName:t,args:e,gas:r,deposit:n})}:{functionCall:new g({methodName:t,args:i(e),gas:r,deposit:n})})},e.transfer=function(t){return new I({transfer:new y({deposit:t})})},e.stake=function(t,e){return new I({stake:new v({stake:t,publicKey:e})})},e.addKey=function(t,e){return new I({addKey:new w({publicKey:t,accessKey:e})})},e.deleteKey=function(t){return new I({deleteKey:new b({publicKey:t})})},e.deleteAccount=function(t){return new I({deleteAccount:new _({beneficiaryId:t})})};class E extends s.Assignable{}e.Signature=E;class A extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,A,t)}}e.Transaction=A;class S extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,S,t)}}e.SignedTransaction=S;class I extends s.Enum{}function T(t,e,r,n,i,o){return new A({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:i,blockHash:o})}async function k(t,r,n,i){let s=a.serialize(e.SCHEMA,t),u=new Uint8Array(o.default.sha256.array(s)),c=await r.signMessage(s,n,i),l=new S({transaction:t,signature:new E({keyType:t.publicKey.keyType,data:c.signature})});return[u,l]}async function N(...t){if(t[0].constructor===A){let[e,r,n,i]=t;return k(e,r,n,i)}{let[e,r,n,i,o,s,a]=t,u=await o.getPublicKey(s,a),c=T(s,u,e,r,n,i);return k(c,o,s,a)}}e.Action=I,e.SCHEMA=new Map([[E,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",A],["signature",E]]}],[A,{kind:"struct",fields:[["signerId","string"],["publicKey",u.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[I]]]}],[u.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[d,{kind:"struct",fields:[["nonce","u64"],["permission",h]]}],[h,{kind:"enum",field:"enum",values:[["functionCall",c],["fullAccess",l]]}],[c,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[l,{kind:"struct",fields:[]}],[I,{kind:"enum",field:"enum",values:[["createAccount",p],["deployContract",m],["functionCall",g],["transfer",y],["stake",v],["addKey",w],["deleteKey",b],["deleteAccount",_]]}],[p,{kind:"struct",fields:[]}],[m,{kind:"struct",fields:[["code",["u8"]]]}],[g,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[v,{kind:"struct",fields:[["stake","u128"],["publicKey",u.PublicKey]]}],[w,{kind:"struct",fields:[["publicKey",u.PublicKey],["accessKey",d]]}],[b,{kind:"struct",fields:[["publicKey",u.PublicKey]]}],[_,{kind:"struct",fields:[["beneficiaryId","string"]]}]]),e.createTransaction=T,e.signTransaction=N},64766:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assignable=e.Enum=void 0;class r{constructor(t){if(1!==Object.keys(t).length)throw Error("Enum can only take single value");Object.keys(t).map(e=>{this[e]=t[e],this.enum=e})}}e.Enum=r;class n{constructor(t){Object.keys(t).map(e=>{this[e]=t[e]})}}e.Assignable=n},50169:function(t,e,r){"use strict";var n=r(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.ErrorContext=e.TypedError=e.ArgumentTypeError=e.PositionalArgsError=void 0;class i extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}e.PositionalArgsError=i;class o extends Error{constructor(t,e,r){super(`Expected ${e} for '${t}' argument, but got '${JSON.stringify(r)}'`)}}e.ArgumentTypeError=o;class s extends Error{constructor(t,e,r){super(t),this.type=e||"UntypedError",this.context=r}}e.TypedError=s;class a{constructor(t){this.transactionHash=t}}e.ErrorContext=a,e.logWarning=function(...t){n.env.NEAR_NO_LOGS||console.warn(...t)}},21612:function(t,e){"use strict";async function r(t,e,r,n){let i=t;for(let t=0;t<e;t++){let t=await n();if(t)return t;await function(t){return new Promise(e=>setTimeout(e,t))}(i),i*=r}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},45362:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;let i=n(r(60849));e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=new i.default("10",10).pow(new i.default(e.NEAR_NOMINATION_EXP,10));let o=[],s=new i.default(10);for(let t=0,r=new i.default(5);t<e.NEAR_NOMINATION_EXP;t++,r=r.mul(s))o[t]=r;e.formatNearAmount=function(t,r=e.NEAR_NOMINATION_EXP){let n=new i.default(t,10);if(r!==e.NEAR_NOMINATION_EXP){let t=e.NEAR_NOMINATION_EXP-r-1;t>0&&n.iadd(o[t])}t=n.toString();let s=t.substring(0,t.length-e.NEAR_NOMINATION_EXP)||"0",a=t.substring(t.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,r);return`${(function(t){let e=/(-?\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t})(s)}.${a}`.replace(/\.?0*$/,"")},e.parseNearAmount=function(t){var r;if(!t)return null;t=t.replace(/,/g,"").trim();let n=t.split("."),i=n[0],o=n[1]||"";if(n.length>2||o.length>e.NEAR_NOMINATION_EXP)throw Error(`Cannot parse '${t}' as NEAR amount`);return""===(r=(r=i+o.padEnd(e.NEAR_NOMINATION_EXP,"0")).replace(/^0+/,""))?"0":r}},40577:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;let s=o(r(48067));e.key_pair=s;let a=o(r(14455));e.serialize=a;let u=o(r(69967));e.web=u;let c=o(r(64766));e.enums=c;let l=o(r(45362));e.format=l;let h=o(r(73764));e.rpc_errors=h;let d=r(48067);Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return d.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return d.KeyPairEd25519}});let f=r(50169);Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return f.logWarning}})},48067:function(t,e,r){"use strict";var n,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.KeyType=void 0;let s=o(r(50780)),a=r(14455),u=r(64766);(n=i=e.KeyType||(e.KeyType={}))[n.ED25519=0]="ED25519";class c extends u.Assignable{static from(t){return"string"==typeof t?c.fromString(t):t}static fromString(t){let e=t.split(":");if(1===e.length)return new c({keyType:i.ED25519,data:a.base_decode(e[0])});if(2===e.length)return new c({keyType:function(t){if("ed25519"===t.toLowerCase())return i.ED25519;throw Error(`Unknown key type ${t}`)}(e[0]),data:a.base_decode(e[1])});throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${function(t){if(t===i.ED25519)return"ed25519";throw Error(`Unknown key type ${t}`)}(this.keyType)}:${a.base_encode(this.data)}`}verify(t,e){if(this.keyType===i.ED25519)return s.default.sign.detached.verify(t,e,this.data);throw Error(`Unknown key type ${this.keyType}`)}}e.PublicKey=c;class l{static fromRandom(t){if("ED25519"===t.toUpperCase())return h.fromRandom();throw Error(`Unknown curve ${t}`)}static fromString(t){let e=t.split(":");if(1===e.length)return new h(e[0]);if(2===e.length){if("ED25519"===e[0].toUpperCase())return new h(e[1]);throw Error(`Unknown curve: ${e[0]}`)}throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}}e.KeyPair=l;class h extends l{constructor(t){super();let e=s.default.sign.keyPair.fromSecretKey(a.base_decode(t));this.publicKey=new c({keyType:i.ED25519,data:e.publicKey}),this.secretKey=t}static fromRandom(){let t=s.default.sign.keyPair();return new h(a.base_encode(t.secretKey))}sign(t){let e=s.default.sign.detached(t,a.base_decode(this.secretKey));return{signature:e,publicKey:this.publicKey}}verify(t,e){return this.publicKey.verify(t,e)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}e.KeyPairEd25519=h},73764:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=e.ServerError=void 0;let i=n(r(466)),o=n(r(34639)),s=n(r(79731)),a=r(43521),u=r(50169),c={formatNear:()=>(t,e)=>a.utils.format.formatNearAmount(e(t))};class l extends u.TypedError{}e.ServerError=l;class h extends l{}function d(t){let e={},r=function t(e,r,n,i){let o,s,a;for(let t in r){var u;if(u=e[t],"[object String]"===Object.prototype.toString.call(u))return e[t];if(p(e[t]))o=e[t],s=r[t],a=t;else{if(!(p(e.kind)&&p(e.kind[t])))continue;o=e.kind[t],s=r[t],a=t}}if(!o||!s)return n.kind=e,i;for(let t of Object.keys(s.props))n[t]=o[t];return t(o,r,n,a)}(t,o.default.schema,e,""),n=new l(f(r,e),r);return Object.assign(n,e),n}function f(t,e){return"string"==typeof s.default[t]?i.default.render(s.default[t],{...e,...c}):JSON.stringify(e)}function p(t){return"[object Object]"===Object.prototype.toString.call(t)}e.parseRpcError=d,e.parseResultError=function(t){let e=d(t.status.Failure),r=new h;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r},e.formatError=f,e.getErrorTypeFromErrorMessage=function(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}},14455:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25532);Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},69967:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;let i=n(r(84442)),o=n(r(21612)),s=r(7746),a=r(50169);async function u(t,e){let r={url:null};"string"==typeof t?r.url=t:r=t;let n=await o.default(1e3,10,1.5,async()=>{try{let t=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!t.ok){if(503===t.status)return a.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw i.default(t.status,await t.text())}return t}catch(t){if(t.toString().includes("FetchError")||t.toString().includes("Failed to fetch"))return a.logWarning(`Retrying HTTP request for ${r.url} because of error: ${t}`),null;throw t}});if(!n)throw new s.TypedError(`Exceeded 10 attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}e.fetchJson=u},50835:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.diffEpochValidators=e.findSeatPrice=void 0;let i=n(r(60849)),o=n(r(27812));e.findSeatPrice=function(t,e,r,n){if(n&&n<49)return function(t,e){let r=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),n=new i.default(e),o=r.reduce((t,e)=>t.add(e));if(o.lt(n))throw Error("Stakes are below seats");let s=new i.default(1),a=o.add(new i.default(1));for(;!s.eq(a.sub(new i.default(1)));){let t=s.add(a).div(new i.default(2)),e=!1,o=new i.default(0);for(let i=0;i<r.length;++i)if((o=o.add(r[i].div(t))).gte(n)){s=t,e=!0;break}e||(a=t)}return s}(t,e);if(!r){let t=o.default("findSeatPrice(validators, maxNumberOfSeats)");t("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]}return function(t,e,r){if(2!=r.length)throw Error("minimumStakeRatio should have 2 elements");let n=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),o=n.reduce((t,e)=>t.add(e));return t.length<e?o.mul(new i.default(r[0])).div(new i.default(r[1])):n[0].add(new i.default(1))}(t,e,r)},e.diffEpochValidators=function(t,e){let r=new Map;t.forEach(t=>r.set(t.account_id,t));let n=new Set(e.map(t=>t.account_id));return{newValidators:e.filter(t=>!r.has(t.account_id)),removedValidators:t.filter(t=>!n.has(t.account_id)),changedValidators:e.filter(t=>r.has(t.account_id)&&r.get(t.account_id).stake!=t.stake).map(t=>({current:r.get(t.account_id),next:t}))}}},87099:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectedWalletAccount=e.WalletAccount=e.WalletConnection=void 0;let o=i(r(27812)),s=r(51796),a=r(81169),u=r(40577),c=r(25532),l=r(25532),h="pending_key";class d{constructor(t,e){this._near=t;let r=e+"_wallet_auth_key",n=JSON.parse(window.localStorage.getItem(r));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,e=e||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=n||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(t={},e,r,n){let i;if("string"==typeof t){let e=o.default("requestSignIn(contractId, title)");e("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),i={contractId:t,successUrl:r,failureUrl:n}}else i=t;let s=new URL(window.location.href),a=new URL(this._walletBaseUrl+"/login/");if(a.searchParams.set("success_url",i.successUrl||s.href),a.searchParams.set("failure_url",i.failureUrl||s.href),i.contractId){let t=await this._near.account(i.contractId);await t.state(),a.searchParams.set("contract_id",i.contractId);let e=u.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",e.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,h+e.getPublicKey(),e)}i.methodNames&&i.methodNames.forEach(t=>{a.searchParams.append("methodNames",t)}),window.location.assign(a.toString())}async requestSignTransactions(...t){if(Array.isArray(t[0])){let e=o.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)");return e("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:t[0],callbackUrl:t[1],meta:t[2]})}return this._requestSignTransactions(t[0])}async _requestSignTransactions({transactions:t,meta:e,callbackUrl:r}){let i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",t.map(t=>l.serialize(a.SCHEMA,t)).map(t=>n.from(t).toString("base64")).join(",")),o.searchParams.set("callbackUrl",r||i.href),e&&o.searchParams.set("meta",e),window.location.assign(o.toString())}async _completeSignInWithAccessKey(){let t=new URL(window.location.href),e=t.searchParams.get("public_key")||"",r=(t.searchParams.get("all_keys")||"").split(","),n=t.searchParams.get("account_id")||"";n&&(this._authData={accountId:n,allKeys:r},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),e&&await this._moveKeyFromTempToPermanent(n,e)),t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())}async _moveKeyFromTempToPermanent(t,e){let r=await this._keyStore.getKey(this._networkId,h+e);await this._keyStore.setKey(this._networkId,t,r),await this._keyStore.removeKey(this._networkId,h+e)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new f(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}e.WalletConnection=d,e.WalletAccount=d;class f extends s.Account{constructor(t,e,r){super(e,r),this.walletConnection=t}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:e,walletMeta:r,walletCallbackUrl:n=window.location.href}){let i=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId),o=await this.accessKeyForTransaction(t,e,i);if(!o)throw Error(`Cannot find matching key for transaction sent to ${t}`);if(i&&i.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:t,actions:e})}catch(r){if("NotEnoughAllowance"===r.type)o=await this.accessKeyForTransaction(t,e);else throw r}let s=await this.connection.provider.block({finality:"final"}),l=c.baseDecode(s.header.hash),h=u.PublicKey.from(o.public_key),d=o.access_key.nonce+1,f=a.createTransaction(this.accountId,h,t,d,e,l);return await this.walletConnection.requestSignTransactions({transactions:[f],meta:r,callbackUrl:n}),new Promise((t,e)=>{setTimeout(()=>{e(Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(t,e,r){let{access_key:{permission:n}}=t;if("FullAccess"===n)return!0;if(n.FunctionCall){let{receiver_id:t,method_names:i}=n.FunctionCall;if(t===this.accountId&&i.includes("add_request_and_confirm"))return!0;if(t===e){if(1!==r.length)return!1;let[{functionCall:t}]=r;return t&&(!t.deposit||"0"===t.deposit.toString())&&(0===i.length||i.includes(t.methodName))}}return!1}async accessKeyForTransaction(t,e,r){let n=await this.getAccessKeys();if(r){let i=n.find(t=>t.public_key.toString()===r.toString());if(i&&await this.accessKeyMatchesTransaction(i,t,e))return i}let i=this.walletConnection._authData.allKeys;for(let r of n)if(-1!==i.indexOf(r.public_key)&&await this.accessKeyMatchesTransaction(r,t,e))return r;return null}}e.ConnectedWalletAccount=f},60849:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(61821).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(t);r=(h=h.idivn(l)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},h&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=t.allocUnsafe?t.allocUnsafe(o):new t(o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e){this.x=t,this.y=e}Math.imul||(g=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?m(this,t,e):y(this,t,e)},v.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},v.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r._strip(),i._strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=67108864%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(_,b),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(M,b),i(E,b),i(A,b),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(w[t])return w[t];if("k256"===t)e=new _;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else if("p25519"===t)e=new A;else throw Error("Unknown prime "+t);return w[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,S),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},82737:function(t,e,r){"use strict";/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i=r(85398);function o(t){if("number"==typeof t){if(!o[t])throw Error("invalid status code: "+t);return t}if("string"!=typeof t)throw TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!o[e])throw Error("invalid status code: "+e);return e}if(!(e=o[t.toLowerCase()]))throw Error('invalid status message: "'+t+'"');return e}t.exports=o,o.STATUS_CODES=i,o.codes=(n=[],Object.keys(i).forEach(function(t){var e=i[t],r=Number(t);o[r]=e,o[e]=r,o[e.toLowerCase()]=r,n.push(r)}),n),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},70915:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkUnlock=e.unlock=e.proofAlreadyUsed=e.checkSync=e.checkFinality=e.checkBurn=e.burn=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.parseBurnReceipt=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=r(58180),c=r(20548),l=a(r(77191)),h=r(19421),d=r(14521),f=r(93694),p=r(57206),m=s(r(22241)),g=r(16247),y=r(22326),v=r(41249);e.SOURCE_NETWORK="aurora",e.DESTINATION_NETWORK="ethereum",e.TRANSFER_TYPE="@near-eth/aurora-ether/bridged-ether/sendToEthereum";let w="burn-bridged-ether-to-ethereum",b="await-finality-bridged-ether-to-ethereum",_="sync-bridged-ether-to-ethereum",M="unlock-bridged-ether-to-ethereum",E=[w,b,_,M];class A extends Error{}let S={completedStep:null,errors:[],status:m.ACTION_NEEDED,type:e.TRANSFER_TYPE,finalityBlockHeights:[],nearOnEthClientBlockHeight:null,burnHashes:[],burnReceipts:[],nearBurnHashes:[],nearBurnReceiptIds:[],nearBurnReceiptBlockHeights:[],unlockHashes:[],unlockReceipts:[]};async function I(t){switch(t.completedStep){case null:return await C(t);case b:return await B(t);case _:return await K(t);default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function T(t){switch(t.completedStep){case null:return await R(t);case w:return await L(t);case b:return await B(t);case _:return await F(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function k(t,e){let r=t.transaction_outcome.outcome.receipt_ids;if(1!==r.length)throw new A(`Burn expects only one receipt, got ${r.length}.
      Full withdrawal transaction: ${JSON.stringify(t)}`);let n=r[0],i=t.receipts_outcome.find(t=>t.id===n).outcome,o=i.receipt_ids[0],s=t.receipts_outcome.find(t=>t.id===o).block_hash,a=await e.block({blockId:s}),u=Number(a.header.height);return{id:o,blockHeight:u}}async function N({fromBlock:t,toBlock:e,sender:r,options:n}){var i,o;n=null!=n?n:{};let s=(0,g.getBridgeParams)(),a=null!==(i=n.provider)&&void 0!==i?i:(0,g.getAuroraProvider)(),u={address:null!==(o=n.etherExitToEthereumPrecompile)&&void 0!==o?o:s.etherExitToEthereumPrecompile,fromBlock:t,toBlock:e,topics:[y.EXIT_TO_ETHEREUM_SIGNATURE,c.ethers.utils.hexZeroPad(r,32)]},l=await a.getLogs(u);return l.map(t=>t.transactionHash)}async function x({fromBlock:t,toBlock:e,sender:r,options:n}){let i=await N({fromBlock:t,toBlock:e,sender:r,options:n}),o=await Promise.all(i.map(async t=>await P(t,r,n)));return o}async function P(t,e="todo",r){var i,o,s,a,u;let f,p,m;r=null!=r?r:{};let v=(0,g.getBridgeParams)(),b=null!==(s=null!==(i=r.nearProvider)&&void 0!==i?i:null===(o=r.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,g.getNearProvider)(),_="NA";if(/^0x[A-Fa-f0-9]{64}$/.test(t)){let e=null!==(a=r.auroraProvider)&&void 0!==a?a:(0,g.getAuroraProvider)(),i=await e.send("eth_getTransactionReceipt",[t]);p=n.from(i.nearTransactionHash.slice(2),"hex"),f=l.default.encode(p);let o=i.logs.find(t=>t.topics[0]===y.EXIT_TO_ETHEREUM_SIGNATURE);_="0x"+o.topics[1].slice(26),m=t}else f=t,p=h.utils.serialize.base_decode(f);let M=await b.txStatus(p,e);if(m||(m=c.ethers.utils.keccak256(n.from(M.transaction.actions[0].FunctionCall.args,"base64"))),M.status.Unknown)throw Error(`Withdraw transaction pending: ${f}`);if(M.status.Failure)throw Error(`Withdraw transaction failed: ${f}`);class E{constructor(t){Object.assign(this,t)}}let A=new Map([[E,{kind:"struct",fields:[["amount","u128"],["recipient_id",[20]],["eth_custodian_address",[20]]]}]]),I=M.receipts_outcome[1].outcome.status.SuccessValue,T=(0,d.deserialize)(A,E,n.from(I,"base64")),N=T.amount.toString(),x="0x"+n.from(T.recipient_id).toString("hex"),P=n.from(T.eth_custodian_address).toString("hex"),O=null!==(u=r.etherCustodianAddress)&&void 0!==u?u:v.etherCustodianAddress;if(P!==O.slice(2).toLowerCase())throw Error(`Unexpected ether custodian: got${P},
      expected ${O}`);let C=await k(M,b),R=await b.block({blockId:M.transaction_outcome.block_hash}),L={...S,id:Math.random().toString().slice(2),startTime:new Date(R.header.timestamp/1e6).toISOString(),amount:N,completedStep:w,destinationTokenName:"ETH",recipient:x,sender:_,sourceToken:"ETH",sourceTokenName:"aETH",symbol:"ETH",decimals:18,burnHashes:[m],nearBurnHashes:[f],nearBurnReceiptIds:[C.id],nearBurnReceiptBlockHeights:[C.blockHeight]};return await B(L,r)}async function O({amount:t,recipient:e,options:r}){var n,i,o,s,a;r=null!=r?r:{};let u=null!==(n=r.symbol)&&void 0!==n?n:"ETH",c=null!==(i=r.decimals)&&void 0!==i?i:18,l=null!==(o=r.provider)&&void 0!==o?o:(0,g.getSignerProvider)(),h=null!==(s=r.signer)&&void 0!==s?s:l.getSigner(),d=null!==(a=r.sender)&&void 0!==a?a:(await h.getAddress()).toLowerCase(),p={...S,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),destinationTokenName:u,recipient:e,sender:d,sourceToken:u,sourceTokenName:"a"+u,symbol:u,decimals:c};return p=await C(p,r),"undefined"!=typeof window&&(p=await (0,f.track)(p)),p}async function C(t,e){var r,n,i,o,s;let a;e=null!=e?e:{};let u=(0,g.getBridgeParams)(),l=null!==(r=e.provider)&&void 0!==r?r:(0,g.getSignerProvider)(),h=(await l.getNetwork()).chainId,d=null!==(n=e.auroraChainId)&&void 0!==n?n:u.auroraChainId;if(h!==d)throw Error(`Wrong aurora network for burn, expected: ${d}, got: ${h}`);let f=await l.getBlockNumber()-20,p="0x00"+t.recipient.slice(2);if("undefined"!=typeof window)a=await l.send("eth_sendTransaction",[{from:t.sender,to:null!==(i=e.etherExitToEthereumPrecompile)&&void 0!==i?i:u.etherExitToEthereumPrecompile,value:c.ethers.BigNumber.from(t.amount).toHexString(),data:p,gas:c.ethers.BigNumber.from(121e3).toHexString()}]);else{let r=await (null===(o=e.signer)||void 0===o?void 0:o.sendTransaction({from:t.sender,to:null!==(s=e.etherExitToEthereumPrecompile)&&void 0!==s?s:u.etherExitToEthereumPrecompile,value:c.ethers.BigNumber.from(t.amount),data:p,gasLimit:c.ethers.BigNumber.from(121e3)}));a=r.hash}let y=await l.getTransaction(a);return{...t,status:m.IN_PROGRESS,ethCache:{from:y.from,to:y.to,data:y.data,nonce:y.nonce,value:y.value.toString(),safeReorgHeight:f},burnHashes:[...t.burnHashes,a]}}async function R(t,e){var r,i,o,s,a,u;let c;e=null!=e?e:{};let h=(0,g.getBridgeParams)(),d=null!==(r=e.provider)&&void 0!==r?r:(0,g.getAuroraProvider)(),f=j(t.burnHashes),p=(await d.getNetwork()).chainId,y=null!==(i=e.auroraChainId)&&void 0!==i?i:h.auroraChainId;if(p!==y)throw Error(`Wrong aurora network for checkBurn, expected: ${y}, got: ${p}`);let b=await d.send("eth_getTransactionReceipt",[f]);if(!b){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,value:t.ethCache.value},r=await (0,v.findReplacementTx)(d,t.ethCache.safeReorgHeight,e);if(!r)return t;b=await d.send("eth_getTransactionReceipt",[r.hash])}catch(e){if(console.error(e),e instanceof v.TxValidationError)return{...t,errors:[...t.errors,e.message],status:m.FAILED}}}if(!b)return t;if("0x1"!==b.status){let e=`Aurora transaction failed: ${b.transactionHash}`;return{...t,status:m.FAILED,errors:[...t.errors,e],burnReceipts:[...t.burnReceipts,b]}}b.transactionHash!==f&&(t={...t,burnHashes:[...t.burnHashes,b.transactionHash],burnReceipts:[...t.burnReceipts,b]});let _=n.from(b.nearTransactionHash.slice(2),"hex"),M=l.default.encode(_),E=null!==(a=null!==(o=e.nearProvider)&&void 0!==o?o:null===(s=e.nearAccount)||void 0===s?void 0:s.connection.provider)&&void 0!==a?a:(0,g.getNearProvider)(),S=await E.txStatus(_,null!==(u=e.auroraRelayerAccount)&&void 0!==u?u:h.auroraRelayerAccount);if(S.status.Unknown)return t;if(S.status.Failure)return{...t,errors:[...t.errors,"NEAR relay.aurora transaction failed."],status:m.FAILED};try{c=await k(S,E)}catch(e){if(e instanceof A)return{...t,errors:[...t.errors,e.message],status:m.FAILED};throw e}let I=await E.block({blockId:S.transaction_outcome.block_hash});return{...t,status:m.IN_PROGRESS,completedStep:w,startTime:new Date(I.header.timestamp/1e6).toISOString(),burnReceipts:[...t.burnReceipts,b],nearBurnHashes:[...t.nearBurnHashes,M],nearBurnReceiptIds:[...t.nearBurnReceiptIds,c.id],nearBurnReceiptBlockHeights:[...t.nearBurnReceiptBlockHeights,c.blockHeight]}}async function L(t,e){var r,n,i;e=null!=e?e:{};let o=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,g.getNearProvider)(),s=j(t.nearBurnReceiptBlockHeights),a=Number((await o.block({finality:"final"})).header.height);return a<=s?t:{...t,completedStep:b,status:m.IN_PROGRESS,finalityBlockHeights:[...t.finalityBlockHeights,a]}}async function B(t,e){var r,n,i,o,s,a,c,l,h,d,f,p,y,v,w;let b;if("string"==typeof t)return await P(t,"todo",e);e=null!=e?e:{};let E=(0,g.getBridgeParams)(),A=null!==(r=e.provider)&&void 0!==r?r:(0,g.getEthProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(n=e.sendToEthereumSyncInterval)&&void 0!==n?n:E.sendToEthereumSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let S=(await A.getNetwork()).chainId,I=null!==(i=e.ethChainId)&&void 0!==i?i:E.ethChainId;if(S!==I)throw Error(`Wrong eth network for checkSync, expected: ${I}, got: ${S}`);let T=j(t.nearBurnReceiptBlockHeights),k=await (0,u.nearOnEthSyncHeight)(A,null!==(o=e.ethClientAddress)&&void 0!==o?o:E.ethClientAddress,null!==(s=e.ethClientAbi)&&void 0!==s?s:E.ethClientAbi),N=null!==(l=null!==(a=e.nearProvider)&&void 0!==a?a:null===(c=e.nearAccount)||void 0===c?void 0:c.connection.provider)&&void 0!==l?l:(0,g.getNearProvider)();if(!(k>T))return{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),nearOnEthClientBlockHeight:k,status:m.IN_PROGRESS};if(b=await (0,u.findNearProof)(j(t.nearBurnReceiptIds),null!==(h=e.auroraEvmAccount)&&void 0!==h?h:E.auroraEvmAccount,k,N,A,null!==(d=e.ethClientAddress)&&void 0!==d?d:E.ethClientAddress,null!==(f=e.ethClientAbi)&&void 0!==f?f:E.ethClientAbi),await D(A,b,null!==(p=e.etherCustodianAddress)&&void 0!==p?p:E.etherCustodianAddress,null!==(y=e.etherCustodianAbi)&&void 0!==y?y:E.etherCustodianAbi)){try{let{transactions:r,block:n}=await (0,u.findFinalizationTxOnEthereum)({usedProofPosition:"3",proof:b,connectorAddress:null!==(v=e.etherCustodianAddress)&&void 0!==v?v:E.etherCustodianAddress,connectorAbi:null!==(w=e.etherCustodianAbi)&&void 0!==w?w:E.etherCustodianAbi,finalizationEvent:"Withdrawn",recipient:t.recipient,amount:t.amount,provider:A});t={...t,finishTime:new Date(1e3*n.timestamp).toISOString(),unlockHashes:[...t.unlockHashes,...r]}}catch(t){console.error(t)}return{...t,completedStep:M,nearOnEthClientBlockHeight:k,status:m.COMPLETE,errors:[...t.errors,"Unlock proof already used."]}}return{...t,completedStep:_,nearOnEthClientBlockHeight:k,status:m.ACTION_NEEDED,proof:b}}async function D(t,e,r,n){let i=new c.ethers.Contract(r,n,t),o=await i.usedEvents_("0x"+l.default.decode(e.outcome_proof.outcome.receipt_ids[0]).toString("hex"));return o}async function K(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,g.getBridgeParams)(),l=null!==(r=e.provider)&&void 0!==r?r:(0,g.getSignerProvider)(),h=(await l.getNetwork()).chainId,d=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(h!==d)throw Error(`Wrong eth network for checkSync, expected: ${d}, got: ${h}`);if((t=await B(t,e)).status!==m.ACTION_NEEDED)return t;let f=t.proof,p=(0,u.borshifyOutcomeProof)(f),y=new c.ethers.Contract(null!==(i=e.etherCustodianAddress)&&void 0!==i?i:a.etherCustodianAddress,null!==(o=e.etherCustodianAbi)&&void 0!==o?o:a.etherCustodianAbi,null!==(s=e.signer)&&void 0!==s?s:l.getSigner()),v=await l.getBlockNumber()-20,w=await y.withdraw(p,t.nearOnEthClientBlockHeight);return{...t,status:m.IN_PROGRESS,ethCache:{from:w.from,to:w.to,nonce:w.nonce,data:w.data,safeReorgHeight:v},unlockHashes:[...t.unlockHashes,w.hash]}}async function F(t,e){var r,n;e=null!=e?e:{};let i=(0,g.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,g.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkUnlock, expected: ${a}, got: ${s}`);let u=j(t.unlockHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,v.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof v.TxValidationError)return{...t,errors:[...t.errors,e.message],status:m.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:m.FAILED,errors:[...t.errors,e],unlockReceipts:[...t.unlockReceipts,c]}}c.transactionHash!==u&&(t={...t,unlockHashes:[...t.unlockHashes,c.transactionHash]});let l=await o.getBlock(c.blockNumber);return{...t,status:m.COMPLETE,completedStep:M,finishTime:new Date(1e3*l.timestamp).toISOString(),unlockReceipts:[...t.unlockReceipts,c]}}e.i18n={en_US:{steps:t=>(0,p.stepsFor)(t,E,{[w]:`Start transfer of ${(0,g.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from Aurora`,[b]:"Confirming in Aurora",[_]:"Confirming in Aurora. This can take around 16 hours. Feel free to return to this window later, to complete the final step of the transfer.",[M]:`Deposit ${(0,g.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Ethereum`}),statusMessage:t=>{if(t.status===m.FAILED)return"Failed";if(t.status===m.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from Aurora";case _:return"Ready to deposit in Ethereum";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to Ethereum";case w:case b:return"Confirming transfer";case _:return"Depositing in Ethereum";case M:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===m.FAILED)return"Retry";if(t.status!==m.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case _:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=I,e.checkStatus=T,e.parseBurnReceipt=k,e.findAllTransactions=N,e.findAllTransfers=x,e.recover=P,e.initiate=O,e.burn=C,e.checkBurn=R,e.checkFinality=L,e.checkSync=B,e.proofAlreadyUsed=D,e.unlock=K,e.checkUnlock=F;let j=t=>t[t.length-1]},92183:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.checkSync=e.checkLock=e.lock=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let a=r(20548),u=r(93694),c=r(57206),l=s(r(22241)),h=r(16247),d=r(41249),f=r(58180);e.SOURCE_NETWORK="ethereum",e.DESTINATION_NETWORK="aurora",e.TRANSFER_TYPE="@near-eth/aurora-ether/natural-ether/sendToAurora";let p="lock-natural-ether-to-aurora",m="sync-natural-ether-to-aurora",g="mint-natural-ether-to-aurora",y=[p,m,g],v={completedStep:null,errors:[],status:l.ACTION_NEEDED,type:e.TRANSFER_TYPE,completedConfirmations:0,lockHashes:[],lockReceipts:[],neededConfirmations:20,mintHashes:[]};async function w(t){switch(t.completedStep){case null:return await S(t);case p:return await T(t);default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function b(t){switch(t.completedStep){case null:return await I(t);case p:return await T(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function _({fromBlock:t,toBlock:e,sender:r,options:n}){var i,o,s,u;n=null!=n?n:{};let c=(0,h.getBridgeParams)(),l=null!==(i=n.provider)&&void 0!==i?i:(0,h.getEthProvider)(),d=new a.ethers.Contract(null!==(o=n.etherCustodianAddress)&&void 0!==o?o:c.etherCustodianAddress,null!==(s=n.etherCustodianAbi)&&void 0!==s?s:c.etherCustodianAbi,l),f=d.filters.Deposited(r),p=await d.queryFilter(f,t,e),m=null!==(u=n.auroraEvmAccount)&&void 0!==u?u:c.auroraEvmAccount+":";return p.filter(t=>t.args.recipient.startsWith(m)).map(t=>t.transactionHash)}async function M({fromBlock:t,toBlock:e,sender:r,options:n}){let i=await _({fromBlock:t,toBlock:e,sender:r,options:n}),o=await Promise.all(i.map(async t=>await E(t,n)));return o}async function E(t,e){var r,n,i,o;e=null!=e?e:{};let s=(0,h.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),c=await u.getTransactionReceipt(t),d=new a.ethers.Contract(null!==(n=e.etherCustodianAddress)&&void 0!==n?n:s.etherCustodianAddress,null!==(i=e.etherCustodianAbi)&&void 0!==i?i:s.etherCustodianAbi,u),f=d.filters.Deposited(),m=await d.queryFilter(f,c.blockNumber,c.blockNumber),g=m.find(e=>e.transactionHash===t);if(!g)throw Error("Unable to process lock transaction event.");let y=g.args.sender,w=g.args.recipient,[b,_]=w.split(":");if(b!==(null!==(o=e.auroraEvmAccount)&&void 0!==o?o:s.auroraEvmAccount))throw Error("Failed to parse auroraEvmAccount in protocol message");if(!/^(0x)?([A-Fa-f0-9]{40})$/.test(_))throw Error("Failed to parse recipient in protocol message");let M=g.args.amount.toString(),E=await g.getBlock(),A={...v,id:Math.random().toString().slice(2),startTime:new Date(1e3*E.timestamp).toISOString(),amount:M,completedStep:p,destinationTokenName:"aETH",recipient:"0x"+_,sender:y,sourceToken:"ETH",sourceTokenName:"ETH",symbol:"ETH",decimals:18,status:l.IN_PROGRESS,lockHashes:[t],lockReceipts:[c]};return await T(A,e)}async function A({amount:t,recipient:e,options:r}){var n,i,o,s,a;r=null!=r?r:{};let c=null!==(n=r.provider)&&void 0!==n?n:(0,h.getSignerProvider)(),l=null!==(i=r.symbol)&&void 0!==i?i:"ETH",d=null!==(o=r.decimals)&&void 0!==o?o:18,f=null!==(s=r.signer)&&void 0!==s?s:c.getSigner(),p=null!==(a=r.sender)&&void 0!==a?a:(await f.getAddress()).toLowerCase(),m={...v,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),destinationTokenName:"a"+l,recipient:e,sender:p,sourceToken:l,sourceTokenName:l,symbol:l,decimals:d};return m=await S(m,r),"undefined"!=typeof window&&(m=await (0,u.track)(m)),m}async function S(t,e){var r,n,i,o,s;e=null!=e?e:{};let u=(0,h.getBridgeParams)(),c=null!==(r=e.provider)&&void 0!==r?r:(0,h.getSignerProvider)(),d=(await c.getNetwork()).chainId,f=null!==(n=e.ethChainId)&&void 0!==n?n:u.ethChainId;if(d!==f)throw Error(`Wrong eth network for lock, expected: ${f}, got: ${d}`);let p=new a.ethers.Contract(null!==(i=e.etherCustodianAddress)&&void 0!==i?i:u.etherCustodianAddress,null!==(o=e.etherCustodianAbi)&&void 0!==o?o:u.etherCustodianAbi,null!==(s=e.signer)&&void 0!==s?s:c.getSigner()),m=await c.getBlockNumber()-20,g=await p.depositToEVM(t.recipient.slice(2).toLowerCase(),0,{value:t.amount});return{...t,status:l.IN_PROGRESS,ethCache:{from:g.from,to:g.to,nonce:g.nonce,data:g.data,value:g.value.toString(),safeReorgHeight:m},lockHashes:[...t.lockHashes,g.hash]}}async function I(t,e){var r,n;e=null!=e?e:{};let i=(0,h.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),s=k(t.lockHashes),a=(await o.getNetwork()).chainId,u=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(a!==u)throw Error(`Wrong eth network for checkLock, expected: ${u}, got: ${a}`);let c=await o.getTransactionReceipt(s);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data,value:t.ethCache.value},r=await (0,d.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof d.TxValidationError)return{...t,errors:[...t.errors,e.message],status:l.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:l.FAILED,errors:[...t.errors,e],lockReceipts:[...t.lockReceipts,c]}}c.transactionHash!==s&&(t={...t,lockHashes:[...t.lockHashes,c.transactionHash]});let f=await o.getBlock(c.blockHash);return{...t,status:l.IN_PROGRESS,completedStep:p,startTime:new Date(1e3*f.timestamp).toISOString(),lockReceipts:[...t.lockReceipts,c]}}async function T(t,e){var r,i,o,s,a,u,c,d,p,m,y,v;let w;if("string"==typeof t)return await E(t,e);e=null!=e?e:{};let b=(0,h.getBridgeParams)(),_=null!==(r=e.provider)&&void 0!==r?r:(0,h.getEthProvider)(),M=null!==(s=null!==(i=e.nearProvider)&&void 0!==i?i:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,h.getNearProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(a=e.sendToNearSyncInterval)&&void 0!==a?a:b.sendToNearSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let A=k(t.lockReceipts),S=A.blockNumber,I=await (0,f.ethOnNearSyncHeight)(null!==(u=e.nearClientAccount)&&void 0!==u?u:b.nearClientAccount,M),T=Math.max(0,I-S),N=t.checkSyncInterval;if(T>t.neededConfirmations){w=await (0,f.findEthProof)("Deposited",A.transactionHash,null!==(c=e.etherCustodianAddress)&&void 0!==c?c:b.etherCustodianAddress,null!==(d=e.etherCustodianAbi)&&void 0!==d?d:b.etherCustodianAbi,_);let r=await M.query({request_type:"call_function",account_id:null!==(p=e.auroraEvmAccount)&&void 0!==p?p:b.auroraEvmAccount,method_name:"is_used_proof",args_base64:n.from(w).toString("base64"),finality:"optimistic"}),i=!!r.result[0];if(i){if(e.callIndexer)try{let r;let{transactions:i,timestamps:o}=await (0,f.findFinalizationTxOnNear)({proof:n.from(w).toString("base64"),connectorAccount:null!==(m=e.auroraEvmAccount)&&void 0!==m?m:b.auroraEvmAccount,eventRelayerAccount:null!==(y=e.eventRelayerAccount)&&void 0!==y?y:b.eventRelayerAccount,finalizationMethod:"deposit",callIndexer:e.callIndexer});o.length>0&&(r=new Date(o[0]/1e6).toISOString()),t={...t,finishTime:r,mintHashes:[...t.mintHashes,...i]}}catch(t){console.error(t)}return{...t,completedStep:g,completedConfirmations:T,status:l.COMPLETE,errors:[...t.errors,"Transfer already finalized."]}}let o=null!==(v=e.maxFindEthProofInterval)&&void 0!==v?v:b.maxFindEthProofInterval;N=2*t.checkSyncInterval>o?t.checkSyncInterval:2*t.checkSyncInterval}return{...t,nextCheckSyncTimestamp:new Date(Date.now()+N),checkSyncInterval:N,completedConfirmations:T,status:l.IN_PROGRESS}}e.i18n={en_US:{steps:t=>(0,c.stepsFor)(t,y,{[p]:`Start transfer of ${(0,h.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from Ethereum`,[m]:`Wait for ${t.neededConfirmations} transfer confirmations for security`,[g]:`Deposit ${(0,h.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Aurora`}),statusMessage:t=>{if(t.status===l.FAILED)return"Failed";if(t.status===l.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from Ethereum";case m:return"Ready to deposit in NEAR";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to Aurora";case p:return`Confirming transfer ${t.completedConfirmations+1} of ${t.neededConfirmations}`;case m:return"Depositing in Aurora";case g:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===l.FAILED)return"Retry";if(t.status!==l.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case m:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=w,e.checkStatus=b,e.findAllTransactions=_,e.findAllTransfers=M,e.recover=E,e.initiate=A,e.lock=S,e.checkLock=I,e.checkSync=T;let k=t=>t[t.length-1]},19942:function(t,e,r){"use strict";/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i,o,s,a=r(82440)("http-errors"),u=r(66644),c=r(84546),l=r(35717),h=r(72953);function d(t){return Number(String(t).charAt(0)+"00")}function f(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function p(t){return"Error"!==t.substr(-5)?t+"Error":t}t.exports=function t(){for(var e,r,n=500,i={},o=0;o<arguments.length;o++){var s=arguments[o];if(s instanceof Error){n=(e=s).status||e.statusCode||n;continue}switch(typeof s){case"string":r=s;break;case"number":n=s,0!==o&&a("non-first-argument status code; replace with createError("+s+", ...)");break;case"object":i=s}}"number"==typeof n&&(n<400||n>=600)&&a("non-error status code; use only 4xx or 5xx status codes"),("number"!=typeof n||!c[n]&&(n<400||n>=600))&&(n=500);var u=t[n]||t[d(n)];for(var l in e||Error.captureStackTrace(e=u?new u(r):Error(r||c[n]),t),u&&e instanceof u&&e.status===n||(e.expose=n<500,e.status=e.statusCode=n),i)"status"!==l&&"statusCode"!==l&&(e[l]=i[l]);return e},t.exports.HttpError=function(){function t(){throw TypeError("cannot construct abstract class")}return l(t,Error),t}(),t.exports.isHttpError=(n=t.exports.HttpError,function(t){return!!t&&"object"==typeof t&&(t instanceof n||t instanceof Error&&"boolean"==typeof t.expose&&"number"==typeof t.statusCode&&t.status===t.statusCode)}),i=t.exports,o=c.codes,s=t.exports.HttpError,o.forEach(function(t){var e,r=h(c[t]);switch(d(t)){case 400:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!0,i}(s,r,t);break;case 500:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!1,i}(s,r,t)}e&&(i[t]=e,i[r]=e)}),i["I'mateapot"]=a.function(i.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')},82440:function(t){"use strict";function e(t,e){if("function"!=typeof t)throw TypeError("argument fn must be a function");return t}function r(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw TypeError("must call property on owner object");if(!n.configurable)throw TypeError("property must be configurable")}/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.exports=function(t){if(!t)throw TypeError("argument namespace is required");function n(t){}return n._file=void 0,n._ignored=!0,n._namespace=t,n._traced=!1,n._warned=Object.create(null),n.function=e,n.property=r,n}},3630:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;let s=o(r(91779)),a=o(r(27812)),u=r(84360),c=r(4842),l=r(25532),h=r(19257),d=r(28214),f=r(35143),p=r(72313),m=o(r(71406));function g(t){return JSON.parse(n.from(t).toString())}function y(t){return n.from(JSON.stringify(t))}class v{constructor(t,e){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=e}get ready(){let t=a.default("Account.ready()");return t("not needed anymore, always ready"),Promise.resolve()}async fetchState(){let t=a.default("Account.fetchState()");t("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(t,e){if(!i.env.NEAR_NO_LOGS)for(let r of e)console.log(`Receipt${r.receiptIds.length>1?"s":""}: ${r.receiptIds.join(", ")}`),this.printLogs(t,r.logs,"	"),r.failure&&console.warn(`	Failure [${t}]: ${r.failure}`)}printLogs(t,e,r=""){if(!i.env.NEAR_NO_LOGS)for(let n of e)console.log(`${r}Log [${t}]: ${n}`)}async signTransaction(t,e){let r=await this.findAccessKey(t,e);if(!r)throw new c.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");let{accessKey:n}=r,i=await this.connection.provider.block({finality:"final"}),o=i.header.hash,s=++n.nonce;return await u.signTransaction(t,s,e,l.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...t){return"string"==typeof t[0]?this.signAndSendTransactionV1(t[0],t[1]):this.signAndSendTransactionV2(t[0])}signAndSendTransactionV1(t,e){let r=a.default("Account.signAndSendTransaction(receiverId, actions");return r("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:t,actions:e})}async signAndSendTransactionV2({receiverId:t,actions:e,returnError:r}){let n,i;let o=await m.default(500,12,1.5,async()=>{[n,i]=await this.signTransaction(t,e);let r=i.transaction.publicKey;try{return await this.connection.provider.sendTransaction(i)}catch(e){if("InvalidNonce"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} with new nonce.`),delete this.accessKeyByPublicKeyCache[r.toString()],null;if("Expired"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} due to expired block hash`),null;throw e.context=new c.ErrorContext(l.baseEncode(n)),e}});if(!o)throw new c.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");let s=[o.transaction_outcome,...o.receipts_outcome].reduce((t,e)=>e.outcome.logs.length||"object"==typeof e.outcome.status&&"object"==typeof e.outcome.status.Failure?t.concat({receiptIds:e.outcome.receipt_ids,logs:e.outcome.logs,failure:void 0!==e.outcome.status.Failure?f.parseRpcError(e.outcome.status.Failure):null}):t,[]);if(this.printLogsAndFailures(i.transaction.receiverId,s),!r&&"object"==typeof o.status&&"object"==typeof o.status.Failure){if(o.status.Failure.error_message&&o.status.Failure.error_type)throw new c.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type);throw f.parseResultError(o)}return o}async findAccessKey(t,e){let r=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!r)return null;let n=this.accessKeyByPublicKeyCache[r.toString()];if(void 0!==n)return{publicKey:r,accessKey:n};try{let t=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:r.toString(),finality:"optimistic"});if(this.accessKeyByPublicKeyCache[r.toString()])return{publicKey:r,accessKey:this.accessKeyByPublicKeyCache[r.toString()]};return this.accessKeyByPublicKeyCache[r.toString()]=t,{publicKey:r,accessKey:t}}catch(t){if("AccessKeyDoesNotExist"==t.type)return null;throw t}}async createAndDeployContract(t,e,r,n){let i=u.fullAccessKey();await this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(n),u.addKey(h.PublicKey.from(e),i),u.deployContract(r)]});let o=new v(this.connection,t);return o}async sendMoney(t,e){return this.signAndSendTransaction({receiverId:t,actions:[u.transfer(e)]})}async createAccount(t,e,r){let n=u.fullAccessKey();return this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(r),u.addKey(h.PublicKey.from(e),n)]})}async deleteAccount(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteAccount(t)]})}async deployContract(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deployContract(t)]})}encodeJSContractArgs(t,e,r){return n.concat([n.from(t),n.from([0]),n.from(e),n.from([0]),n.from(r)])}async functionCall(...t){return"string"==typeof t[0]?this.functionCallV1(t[0],t[1],t[2],t[3],t[4]):this.functionCallV2(t[0])}functionCallV1(t,e,r,n,i){let o=a.default("Account.functionCall(contractId, methodName, args, gas, amount)");return o("use `Account.functionCall(FunctionCallOptions)` instead"),r=r||{},this.validateArgs(r),this.signAndSendTransaction({receiverId:t,actions:[u.functionCall(e,r,n||p.DEFAULT_FUNCTION_CALL_GAS,i)]})}functionCallV2({contractId:t,methodName:e,args:r={},gas:n=p.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:i,walletMeta:o,walletCallbackUrl:s,stringify:a,jsContract:c}){let l;if(this.validateArgs(r),c){let o=this.encodeJSContractArgs(t,e,JSON.stringify(r));l=["call_js_contract",o,n,i,null,!0]}else{let t=void 0===a?u.stringifyJsonOrBytes:a;l=[e,r,n,i,t,!1]}return this.signAndSendTransaction({receiverId:c?this.connection.jsvmAccountId:t,actions:[u.functionCall.apply(void 0,l)],walletMeta:o,walletCallbackUrl:s})}async addKey(t,e,r,n){let i;return r||(r=[]),Array.isArray(r)||(r=[r]),i=e?u.functionCallAccessKey(e,r,n):u.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[u.addKey(h.PublicKey.from(t),i)]})}async deleteKey(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteKey(h.PublicKey.from(t))]})}async stake(t,e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.stake(e,h.PublicKey.from(t))]})}validateArgs(t){let e=void 0!==t.byteLength&&t.byteLength===t.length;if(!e&&(Array.isArray(t)||"object"!=typeof t))throw new d.PositionalArgsError}async viewFunction(t,e,r={},{parse:i=g,stringify:o=y,jsContract:s=!1}={}){let a;this.validateArgs(r),a=s?this.encodeJSContractArgs(t,e,Object.keys(r).length>0?JSON.stringify(r):""):o(r);let u=await this.connection.provider.query({request_type:"call_function",account_id:s?this.connection.jsvmAccountId:t,method_name:s?"view_js_contract":e,args_base64:a.toString("base64"),finality:"optimistic"});return u.logs&&this.printLogs(t,u.logs),u.result&&u.result.length>0&&i(n.from(u.result))}async viewState(t,e={finality:"optimistic"}){let{values:r}=await this.connection.provider.query({request_type:"view_state",...e,account_id:this.accountId,prefix_base64:n.from(t).toString("base64")});return r.map(({key:t,value:e})=>({key:n.from(t,"base64"),value:n.from(e,"base64")}))}async getAccessKeys(){let t=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(t)?t:t.keys}async getAccountDetails(){let t=await this.getAccessKeys(),e=t.filter(t=>"FullAccess"!==t.access_key.permission).map(t=>{let e=t.access_key.permission;return{contractId:e.FunctionCall.receiver_id,amount:e.FunctionCall.allowance,publicKey:t.public_key}});return{authorizedApps:e}}async getAccountBalance(){let t=await this.connection.provider.experimental_protocolConfig({finality:"final"}),e=await this.state(),r=new s.default(t.runtime_config.storage_amount_per_byte),n=new s.default(e.storage_usage).mul(r),i=new s.default(e.locked),o=new s.default(e.amount).add(i),a=o.sub(s.default.max(i,n));return{total:o.toString(),stateStaked:n.toString(),staked:i.toString(),available:a.toString()}}}e.Account=v},74114:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;let n=r(14834);class i{}e.AccountCreator=i;class o extends i{constructor(t,e){super(),this.masterAccount=t,this.initialBalance=e}async createAccount(t,e){await this.masterAccount.createAccount(t,e,this.initialBalance)}}e.LocalAccountCreator=o;class s extends i{constructor(t,e){super(),this.connection=t,this.helperUrl=e}async createAccount(t,e){await n.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:e.toString()}))}}e.UrlAccountCreator=s},37593:function(t,e,r){"use strict";var n,i,o,s,a,u,c=r(48764).Buffer,l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account2FA=e.AccountMultisig=e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=void 0;let h=l(r(91779)),d=l(r(27812)),f=r(3630),p=r(82187),m=r(19257),g=r(84360),y=r(4842),v=r(14834);e.MULTISIG_STORAGE_KEY="__multisigRequest",e.MULTISIG_ALLOWANCE=new h.default(p.parseNearAmount("1")),e.MULTISIG_GAS=new h.default("100000000000000"),e.MULTISIG_DEPOSIT=new h.default("0"),e.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],e.MULTISIG_CONFIRM_METHODS=["confirm"],(n=s=e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})).CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",n.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",n.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",n.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",n.METHOD_NOT_FOUND="Contract method is not found",(i=a=e.MultisigStateStatus||(e.MultisigStateStatus={}))[i.INVALID_STATE=0]="INVALID_STATE",i[i.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",i[i.VALID_STATE=2]="VALID_STATE",i[i.UNKNOWN_STATE=3]="UNKNOWN_STATE",(o=u||(u={}))[o.INVALID_CODE=0]="INVALID_CODE",o[o.VALID_CODE=1]="VALID_CODE",o[o.UNKNOWN_CODE=2]="UNKNOWN_CODE";let w={[e.MULTISIG_STORAGE_KEY]:null};class b extends f.Account{constructor(t,e,r){super(t,e),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}async signAndSendTransactionWithAccount(t,e){return super.signAndSendTransaction({receiverId:t,actions:e})}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:r}){let n;let{accountId:i}=this,o=c.from(JSON.stringify({request:{receiver_id:t,actions:A(r,i,t)}}));try{n=await super.signAndSendTransaction({receiverId:i,actions:[g.functionCall("add_request_and_confirm",o,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(e){if(e.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(t,r);throw e}if(!n.status)throw Error("Request failed");let s={...n.status};if(!s.SuccessValue||"string"!=typeof s.SuccessValue)throw Error("Request failed");return this.setRequest({accountId:i,actions:r,requestId:parseInt(c.from(s.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(n),this.deleteUnconfirmedRequests(),n}async checkMultisigCodeAndStateStatus(t){let r=t?u.UNKNOWN_CODE:u.VALID_CODE;try{return t?await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.deployContract(t),g.functionCall("delete_request",{request_id:4294967295},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]}):await this.deleteRequest(4294967295),{codeStatus:u.VALID_CODE,stateStatus:a.VALID_STATE}}catch(t){if(new RegExp(s.CANNOT_DESERIALIZE_STATE).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.INVALID_STATE};if(new RegExp(s.MULTISIG_NOT_INITIALIZED).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.STATE_NOT_INITIALIZED};if(new RegExp(s.NO_SUCH_REQUEST).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.VALID_STATE};if(new RegExp(s.METHOD_NOT_FOUND).test(t&&t.message))return{codeStatus:u.INVALID_CODE,stateStatus:a.UNKNOWN_STATE};throw t}}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:t},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}async deleteAllRequests(){let t=await this.getRequestIds();t.length&&await Promise.all(t.map(t=>this.deleteRequest(t)))}async deleteUnconfirmedRequests(){let t=await this.getRequestIds(),{requestId:r}=this.getRequest();for(let n of t)if(n!=r)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:n},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(t){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(e.MULTISIG_STORAGE_KEY)||"{}"):w[e.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(e.MULTISIG_STORAGE_KEY,JSON.stringify(t));w[e.MULTISIG_STORAGE_KEY]=t}}e.AccountMultisig=b;class _ extends b{constructor(t,e,r){super(t,e,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}async signAndSendTransaction(...t){if("string"!=typeof t[0])return this.__signAndSendTransaction(t[0]);{let e=d.default("Account.signAndSendTransaction(receiverId, actions");return e("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:t[0],actions:t[1]})}}async __signAndSendTransaction({receiverId:t,actions:e}){await super.signAndSendTransaction({receiverId:t,actions:e}),await this.sendCode();let r=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(r),r}async deployMultisig(t){let{accountId:r}=this,n=(await this.getRecoveryMethods()).data.filter(({kind:t,publicKey:e})=>("phrase"===t||"ledger"===t)&&null!==e).map(t=>t.publicKey),i=(await this.getAccessKeys()).filter(({public_key:t,access_key:{permission:e}})=>"FullAccess"===e&&!n.includes(t)).map(t=>t.public_key).map(M),o=M((await this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),s=c.from(JSON.stringify({num_confirmations:2})),u=[...i.map(t=>g.deleteKey(t)),...i.map(t=>g.addKey(t,g.functionCallAccessKey(r,e.MULTISIG_CHANGE_METHODS,null))),g.addKey(o,g.functionCallAccessKey(r,e.MULTISIG_CONFIRM_METHODS,null)),g.deployContract(t)],l=u.concat(g.functionCall("new",s,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);let{stateStatus:h}=await this.checkMultisigCodeAndStateStatus(t);switch(h){case a.STATE_NOT_INITIALIZED:return await super.signAndSendTransactionWithAccount(r,l);case a.VALID_STATE:return await super.signAndSendTransactionWithAccount(r,u);case a.INVALID_STATE:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}async disableWithFAK({contractBytes:t,cleanupContractBytes:e}){let r=[];e&&(await this.deleteAllRequests().catch(t=>t),r=await this.get2faDisableCleanupActions(e));let n=await this.get2faDisableKeyConversionActions(),i=[...r,...n,g.deployContract(t)],o=await this.findAccessKey(this.accountId,i);if(o&&o.accessKey&&"FullAccess"!==o.accessKey.permission)throw new y.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,i)}async get2faDisableCleanupActions(t){let r=await this.viewState("").catch(t=>{let e=t.cause&&t.cause.name;if("NO_CONTRACT_CODE"==e)return[];throw"TOO_LARGE_CONTRACT_STATE"==e?new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):t}),n=r.map(({key:t})=>t.toString("base64"));return r.length?[g.deployContract(t),g.functionCall("clean",{keys:n},e.MULTISIG_GAS,new h.default("0"))]:[]}async get2faDisableKeyConversionActions(){let{accountId:t}=this,e=await this.getAccessKeys(),r=e.filter(({access_key:t})=>"FullAccess"!==t.permission).filter(({access_key:e})=>{let r=e.permission.FunctionCall;return r.receiver_id===t&&4===r.method_names.length&&r.method_names.includes("add_request_and_confirm")}),n=m.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[g.deleteKey(n),...r.map(({public_key:t})=>g.deleteKey(m.PublicKey.from(t))),...r.map(({public_key:t})=>g.addKey(m.PublicKey.from(t),g.fullAccessKey()))]}async disable(t,e){let r;let{stateStatus:n}=await this.checkMultisigCodeAndStateStatus();if(n!==a.VALID_STATE&&n!==a.STATE_NOT_INITIALIZED)throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");await this.deleteAllRequests().catch(t=>r=t);let i=await this.get2faDisableCleanupActions(e).catch(t=>{if("ContractHasExistingState"===t.type)throw r||t;throw t}),o=[...i,...await this.get2faDisableKeyConversionActions(),g.deployContract(t)];return console.log("disabling 2fa for",this.accountId),await this.signAndSendTransaction({receiverId:this.accountId,actions:o})}async sendCodeDefault(){let{accountId:t}=this,{requestId:e}=this.getRequest(),r=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:t,method:r,requestId:e}),e}async getCodeDefault(t){throw Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){let t=await this.get2faMethod(),e=await this.getCode(t);try{let t=await this.verifyCode(e);return t}catch(t){if(console.warn("Error validating security code:",t),t.toString().includes("invalid 2fa code provided")||t.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw t}}async verifyCodeDefault(t){let{accountId:e}=this,r=this.getRequest();if(!r)throw Error("no request pending");let{requestId:n}=r;return await this.postSignedJson("/2fa/verify",{accountId:e,securityCode:t,requestId:n})}async getRecoveryMethods(){let{accountId:t}=this;return{accountId:t,data:await this.postSignedJson("/account/recoveryMethods",{accountId:t})}}async get2faMethod(){let{data:t}=await this.getRecoveryMethods();if(t&&t.length&&(t=t.find(t=>0===t.kind.indexOf("2fa-"))),!t)return null;let{kind:e,detail:r}=t;return{kind:e,detail:r}}async signatureFor(){let{accountId:t}=this,e=await this.connection.provider.block({finality:"final"}),r=e.header.height.toString(),n=await this.connection.signer.signMessage(c.from(r),t,this.connection.networkId),i=c.from(n.signature).toString("base64");return{blockNumber:r,blockNumberSignature:i}}async postSignedJson(t,e){return await v.fetchJson(this.helperUrl+t,JSON.stringify({...e,...await this.signatureFor()}))}}e.Account2FA=_;let M=t=>m.PublicKey.from(t),E=t=>t.toString().replace("ed25519:",""),A=(t,r,n)=>t.map(t=>{let i=t.enum,{gas:o,publicKey:s,methodName:a,args:u,deposit:l,accessKey:h,code:d}=t[i],f={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:s&&E(s)||void 0,method_name:a,args:u&&c.from(u).toString("base64")||void 0,code:d&&c.from(d).toString("base64")||void 0,amount:l&&l.toString()||void 0,deposit:l&&l.toString()||"0",permission:void 0};if(h&&(n===r&&"fullAccess"!==h.permission.enum&&(f.permission={receiver_id:r,allowance:e.MULTISIG_ALLOWANCE.toString(),method_names:e.MULTISIG_CHANGE_METHODS}),"functionCall"===h.permission.enum)){let{receiverId:t,methodNames:e,allowance:r}=h.permission.functionCall;f.permission={receiver_id:t,allowance:r&&r.toString()||void 0,method_names:e}}return f})},64628:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;let n=r(95010);async function i(t){return new n.Near(t)}e.connect=i},19421:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=o(r(19142)),s(r(15037),e),s(r(64628),e),r(58010)},15037:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.WalletAccount=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;let s=o(r(4842));e.providers=s;let a=o(r(74441));e.utils=a;let u=o(r(84360));e.transactions=u;let c=o(r(55581));e.validators=c;let l=r(3630);Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return l.Account}});let h=o(r(37593));e.multisig=h;let d=o(r(74114));e.accountCreator=d;let f=r(97205);Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return f.Connection}});let p=r(41964);Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return p.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return p.InMemorySigner}});let m=r(51152);Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return m.Contract}});let g=r(19257);Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}});let y=r(95010);Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return y.Near}});let v=r(14292);Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletAccount",{enumerable:!0,get:function(){return v.WalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},97205:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;let n=r(4842),i=r(41964);class o{constructor(t,e,r,n){this.networkId=t,this.provider=e,this.signer=r,this.jsvmAccountId=n}static fromConfig(t){let e=function(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new n.JsonRpcProvider({...t.args});default:throw Error(`Unknown provider type ${t.type}`)}}(t.provider),r=function(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new i.InMemorySigner(t.keyStore);default:throw Error(`Unknown signer type ${t.type}`)}}(t.signer);return new o(t.networkId,e,r,t.jsvmAccountId)}}e.Connection=o},72313:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FUNCTION_CALL_GAS=void 0;let i=n(r(91779));e.DEFAULT_FUNCTION_CALL_GAS=new i.default("30000000000000")},51152:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;let i=n(r(91779)),o=n(r(27812)),s=r(4842),a=r(28214);function u(t,e){return({[t]:(...t)=>e(...t)})[t]}let c=t=>t&&void 0!==t.byteLength&&t.byteLength===t.length,l=t=>"[object Object]"===Object.prototype.toString.call(t);class h{constructor(t,e,r){this.account=t,this.contractId=e;let{viewMethods:n=[],changeMethods:i=[]}=r;n.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(e={},r={},...n)=>{if(n.length||!(l(e)||c(e))||!l(r))throw new a.PositionalArgsError;return this.account.viewFunction(this.contractId,t,e,r)})})}),i.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(...e)=>{if(e.length&&(e.length>3||!(l(e[0])||c(e[0]))))throw new a.PositionalArgsError;if(e.length>1||!(e[0]&&e[0].args)){let r=o.default("contract.methodName(args, gas, amount)");return r("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:t,args:e[0],gas:e[1],amount:e[2]})}return this._changeMethod({methodName:t,...e[0]})})})})}async _changeMethod({args:t,methodName:e,gas:r,amount:n,meta:o,callbackUrl:u}){!function(t){for(let e of Object.keys(t)){let r=t[e];if(r&&!i.default.isBN(r)&&isNaN(r))throw new a.ArgumentTypeError(e,"number, decimal string or BN",r)}}({gas:r,amount:n});let c=await this.account.functionCall({contractId:this.contractId,methodName:e,args:t,gas:r,attachedDeposit:n,walletMeta:o,walletCallbackUrl:u});return s.getTransactionLastResult(c)}}e.Contract=h},19142:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;let n=r(92831);Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});let i=r(53506);Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return i.InMemoryKeyStore}});let o=r(17376);Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return o.BrowserLocalStorageKeyStore}});let s=r(77538);Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},17376:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;let n=r(92831),i=r(19257);class o extends n.KeyStore{constructor(t=window.localStorage,e="near-api-js:keystore:"){super(),this.localStorage=t,this.prefix=e}async setKey(t,e,r){this.localStorage.setItem(this.storageKeyForSecretKey(t,e),r.toString())}async getKey(t,e){let r=this.localStorage.getItem(this.storageKeyForSecretKey(t,e));return r?i.KeyPair.fromString(r):null}async removeKey(t,e){this.localStorage.removeItem(this.storageKeyForSecretKey(t,e))}async clear(){for(let t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)}async getNetworks(){let t=new Set;for(let e of this.storageKeys())if(e.startsWith(this.prefix)){let r=e.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())}async getAccounts(t){let e=[];for(let r of this.storageKeys())if(r.startsWith(this.prefix)){let n=r.substring(this.prefix.length).split(":");n[1]===t&&e.push(n[0])}return e}storageKeyForSecretKey(t,e){return`${this.prefix}${e}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}e.BrowserLocalStorageKeyStore=o},53506:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;let n=r(92831),i=r(19257);class o extends n.KeyStore{constructor(){super(),this.keys={}}async setKey(t,e,r){this.keys[`${e}:${t}`]=r.toString()}async getKey(t,e){let r=this.keys[`${e}:${t}`];return r?i.KeyPair.fromString(r):null}async removeKey(t,e){delete this.keys[`${e}:${t}`]}async clear(){this.keys={}}async getNetworks(){let t=new Set;return Object.keys(this.keys).forEach(e=>{let r=e.split(":");t.add(r[1])}),Array.from(t.values())}async getAccounts(t){let e=[];return Object.keys(this.keys).forEach(r=>{let n=r.split(":");n[n.length-1]===t&&e.push(n.slice(0,n.length-1).join(":"))}),e}toString(){return"InMemoryKeyStore"}}e.InMemoryKeyStore=o},92831:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;class r{}e.KeyStore=r},77538:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;let n=r(92831);class i extends n.KeyStore{constructor(t,e={writeKeyStoreIndex:0}){super(),this.options=e,this.keyStores=t}async setKey(t,e,r){await this.keyStores[this.options.writeKeyStoreIndex].setKey(t,e,r)}async getKey(t,e){for(let r of this.keyStores){let n=await r.getKey(t,e);if(n)return n}return null}async removeKey(t,e){for(let r of this.keyStores)await r.removeKey(t,e)}async clear(){for(let t of this.keyStores)await t.clear()}async getNetworks(){let t=new Set;for(let e of this.keyStores)for(let r of(await e.getNetworks()))t.add(r);return Array.from(t)}async getAccounts(t){let e=new Set;for(let r of this.keyStores)for(let n of(await r.getAccounts(t)))e.add(n);return Array.from(e)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}e.MergeKeyStore=i},95010:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;let i=n(r(91779)),o=r(3630),s=r(97205),a=r(51152),u=r(74114);class c{constructor(t){if(this.config=t,this.connection=s.Connection.fromConfig({networkId:t.networkId,provider:{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||t.deps&&t.deps.keyStore},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){let e=new i.default(t.initialBalance?t.initialBalance:"500000000000000000000000000");this.accountCreator=new u.LocalAccountCreator(new o.Account(this.connection,t.masterAccount),e)}else t.helperUrl?this.accountCreator=new u.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}async account(t){let e=new o.Account(this.connection,t);return e}async createAccount(t,e){if(!this.accountCreator)throw Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(t,e),new o.Account(this.connection,t)}async loadContract(t,e){let r=new o.Account(this.connection,e.sender);return new a.Contract(r,t,e)}async sendTokens(t,e,r){console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead.");let n=new o.Account(this.connection,e),i=await n.sendMoney(r,t);return i.transaction_outcome.id}}e.Near=c},4842:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.JsonRpcProvider=e.Provider=void 0;let n=r(280);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}});let i=r(74833);Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return i.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}})},74833:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.ErrorContext=e.TypedError=void 0;let s=o(r(27812)),a=r(280),u=r(14834),c=r(28214);Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return c.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return c.ErrorContext}});let l=r(25532),h=o(r(71406)),d=r(35143),f=123;class p extends a.Provider{constructor(t){if(super(),null!=t&&"object"==typeof t)this.connection=t;else{let e=s.default("JsonRpcProvider(url?: string)");e("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:t}}}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_commit",[n.from(e).toString("base64")])}async sendTransactionAsync(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_async",[n.from(e).toString("base64")])}async txStatus(t,e){return"string"==typeof t?this.txStatusString(t,e):this.txStatusUint8Array(t,e)}async txStatusUint8Array(t,e){return this.sendJsonRpc("tx",[l.baseEncode(t),e])}async txStatusString(t,e){return this.sendJsonRpc("tx",[t,e])}async txStatusReceipts(t,e){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[l.baseEncode(t),e])}async query(...t){let e;if(1===t.length)e=await this.sendJsonRpc("query",t[0]);else{let[r,n]=t;e=await this.sendJsonRpc("query",[r,n])}if(e&&e.error)throw new c.TypedError(`Querying ${t} failed: ${e.error}.
${JSON.stringify(e,null,2)}`,d.getErrorTypeFromErrorMessage(e.error));return e}async block(t){let{finality:e}=t,{blockId:r}=t;if("object"!=typeof t){let e=s.default("JsonRpcProvider.block(blockId)");e("use `block({ blockId })` or `block({ finality })` instead"),r=t}return this.sendJsonRpc("block",{block_id:r,finality:e})}async blockChanges(t){let{finality:e}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:e})}async chunk(t){return this.sendJsonRpc("chunk",[t])}async validators(t){return this.sendJsonRpc("validators",[t])}async experimental_genesisConfig(){let t=s.default("JsonRpcProvider.experimental_protocolConfig()");return t("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(t){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",t)}async experimental_lightClientProof(t){let e=s.default("JsonRpcProvider.experimental_lightClientProof(request)");return e("use `lightClientProof` instead"),await this.lightClientProof(t)}async lightClientProof(t){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)}async accessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:n,finality:r})}async singleAccessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:n,finality:r})}async accountChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:n,finality:r})}async contractStateChanges(t,e,r=""){let{finality:n}=e,{blockId:i}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:r,block_id:i,finality:n})}async contractCodeChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:n,finality:r})}async gasPrice(t){return await this.sendJsonRpc("gas_price",[t])}async sendJsonRpc(t,e){let r=await h.default(500,12,1.5,async()=>{try{let r={method:t,params:e,id:f++,jsonrpc:"2.0"},n=await u.fetchJson(this.connection,JSON.stringify(r));if(n.error){if("object"==typeof n.error.data){if("string"==typeof n.error.data.error_message&&"string"==typeof n.error.data.error_type)throw new c.TypedError(n.error.data.error_message,n.error.data.error_type);throw d.parseRpcError(n.error.data)}{let t=`[${n.error.code}] ${n.error.message}: ${n.error.data}`;if("Timeout"===n.error.data||t.includes("Timeout error")||t.includes("query has timed out"))throw new c.TypedError(t,"TimeoutError");throw new c.TypedError(t,d.getErrorTypeFromErrorMessage(n.error.data))}}return n}catch(r){if("TimeoutError"===r.type)return i.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${t} as it has timed out`,e),null;throw r}}),{result:n}=r;if(void 0===n)throw new c.TypedError(`Exceeded 12 attempts for request to ${t}.`,"RetriesExceeded");return n}}e.JsonRpcProvider=p},280:function(t,e,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionLastResult=e.Provider=e.IdType=e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,(n=e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})).Unknown="Unknown",n.Pending="Pending",n.Failure="Failure",(i=e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={})).NotStarted="NotStarted",i.Started="Started",i.Failure="Failure",(o=e.IdType||(e.IdType={})).Transaction="transaction",o.Receipt="receipt";class a{}e.Provider=a,e.getTransactionLastResult=function(t){if("object"==typeof t.status&&"string"==typeof t.status.SuccessValue){let e=s.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch(t){return e}}return null}},41964:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySigner=e.Signer=void 0;let i=n(r(72023)),o=r(19257),s=r(53506);class a{}e.Signer=a;class u extends a{constructor(t){super(),this.keyStore=t}static async fromKeyPair(t,e,r){let n=new s.InMemoryKeyStore;return await n.setKey(t,e,r),new u(n)}async createKey(t,e){let r=o.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(e,t,r),r.getPublicKey()}async getPublicKey(t,e){let r=await this.keyStore.getKey(e,t);return null===r?null:r.getPublicKey()}async signMessage(t,e,r){let n=new Uint8Array(i.default.sha256.array(t));if(!e)throw Error("InMemorySigner requires provided account id");let o=await this.keyStore.getKey(r,e);if(null===o)throw Error(`Key for ${e} not found in ${r}`);return o.sign(n)}toString(){return`InMemorySigner(${this.keyStore})`}}e.InMemorySigner=u},84360:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.signTransaction=e.createTransaction=e.SCHEMA=e.Action=e.SignedTransaction=e.Transaction=e.Signature=e.deleteAccount=e.deleteKey=e.addKey=e.stake=e.transfer=e.functionCall=e.stringifyJsonOrBytes=e.deployContract=e.createAccount=e.DeleteAccount=e.DeleteKey=e.AddKey=e.Stake=e.Transfer=e.FunctionCall=e.DeployContract=e.CreateAccount=e.IAction=e.functionCallAccessKey=e.fullAccessKey=e.AccessKey=e.AccessKeyPermission=e.FullAccessPermission=e.FunctionCallPermission=void 0;let o=i(r(72023)),s=r(12604),a=r(25532),u=r(19257);class c extends s.Assignable{}e.FunctionCallPermission=c;class l extends s.Assignable{}e.FullAccessPermission=l;class h extends s.Enum{}e.AccessKeyPermission=h;class d extends s.Assignable{}e.AccessKey=d,e.fullAccessKey=function(){return new d({nonce:0,permission:new h({fullAccess:new l({})})})},e.functionCallAccessKey=function(t,e,r){return new d({nonce:0,permission:new h({functionCall:new c({receiverId:t,allowance:r,methodNames:e})})})};class f extends s.Assignable{}e.IAction=f;class p extends f{}e.CreateAccount=p;class m extends f{}e.DeployContract=m;class g extends f{}e.FunctionCall=g;class y extends f{}e.Transfer=y;class v extends f{}e.Stake=v;class w extends f{}e.AddKey=w;class b extends f{}e.DeleteKey=b;class _ extends f{}function M(t){let e=void 0!==t.byteLength&&t.byteLength===t.length,r=e?t:n.from(JSON.stringify(t));return r}e.DeleteAccount=_,e.createAccount=function(){return new I({createAccount:new p({})})},e.deployContract=function(t){return new I({deployContract:new m({code:t})})},e.stringifyJsonOrBytes=M,e.functionCall=function(t,e,r,n,i=M,o=!1){return new I(o?{functionCall:new g({methodName:t,args:e,gas:r,deposit:n})}:{functionCall:new g({methodName:t,args:i(e),gas:r,deposit:n})})},e.transfer=function(t){return new I({transfer:new y({deposit:t})})},e.stake=function(t,e){return new I({stake:new v({stake:t,publicKey:e})})},e.addKey=function(t,e){return new I({addKey:new w({publicKey:t,accessKey:e})})},e.deleteKey=function(t){return new I({deleteKey:new b({publicKey:t})})},e.deleteAccount=function(t){return new I({deleteAccount:new _({beneficiaryId:t})})};class E extends s.Assignable{}e.Signature=E;class A extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,A,t)}}e.Transaction=A;class S extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,S,t)}}e.SignedTransaction=S;class I extends s.Enum{}function T(t,e,r,n,i,o){return new A({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:i,blockHash:o})}async function k(t,r,n,i){let s=a.serialize(e.SCHEMA,t),u=new Uint8Array(o.default.sha256.array(s)),c=await r.signMessage(s,n,i),l=new S({transaction:t,signature:new E({keyType:t.publicKey.keyType,data:c.signature})});return[u,l]}async function N(...t){if(t[0].constructor===A){let[e,r,n,i]=t;return k(e,r,n,i)}{let[e,r,n,i,o,s,a]=t,u=await o.getPublicKey(s,a),c=T(s,u,e,r,n,i);return k(c,o,s,a)}}e.Action=I,e.SCHEMA=new Map([[E,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",A],["signature",E]]}],[A,{kind:"struct",fields:[["signerId","string"],["publicKey",u.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[I]]]}],[u.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[d,{kind:"struct",fields:[["nonce","u64"],["permission",h]]}],[h,{kind:"enum",field:"enum",values:[["functionCall",c],["fullAccess",l]]}],[c,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[l,{kind:"struct",fields:[]}],[I,{kind:"enum",field:"enum",values:[["createAccount",p],["deployContract",m],["functionCall",g],["transfer",y],["stake",v],["addKey",w],["deleteKey",b],["deleteAccount",_]]}],[p,{kind:"struct",fields:[]}],[m,{kind:"struct",fields:[["code",["u8"]]]}],[g,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[v,{kind:"struct",fields:[["stake","u128"],["publicKey",u.PublicKey]]}],[w,{kind:"struct",fields:[["publicKey",u.PublicKey],["accessKey",d]]}],[b,{kind:"struct",fields:[["publicKey",u.PublicKey]]}],[_,{kind:"struct",fields:[["beneficiaryId","string"]]}]]),e.createTransaction=T,e.signTransaction=N},12604:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assignable=e.Enum=void 0;class r{constructor(t){if(1!==Object.keys(t).length)throw Error("Enum can only take single value");Object.keys(t).map(e=>{this[e]=t[e],this.enum=e})}}e.Enum=r;class n{constructor(t){Object.keys(t).map(e=>{this[e]=t[e]})}}e.Assignable=n},28214:function(t,e,r){"use strict";var n=r(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.ErrorContext=e.TypedError=e.ArgumentTypeError=e.PositionalArgsError=void 0;class i extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}e.PositionalArgsError=i;class o extends Error{constructor(t,e,r){super(`Expected ${e} for '${t}' argument, but got '${JSON.stringify(r)}'`)}}e.ArgumentTypeError=o;class s extends Error{constructor(t,e,r){super(t),this.type=e||"UntypedError",this.context=r}}e.TypedError=s;class a{constructor(t){this.transactionHash=t}}e.ErrorContext=a,e.logWarning=function(...t){n.env.NEAR_NO_LOGS||console.warn(...t)}},71406:function(t,e){"use strict";async function r(t,e,r,n){let i=t;for(let t=0;t<e;t++){let t=await n();if(t)return t;await function(t){return new Promise(e=>setTimeout(e,t))}(i),i*=r}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},82187:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;let i=n(r(91779));e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=new i.default("10",10).pow(new i.default(e.NEAR_NOMINATION_EXP,10));let o=[],s=new i.default(10);for(let t=0,r=new i.default(5);t<e.NEAR_NOMINATION_EXP;t++,r=r.mul(s))o[t]=r;e.formatNearAmount=function(t,r=e.NEAR_NOMINATION_EXP){let n=new i.default(t,10);if(r!==e.NEAR_NOMINATION_EXP){let t=e.NEAR_NOMINATION_EXP-r-1;t>0&&n.iadd(o[t])}t=n.toString();let s=t.substring(0,t.length-e.NEAR_NOMINATION_EXP)||"0",a=t.substring(t.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,r);return`${(function(t){let e=/(-?\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t})(s)}.${a}`.replace(/\.?0*$/,"")},e.parseNearAmount=function(t){var r;if(!t)return null;t=t.replace(/,/g,"").trim();let n=t.split("."),i=n[0],o=n[1]||"";if(n.length>2||o.length>e.NEAR_NOMINATION_EXP)throw Error(`Cannot parse '${t}' as NEAR amount`);return""===(r=(r=i+o.padEnd(e.NEAR_NOMINATION_EXP,"0")).replace(/^0+/,""))?"0":r}},74441:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;let s=o(r(19257));e.key_pair=s;let a=o(r(14521));e.serialize=a;let u=o(r(14834));e.web=u;let c=o(r(12604));e.enums=c;let l=o(r(82187));e.format=l;let h=o(r(35143));e.rpc_errors=h;let d=r(19257);Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return d.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return d.KeyPairEd25519}});let f=r(28214);Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return f.logWarning}})},19257:function(t,e,r){"use strict";var n,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.KeyType=void 0;let s=o(r(50780)),a=r(14521),u=r(12604);(n=i=e.KeyType||(e.KeyType={}))[n.ED25519=0]="ED25519";class c extends u.Assignable{static from(t){return"string"==typeof t?c.fromString(t):t}static fromString(t){let e=t.split(":");if(1===e.length)return new c({keyType:i.ED25519,data:a.base_decode(e[0])});if(2===e.length)return new c({keyType:function(t){if("ed25519"===t.toLowerCase())return i.ED25519;throw Error(`Unknown key type ${t}`)}(e[0]),data:a.base_decode(e[1])});throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${function(t){if(t===i.ED25519)return"ed25519";throw Error(`Unknown key type ${t}`)}(this.keyType)}:${a.base_encode(this.data)}`}verify(t,e){if(this.keyType===i.ED25519)return s.default.sign.detached.verify(t,e,this.data);throw Error(`Unknown key type ${this.keyType}`)}}e.PublicKey=c;class l{static fromRandom(t){if("ED25519"===t.toUpperCase())return h.fromRandom();throw Error(`Unknown curve ${t}`)}static fromString(t){let e=t.split(":");if(1===e.length)return new h(e[0]);if(2===e.length){if("ED25519"===e[0].toUpperCase())return new h(e[1]);throw Error(`Unknown curve: ${e[0]}`)}throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}}e.KeyPair=l;class h extends l{constructor(t){super();let e=s.default.sign.keyPair.fromSecretKey(a.base_decode(t));this.publicKey=new c({keyType:i.ED25519,data:e.publicKey}),this.secretKey=t}static fromRandom(){let t=s.default.sign.keyPair();return new h(a.base_encode(t.secretKey))}sign(t){let e=s.default.sign.detached(t,a.base_decode(this.secretKey));return{signature:e,publicKey:this.publicKey}}verify(t,e){return this.publicKey.verify(t,e)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}e.KeyPairEd25519=h},35143:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=e.ServerError=void 0;let i=n(r(466)),o=n(r(62458)),s=n(r(93099)),a=r(15037),u=r(28214),c={formatNear:()=>(t,e)=>a.utils.format.formatNearAmount(e(t))};class l extends u.TypedError{}e.ServerError=l;class h extends l{}function d(t){let e={},r=function t(e,r,n,i){let o,s,a;for(let t in r){var u;if(u=e[t],"[object String]"===Object.prototype.toString.call(u))return e[t];if(p(e[t]))o=e[t],s=r[t],a=t;else{if(!(p(e.kind)&&p(e.kind[t])))continue;o=e.kind[t],s=r[t],a=t}}if(!o||!s)return n.kind=e,i;for(let t of Object.keys(s.props))n[t]=o[t];return t(o,r,n,a)}(t,o.default.schema,e,""),n=new l(f(r,e),r);return Object.assign(n,e),n}function f(t,e){return"string"==typeof s.default[t]?i.default.render(s.default[t],{...e,...c}):JSON.stringify(e)}function p(t){return"[object Object]"===Object.prototype.toString.call(t)}e.parseRpcError=d,e.parseResultError=function(t){let e=d(t.status.Failure),r=new h;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r},e.formatError=f,e.getErrorTypeFromErrorMessage=function(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}},14521:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25532);Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},14834:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;let i=n(r(19942)),o=n(r(71406)),s=r(4842),a=r(28214);async function u(t,e){let r={url:null};"string"==typeof t?r.url=t:r=t;let n=await o.default(1e3,10,1.5,async()=>{try{let t=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!t.ok){if(503===t.status)return a.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw i.default(t.status,await t.text())}return t}catch(t){if(t.toString().includes("FetchError")||t.toString().includes("Failed to fetch"))return a.logWarning(`Retrying HTTP request for ${r.url} because of error: ${t}`),null;throw t}});if(!n)throw new s.TypedError(`Exceeded 10 attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}e.fetchJson=u},55581:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.diffEpochValidators=e.findSeatPrice=void 0;let i=n(r(91779)),o=n(r(27812));e.findSeatPrice=function(t,e,r,n){if(n&&n<49)return function(t,e){let r=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),n=new i.default(e),o=r.reduce((t,e)=>t.add(e));if(o.lt(n))throw Error("Stakes are below seats");let s=new i.default(1),a=o.add(new i.default(1));for(;!s.eq(a.sub(new i.default(1)));){let t=s.add(a).div(new i.default(2)),e=!1,o=new i.default(0);for(let i=0;i<r.length;++i)if((o=o.add(r[i].div(t))).gte(n)){s=t,e=!0;break}e||(a=t)}return s}(t,e);if(!r){let t=o.default("findSeatPrice(validators, maxNumberOfSeats)");t("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]}return function(t,e,r){if(2!=r.length)throw Error("minimumStakeRatio should have 2 elements");let n=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),o=n.reduce((t,e)=>t.add(e));return t.length<e?o.mul(new i.default(r[0])).div(new i.default(r[1])):n[0].add(new i.default(1))}(t,e,r)},e.diffEpochValidators=function(t,e){let r=new Map;t.forEach(t=>r.set(t.account_id,t));let n=new Set(e.map(t=>t.account_id));return{newValidators:e.filter(t=>!r.has(t.account_id)),removedValidators:t.filter(t=>!n.has(t.account_id)),changedValidators:e.filter(t=>r.has(t.account_id)&&r.get(t.account_id).stake!=t.stake).map(t=>({current:r.get(t.account_id),next:t}))}}},14292:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectedWalletAccount=e.WalletAccount=e.WalletConnection=void 0;let o=i(r(27812)),s=r(3630),a=r(84360),u=r(74441),c=r(25532),l=r(25532),h="pending_key";class d{constructor(t,e){this._near=t;let r=e+"_wallet_auth_key",n=JSON.parse(window.localStorage.getItem(r));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,e=e||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=n||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(t={},e,r,n){let i;if("string"==typeof t){let e=o.default("requestSignIn(contractId, title)");e("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),i={contractId:t,successUrl:r,failureUrl:n}}else i=t;let s=new URL(window.location.href),a=new URL(this._walletBaseUrl+"/login/");if(a.searchParams.set("success_url",i.successUrl||s.href),a.searchParams.set("failure_url",i.failureUrl||s.href),i.contractId){let t=await this._near.account(i.contractId);await t.state(),a.searchParams.set("contract_id",i.contractId);let e=u.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",e.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,h+e.getPublicKey(),e)}i.methodNames&&i.methodNames.forEach(t=>{a.searchParams.append("methodNames",t)}),window.location.assign(a.toString())}async requestSignTransactions(...t){if(Array.isArray(t[0])){let e=o.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)");return e("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:t[0],callbackUrl:t[1],meta:t[2]})}return this._requestSignTransactions(t[0])}async _requestSignTransactions({transactions:t,meta:e,callbackUrl:r}){let i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",t.map(t=>l.serialize(a.SCHEMA,t)).map(t=>n.from(t).toString("base64")).join(",")),o.searchParams.set("callbackUrl",r||i.href),e&&o.searchParams.set("meta",e),window.location.assign(o.toString())}async _completeSignInWithAccessKey(){let t=new URL(window.location.href),e=t.searchParams.get("public_key")||"",r=(t.searchParams.get("all_keys")||"").split(","),n=t.searchParams.get("account_id")||"";n&&(this._authData={accountId:n,allKeys:r},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),e&&await this._moveKeyFromTempToPermanent(n,e)),t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())}async _moveKeyFromTempToPermanent(t,e){let r=await this._keyStore.getKey(this._networkId,h+e);await this._keyStore.setKey(this._networkId,t,r),await this._keyStore.removeKey(this._networkId,h+e)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new f(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}e.WalletConnection=d,e.WalletAccount=d;class f extends s.Account{constructor(t,e,r){super(e,r),this.walletConnection=t}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:e,walletMeta:r,walletCallbackUrl:n=window.location.href}){let i=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId),o=await this.accessKeyForTransaction(t,e,i);if(!o)throw Error(`Cannot find matching key for transaction sent to ${t}`);if(i&&i.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:t,actions:e})}catch(r){if("NotEnoughAllowance"===r.type)o=await this.accessKeyForTransaction(t,e);else throw r}let s=await this.connection.provider.block({finality:"final"}),l=c.baseDecode(s.header.hash),h=u.PublicKey.from(o.public_key),d=o.access_key.nonce+1,f=a.createTransaction(this.accountId,h,t,d,e,l);return await this.walletConnection.requestSignTransactions({transactions:[f],meta:r,callbackUrl:n}),new Promise((t,e)=>{setTimeout(()=>{e(Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(t,e,r){let{access_key:{permission:n}}=t;if("FullAccess"===n)return!0;if(n.FunctionCall){let{receiver_id:t,method_names:i}=n.FunctionCall;if(t===this.accountId&&i.includes("add_request_and_confirm"))return!0;if(t===e){if(1!==r.length)return!1;let[{functionCall:t}]=r;return t&&(!t.deposit||"0"===t.deposit.toString())&&(0===i.length||i.includes(t.methodName))}}return!1}async accessKeyForTransaction(t,e,r){let n=await this.getAccessKeys();if(r){let i=n.find(t=>t.public_key.toString()===r.toString());if(i&&await this.accessKeyMatchesTransaction(i,t,e))return i}let i=this.walletConnection._authData.allKeys;for(let r of n)if(-1!==i.indexOf(r.public_key)&&await this.accessKeyMatchesTransaction(r,t,e))return r;return null}}e.ConnectedWalletAccount=f},91779:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(26555).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(t);r=(h=h.idivn(l)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},h&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=t.allocUnsafe?t.allocUnsafe(o):new t(o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e){this.x=t,this.y=e}Math.imul||(g=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?m(this,t,e):y(this,t,e)},v.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},v.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r._strip(),i._strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=67108864%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(_,b),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(M,b),i(E,b),i(A,b),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(w[t])return w[t];if("k256"===t)e=new _;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else if("p25519"===t)e=new A;else throw Error("Unknown prime "+t);return w[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,S),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},84546:function(t,e,r){"use strict";/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i=r(18365);function o(t){if("number"==typeof t){if(!o[t])throw Error("invalid status code: "+t);return t}if("string"!=typeof t)throw TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!o[e])throw Error("invalid status code: "+e);return e}if(!(e=o[t.toLowerCase()]))throw Error('invalid status message: "'+t+'"');return e}t.exports=o,o.STATUS_CODES=i,o.codes=(n=[],Object.keys(i).forEach(function(t){var e=i[t],r=Number(t);o[r]=e,o[e]=r,o[e.toLowerCase()]=r,n.push(r)}),n),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},13097:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNep141Address=e.getAuroraErc20Address=void 0;let n=r(16247),i=r(58180),o={},s={};async function a({nep141Address:t,options:e}){var r,s,a,u;if(o[t])return o[t];e=null!=e?e:{};let c=null!==(a=null!==(r=e.nearProvider)&&void 0!==r?r:null===(s=e.nearAccount)||void 0===s?void 0:s.connection.provider)&&void 0!==a?a:(0,n.getNearProvider)(),l=(0,n.getBridgeParams)(),h=null!==(u=e.auroraEvmAccount)&&void 0!==u?u:l.auroraEvmAccount;try{let e=await i.aurora.getErc20FromNep141({nep141Address:t,nearProvider:c,auroraEvmAccount:h});o[t]=e}catch(e){return console.warn(e,t),null}return o[t]}async function u({auroraErc20Address:t,options:e}){var r,o,a,u;if(s[t])return s[t];e=null!=e?e:{};let c=null!==(a=null!==(r=e.nearProvider)&&void 0!==r?r:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==a?a:(0,n.getNearProvider)(),l=(0,n.getBridgeParams)(),h=null!==(u=e.auroraEvmAccount)&&void 0!==u?u:l.auroraEvmAccount;try{let e=await i.aurora.getNep141FromErc20({auroraErc20Address:t,nearProvider:c,auroraEvmAccount:h});s[t]=e}catch(e){return console.error(e,t),null}return s[t]}e.getAuroraErc20Address=a,e.getNep141Address=u},90586:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.burn=e.sendToNear=e.payNep141Storage=e.checkBurn=e.recover=e.findAllTransfers=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=r(16247),l=r(20548),h=r(11501),d=r(93694),f=s(r(22241)),p=r(41249),m=r(13097),g=r(88082),y=r(22326);e.SOURCE_NETWORK="aurora",e.DESTINATION_NETWORK="near",e.TRANSFER_TYPE="@near-eth/aurora-nep141/bridged-erc20/sendToNear";let v="burn-bridged-erc20-to-near",w={completedStep:null,errors:[],status:f.IN_PROGRESS,type:e.TRANSFER_TYPE,burnHashes:[],burnReceipts:[]};async function b(t){if(null===t.completedStep)return await T(t);throw Error(`Don't know how to act on transfer: ${JSON.stringify(t)}`)}async function _(t){if(null===t.completedStep)return await A(t);throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}async function M({fromBlock:t,toBlock:r,sender:n,nep141Address:i,options:o}){var s,a,u,c,h;o=null!=o?o:{};let p=(0,d.getBridgeParams)(),w=null!==(s=o.provider)&&void 0!==s?s:(0,d.getAuroraProvider)(),b=null!==(a=o.auroraErc20Address)&&void 0!==a?a:await (0,m.getAuroraErc20Address)({nep141Address:i,options:o}),_=new l.ethers.Contract(b,null!==(u=o.auroraErc20Abi)&&void 0!==u?u:p.auroraErc20Abi,w),M=_.filters.Transfer(n,"0x0000000000000000000000000000000000000000"),E=await _.queryFilter(M,t,r),A=await Promise.all(E.map(async t=>{let e=await w.getTransactionReceipt(t.transactionHash);return e})),S=A.filter(t=>t.logs.find(t=>t.topics[0]===y.EXIT_TO_NEAR_SIGNATURE)),I={symbol:"",decimals:0};o.symbol&&o.decimals||(I=await (0,g.getMetadata)({nep141Address:i,options:o}));let T=null!==(c=o.symbol)&&void 0!==c?c:I.symbol,k=null!==(h=o.decimals)&&void 0!==h?h:I.decimals,N=await Promise.all(S.map(async t=>{let r=await w.getBlock(t.blockHash),i=t.logs.find(t=>t.topics[0]===y.EXIT_TO_NEAR_SIGNATURE),o=i.topics[3],s=l.ethers.BigNumber.from(i.data).toString(),a={id:Math.random().toString().slice(2),startTime:new Date(1e3*r.timestamp).toISOString(),type:e.TRANSFER_TYPE,status:f.COMPLETE,completedStep:v,errors:[],amount:s,decimals:k,symbol:T,sourceToken:b,sourceTokenName:T,destinationTokenName:T,sender:n,recipient:`NEAR account hash: ${o}`,burnHashes:[t.transactionHash],burnReceipts:[]};return a}));return N}async function E(t,r){var n,i,o,s;r=null!=r?r:{};let a=null!==(n=r.provider)&&void 0!==n?n:(0,d.getAuroraProvider)(),u=await a.getTransactionReceipt(t),c=u.logs.find(t=>t.topics[0]===y.EXIT_TO_NEAR_SIGNATURE),h=u.logs.find(t=>t.topics[0]===y.BURN_SIGNATURE),p=c.topics[3],w=l.ethers.BigNumber.from(c.data).toString(),b="0x"+c.topics[1].slice(26),_="0x"+h.topics[1].slice(26),M={symbol:"",decimals:0};if(!r.symbol||!r.decimals){let t=null!==(i=r.nep141Address)&&void 0!==i?i:await (0,m.getNep141Address)({auroraErc20Address:b,options:r});M=await (0,g.getMetadata)({nep141Address:t,options:r})}let E=null!==(o=r.symbol)&&void 0!==o?o:M.symbol,A=null!==(s=r.decimals)&&void 0!==s?s:M.decimals,S=await a.getBlock(u.blockHash),I={id:Math.random().toString().slice(2),startTime:new Date(1e3*S.timestamp).toISOString(),type:e.TRANSFER_TYPE,status:f.COMPLETE,completedStep:v,errors:[],amount:w,decimals:A,symbol:E,sourceToken:b,sourceTokenName:E,destinationTokenName:E,sender:_,recipient:`NEAR account hash: ${p}`,burnHashes:[u.transactionHash],burnReceipts:[]};return I}async function A(t,e){var r,n;e=null!=e?e:{};let i=(0,d.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,d.getAuroraProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.auroraChainId)&&void 0!==n?n:i.auroraChainId;if(s!==a)throw Error(`Wrong aurora network for checkBurn, expected: ${a}, got: ${s}`);let u=k(t.burnHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,p.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof p.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status)return{...t,status:f.FAILED,burnReceipts:[...t.burnReceipts,c],errors:[...t.errors,"Transaction failed"]};c.transactionHash!==u&&(t={...t,burnHashes:[...t.burnHashes,c.transactionHash]});let l=await o.getBlock(c.blockHash);return{...t,status:f.COMPLETE,completedStep:v,startTime:new Date(1e3*l.timestamp).toISOString(),burnReceipts:[...t.burnReceipts,c]}}async function S({nep141Address:t,storageDeposit:e,storageAccount:r,options:n}){var i;n=null!=n?n:{};let o=null!==(i=n.nearAccount)&&void 0!==i?i:(0,c.getNearWallet)(),s=o instanceof h.Account,a=null!=r?r:await (0,c.getNearAccountId)();return s?await o.functionCall({contractId:t,methodName:"storage_deposit",args:{account_id:a,registration_only:!0},gas:new u.default("100"+"0".repeat(12)),attachedDeposit:new u.default(e)}):await o.signAndSendTransaction({receiverId:t,actions:[{type:"FunctionCall",params:{methodName:"storage_deposit",args:{account_id:a,registration_only:!0},gas:"100"+"0".repeat(12),deposit:e}}]})}async function I({nep141Address:t,amount:e,recipient:r,options:n}){var i,o,s,a,u,c;n=null!=n?n:{};let l=null!==(i=n.provider)&&void 0!==i?i:(0,d.getSignerProvider)(),h={symbol:"",decimals:0};n.symbol&&n.decimals||(h=await (0,g.getMetadata)({nep141Address:t,options:n}));let f=null!==(o=n.symbol)&&void 0!==o?o:h.symbol,p=null!==(s=n.decimals)&&void 0!==s?s:h.decimals,y=null!==(a=n.signer)&&void 0!==a?a:l.getSigner(),v=null!==(u=n.sender)&&void 0!==u?u:(await y.getAddress()).toLowerCase(),b=null!==(c=n.auroraErc20Address)&&void 0!==c?c:await (0,m.getAuroraErc20Address)({nep141Address:t,options:n});if(!b)throw Error(`Token not bridged: ${t}`);let _={...w,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:e.toString(),decimals:p,symbol:f,sourceToken:b,sourceTokenName:f,destinationTokenName:f,sender:v,recipient:r};return _=await T(_,n),"undefined"!=typeof window&&(_=await (0,d.track)(_)),_}async function T(t,e){var r,i,o,s;e=null!=e?e:{};let a=(0,d.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,d.getSignerProvider)(),c=(await u.getNetwork()).chainId,h=null!==(i=e.auroraChainId)&&void 0!==i?i:a.auroraChainId;if(c!==h)throw Error(`Wrong eth network for burn, expected: ${h}, got: ${c}`);let p=new l.ethers.Contract(t.sourceToken,null!==(o=e.auroraErc20Abi)&&void 0!==o?o:a.auroraErc20Abi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),m=await u.getBlockNumber()-20,g=await p.withdrawToNear(n.from(t.recipient),t.amount,{gasLimit:1e5});return{...t,status:f.IN_PROGRESS,ethCache:{from:g.from,to:g.to,nonce:g.nonce,data:g.data,safeReorgHeight:m},burnHashes:[...t.burnHashes,g.hash]}}e.i18n={en_US:{steps:t=>[],statusMessage:t=>{switch(t.status){case"in-progress":return"Confirming transaction";case"failed":return"Failed: check transaction status from Wallet";default:return"Completed"}},callToAction:t=>t.status===f.FAILED?"Retry":null}},e.act=b,e.checkStatus=_,e.findAllTransfers=M,e.recover=E,e.checkBurn=A,e.payNep141Storage=S,e.sendToNear=I,e.burn=T;let k=t=>t[t.length-1]},32710:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.burn=e.sendToNear=e.checkBurn=e.recover=e.findAllTransfers=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let a=r(20548),u=r(93694),c=s(r(22241)),l=r(41249),h=r(22326);e.SOURCE_NETWORK="aurora",e.DESTINATION_NETWORK="near",e.TRANSFER_TYPE="@near-eth/aurora-nep141/bridged-ether/sendToNear";let d="burn-bridged-ether-to-near",f={completedStep:null,errors:[],status:c.IN_PROGRESS,type:e.TRANSFER_TYPE,burnHashes:[],burnReceipts:[]};async function p(t){if(null===t.completedStep)return await b(t);throw Error(`Don't know how to act on transfer: ${JSON.stringify(t)}`)}async function m(t){if(null===t.completedStep)return await v(t);throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}async function g({fromBlock:t,toBlock:r,sender:n,options:i}){var o,s;i=null!=i?i:{};let l=(0,u.getBridgeParams)(),f=null!==(o=i.provider)&&void 0!==o?o:(0,u.getAuroraProvider)(),p={address:null!==(s=i.etherExitToNearPrecompile)&&void 0!==s?s:l.etherExitToNearPrecompile,fromBlock:t,toBlock:r,topics:[h.EXIT_TO_NEAR_SIGNATURE,a.ethers.utils.hexZeroPad(n,32)]},m=await f.getLogs(p),g=await Promise.all(m.map(async t=>{let r=await f.getBlock(t.blockHash),i=t.topics[3],o={id:Math.random().toString().slice(2),startTime:new Date(1e3*r.timestamp).toISOString(),type:e.TRANSFER_TYPE,status:c.COMPLETE,completedStep:d,errors:[],amount:a.ethers.BigNumber.from(t.data).toString(),decimals:18,symbol:"ETH",sourceToken:"ETH",sourceTokenName:"ETH",destinationTokenName:"ETH",sender:n,recipient:`NEAR account hash: ${i}`,burnHashes:[t.transactionHash],burnReceipts:[]};return o}));return g}async function y(t,r){var n,i;r=null!=r?r:{};let o=null!==(n=r.provider)&&void 0!==n?n:(0,u.getAuroraProvider)(),s=(0,u.getBridgeParams)(),l=await o.getTransactionReceipt(t),f=l.logs.find(t=>t.topics[0]===h.EXIT_TO_NEAR_SIGNATURE),p=null!==(i=r.etherExitToNearPrecompile)&&void 0!==i?i:s.etherExitToNearPrecompile;if(f.address.toLowerCase()!==p.toLowerCase())throw Error(`Failed to verify exit log precompile address ${JSON.stringify(f)}`);let m=f.topics[3],g=a.ethers.BigNumber.from(f.data).toString(),y="0x"+f.topics[1].slice(26),v=await o.getBlock(l.blockHash),w={id:Math.random().toString().slice(2),startTime:new Date(1e3*v.timestamp).toISOString(),type:e.TRANSFER_TYPE,status:c.COMPLETE,completedStep:d,errors:[],amount:g,decimals:18,symbol:"ETH",sourceToken:"ETH",sourceTokenName:"ETH",destinationTokenName:"ETH",sender:y,recipient:`NEAR account hash: ${m}`,burnHashes:[l.transactionHash],burnReceipts:[]};return w}async function v(t,e){var r,n;e=null!=e?e:{};let i=(0,u.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,u.getAuroraProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.auroraChainId)&&void 0!==n?n:i.auroraChainId;if(s!==a)throw Error(`Wrong aurora network for checkBurn, expected: ${a}, got: ${s}`);let h=_(t.burnHashes),f=await o.getTransactionReceipt(h);if(!f){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,l.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;f=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof l.TxValidationError)return{...t,errors:[...t.errors,e.message],status:c.FAILED};throw e}}if(!f)return t;if(!f.status)return{...t,status:c.FAILED,burnReceipts:[...t.burnReceipts,f],errors:[...t.errors,"Transaction failed"]};f.transactionHash!==h&&(t={...t,burnHashes:[...t.burnHashes,f.transactionHash]});let p=await o.getBlock(f.blockHash);return{...t,status:c.COMPLETE,completedStep:d,startTime:new Date(1e3*p.timestamp).toISOString(),burnReceipts:[...t.burnReceipts,f]}}async function w({amount:t,recipient:e,options:r}){var n,i,o,s,a;r=null!=r?r:{};let c=null!==(n=r.provider)&&void 0!==n?n:(0,u.getSignerProvider)(),l=null!==(i=r.symbol)&&void 0!==i?i:"ETH",h=null!==(o=r.decimals)&&void 0!==o?o:18,d=null!==(s=r.signer)&&void 0!==s?s:c.getSigner(),p=null!==(a=r.sender)&&void 0!==a?a:(await d.getAddress()).toLowerCase(),m={...f,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),symbol:l,sourceToken:l,sourceTokenName:l,destinationTokenName:l,decimals:h,sender:p,recipient:e};return m=await b(m,r),"undefined"!=typeof window&&(m=await (0,u.track)(m)),m}async function b(t,e){var r,i,o;e=null!=e?e:{};let s=(0,u.getBridgeParams)(),l=null!==(r=e.provider)&&void 0!==r?r:(0,u.getSignerProvider)(),h=(await l.getNetwork()).chainId,d=null!==(i=e.auroraChainId)&&void 0!==i?i:s.auroraChainId;if(h!==d)throw Error(`Wrong eth network for burn, expected: ${d}, got: ${h}`);let f=null!==(o=e.etherExitToNearPrecompile)&&void 0!==o?o:s.etherExitToNearPrecompile,p="0x00"+n.from(t.recipient).toString("hex"),m=await l.getBlockNumber()-20,g=await l.send("eth_sendTransaction",[{from:t.sender,to:f,value:a.ethers.BigNumber.from(t.amount).toHexString(),data:p,gas:a.ethers.BigNumber.from(121e3).toHexString()}]),y=await l.getTransaction(g);return{...t,status:c.IN_PROGRESS,ethCache:{from:y.from,to:y.to,nonce:y.nonce,data:y.data,safeReorgHeight:m},burnHashes:[...t.burnHashes,y.hash]}}e.i18n={en_US:{steps:t=>[],statusMessage:t=>{switch(t.status){case"in-progress":return"Confirming transaction";case"failed":return"Failed: check transaction status from Wallet";default:return"Completed"}},callToAction:t=>t.status===c.FAILED?"Retry":null}},e.act=p,e.checkStatus=m,e.findAllTransfers=g,e.recover=y,e.checkBurn=v,e.sendToNear=w,e.burn=b;let _=t=>t[t.length-1]},6274:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(16247),i=r(58180);async function o({nep141Address:t,owner:e,options:r}){var o,s,a;r=null!=r?r:{};let u=null!==(a=null!==(o=r.nearProvider)&&void 0!==o?o:null===(s=r.nearAccount)||void 0===s?void 0:s.connection.provider)&&void 0!==a?a:(0,n.getNearProvider)(),c=await i.nep141.getBalance({nep141Address:t,owner:e,nearProvider:u});return c}e.default=o},64605:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(58180),i=r(16247),o={};async function s({nep141Address:t,options:e}){var r,s,a;e=null!=e?e:{};let u=null!==(a=null!==(r=e.nearProvider)&&void 0!==r?r:null===(s=e.nearAccount)||void 0===s?void 0:s.connection.provider)&&void 0!==a?a:(0,i.getNearProvider)();if(o[t])return o[t];let c=await n.nep141.getMetadata({nep141Address:t,nearProvider:u});return o[t]=c,c}e.default=s},88082:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBalance=e.getMetadata=e.recover=e.findAllTransfers=e.wrapAndSendNearToAurora=e.sendToAurora=void 0;var i=r(26252);Object.defineProperty(e,"sendToAurora",{enumerable:!0,get:function(){return i.sendToAurora}}),Object.defineProperty(e,"wrapAndSendNearToAurora",{enumerable:!0,get:function(){return i.wrapAndSendNearToAurora}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return i.findAllTransfers}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return i.recover}});var o=r(64605);Object.defineProperty(e,"getMetadata",{enumerable:!0,get:function(){return n(o).default}});var s=r(6274);Object.defineProperty(e,"getBalance",{enumerable:!0,get:function(){return n(s).default}})},26252:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getStorageBalance=e.getMinStorageBalance=e.lockNear=e.wrapAndSendNearToAurora=e.lock=e.sendToAurora=e.checkLock=e.recover=e.findAllTransfers=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=r(11501),l=r(93694),h=s(r(22241)),d=r(16247),f=r(58180),p=a(r(64605));e.SOURCE_NETWORK="near",e.DESTINATION_NETWORK="aurora",e.TRANSFER_TYPE="@near-eth/aurora-nep141/natural-nep141/sendToAurora";let m="lock-natural-nep141-to-aurora",g={completedStep:null,errors:[],status:h.IN_PROGRESS,type:e.TRANSFER_TYPE,lockHashes:[]};async function y(t){if(null===t.completedStep)try{if("NEAR"===t.sourceToken)return await S(t);return await E(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&f.urlParams.clear("locking"),t}throw Error(`Don't know how to act on transfer: ${JSON.stringify(t)}`)}async function v(t){if(null===t.completedStep)return await _(t);throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}async function w({fromBlock:t,toBlock:r,sender:i,nep141Address:o,callIndexer:s,options:a}){var u,c,g,y,v,w;a=null!=a?a:{};let b=(0,l.getBridgeParams)(),_=null!==(u=a.auroraEvmAccount)&&void 0!==u?u:b.auroraEvmAccount,M=null!==(y=null!==(c=a.nearProvider)&&void 0!==c?c:null===(g=a.nearAccount)||void 0===g?void 0:g.connection.provider)&&void 0!==y?y:(0,d.getNearProvider)(),E=await s((0,f.buildIndexerTxQuery)({fromBlock:t,toBlock:r,predecessorAccountId:i,receiverAccountId:o})),A=o===_?RegExp(`^${i}:${"0".repeat(64)}[a-f0-9]{40}$`):/^[a-f0-9]{40}$/,S={symbol:"",decimals:0};o===_?S={decimals:18,symbol:"ETH"}:a.symbol&&a.decimals||(S=await (0,p.default)({nep141Address:o,options:a}));let I=null!==(v=a.symbol)&&void 0!==v?v:S.symbol,T=null!==(w=a.decimals)&&void 0!==w?w:S.decimals,k=await Promise.all(E.filter(t=>"ft_transfer_call"===t.args.method_name).filter(t=>{try{let e=JSON.parse(n.from(t.args.args_base64,"base64").toString());return e.receiver_id===_&&A.test(e.msg)}catch(t){return!1}}).map(async t=>{let r;let s=await M.txStatus(t.originated_from_transaction_hash,i);try{r=(r=n.from(s.status.SuccessValue,"base64").toString()).slice(1,r.length-1)}catch(t){console.log("Found a failed transaction: ",t),r="0"}let a=await M.block({blockId:s.transaction_outcome.block_hash}),u=JSON.parse(n.from(t.args.args_base64,"base64").toString()),c=u.amount.toString(),l=u.msg,d=o===_?"0x"+l.slice(l.length-40):"0x"+l;return c!==r?null:{type:e.TRANSFER_TYPE,id:Math.random().toString().slice(2),startTime:new Date(a.header.timestamp/1e6).toISOString(),amount:c,decimals:T,symbol:I,sourceToken:o,sourceTokenName:S.symbol,destinationTokenName:"a"+S.symbol,sender:i,recipient:d,status:h.COMPLETE,completedStep:m,errors:[],lockHashes:[t.originated_from_transaction_hash]}}));return k.filter(t=>null!==t)}async function b(t,r,i){var o,s,a;i=null!=i?i:{};let u=(0,l.getBridgeParams)(),c=null!==(o=i.auroraEvmAccount)&&void 0!==o?o:u.auroraEvmAccount,d=await r(`SELECT public.receipts.included_in_block_timestamp,
    public.action_receipt_actions.receipt_predecessor_account_id, public.action_receipt_actions.args
    FROM public.receipts
    JOIN public.action_receipt_actions
    ON public.action_receipt_actions.receipt_id = public.receipts.receipt_id
    WHERE (originated_from_transaction_hash = '${t}'
      AND receiver_account_id = '${c}'
    )`),[f]=d.filter(t=>{try{let e=JSON.parse(n.from(t.args.args_base64,"base64").toString());return"ft_on_transfer"===t.args.method_name&&/^[a-f0-9]{40}$/.test(e.msg.slice(e.msg.length-40))}catch(t){return!1}});if(!f)throw Error(`Failed to verify ${c} ft_on_transfer action receipt: ${JSON.stringify(d)}`);let g=f.receipt_predecessor_account_id,y={symbol:"",decimals:0};g===c?y={decimals:18,symbol:"ETH"}:i.symbol&&i.decimals||(y=await (0,p.default)({nep141Address:g,options:i}));let v=null!==(s=i.symbol)&&void 0!==s?s:y.symbol,w=null!==(a=i.decimals)&&void 0!==a?a:y.decimals,b=JSON.parse(n.from(f.args.args_base64,"base64").toString()),_=b.msg,M=b.sender_id;return M===c&&(M=_.slice(0,_.indexOf(":"))),{type:e.TRANSFER_TYPE,id:Math.random().toString().slice(2),startTime:new Date(Number(f.included_in_block_timestamp)/1e6).toISOString(),amount:b.amount,decimals:w,symbol:v,sourceToken:g,sourceTokenName:y.symbol,destinationTokenName:"a"+y.symbol,sender:M,recipient:"0x"+_.slice(_.length-40),status:h.COMPLETE,completedStep:m,errors:[],lockHashes:[t]}}async function _(t,e){var r,n,i;let o,s;if(e=null!=e?e:{},0===t.lockHashes.length){let e=f.urlParams.get("locking"),r=f.urlParams.get("transactionHashes"),n=f.urlParams.get("errorCode");if(s=["locking","transactionHashes","errorCode","errorMessage"],!e){let e="Failed to process NEAR Wallet transaction.";return console.error(e),{...t,status:h.FAILED,errors:[e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:h.FAILED,errors:[`Failed: ${r}`]}}if(n)return f.urlParams.clear(...s),{...t,status:h.FAILED,errors:[`Failed: ${n}`]};if(!r)return console.log("Waiting for Near wallet redirect to sign lock"),t;o=r}else o=k(t.lockHashes);let a=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,d.getNearProvider)(),u=c.utils.serialize.base_decode(o),l=await a.txStatus(u,t.sender),p=await a.block({blockId:l.transaction_outcome.block_hash}),g=new Date(p.header.timestamp/1e6).toISOString();return s&&f.urlParams.clear(...s),{...t,status:h.COMPLETE,completedStep:m,startTime:g,lockHashes:[...t.lockHashes,o]}}async function M({nep141Address:t,amount:e,recipient:r,options:n}){var i,o,s;let a={symbol:"",decimals:0};(n=null!=n?n:{}).symbol&&n.decimals||(a=await (0,p.default)({nep141Address:t,options:n}));let u=null!==(i=n.symbol)&&void 0!==i?i:a.symbol,c=null!==(o=n.decimals)&&void 0!==o?o:a.decimals,h=null!==(s=n.sender)&&void 0!==s?s:await (0,d.getNearAccountId)(),m={...g,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:e.toString(),decimals:c,symbol:u,sourceToken:t,sourceTokenName:u,destinationTokenName:"a"+u,sender:h,recipient:r};try{m=await E(m,n),"undefined"!=typeof window&&(m=await (0,l.track)(m))}catch(t){throw t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&f.urlParams.get("locking")&&(await (0,l.untrack)(f.urlParams.get("locking")),f.urlParams.clear("locking")),t}return m}async function E(t,e){var r,n;let i;e=null!=e?e:{};let o=(0,l.getBridgeParams)(),s=null!==(r=e.nearAccount)&&void 0!==r?r:(0,d.getNearWallet)(),a=s instanceof c.Account,p="undefined"!=typeof window&&(a||"browser"===s.type),m=null!==(n=e.auroraEvmAccount)&&void 0!==n?n:o.auroraEvmAccount,g=t.sourceToken===m?t.sender+":"+"0".repeat(64):"";return p&&f.urlParams.set({locking:t.id}),p&&(t=await (0,l.track)({...t,status:h.IN_PROGRESS})),i=a?await s.functionCall({contractId:t.sourceToken,methodName:"ft_transfer_call",args:{receiver_id:m,amount:t.amount,memo:null,msg:g+t.recipient.toLowerCase().slice(2)},gas:new u.default("70"+"0".repeat(12)),attachedDeposit:new u.default("1")}):await s.signAndSendTransaction({receiverId:t.sourceToken,actions:[{type:"FunctionCall",params:{methodName:"ft_transfer_call",args:{receiver_id:m,amount:t.amount,memo:null,msg:g+t.recipient.toLowerCase().slice(2)},gas:"70"+"0".repeat(12),deposit:"1"}}]}),{...t,lockHashes:[i.transaction.hash]}}async function A({amount:t,recipient:e,options:r}){var n,i;r=null!=r?r:{};let o=null!==(n=r.symbol)&&void 0!==n?n:"NEAR",s=null!==(i=r.sender)&&void 0!==i?i:await (0,d.getNearAccountId)(),a={...g,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),decimals:24,symbol:o,sourceToken:"NEAR",sourceTokenName:o,destinationTokenName:"a"+o,sender:s,recipient:e};try{a=await S(a,r),"undefined"!=typeof window&&(a=await (0,l.track)(a))}catch(t){throw t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&f.urlParams.get("locking")&&(await (0,l.untrack)(f.urlParams.get("locking")),f.urlParams.clear("locking")),t}return a}async function S(t,e){var r,i,o,s,a,p;e=null!=e?e:{};let m=(0,l.getBridgeParams)(),g=null!==(r=e.nearAccount)&&void 0!==r?r:(0,d.getNearWallet)(),y=g instanceof c.Account,v="undefined"!=typeof window&&(y||"browser"===g.type),w=null!==(s=null!==(i=e.nearProvider)&&void 0!==i?i:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,d.getNearProvider)(),b=null!==(a=e.wNearNep141)&&void 0!==a?a:m.wNearNep141,_=null!==(p=e.auroraEvmAccount)&&void 0!==p?p:m.auroraEvmAccount,M=[],E=await I({nep141Address:b,nearProvider:w}),A=await T({nep141Address:b,accountId:t.sender,nearProvider:w});(!A||new u.default(A.total).lt(new u.default(E)))&&(y?M.push(c.transactions.functionCall("storage_deposit",n.from(JSON.stringify({account_id:t.sender,registration_only:!0})),new u.default("50"+"0".repeat(12)),new u.default(E))):M.push({type:"FunctionCall",params:{methodName:"storage_deposit",args:{account_id:t.sender,registration_only:!0},gas:"50"+"0".repeat(12),deposit:E}})),y?(M.push(c.transactions.functionCall("near_deposit",n.from(JSON.stringify({})),new u.default("30"+"0".repeat(12)),new u.default(t.amount))),M.push(c.transactions.functionCall("ft_transfer_call",n.from(JSON.stringify({receiver_id:_,amount:t.amount,memo:null,msg:t.recipient.toLowerCase().slice(2)})),new u.default("70"+"0".repeat(12)),new u.default("1")))):(M.push({type:"FunctionCall",params:{methodName:"near_deposit",args:{},gas:"30"+"0".repeat(12),deposit:t.amount}}),M.push({type:"FunctionCall",params:{methodName:"ft_transfer_call",args:{receiver_id:_,amount:t.amount,memo:null,msg:t.recipient.toLowerCase().slice(2)},gas:"70"+"0".repeat(12),deposit:"1"}})),v&&f.urlParams.set({locking:t.id}),v&&(t=await (0,l.track)({...t,status:h.IN_PROGRESS}));let S=await g.signAndSendTransaction({receiverId:b,actions:M});return{...t,lockHashes:[S.transaction.hash]}}async function I({nep141Address:t,nearProvider:e}){try{let r=await e.query({request_type:"call_function",account_id:t,method_name:"storage_balance_bounds",args_base64:"",finality:"optimistic"});return JSON.parse(n.from(r.result).toString()).min}catch(i){let r=await e.query({request_type:"call_function",account_id:t,method_name:"storage_minimum_balance",args_base64:"",finality:"optimistic"});return JSON.parse(n.from(r.result).toString())}}async function T({nep141Address:t,accountId:e,nearProvider:r}){try{let i=await r.query({request_type:"call_function",account_id:t,method_name:"storage_balance_of",args_base64:n.from(JSON.stringify({account_id:e})).toString("base64"),finality:"optimistic"});return JSON.parse(n.from(i.result).toString())}catch(e){return console.warn(e,t),null}}e.i18n={en_US:{steps:t=>[],statusMessage:t=>{switch(t.status){case"in-progress":return"Confirming transaction";case"failed":return k(t.errors);default:return"Completed"}},callToAction:t=>t.status===h.FAILED?"Retry":null}},e.act=y,e.checkStatus=v,e.findAllTransfers=w,e.recover=b,e.checkLock=_,e.sendToAurora=M,e.lock=E,e.wrapAndSendNearToAurora=A,e.lockNear=S,e.getMinStorageBalance=I,e.getStorageBalance=T;let k=t=>t[t.length-1]},28984:function(t,e,r){"use strict";/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i,o,s,a=r(41052)("http-errors"),u=r(66644),c=r(96217),l=r(35717),h=r(72953);function d(t){return Number(String(t).charAt(0)+"00")}function f(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function p(t){return"Error"!==t.substr(-5)?t+"Error":t}t.exports=function t(){for(var e,r,n=500,i={},o=0;o<arguments.length;o++){var s=arguments[o];if(s instanceof Error){n=(e=s).status||e.statusCode||n;continue}switch(typeof s){case"string":r=s;break;case"number":n=s,0!==o&&a("non-first-argument status code; replace with createError("+s+", ...)");break;case"object":i=s}}"number"==typeof n&&(n<400||n>=600)&&a("non-error status code; use only 4xx or 5xx status codes"),("number"!=typeof n||!c[n]&&(n<400||n>=600))&&(n=500);var u=t[n]||t[d(n)];for(var l in e||Error.captureStackTrace(e=u?new u(r):Error(r||c[n]),t),u&&e instanceof u&&e.status===n||(e.expose=n<500,e.status=e.statusCode=n),i)"status"!==l&&"statusCode"!==l&&(e[l]=i[l]);return e},t.exports.HttpError=function(){function t(){throw TypeError("cannot construct abstract class")}return l(t,Error),t}(),t.exports.isHttpError=(n=t.exports.HttpError,function(t){return!!t&&"object"==typeof t&&(t instanceof n||t instanceof Error&&"boolean"==typeof t.expose&&"number"==typeof t.statusCode&&t.status===t.statusCode)}),i=t.exports,o=c.codes,s=t.exports.HttpError,o.forEach(function(t){var e,r=h(c[t]);switch(d(t)){case 400:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!0,i}(s,r,t);break;case 500:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!1,i}(s,r,t)}e&&(i[t]=e,i[r]=e)}),i["I'mateapot"]=a.function(i.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')},41052:function(t){"use strict";function e(t,e){if("function"!=typeof t)throw TypeError("argument fn must be a function");return t}function r(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw TypeError("must call property on owner object");if(!n.configurable)throw TypeError("property must be configurable")}/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.exports=function(t){if(!t)throw TypeError("argument namespace is required");function n(t){}return n._file=void 0,n._ignored=!0,n._namespace=t,n._traced=!1,n._warned=Object.create(null),n.function=e,n.property=r,n}},34594:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;let s=o(r(25417)),a=o(r(27812)),u=r(19548),c=r(34298),l=r(25532),h=r(28789),d=r(41829),f=r(64473),p=r(46503),m=o(r(44702));function g(t){return JSON.parse(n.from(t).toString())}function y(t){return n.from(JSON.stringify(t))}class v{constructor(t,e){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=e}get ready(){let t=a.default("Account.ready()");return t("not needed anymore, always ready"),Promise.resolve()}async fetchState(){let t=a.default("Account.fetchState()");t("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(t,e){if(!i.env.NEAR_NO_LOGS)for(let r of e)console.log(`Receipt${r.receiptIds.length>1?"s":""}: ${r.receiptIds.join(", ")}`),this.printLogs(t,r.logs,"	"),r.failure&&console.warn(`	Failure [${t}]: ${r.failure}`)}printLogs(t,e,r=""){if(!i.env.NEAR_NO_LOGS)for(let n of e)console.log(`${r}Log [${t}]: ${n}`)}async signTransaction(t,e){let r=await this.findAccessKey(t,e);if(!r)throw new c.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");let{accessKey:n}=r,i=await this.connection.provider.block({finality:"final"}),o=i.header.hash,s=++n.nonce;return await u.signTransaction(t,s,e,l.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...t){return"string"==typeof t[0]?this.signAndSendTransactionV1(t[0],t[1]):this.signAndSendTransactionV2(t[0])}signAndSendTransactionV1(t,e){let r=a.default("Account.signAndSendTransaction(receiverId, actions");return r("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:t,actions:e})}async signAndSendTransactionV2({receiverId:t,actions:e,returnError:r}){let n,i;let o=await m.default(500,12,1.5,async()=>{[n,i]=await this.signTransaction(t,e);let r=i.transaction.publicKey;try{return await this.connection.provider.sendTransaction(i)}catch(e){if("InvalidNonce"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} with new nonce.`),delete this.accessKeyByPublicKeyCache[r.toString()],null;if("Expired"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} due to expired block hash`),null;throw e.context=new c.ErrorContext(l.baseEncode(n)),e}});if(!o)throw new c.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");let s=[o.transaction_outcome,...o.receipts_outcome].reduce((t,e)=>e.outcome.logs.length||"object"==typeof e.outcome.status&&"object"==typeof e.outcome.status.Failure?t.concat({receiptIds:e.outcome.receipt_ids,logs:e.outcome.logs,failure:void 0!==e.outcome.status.Failure?f.parseRpcError(e.outcome.status.Failure):null}):t,[]);if(this.printLogsAndFailures(i.transaction.receiverId,s),!r&&"object"==typeof o.status&&"object"==typeof o.status.Failure){if(o.status.Failure.error_message&&o.status.Failure.error_type)throw new c.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type);throw f.parseResultError(o)}return o}async findAccessKey(t,e){let r=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!r)return null;let n=this.accessKeyByPublicKeyCache[r.toString()];if(void 0!==n)return{publicKey:r,accessKey:n};try{let t=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:r.toString(),finality:"optimistic"});if(this.accessKeyByPublicKeyCache[r.toString()])return{publicKey:r,accessKey:this.accessKeyByPublicKeyCache[r.toString()]};return this.accessKeyByPublicKeyCache[r.toString()]=t,{publicKey:r,accessKey:t}}catch(t){if("AccessKeyDoesNotExist"==t.type)return null;throw t}}async createAndDeployContract(t,e,r,n){let i=u.fullAccessKey();await this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(n),u.addKey(h.PublicKey.from(e),i),u.deployContract(r)]});let o=new v(this.connection,t);return o}async sendMoney(t,e){return this.signAndSendTransaction({receiverId:t,actions:[u.transfer(e)]})}async createAccount(t,e,r){let n=u.fullAccessKey();return this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(r),u.addKey(h.PublicKey.from(e),n)]})}async deleteAccount(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteAccount(t)]})}async deployContract(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deployContract(t)]})}encodeJSContractArgs(t,e,r){return n.concat([n.from(t),n.from([0]),n.from(e),n.from([0]),n.from(r)])}async functionCall(...t){return"string"==typeof t[0]?this.functionCallV1(t[0],t[1],t[2],t[3],t[4]):this.functionCallV2(t[0])}functionCallV1(t,e,r,n,i){let o=a.default("Account.functionCall(contractId, methodName, args, gas, amount)");return o("use `Account.functionCall(FunctionCallOptions)` instead"),r=r||{},this.validateArgs(r),this.signAndSendTransaction({receiverId:t,actions:[u.functionCall(e,r,n||p.DEFAULT_FUNCTION_CALL_GAS,i)]})}functionCallV2({contractId:t,methodName:e,args:r={},gas:n=p.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:i,walletMeta:o,walletCallbackUrl:s,stringify:a,jsContract:c}){let l;if(this.validateArgs(r),c){let o=this.encodeJSContractArgs(t,e,JSON.stringify(r));l=["call_js_contract",o,n,i,null,!0]}else{let t=void 0===a?u.stringifyJsonOrBytes:a;l=[e,r,n,i,t,!1]}return this.signAndSendTransaction({receiverId:c?this.connection.jsvmAccountId:t,actions:[u.functionCall.apply(void 0,l)],walletMeta:o,walletCallbackUrl:s})}async addKey(t,e,r,n){let i;return r||(r=[]),Array.isArray(r)||(r=[r]),i=e?u.functionCallAccessKey(e,r,n):u.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[u.addKey(h.PublicKey.from(t),i)]})}async deleteKey(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteKey(h.PublicKey.from(t))]})}async stake(t,e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.stake(e,h.PublicKey.from(t))]})}validateArgs(t){let e=void 0!==t.byteLength&&t.byteLength===t.length;if(!e&&(Array.isArray(t)||"object"!=typeof t))throw new d.PositionalArgsError}async viewFunction(t,e,r={},{parse:i=g,stringify:o=y,jsContract:s=!1}={}){let a;this.validateArgs(r),a=s?this.encodeJSContractArgs(t,e,Object.keys(r).length>0?JSON.stringify(r):""):o(r);let u=await this.connection.provider.query({request_type:"call_function",account_id:s?this.connection.jsvmAccountId:t,method_name:s?"view_js_contract":e,args_base64:a.toString("base64"),finality:"optimistic"});return u.logs&&this.printLogs(t,u.logs),u.result&&u.result.length>0&&i(n.from(u.result))}async viewState(t,e={finality:"optimistic"}){let{values:r}=await this.connection.provider.query({request_type:"view_state",...e,account_id:this.accountId,prefix_base64:n.from(t).toString("base64")});return r.map(({key:t,value:e})=>({key:n.from(t,"base64"),value:n.from(e,"base64")}))}async getAccessKeys(){let t=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(t)?t:t.keys}async getAccountDetails(){let t=await this.getAccessKeys(),e=t.filter(t=>"FullAccess"!==t.access_key.permission).map(t=>{let e=t.access_key.permission;return{contractId:e.FunctionCall.receiver_id,amount:e.FunctionCall.allowance,publicKey:t.public_key}});return{authorizedApps:e}}async getAccountBalance(){let t=await this.connection.provider.experimental_protocolConfig({finality:"final"}),e=await this.state(),r=new s.default(t.runtime_config.storage_amount_per_byte),n=new s.default(e.storage_usage).mul(r),i=new s.default(e.locked),o=new s.default(e.amount).add(i),a=o.sub(s.default.max(i,n));return{total:o.toString(),stateStaked:n.toString(),staked:i.toString(),available:a.toString()}}}e.Account=v},99004:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;let n=r(44351);class i{}e.AccountCreator=i;class o extends i{constructor(t,e){super(),this.masterAccount=t,this.initialBalance=e}async createAccount(t,e){await this.masterAccount.createAccount(t,e,this.initialBalance)}}e.LocalAccountCreator=o;class s extends i{constructor(t,e){super(),this.connection=t,this.helperUrl=e}async createAccount(t,e){await n.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:e.toString()}))}}e.UrlAccountCreator=s},44611:function(t,e,r){"use strict";var n,i,o,s,a,u,c=r(48764).Buffer,l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account2FA=e.AccountMultisig=e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=void 0;let h=l(r(25417)),d=l(r(27812)),f=r(34594),p=r(60384),m=r(28789),g=r(19548),y=r(34298),v=r(44351);e.MULTISIG_STORAGE_KEY="__multisigRequest",e.MULTISIG_ALLOWANCE=new h.default(p.parseNearAmount("1")),e.MULTISIG_GAS=new h.default("100000000000000"),e.MULTISIG_DEPOSIT=new h.default("0"),e.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],e.MULTISIG_CONFIRM_METHODS=["confirm"],(n=s=e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})).CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",n.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",n.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",n.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",n.METHOD_NOT_FOUND="Contract method is not found",(i=a=e.MultisigStateStatus||(e.MultisigStateStatus={}))[i.INVALID_STATE=0]="INVALID_STATE",i[i.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",i[i.VALID_STATE=2]="VALID_STATE",i[i.UNKNOWN_STATE=3]="UNKNOWN_STATE",(o=u||(u={}))[o.INVALID_CODE=0]="INVALID_CODE",o[o.VALID_CODE=1]="VALID_CODE",o[o.UNKNOWN_CODE=2]="UNKNOWN_CODE";let w={[e.MULTISIG_STORAGE_KEY]:null};class b extends f.Account{constructor(t,e,r){super(t,e),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}async signAndSendTransactionWithAccount(t,e){return super.signAndSendTransaction({receiverId:t,actions:e})}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:r}){let n;let{accountId:i}=this,o=c.from(JSON.stringify({request:{receiver_id:t,actions:A(r,i,t)}}));try{n=await super.signAndSendTransaction({receiverId:i,actions:[g.functionCall("add_request_and_confirm",o,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(e){if(e.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(t,r);throw e}if(!n.status)throw Error("Request failed");let s={...n.status};if(!s.SuccessValue||"string"!=typeof s.SuccessValue)throw Error("Request failed");return this.setRequest({accountId:i,actions:r,requestId:parseInt(c.from(s.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(n),this.deleteUnconfirmedRequests(),n}async checkMultisigCodeAndStateStatus(t){let r=t?u.UNKNOWN_CODE:u.VALID_CODE;try{return t?await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.deployContract(t),g.functionCall("delete_request",{request_id:4294967295},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]}):await this.deleteRequest(4294967295),{codeStatus:u.VALID_CODE,stateStatus:a.VALID_STATE}}catch(t){if(new RegExp(s.CANNOT_DESERIALIZE_STATE).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.INVALID_STATE};if(new RegExp(s.MULTISIG_NOT_INITIALIZED).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.STATE_NOT_INITIALIZED};if(new RegExp(s.NO_SUCH_REQUEST).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.VALID_STATE};if(new RegExp(s.METHOD_NOT_FOUND).test(t&&t.message))return{codeStatus:u.INVALID_CODE,stateStatus:a.UNKNOWN_STATE};throw t}}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:t},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}async deleteAllRequests(){let t=await this.getRequestIds();t.length&&await Promise.all(t.map(t=>this.deleteRequest(t)))}async deleteUnconfirmedRequests(){let t=await this.getRequestIds(),{requestId:r}=this.getRequest();for(let n of t)if(n!=r)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:n},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(t){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(e.MULTISIG_STORAGE_KEY)||"{}"):w[e.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(e.MULTISIG_STORAGE_KEY,JSON.stringify(t));w[e.MULTISIG_STORAGE_KEY]=t}}e.AccountMultisig=b;class _ extends b{constructor(t,e,r){super(t,e,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}async signAndSendTransaction(...t){if("string"!=typeof t[0])return this.__signAndSendTransaction(t[0]);{let e=d.default("Account.signAndSendTransaction(receiverId, actions");return e("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:t[0],actions:t[1]})}}async __signAndSendTransaction({receiverId:t,actions:e}){await super.signAndSendTransaction({receiverId:t,actions:e}),await this.sendCode();let r=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(r),r}async deployMultisig(t){let{accountId:r}=this,n=(await this.getRecoveryMethods()).data.filter(({kind:t,publicKey:e})=>("phrase"===t||"ledger"===t)&&null!==e).map(t=>t.publicKey),i=(await this.getAccessKeys()).filter(({public_key:t,access_key:{permission:e}})=>"FullAccess"===e&&!n.includes(t)).map(t=>t.public_key).map(M),o=M((await this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),s=c.from(JSON.stringify({num_confirmations:2})),u=[...i.map(t=>g.deleteKey(t)),...i.map(t=>g.addKey(t,g.functionCallAccessKey(r,e.MULTISIG_CHANGE_METHODS,null))),g.addKey(o,g.functionCallAccessKey(r,e.MULTISIG_CONFIRM_METHODS,null)),g.deployContract(t)],l=u.concat(g.functionCall("new",s,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);let{stateStatus:h}=await this.checkMultisigCodeAndStateStatus(t);switch(h){case a.STATE_NOT_INITIALIZED:return await super.signAndSendTransactionWithAccount(r,l);case a.VALID_STATE:return await super.signAndSendTransactionWithAccount(r,u);case a.INVALID_STATE:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}async disableWithFAK({contractBytes:t,cleanupContractBytes:e}){let r=[];e&&(await this.deleteAllRequests().catch(t=>t),r=await this.get2faDisableCleanupActions(e));let n=await this.get2faDisableKeyConversionActions(),i=[...r,...n,g.deployContract(t)],o=await this.findAccessKey(this.accountId,i);if(o&&o.accessKey&&"FullAccess"!==o.accessKey.permission)throw new y.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,i)}async get2faDisableCleanupActions(t){let r=await this.viewState("").catch(t=>{let e=t.cause&&t.cause.name;if("NO_CONTRACT_CODE"==e)return[];throw"TOO_LARGE_CONTRACT_STATE"==e?new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):t}),n=r.map(({key:t})=>t.toString("base64"));return r.length?[g.deployContract(t),g.functionCall("clean",{keys:n},e.MULTISIG_GAS,new h.default("0"))]:[]}async get2faDisableKeyConversionActions(){let{accountId:t}=this,e=await this.getAccessKeys(),r=e.filter(({access_key:t})=>"FullAccess"!==t.permission).filter(({access_key:e})=>{let r=e.permission.FunctionCall;return r.receiver_id===t&&4===r.method_names.length&&r.method_names.includes("add_request_and_confirm")}),n=m.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[g.deleteKey(n),...r.map(({public_key:t})=>g.deleteKey(m.PublicKey.from(t))),...r.map(({public_key:t})=>g.addKey(m.PublicKey.from(t),g.fullAccessKey()))]}async disable(t,e){let r;let{stateStatus:n}=await this.checkMultisigCodeAndStateStatus();if(n!==a.VALID_STATE&&n!==a.STATE_NOT_INITIALIZED)throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");await this.deleteAllRequests().catch(t=>r=t);let i=await this.get2faDisableCleanupActions(e).catch(t=>{if("ContractHasExistingState"===t.type)throw r||t;throw t}),o=[...i,...await this.get2faDisableKeyConversionActions(),g.deployContract(t)];return console.log("disabling 2fa for",this.accountId),await this.signAndSendTransaction({receiverId:this.accountId,actions:o})}async sendCodeDefault(){let{accountId:t}=this,{requestId:e}=this.getRequest(),r=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:t,method:r,requestId:e}),e}async getCodeDefault(t){throw Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){let t=await this.get2faMethod(),e=await this.getCode(t);try{let t=await this.verifyCode(e);return t}catch(t){if(console.warn("Error validating security code:",t),t.toString().includes("invalid 2fa code provided")||t.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw t}}async verifyCodeDefault(t){let{accountId:e}=this,r=this.getRequest();if(!r)throw Error("no request pending");let{requestId:n}=r;return await this.postSignedJson("/2fa/verify",{accountId:e,securityCode:t,requestId:n})}async getRecoveryMethods(){let{accountId:t}=this;return{accountId:t,data:await this.postSignedJson("/account/recoveryMethods",{accountId:t})}}async get2faMethod(){let{data:t}=await this.getRecoveryMethods();if(t&&t.length&&(t=t.find(t=>0===t.kind.indexOf("2fa-"))),!t)return null;let{kind:e,detail:r}=t;return{kind:e,detail:r}}async signatureFor(){let{accountId:t}=this,e=await this.connection.provider.block({finality:"final"}),r=e.header.height.toString(),n=await this.connection.signer.signMessage(c.from(r),t,this.connection.networkId),i=c.from(n.signature).toString("base64");return{blockNumber:r,blockNumberSignature:i}}async postSignedJson(t,e){return await v.fetchJson(this.helperUrl+t,JSON.stringify({...e,...await this.signatureFor()}))}}e.Account2FA=_;let M=t=>m.PublicKey.from(t),E=t=>t.toString().replace("ed25519:",""),A=(t,r,n)=>t.map(t=>{let i=t.enum,{gas:o,publicKey:s,methodName:a,args:u,deposit:l,accessKey:h,code:d}=t[i],f={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:s&&E(s)||void 0,method_name:a,args:u&&c.from(u).toString("base64")||void 0,code:d&&c.from(d).toString("base64")||void 0,amount:l&&l.toString()||void 0,deposit:l&&l.toString()||"0",permission:void 0};if(h&&(n===r&&"fullAccess"!==h.permission.enum&&(f.permission={receiver_id:r,allowance:e.MULTISIG_ALLOWANCE.toString(),method_names:e.MULTISIG_CHANGE_METHODS}),"functionCall"===h.permission.enum)){let{receiverId:t,methodNames:e,allowance:r}=h.permission.functionCall;f.permission={receiver_id:t,allowance:r&&r.toString()||void 0,method_names:e}}return f})},75653:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;let n=r(57738);async function i(t){return new n.Near(t)}e.connect=i},11501:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=o(r(59702)),s(r(4140),e),s(r(75653),e),r(58010)},4140:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.WalletAccount=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;let s=o(r(34298));e.providers=s;let a=o(r(8828));e.utils=a;let u=o(r(19548));e.transactions=u;let c=o(r(38905));e.validators=c;let l=r(34594);Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return l.Account}});let h=o(r(44611));e.multisig=h;let d=o(r(99004));e.accountCreator=d;let f=r(29943);Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return f.Connection}});let p=r(87535);Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return p.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return p.InMemorySigner}});let m=r(44253);Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return m.Contract}});let g=r(28789);Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}});let y=r(57738);Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return y.Near}});let v=r(56162);Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletAccount",{enumerable:!0,get:function(){return v.WalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},29943:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;let n=r(34298),i=r(87535);class o{constructor(t,e,r,n){this.networkId=t,this.provider=e,this.signer=r,this.jsvmAccountId=n}static fromConfig(t){let e=function(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new n.JsonRpcProvider({...t.args});default:throw Error(`Unknown provider type ${t.type}`)}}(t.provider),r=function(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new i.InMemorySigner(t.keyStore);default:throw Error(`Unknown signer type ${t.type}`)}}(t.signer);return new o(t.networkId,e,r,t.jsvmAccountId)}}e.Connection=o},46503:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FUNCTION_CALL_GAS=void 0;let i=n(r(25417));e.DEFAULT_FUNCTION_CALL_GAS=new i.default("30000000000000")},44253:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;let i=n(r(25417)),o=n(r(27812)),s=r(34298),a=r(41829);function u(t,e){return({[t]:(...t)=>e(...t)})[t]}let c=t=>t&&void 0!==t.byteLength&&t.byteLength===t.length,l=t=>"[object Object]"===Object.prototype.toString.call(t);class h{constructor(t,e,r){this.account=t,this.contractId=e;let{viewMethods:n=[],changeMethods:i=[]}=r;n.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(e={},r={},...n)=>{if(n.length||!(l(e)||c(e))||!l(r))throw new a.PositionalArgsError;return this.account.viewFunction(this.contractId,t,e,r)})})}),i.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(...e)=>{if(e.length&&(e.length>3||!(l(e[0])||c(e[0]))))throw new a.PositionalArgsError;if(e.length>1||!(e[0]&&e[0].args)){let r=o.default("contract.methodName(args, gas, amount)");return r("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:t,args:e[0],gas:e[1],amount:e[2]})}return this._changeMethod({methodName:t,...e[0]})})})})}async _changeMethod({args:t,methodName:e,gas:r,amount:n,meta:o,callbackUrl:u}){!function(t){for(let e of Object.keys(t)){let r=t[e];if(r&&!i.default.isBN(r)&&isNaN(r))throw new a.ArgumentTypeError(e,"number, decimal string or BN",r)}}({gas:r,amount:n});let c=await this.account.functionCall({contractId:this.contractId,methodName:e,args:t,gas:r,attachedDeposit:n,walletMeta:o,walletCallbackUrl:u});return s.getTransactionLastResult(c)}}e.Contract=h},59702:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;let n=r(47542);Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});let i=r(19472);Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return i.InMemoryKeyStore}});let o=r(47966);Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return o.BrowserLocalStorageKeyStore}});let s=r(77555);Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},47966:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;let n=r(47542),i=r(28789);class o extends n.KeyStore{constructor(t=window.localStorage,e="near-api-js:keystore:"){super(),this.localStorage=t,this.prefix=e}async setKey(t,e,r){this.localStorage.setItem(this.storageKeyForSecretKey(t,e),r.toString())}async getKey(t,e){let r=this.localStorage.getItem(this.storageKeyForSecretKey(t,e));return r?i.KeyPair.fromString(r):null}async removeKey(t,e){this.localStorage.removeItem(this.storageKeyForSecretKey(t,e))}async clear(){for(let t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)}async getNetworks(){let t=new Set;for(let e of this.storageKeys())if(e.startsWith(this.prefix)){let r=e.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())}async getAccounts(t){let e=[];for(let r of this.storageKeys())if(r.startsWith(this.prefix)){let n=r.substring(this.prefix.length).split(":");n[1]===t&&e.push(n[0])}return e}storageKeyForSecretKey(t,e){return`${this.prefix}${e}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}e.BrowserLocalStorageKeyStore=o},19472:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;let n=r(47542),i=r(28789);class o extends n.KeyStore{constructor(){super(),this.keys={}}async setKey(t,e,r){this.keys[`${e}:${t}`]=r.toString()}async getKey(t,e){let r=this.keys[`${e}:${t}`];return r?i.KeyPair.fromString(r):null}async removeKey(t,e){delete this.keys[`${e}:${t}`]}async clear(){this.keys={}}async getNetworks(){let t=new Set;return Object.keys(this.keys).forEach(e=>{let r=e.split(":");t.add(r[1])}),Array.from(t.values())}async getAccounts(t){let e=[];return Object.keys(this.keys).forEach(r=>{let n=r.split(":");n[n.length-1]===t&&e.push(n.slice(0,n.length-1).join(":"))}),e}toString(){return"InMemoryKeyStore"}}e.InMemoryKeyStore=o},47542:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;class r{}e.KeyStore=r},77555:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;let n=r(47542);class i extends n.KeyStore{constructor(t,e={writeKeyStoreIndex:0}){super(),this.options=e,this.keyStores=t}async setKey(t,e,r){await this.keyStores[this.options.writeKeyStoreIndex].setKey(t,e,r)}async getKey(t,e){for(let r of this.keyStores){let n=await r.getKey(t,e);if(n)return n}return null}async removeKey(t,e){for(let r of this.keyStores)await r.removeKey(t,e)}async clear(){for(let t of this.keyStores)await t.clear()}async getNetworks(){let t=new Set;for(let e of this.keyStores)for(let r of(await e.getNetworks()))t.add(r);return Array.from(t)}async getAccounts(t){let e=new Set;for(let r of this.keyStores)for(let n of(await r.getAccounts(t)))e.add(n);return Array.from(e)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}e.MergeKeyStore=i},57738:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;let i=n(r(25417)),o=r(34594),s=r(29943),a=r(44253),u=r(99004);class c{constructor(t){if(this.config=t,this.connection=s.Connection.fromConfig({networkId:t.networkId,provider:{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||t.deps&&t.deps.keyStore},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){let e=new i.default(t.initialBalance?t.initialBalance:"500000000000000000000000000");this.accountCreator=new u.LocalAccountCreator(new o.Account(this.connection,t.masterAccount),e)}else t.helperUrl?this.accountCreator=new u.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}async account(t){let e=new o.Account(this.connection,t);return e}async createAccount(t,e){if(!this.accountCreator)throw Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(t,e),new o.Account(this.connection,t)}async loadContract(t,e){let r=new o.Account(this.connection,e.sender);return new a.Contract(r,t,e)}async sendTokens(t,e,r){console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead.");let n=new o.Account(this.connection,e),i=await n.sendMoney(r,t);return i.transaction_outcome.id}}e.Near=c},34298:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.JsonRpcProvider=e.Provider=void 0;let n=r(44515);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}});let i=r(57538);Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return i.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}})},57538:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.ErrorContext=e.TypedError=void 0;let s=o(r(27812)),a=r(44515),u=r(44351),c=r(41829);Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return c.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return c.ErrorContext}});let l=r(25532),h=o(r(44702)),d=r(64473),f=123;class p extends a.Provider{constructor(t){if(super(),null!=t&&"object"==typeof t)this.connection=t;else{let e=s.default("JsonRpcProvider(url?: string)");e("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:t}}}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_commit",[n.from(e).toString("base64")])}async sendTransactionAsync(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_async",[n.from(e).toString("base64")])}async txStatus(t,e){return"string"==typeof t?this.txStatusString(t,e):this.txStatusUint8Array(t,e)}async txStatusUint8Array(t,e){return this.sendJsonRpc("tx",[l.baseEncode(t),e])}async txStatusString(t,e){return this.sendJsonRpc("tx",[t,e])}async txStatusReceipts(t,e){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[l.baseEncode(t),e])}async query(...t){let e;if(1===t.length)e=await this.sendJsonRpc("query",t[0]);else{let[r,n]=t;e=await this.sendJsonRpc("query",[r,n])}if(e&&e.error)throw new c.TypedError(`Querying ${t} failed: ${e.error}.
${JSON.stringify(e,null,2)}`,d.getErrorTypeFromErrorMessage(e.error));return e}async block(t){let{finality:e}=t,{blockId:r}=t;if("object"!=typeof t){let e=s.default("JsonRpcProvider.block(blockId)");e("use `block({ blockId })` or `block({ finality })` instead"),r=t}return this.sendJsonRpc("block",{block_id:r,finality:e})}async blockChanges(t){let{finality:e}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:e})}async chunk(t){return this.sendJsonRpc("chunk",[t])}async validators(t){return this.sendJsonRpc("validators",[t])}async experimental_genesisConfig(){let t=s.default("JsonRpcProvider.experimental_protocolConfig()");return t("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(t){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",t)}async experimental_lightClientProof(t){let e=s.default("JsonRpcProvider.experimental_lightClientProof(request)");return e("use `lightClientProof` instead"),await this.lightClientProof(t)}async lightClientProof(t){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)}async accessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:n,finality:r})}async singleAccessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:n,finality:r})}async accountChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:n,finality:r})}async contractStateChanges(t,e,r=""){let{finality:n}=e,{blockId:i}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:r,block_id:i,finality:n})}async contractCodeChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:n,finality:r})}async gasPrice(t){return await this.sendJsonRpc("gas_price",[t])}async sendJsonRpc(t,e){let r=await h.default(500,12,1.5,async()=>{try{let r={method:t,params:e,id:f++,jsonrpc:"2.0"},n=await u.fetchJson(this.connection,JSON.stringify(r));if(n.error){if("object"==typeof n.error.data){if("string"==typeof n.error.data.error_message&&"string"==typeof n.error.data.error_type)throw new c.TypedError(n.error.data.error_message,n.error.data.error_type);throw d.parseRpcError(n.error.data)}{let t=`[${n.error.code}] ${n.error.message}: ${n.error.data}`;if("Timeout"===n.error.data||t.includes("Timeout error")||t.includes("query has timed out"))throw new c.TypedError(t,"TimeoutError");throw new c.TypedError(t,d.getErrorTypeFromErrorMessage(n.error.data))}}return n}catch(r){if("TimeoutError"===r.type)return i.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${t} as it has timed out`,e),null;throw r}}),{result:n}=r;if(void 0===n)throw new c.TypedError(`Exceeded 12 attempts for request to ${t}.`,"RetriesExceeded");return n}}e.JsonRpcProvider=p},44515:function(t,e,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionLastResult=e.Provider=e.IdType=e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,(n=e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})).Unknown="Unknown",n.Pending="Pending",n.Failure="Failure",(i=e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={})).NotStarted="NotStarted",i.Started="Started",i.Failure="Failure",(o=e.IdType||(e.IdType={})).Transaction="transaction",o.Receipt="receipt";class a{}e.Provider=a,e.getTransactionLastResult=function(t){if("object"==typeof t.status&&"string"==typeof t.status.SuccessValue){let e=s.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch(t){return e}}return null}},87535:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySigner=e.Signer=void 0;let i=n(r(72023)),o=r(28789),s=r(19472);class a{}e.Signer=a;class u extends a{constructor(t){super(),this.keyStore=t}static async fromKeyPair(t,e,r){let n=new s.InMemoryKeyStore;return await n.setKey(t,e,r),new u(n)}async createKey(t,e){let r=o.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(e,t,r),r.getPublicKey()}async getPublicKey(t,e){let r=await this.keyStore.getKey(e,t);return null===r?null:r.getPublicKey()}async signMessage(t,e,r){let n=new Uint8Array(i.default.sha256.array(t));if(!e)throw Error("InMemorySigner requires provided account id");let o=await this.keyStore.getKey(r,e);if(null===o)throw Error(`Key for ${e} not found in ${r}`);return o.sign(n)}toString(){return`InMemorySigner(${this.keyStore})`}}e.InMemorySigner=u},19548:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.signTransaction=e.createTransaction=e.SCHEMA=e.Action=e.SignedTransaction=e.Transaction=e.Signature=e.deleteAccount=e.deleteKey=e.addKey=e.stake=e.transfer=e.functionCall=e.stringifyJsonOrBytes=e.deployContract=e.createAccount=e.DeleteAccount=e.DeleteKey=e.AddKey=e.Stake=e.Transfer=e.FunctionCall=e.DeployContract=e.CreateAccount=e.IAction=e.functionCallAccessKey=e.fullAccessKey=e.AccessKey=e.AccessKeyPermission=e.FullAccessPermission=e.FunctionCallPermission=void 0;let o=i(r(72023)),s=r(37462),a=r(25532),u=r(28789);class c extends s.Assignable{}e.FunctionCallPermission=c;class l extends s.Assignable{}e.FullAccessPermission=l;class h extends s.Enum{}e.AccessKeyPermission=h;class d extends s.Assignable{}e.AccessKey=d,e.fullAccessKey=function(){return new d({nonce:0,permission:new h({fullAccess:new l({})})})},e.functionCallAccessKey=function(t,e,r){return new d({nonce:0,permission:new h({functionCall:new c({receiverId:t,allowance:r,methodNames:e})})})};class f extends s.Assignable{}e.IAction=f;class p extends f{}e.CreateAccount=p;class m extends f{}e.DeployContract=m;class g extends f{}e.FunctionCall=g;class y extends f{}e.Transfer=y;class v extends f{}e.Stake=v;class w extends f{}e.AddKey=w;class b extends f{}e.DeleteKey=b;class _ extends f{}function M(t){let e=void 0!==t.byteLength&&t.byteLength===t.length,r=e?t:n.from(JSON.stringify(t));return r}e.DeleteAccount=_,e.createAccount=function(){return new I({createAccount:new p({})})},e.deployContract=function(t){return new I({deployContract:new m({code:t})})},e.stringifyJsonOrBytes=M,e.functionCall=function(t,e,r,n,i=M,o=!1){return new I(o?{functionCall:new g({methodName:t,args:e,gas:r,deposit:n})}:{functionCall:new g({methodName:t,args:i(e),gas:r,deposit:n})})},e.transfer=function(t){return new I({transfer:new y({deposit:t})})},e.stake=function(t,e){return new I({stake:new v({stake:t,publicKey:e})})},e.addKey=function(t,e){return new I({addKey:new w({publicKey:t,accessKey:e})})},e.deleteKey=function(t){return new I({deleteKey:new b({publicKey:t})})},e.deleteAccount=function(t){return new I({deleteAccount:new _({beneficiaryId:t})})};class E extends s.Assignable{}e.Signature=E;class A extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,A,t)}}e.Transaction=A;class S extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,S,t)}}e.SignedTransaction=S;class I extends s.Enum{}function T(t,e,r,n,i,o){return new A({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:i,blockHash:o})}async function k(t,r,n,i){let s=a.serialize(e.SCHEMA,t),u=new Uint8Array(o.default.sha256.array(s)),c=await r.signMessage(s,n,i),l=new S({transaction:t,signature:new E({keyType:t.publicKey.keyType,data:c.signature})});return[u,l]}async function N(...t){if(t[0].constructor===A){let[e,r,n,i]=t;return k(e,r,n,i)}{let[e,r,n,i,o,s,a]=t,u=await o.getPublicKey(s,a),c=T(s,u,e,r,n,i);return k(c,o,s,a)}}e.Action=I,e.SCHEMA=new Map([[E,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",A],["signature",E]]}],[A,{kind:"struct",fields:[["signerId","string"],["publicKey",u.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[I]]]}],[u.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[d,{kind:"struct",fields:[["nonce","u64"],["permission",h]]}],[h,{kind:"enum",field:"enum",values:[["functionCall",c],["fullAccess",l]]}],[c,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[l,{kind:"struct",fields:[]}],[I,{kind:"enum",field:"enum",values:[["createAccount",p],["deployContract",m],["functionCall",g],["transfer",y],["stake",v],["addKey",w],["deleteKey",b],["deleteAccount",_]]}],[p,{kind:"struct",fields:[]}],[m,{kind:"struct",fields:[["code",["u8"]]]}],[g,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[v,{kind:"struct",fields:[["stake","u128"],["publicKey",u.PublicKey]]}],[w,{kind:"struct",fields:[["publicKey",u.PublicKey],["accessKey",d]]}],[b,{kind:"struct",fields:[["publicKey",u.PublicKey]]}],[_,{kind:"struct",fields:[["beneficiaryId","string"]]}]]),e.createTransaction=T,e.signTransaction=N},37462:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assignable=e.Enum=void 0;class r{constructor(t){if(1!==Object.keys(t).length)throw Error("Enum can only take single value");Object.keys(t).map(e=>{this[e]=t[e],this.enum=e})}}e.Enum=r;class n{constructor(t){Object.keys(t).map(e=>{this[e]=t[e]})}}e.Assignable=n},41829:function(t,e,r){"use strict";var n=r(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.ErrorContext=e.TypedError=e.ArgumentTypeError=e.PositionalArgsError=void 0;class i extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}e.PositionalArgsError=i;class o extends Error{constructor(t,e,r){super(`Expected ${e} for '${t}' argument, but got '${JSON.stringify(r)}'`)}}e.ArgumentTypeError=o;class s extends Error{constructor(t,e,r){super(t),this.type=e||"UntypedError",this.context=r}}e.TypedError=s;class a{constructor(t){this.transactionHash=t}}e.ErrorContext=a,e.logWarning=function(...t){n.env.NEAR_NO_LOGS||console.warn(...t)}},44702:function(t,e){"use strict";async function r(t,e,r,n){let i=t;for(let t=0;t<e;t++){let t=await n();if(t)return t;await function(t){return new Promise(e=>setTimeout(e,t))}(i),i*=r}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},60384:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;let i=n(r(25417));e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=new i.default("10",10).pow(new i.default(e.NEAR_NOMINATION_EXP,10));let o=[],s=new i.default(10);for(let t=0,r=new i.default(5);t<e.NEAR_NOMINATION_EXP;t++,r=r.mul(s))o[t]=r;e.formatNearAmount=function(t,r=e.NEAR_NOMINATION_EXP){let n=new i.default(t,10);if(r!==e.NEAR_NOMINATION_EXP){let t=e.NEAR_NOMINATION_EXP-r-1;t>0&&n.iadd(o[t])}t=n.toString();let s=t.substring(0,t.length-e.NEAR_NOMINATION_EXP)||"0",a=t.substring(t.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,r);return`${(function(t){let e=/(-?\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t})(s)}.${a}`.replace(/\.?0*$/,"")},e.parseNearAmount=function(t){var r;if(!t)return null;t=t.replace(/,/g,"").trim();let n=t.split("."),i=n[0],o=n[1]||"";if(n.length>2||o.length>e.NEAR_NOMINATION_EXP)throw Error(`Cannot parse '${t}' as NEAR amount`);return""===(r=(r=i+o.padEnd(e.NEAR_NOMINATION_EXP,"0")).replace(/^0+/,""))?"0":r}},8828:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;let s=o(r(28789));e.key_pair=s;let a=o(r(79880));e.serialize=a;let u=o(r(44351));e.web=u;let c=o(r(37462));e.enums=c;let l=o(r(60384));e.format=l;let h=o(r(64473));e.rpc_errors=h;let d=r(28789);Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return d.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return d.KeyPairEd25519}});let f=r(41829);Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return f.logWarning}})},28789:function(t,e,r){"use strict";var n,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.KeyType=void 0;let s=o(r(50780)),a=r(79880),u=r(37462);(n=i=e.KeyType||(e.KeyType={}))[n.ED25519=0]="ED25519";class c extends u.Assignable{static from(t){return"string"==typeof t?c.fromString(t):t}static fromString(t){let e=t.split(":");if(1===e.length)return new c({keyType:i.ED25519,data:a.base_decode(e[0])});if(2===e.length)return new c({keyType:function(t){if("ed25519"===t.toLowerCase())return i.ED25519;throw Error(`Unknown key type ${t}`)}(e[0]),data:a.base_decode(e[1])});throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${function(t){if(t===i.ED25519)return"ed25519";throw Error(`Unknown key type ${t}`)}(this.keyType)}:${a.base_encode(this.data)}`}verify(t,e){if(this.keyType===i.ED25519)return s.default.sign.detached.verify(t,e,this.data);throw Error(`Unknown key type ${this.keyType}`)}}e.PublicKey=c;class l{static fromRandom(t){if("ED25519"===t.toUpperCase())return h.fromRandom();throw Error(`Unknown curve ${t}`)}static fromString(t){let e=t.split(":");if(1===e.length)return new h(e[0]);if(2===e.length){if("ED25519"===e[0].toUpperCase())return new h(e[1]);throw Error(`Unknown curve: ${e[0]}`)}throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}}e.KeyPair=l;class h extends l{constructor(t){super();let e=s.default.sign.keyPair.fromSecretKey(a.base_decode(t));this.publicKey=new c({keyType:i.ED25519,data:e.publicKey}),this.secretKey=t}static fromRandom(){let t=s.default.sign.keyPair();return new h(a.base_encode(t.secretKey))}sign(t){let e=s.default.sign.detached(t,a.base_decode(this.secretKey));return{signature:e,publicKey:this.publicKey}}verify(t,e){return this.publicKey.verify(t,e)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}e.KeyPairEd25519=h},64473:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=e.ServerError=void 0;let i=n(r(466)),o=n(r(67590)),s=n(r(4533)),a=r(4140),u=r(41829),c={formatNear:()=>(t,e)=>a.utils.format.formatNearAmount(e(t))};class l extends u.TypedError{}e.ServerError=l;class h extends l{}function d(t){let e={},r=function t(e,r,n,i){let o,s,a;for(let t in r){var u;if(u=e[t],"[object String]"===Object.prototype.toString.call(u))return e[t];if(p(e[t]))o=e[t],s=r[t],a=t;else{if(!(p(e.kind)&&p(e.kind[t])))continue;o=e.kind[t],s=r[t],a=t}}if(!o||!s)return n.kind=e,i;for(let t of Object.keys(s.props))n[t]=o[t];return t(o,r,n,a)}(t,o.default.schema,e,""),n=new l(f(r,e),r);return Object.assign(n,e),n}function f(t,e){return"string"==typeof s.default[t]?i.default.render(s.default[t],{...e,...c}):JSON.stringify(e)}function p(t){return"[object Object]"===Object.prototype.toString.call(t)}e.parseRpcError=d,e.parseResultError=function(t){let e=d(t.status.Failure),r=new h;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r},e.formatError=f,e.getErrorTypeFromErrorMessage=function(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}},79880:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25532);Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},44351:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;let i=n(r(28984)),o=n(r(44702)),s=r(34298),a=r(41829);async function u(t,e){let r={url:null};"string"==typeof t?r.url=t:r=t;let n=await o.default(1e3,10,1.5,async()=>{try{let t=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!t.ok){if(503===t.status)return a.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw i.default(t.status,await t.text())}return t}catch(t){if(t.toString().includes("FetchError")||t.toString().includes("Failed to fetch"))return a.logWarning(`Retrying HTTP request for ${r.url} because of error: ${t}`),null;throw t}});if(!n)throw new s.TypedError(`Exceeded 10 attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}e.fetchJson=u},38905:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.diffEpochValidators=e.findSeatPrice=void 0;let i=n(r(25417)),o=n(r(27812));e.findSeatPrice=function(t,e,r,n){if(n&&n<49)return function(t,e){let r=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),n=new i.default(e),o=r.reduce((t,e)=>t.add(e));if(o.lt(n))throw Error("Stakes are below seats");let s=new i.default(1),a=o.add(new i.default(1));for(;!s.eq(a.sub(new i.default(1)));){let t=s.add(a).div(new i.default(2)),e=!1,o=new i.default(0);for(let i=0;i<r.length;++i)if((o=o.add(r[i].div(t))).gte(n)){s=t,e=!0;break}e||(a=t)}return s}(t,e);if(!r){let t=o.default("findSeatPrice(validators, maxNumberOfSeats)");t("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]}return function(t,e,r){if(2!=r.length)throw Error("minimumStakeRatio should have 2 elements");let n=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),o=n.reduce((t,e)=>t.add(e));return t.length<e?o.mul(new i.default(r[0])).div(new i.default(r[1])):n[0].add(new i.default(1))}(t,e,r)},e.diffEpochValidators=function(t,e){let r=new Map;t.forEach(t=>r.set(t.account_id,t));let n=new Set(e.map(t=>t.account_id));return{newValidators:e.filter(t=>!r.has(t.account_id)),removedValidators:t.filter(t=>!n.has(t.account_id)),changedValidators:e.filter(t=>r.has(t.account_id)&&r.get(t.account_id).stake!=t.stake).map(t=>({current:r.get(t.account_id),next:t}))}}},56162:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectedWalletAccount=e.WalletAccount=e.WalletConnection=void 0;let o=i(r(27812)),s=r(34594),a=r(19548),u=r(8828),c=r(25532),l=r(25532),h="pending_key";class d{constructor(t,e){this._near=t;let r=e+"_wallet_auth_key",n=JSON.parse(window.localStorage.getItem(r));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,e=e||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=n||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(t={},e,r,n){let i;if("string"==typeof t){let e=o.default("requestSignIn(contractId, title)");e("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),i={contractId:t,successUrl:r,failureUrl:n}}else i=t;let s=new URL(window.location.href),a=new URL(this._walletBaseUrl+"/login/");if(a.searchParams.set("success_url",i.successUrl||s.href),a.searchParams.set("failure_url",i.failureUrl||s.href),i.contractId){let t=await this._near.account(i.contractId);await t.state(),a.searchParams.set("contract_id",i.contractId);let e=u.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",e.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,h+e.getPublicKey(),e)}i.methodNames&&i.methodNames.forEach(t=>{a.searchParams.append("methodNames",t)}),window.location.assign(a.toString())}async requestSignTransactions(...t){if(Array.isArray(t[0])){let e=o.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)");return e("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:t[0],callbackUrl:t[1],meta:t[2]})}return this._requestSignTransactions(t[0])}async _requestSignTransactions({transactions:t,meta:e,callbackUrl:r}){let i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",t.map(t=>l.serialize(a.SCHEMA,t)).map(t=>n.from(t).toString("base64")).join(",")),o.searchParams.set("callbackUrl",r||i.href),e&&o.searchParams.set("meta",e),window.location.assign(o.toString())}async _completeSignInWithAccessKey(){let t=new URL(window.location.href),e=t.searchParams.get("public_key")||"",r=(t.searchParams.get("all_keys")||"").split(","),n=t.searchParams.get("account_id")||"";n&&(this._authData={accountId:n,allKeys:r},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),e&&await this._moveKeyFromTempToPermanent(n,e)),t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())}async _moveKeyFromTempToPermanent(t,e){let r=await this._keyStore.getKey(this._networkId,h+e);await this._keyStore.setKey(this._networkId,t,r),await this._keyStore.removeKey(this._networkId,h+e)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new f(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}e.WalletConnection=d,e.WalletAccount=d;class f extends s.Account{constructor(t,e,r){super(e,r),this.walletConnection=t}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:e,walletMeta:r,walletCallbackUrl:n=window.location.href}){let i=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId),o=await this.accessKeyForTransaction(t,e,i);if(!o)throw Error(`Cannot find matching key for transaction sent to ${t}`);if(i&&i.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:t,actions:e})}catch(r){if("NotEnoughAllowance"===r.type)o=await this.accessKeyForTransaction(t,e);else throw r}let s=await this.connection.provider.block({finality:"final"}),l=c.baseDecode(s.header.hash),h=u.PublicKey.from(o.public_key),d=o.access_key.nonce+1,f=a.createTransaction(this.accountId,h,t,d,e,l);return await this.walletConnection.requestSignTransactions({transactions:[f],meta:r,callbackUrl:n}),new Promise((t,e)=>{setTimeout(()=>{e(Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(t,e,r){let{access_key:{permission:n}}=t;if("FullAccess"===n)return!0;if(n.FunctionCall){let{receiver_id:t,method_names:i}=n.FunctionCall;if(t===this.accountId&&i.includes("add_request_and_confirm"))return!0;if(t===e){if(1!==r.length)return!1;let[{functionCall:t}]=r;return t&&(!t.deposit||"0"===t.deposit.toString())&&(0===i.length||i.includes(t.methodName))}}return!1}async accessKeyForTransaction(t,e,r){let n=await this.getAccessKeys();if(r){let i=n.find(t=>t.public_key.toString()===r.toString());if(i&&await this.accessKeyMatchesTransaction(i,t,e))return i}let i=this.walletConnection._authData.allKeys;for(let r of n)if(-1!==i.indexOf(r.public_key)&&await this.accessKeyMatchesTransaction(r,t,e))return r;return null}}e.ConnectedWalletAccount=f},25417:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(13695).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(t);r=(h=h.idivn(l)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},h&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=t.allocUnsafe?t.allocUnsafe(o):new t(o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e){this.x=t,this.y=e}Math.imul||(g=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?m(this,t,e):y(this,t,e)},v.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},v.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r._strip(),i._strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=67108864%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(_,b),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(M,b),i(E,b),i(A,b),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(w[t])return w[t];if("k256"===t)e=new _;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else if("p25519"===t)e=new A;else throw Error("Unknown prime "+t);return w[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,S),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},96217:function(t,e,r){"use strict";/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i=r(15722);function o(t){if("number"==typeof t){if(!o[t])throw Error("invalid status code: "+t);return t}if("string"!=typeof t)throw TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!o[e])throw Error("invalid status code: "+e);return e}if(!(e=o[t.toLowerCase()]))throw Error('invalid status message: "'+t+'"');return e}t.exports=o,o.STATUS_CODES=i,o.codes=(n=[],Object.keys(i).forEach(function(t){var e=i[t],r=Number(t);o[r]=e,o[e]=r,o[e.toLowerCase()]=r,n.push(r)}),n),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},57206:function(t,e,r){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),e.stepsFor=e.FAILED=e.COMPLETE=e.PENDING=e.StepStatus=void 0;let o=r(22241);(i=n=e.StepStatus||(e.StepStatus={})).PENDING="pending",i.COMPLETE="completed",i.FAILED="failed",e.PENDING=n.PENDING,e.COMPLETE=n.COMPLETE,e.FAILED=n.FAILED,e.stepsFor=function(t,e,r){let i=e.indexOf(String(t.completedStep));return e.map((e,s)=>({key:e,description:r[e],status:t.status===o.Status.FAILED&&s===i+1?n.FAILED:s<=i?n.COMPLETE:n.PENDING}))}},93694:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.unlockBridgeTransfersStorage=e.lockBridgeTransfersStorage=e.TRANSFERS_LOCKED=e.TRANSFERS_LOCK_KEY=e.untrack=e.track=e.clear=e.act=e.checkStatusAll=e.getReplacementTransfers=e.replaceTransfers=e.remove=e.decorate=e.get=e.getTransferType=e.setTransferTypes=e.setNearWallet=e.setNearProvider=e.setSignerProvider=e.setNearConnection=e.setEthProvider=e.setBridgeParams=e.setAuroraProvider=e.getSignerProvider=e.getNearAccountId=e.getNearWallet=e.getNearProvider=e.getNearAccount=e.getEthProvider=e.getBridgeParams=e.getAuroraProvider=e.onChange=void 0;let s=o(r(88202)),a=o(r(22241));var u=r(88202);Object.defineProperty(e,"onChange",{enumerable:!0,get:function(){return u.onChange}});var c=r(16247);Object.defineProperty(e,"getAuroraProvider",{enumerable:!0,get:function(){return c.getAuroraProvider}}),Object.defineProperty(e,"getBridgeParams",{enumerable:!0,get:function(){return c.getBridgeParams}}),Object.defineProperty(e,"getEthProvider",{enumerable:!0,get:function(){return c.getEthProvider}}),Object.defineProperty(e,"getNearAccount",{enumerable:!0,get:function(){return c.getNearAccount}}),Object.defineProperty(e,"getNearProvider",{enumerable:!0,get:function(){return c.getNearProvider}}),Object.defineProperty(e,"getNearWallet",{enumerable:!0,get:function(){return c.getNearWallet}}),Object.defineProperty(e,"getNearAccountId",{enumerable:!0,get:function(){return c.getNearAccountId}}),Object.defineProperty(e,"getSignerProvider",{enumerable:!0,get:function(){return c.getSignerProvider}}),Object.defineProperty(e,"setAuroraProvider",{enumerable:!0,get:function(){return c.setAuroraProvider}}),Object.defineProperty(e,"setBridgeParams",{enumerable:!0,get:function(){return c.setBridgeParams}}),Object.defineProperty(e,"setEthProvider",{enumerable:!0,get:function(){return c.setEthProvider}}),Object.defineProperty(e,"setNearConnection",{enumerable:!0,get:function(){return c.setNearConnection}}),Object.defineProperty(e,"setSignerProvider",{enumerable:!0,get:function(){return c.setSignerProvider}}),Object.defineProperty(e,"setNearProvider",{enumerable:!0,get:function(){return c.setNearProvider}}),Object.defineProperty(e,"setNearWallet",{enumerable:!0,get:function(){return c.setNearWallet}});let l={};function h(t){let e=l[t.type];if(e)return e;try{switch(t.type){case"@near-eth/nep141-erc20/natural-erc20/sendToNear":return r(52622);case"@near-eth/nep141-erc20/bridged-nep141/sendToEthereum":return r(61908);case"@near-eth/near-ether/natural-near/sendToEthereum":return r(78030);case"@near-eth/near-ether/bridged-near/sendToNear":return r(50144);case"@near-eth/near-ether/natural-ether/sendToNear":return r(89361);case"@near-eth/near-ether/bridged-ether/sendToEthereum":return r(38702);case"@near-eth/aurora-erc20/natural-erc20/sendToAurora":return r(25288);case"@near-eth/aurora-erc20/bridged-erc20/sendToEthereum":return r(39531);case"@near-eth/aurora-ether/natural-ether/sendToAurora":return r(92183);case"@near-eth/aurora-ether/bridged-ether/sendToEthereum":return r(70915);case"@near-eth/aurora-nep141/natural-nep141/sendToAurora":return r(26252);case"@near-eth/aurora-nep141/bridged-erc20/sendToNear":return r(90586);case"@near-eth/aurora-nep141/bridged-ether/sendToNear":return r(32710);default:throw Error(`Unregistered library for transfer with type=${t.type}`)}}catch(e){throw console.error(e),Error(`Can't find library for transfer with type=${t.type}`)}}function d({filter:t}={}){let e=s.getAll();return void 0!==t&&(e=e.filter(t)),e}e.setTransferTypes=function(t){return l=t},e.getTransferType=h,e.get=d,e.decorate=function(t,{locale:e}={}){let r,n,i,o;let s=h(t),u=s.i18n[e];if(void 0===u){let r=Object.keys(s.i18n),n=r[0];void 0!==n&&void 0!==e&&console.warn(`Requested locale ${e} not available for ${t.type}. Available locales: 

  • ${r.join("\n  • ")}

Falling back to ${n}`),u=s.i18n[n]}return t.status===a.FAILED&&(r=t.errors[t.errors.length-1]),void 0!==u?(n=u.steps(t),i=u.statusMessage(t),o=u.callToAction(t)):(n=[],i=`transfer with type=${t.type} has no defined i18n settings; cannot decorate it`),{...t,sourceNetwork:s.SOURCE_NETWORK,destinationNetwork:s.DESTINATION_NETWORK,error:r,steps:n,statusMessage:i,callToAction:o}};let f=[];function p(t){f.push(t)}async function m(){await Promise.all(f.map(async t=>await s.clear(t))),f.splice(0,f.length)}e.remove=p;let g=[];async function y(){if(0===g.length)return;console.log("Replacing local transfers with: ",g);let t={};g.forEach(e=>{t[e.id]=e}),await s.replaceAll(t),g=[]}async function v({loop:t,otp:e}={loop:void 0,otp:!1}){if(void 0!==t&&!Number.isInteger(t))throw Error("`loop` must be frequency, in milliseconds");await m(),await y();let r=d({filter:t=>t.status===a.IN_PROGRESS});await Promise.all(r.map(async t=>await E(t.id,null!=e&&e))),void 0!==t&&window.setTimeout(()=>{v({loop:t}).catch(console.error)},t)}async function w(t){let e=s.get(t);if(!e)throw Error(`Cannot find and act on transfer with id ${t}`);if(![a.FAILED,a.ACTION_NEEDED].includes(e.status)){console.warn("No action needed for transfer with status",e.status);return}let r=h(e);try{await s.update(await r.act(e))}catch(t){throw await s.update(e,{status:a.FAILED,errors:[...e.errors,t.message]}),t}}async function b(t){await s.clear(t)}async function _(t){let e=Math.random().toString().slice(2),r={id:e,...t};return await s.add(r),r}async function M(t){let e=s.get(t);if(!e){console.warn(`Transfer not tracked: ${t}`);return}if(e.status!==a.IN_PROGRESS)await s.clear(t);else for(p(t);0!==f.length;)console.log("waiting ",f),await new Promise(t=>setTimeout(t,2e3))}async function E(t,r){let n=s.get(t);if(!n)throw Error(`Cannot find and act on transfer with id ${t}`);let i=h(n);if(n.status===a.IN_PROGRESS)try{n=await i.checkStatus(n),"undefined"!=typeof window&&(r||localStorage.getItem(e.TRANSFERS_LOCK_KEY)!==e.TRANSFERS_LOCKED)&&await s.update(n)}catch(t){console.error(t)}}e.replaceTransfers=function(t){g=t},e.getReplacementTransfers=function(){return g},e.checkStatusAll=v,e.act=w,e.clear=b,e.track=_,e.untrack=M,e.TRANSFERS_LOCK_KEY="rainbow-bridge-transfers-lock",e.TRANSFERS_LOCKED="locked",e.lockBridgeTransfersStorage=()=>localStorage.setItem(e.TRANSFERS_LOCK_KEY,e.TRANSFERS_LOCKED),e.unlockBridgeTransfersStorage=()=>localStorage.setItem(e.TRANSFERS_LOCK_KEY,"")},22241:function(t,e){"use strict";var r,n;Object.defineProperty(e,"__esModule",{value:!0}),e.FAILED=e.COMPLETE=e.ACTION_NEEDED=e.IN_PROGRESS=e.Status=void 0,(n=r=e.Status||(e.Status={})).IN_PROGRESS="in-progress",n.ACTION_NEEDED="action-needed",n.COMPLETE="completed",n.FAILED="failed",e.IN_PROGRESS=r.IN_PROGRESS,e.ACTION_NEEDED=r.ACTION_NEEDED,e.COMPLETE=r.COMPLETE,e.FAILED=r.FAILED},88202:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onChange=e.replaceAll=e.clear=e.update=e.add=e.get=e.getAll=void 0;let r=[];async function n(t,e){if(!t||!e)throw Error("expected two arguments, only got one");let n=JSON.stringify(e);localStorage.setItem(t,n),await Promise.all(r.map(t=>t()))}let i="rainbow-bridge-transfers";function o(){return function(t){try{let e=localStorage.getItem(t);if(null===e)return{};return JSON.parse(e)}catch(t){return{}}}(i)}async function s(t){await n(i,{...o(),[t.id]:t})}async function a(t,e={}){if(!t.id)throw Error("Cannot update transfer with no ID");let r={...t,...e};return await n(i,{...o(),[t.id]:r}),r}async function u(t){let e=o();delete e[t],await n(i,e)}async function c(t){return await n(i,t),t}e.getAll=function(){let t=o();return Object.keys(t).sort((t,e)=>e<t?-1:1).map(e=>t[e])},e.get=function(t){if(!t)throw Error("must provide ID to fetch a single transfer");return o()[t]},e.add=s,e.update=a,e.clear=u,e.replaceAll=c,e.onChange=function(t){r.push(t)}},16247:function(t,e,r){"use strict";let n,i,o,s,a,u,c;Object.defineProperty(e,"__esModule",{value:!0}),e.setBridgeParams=e.getBridgeParams=e.formatLargeNum=e.getNearAccount=e.getNearAccountId=e.getNearWallet=e.getNearProvider=e.getSignerProvider=e.getAuroraProvider=e.getEthProvider=e.setNearConnection=e.setNearWallet=e.setNearProvider=e.setSignerProvider=e.setAuroraProvider=e.setEthProvider=void 0;let l=r(93776);async function h(){return u?(await u.getAccounts())[0].accountId:d().accountId}function d(){if(!i)throw Error("Must `setNearConnection(new WalletConnection(near))` prior to calling anything from `@near-eth/client` or connector libraries");return i.account()}e.setEthProvider=function(t){return n=t},e.setAuroraProvider=function(t){return o=t},e.setSignerProvider=function(t){return s=t},e.setNearProvider=function(t){return a=t},e.setNearWallet=function(t){return u=t},e.setNearConnection=function(t){return i=t},e.getEthProvider=function(){return n},e.getAuroraProvider=function(){return o},e.getSignerProvider=function(){return s},e.getNearProvider=function(){return a||d().connection.provider},e.getNearWallet=function(){return u||d()},e.getNearAccountId=h,e.getNearAccount=d,e.formatLargeNum=function(t,e=18){return t?new l.Decimal(t).dividedBy(10**e):new l.Decimal(0)},e.getBridgeParams=function(){return c},e.setBridgeParams=function(t){return c=t}},6809:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findAllTransfers=e.findAllTransactions=e.recover=e.sendToEthereum=void 0;var n=r(38702);Object.defineProperty(e,"sendToEthereum",{enumerable:!0,get:function(){return n.initiate}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return n.recover}}),Object.defineProperty(e,"findAllTransactions",{enumerable:!0,get:function(){return n.findAllTransactions}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return n.findAllTransfers}})},38702:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkUnlock=e.unlock=e.proofAlreadyUsed=e.checkSync=e.checkFinality=e.checkBurn=e.burn=e.initiate=e.parseWithdrawReceipt=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=a(r(77191)),l=r(20548),h=r(4683),d=r(60822),f=s(r(22241)),p=r(57206),m=r(93694),g=r(58180),y=r(41249),v=r(16247);e.SOURCE_NETWORK="near",e.DESTINATION_NETWORK="ethereum",e.TRANSFER_TYPE="@near-eth/near-ether/bridged-ether/sendToEthereum";let w="burn-bridged-ether-to-natural-ether",b="await-finality-bridged-ether-to-natural-ether",_="sync-bridged-ether-to-natural-ether",M="unlock-bridged-ether-to-natural-ether",E=[w,b,_,M];class A extends Error{}let S={completedStep:null,errors:[],status:f.IN_PROGRESS,type:e.TRANSFER_TYPE,finalityBlockHeights:[],nearOnEthClientBlockHeight:null,unlockHashes:[],unlockReceipts:[],burnReceiptBlockHeights:[],burnReceiptIds:[],burnHashes:[]};async function I(t){switch(t.completedStep){case null:try{return await C(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.clear("withdrawing"),t}case b:return await B(t);case _:return await K(t);default:throw Error(`Don't know how to act on transfer: ${JSON.stringify(t)}`)}}async function T(t){switch(t.completedStep){case null:return await R(t);case w:return await L(t);case b:return await B(t);case _:return await F(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function k({fromBlock:t,toBlock:e,sender:r,callIndexer:n,options:i}){var o;i=null!=i?i:{};let s=(0,v.getBridgeParams)(),a=null!==(o=i.auroraEvmAccount)&&void 0!==o?o:s.auroraEvmAccount,u=await n((0,g.buildIndexerTxQuery)({fromBlock:t,toBlock:e,predecessorAccountId:r,receiverAccountId:a}));return u.filter(t=>"withdraw"===t.args.method_name).map(t=>t.originated_from_transaction_hash)}async function N({fromBlock:t,toBlock:e,sender:r,callIndexer:n,options:i}){let o=await k({fromBlock:t,toBlock:e,sender:r,callIndexer:n,options:i}),s=await Promise.all(o.map(async t=>{try{return await x(t,r,i)}catch(e){return console.log("Failed to recover transfer (transaction failed ?): ",t,e),null}}));return s.filter(t=>null!==t)}async function x(t,e="todo",r){var i,o,s,a,u,c;r=null!=r?r:{};let l=null!==(s=null!==(i=r.nearProvider)&&void 0!==i?i:null===(o=r.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,v.getNearProvider)(),f=(0,v.getBridgeParams)(),p=h.utils.serialize.base_decode(t),m=await l.txStatus(p,e);if(e=m.transaction.signer_id,m.status.Unknown)throw Error(`Burn transaction pending: ${t}`);if(m.status.Failure)throw Error(`Burn transaction failed: ${t}`);let g=m.status.SuccessValue;if(!g)throw Error(`Invalid burnTx successValue: '${g}'
      Full withdrawal transaction: ${JSON.stringify(m)}`);class y{constructor(t){Object.assign(this,t)}}let b=new Map([[y,{kind:"struct",fields:[["amount","u128"],["recipient_id",[20]],["eth_custodian_address",[20]]]}]]),_=(0,d.deserialize)(b,y,n.from(g,"base64")),M=_.amount.toString(),E="0x"+n.from(_.recipient_id).toString("hex"),A="0x"+n.from(_.eth_custodian_address).toString("hex"),I=null!==(a=r.etherCustodianAddress)&&void 0!==a?a:f.etherCustodianAddress;if(A!==I.toLowerCase())throw Error("Failed to verify ETH custodian address.");let T=null!==(u=r.auroraEvmAccount)&&void 0!==u?u:f.auroraEvmAccount,k=await P(m,e,null!==(c=r.auroraEvmAccount)&&void 0!==c?c:f.auroraEvmAccount,l),N=await l.block({blockId:m.transaction_outcome.block_hash}),x={...S,id:Math.random().toString().slice(2),startTime:new Date(N.header.timestamp/1e6).toISOString(),amount:M.toString(),completedStep:w,destinationTokenName:"ETH",recipient:E,sender:e,symbol:"ETH",sourceTokenName:"nETH",sourceToken:T,decimals:18,burnHashes:[t],burnReceiptBlockHeights:[k.blockHeight],burnReceiptIds:[k.id]};return await B(x,r)}async function P(t,e,r,n){let i;let o=t.transaction_outcome.outcome.receipt_ids;if(1!==o.length)throw new A(`Withdrawal expects only one receipt, got ${o.length}.
      Full withdrawal transaction: ${JSON.stringify(t)}`);let s=o[0],a=t.receipts_outcome.find(t=>t.id===s).outcome,u=a.executor_id;switch(u){case e:{i=a.status.SuccessReceiptId;let e=t.receipts_outcome.find(t=>t.id===i).outcome,n=e.executor_id;if(n!==r)throw new A(`Unexpected receipt outcome format in 2fa transaction.
          Expected sourceToken '${r}', got '${n}'
          Full withdrawal transaction: ${JSON.stringify(t)}`);break}case r:i=s;break;default:throw new A(`Unexpected receipt outcome format.
        Full withdrawal transaction: ${JSON.stringify(t)}`)}let c=t.receipts_outcome.find(t=>t.id===i).block_hash,l=await n.block({blockId:c}),h=Number(l.header.height);return{id:i,blockHeight:h}}async function O({amount:t,recipient:e,options:r}){var n,i;r=null!=r?r:{};let o=(0,v.getBridgeParams)(),s=null!==(n=r.auroraEvmAccount)&&void 0!==n?n:o.auroraEvmAccount,a=null!==(i=r.sender)&&void 0!==i?i:await (0,v.getNearAccountId)(),u={...S,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),destinationTokenName:"ETH",recipient:e,sender:a,sourceToken:s,sourceTokenName:"nETH",symbol:"ETH",decimals:18};try{u=await C(u,r),"undefined"!=typeof window&&(u=await (0,m.track)(u))}catch(t){throw t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.get("withdrawing")&&(await (0,m.untrack)(g.urlParams.get("withdrawing")),g.urlParams.clear("withdrawing")),t}return u}async function C(t,e){var r;let n;e=null!=e?e:{};let i=null!==(r=e.nearAccount)&&void 0!==r?r:(0,v.getNearWallet)(),o=i instanceof h.Account,s="undefined"!=typeof window&&(o||"browser"===i.type);class a{constructor(t){Object.assign(this,t)}}let c=new Map([[a,{kind:"struct",fields:[["recipient_id",[20]],["amount","u128"]]}]]),p=new a({recipient_id:l.ethers.utils.arrayify(l.ethers.utils.getAddress(t.recipient)),amount:t.amount.toString()}),y=(0,d.serialize)(c,p);return s&&g.urlParams.set({withdrawing:t.id}),s&&(t=await (0,m.track)({...t,status:f.IN_PROGRESS})),n=o?await i.functionCall({contractId:t.sourceToken,methodName:"withdraw",args:y,gas:new u.default("100"+"0".repeat(12)),attachedDeposit:new u.default("1")}):await i.signAndSendTransaction({receiverId:t.sourceToken,actions:[{type:"FunctionCall",params:{methodName:"withdraw",args:y,gas:"100"+"0".repeat(12),deposit:"1"}}]}),{...t,status:f.IN_PROGRESS,burnHashes:[...t.burnHashes,n.transaction.hash]}}async function R(t,e){var r,n,i;let o,s,a;if(e=null!=e?e:{},0===t.burnHashes.length){let e=g.urlParams.get("withdrawing"),r=g.urlParams.get("transactionHashes"),n=g.urlParams.get("errorCode");if(s=["withdrawing","transactionHashes","errorCode","errorMessage"],!e){let e=`A transaction was initiated but could not be verified.
        Click 'Rescan the blockchain' to check if a transfer was created.`;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:f.FAILED,errors:[...t.errors,r]}}if(n){g.urlParams.clear(...s);let e="Error from wallet: "+n;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(!r)return console.log("Burn tx hash not received: pending redirect or wallet error"),t;if(r.includes(",")){g.urlParams.clear(...s);let e="Error from wallet: expected single txHash, got: "+r;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}o=r}else o=j(t.burnHashes);let u=h.utils.serialize.base_decode(o),c=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,v.getNearProvider)(),l=await c.txStatus(u,t.sender);if(l.status.Unknown)return t;if(l.status.Failure){s&&g.urlParams.clear(...s);let e=`NEAR transaction failed: ${o}`;return console.error(e),{...t,errors:[...t.errors,e],status:f.FAILED,burnHashes:[...t.burnHashes,o]}}try{a=await P(l,t.sender,t.sourceToken,c)}catch(e){if(e instanceof A)return s&&g.urlParams.clear(...s),{...t,errors:[...t.errors,e.message],status:f.FAILED,burnHashes:[...t.burnHashes,o]};throw e}let d=await c.block({blockId:l.transaction_outcome.block_hash}),p=new Date(d.header.timestamp/1e6).toISOString();return s&&g.urlParams.clear(...s),{...t,status:f.IN_PROGRESS,completedStep:w,startTime:p,burnReceiptIds:[...t.burnReceiptIds,a.id],burnReceiptBlockHeights:[...t.burnReceiptBlockHeights,a.blockHeight],burnHashes:[...t.burnHashes,o]}}async function L(t,e){var r,n,i;e=null!=e?e:{};let o=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,v.getNearProvider)(),s=j(t.burnReceiptBlockHeights),a=Number((await o.block({finality:"final"})).header.height);return a<=s?t:{...t,completedStep:b,status:f.IN_PROGRESS,finalityBlockHeights:[...t.finalityBlockHeights,a]}}async function B(t,e){var r,n,i,o,s,a,u,c,l,h,d,p,m,y,w;let b;if("string"==typeof t)return await x(t,"todo",e);e=null!=e?e:{};let E=(0,v.getBridgeParams)(),A=null!==(r=e.provider)&&void 0!==r?r:(0,v.getEthProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(n=e.sendToEthereumSyncInterval)&&void 0!==n?n:E.sendToEthereumSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let S=(await A.getNetwork()).chainId,I=null!==(i=e.ethChainId)&&void 0!==i?i:E.ethChainId;if(S!==I)throw Error(`Wrong eth network for checkSync, expected: ${I}, got: ${S}`);let T=j(t.burnReceiptBlockHeights),k=await (0,g.nearOnEthSyncHeight)(A,null!==(o=e.ethClientAddress)&&void 0!==o?o:E.ethClientAddress,null!==(s=e.ethClientAbi)&&void 0!==s?s:E.ethClientAbi),N=null!==(c=null!==(a=e.nearProvider)&&void 0!==a?a:null===(u=e.nearAccount)||void 0===u?void 0:u.connection.provider)&&void 0!==c?c:(0,v.getNearProvider)();if(!(k>T))return{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),nearOnEthClientBlockHeight:k,status:f.IN_PROGRESS};if(b=await (0,g.findNearProof)(j(t.burnReceiptIds),null!==(l=e.auroraEvmAccount)&&void 0!==l?l:E.auroraEvmAccount,k,N,A,null!==(h=e.ethClientAddress)&&void 0!==h?h:E.ethClientAddress,null!==(d=e.ethClientAbi)&&void 0!==d?d:E.ethClientAbi),await D(A,b,null!==(p=e.etherCustodianAddress)&&void 0!==p?p:E.etherCustodianAddress,null!==(m=e.etherCustodianAbi)&&void 0!==m?m:E.etherCustodianAbi)){try{let{transactions:r,block:n}=await (0,g.findFinalizationTxOnEthereum)({usedProofPosition:"3",proof:b,connectorAddress:null!==(y=e.etherCustodianAddress)&&void 0!==y?y:E.etherCustodianAddress,connectorAbi:null!==(w=e.etherCustodianAbi)&&void 0!==w?w:E.etherCustodianAbi,finalizationEvent:"Withdrawn",recipient:t.recipient,amount:t.amount,provider:A});t={...t,finishTime:new Date(1e3*n.timestamp).toISOString(),unlockHashes:[...t.unlockHashes,...r]}}catch(t){console.error(t)}return{...t,completedStep:M,nearOnEthClientBlockHeight:k,status:f.COMPLETE,errors:[...t.errors,"Unlock proof already used."]}}return{...t,completedStep:_,nearOnEthClientBlockHeight:k,status:f.ACTION_NEEDED,proof:b}}async function D(t,e,r,n){let i=new l.ethers.Contract(r,n,t),o=await i.usedEvents_("0x"+c.default.decode(e.outcome_proof.outcome.receipt_ids[0]).toString("hex"));return o}async function K(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,v.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,v.getSignerProvider)(),c=(await u.getNetwork()).chainId,h=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(c!==h)throw Error(`Wrong eth network for checkSync, expected: ${h}, got: ${c}`);if((t=await B(t,e)).status!==f.ACTION_NEEDED)return t;let d=t.proof,p=(0,g.borshifyOutcomeProof)(d),m=new l.ethers.Contract(null!==(i=e.etherCustodianAddress)&&void 0!==i?i:a.etherCustodianAddress,null!==(o=e.etherCustodianAbi)&&void 0!==o?o:a.etherCustodianAbi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),y=await u.getBlockNumber()-20,w=await m.withdraw(p,t.nearOnEthClientBlockHeight);return{...t,status:f.IN_PROGRESS,ethCache:{from:w.from,to:w.to,nonce:w.nonce,data:w.data,safeReorgHeight:y},unlockHashes:[...t.unlockHashes,w.hash]}}async function F(t,e){var r,n;e=null!=e?e:{};let i=(0,v.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,v.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkUnlock, expected: ${a}, got: ${s}`);let u=j(t.unlockHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,y.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof y.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:f.FAILED,errors:[...t.errors,e],unlockReceipts:[...t.unlockReceipts,c]}}c.transactionHash!==u&&(t={...t,unlockHashes:[...t.unlockHashes,c.transactionHash]});let l=await o.getBlock(c.blockNumber);return{...t,status:f.COMPLETE,completedStep:M,finishTime:new Date(1e3*l.timestamp).toISOString(),unlockReceipts:[...t.unlockReceipts,c]}}e.i18n={en_US:{steps:t=>(0,p.stepsFor)(t,E,{[w]:`Start transfer of ${(0,v.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from NEAR`,[b]:"Confirm in NEAR",[_]:"Confirm in Ethereum. This can take around 16 hours. Feel free to return to this window later, to complete the final step of the transfer.",[M]:`Deposit ${(0,v.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Ethereum`}),statusMessage:t=>{if(t.status===f.FAILED)return"Failed";if(t.status===f.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from NEAR";case _:return"Ready to deposit in Ethereum";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring from NEAR";case w:case b:return"Confirming transfer";case _:return"Depositing in Ethereum";case M:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===f.FAILED)return"Retry";if(t.status!==f.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case _:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=I,e.checkStatus=T,e.findAllTransactions=k,e.findAllTransfers=N,e.recover=x,e.parseWithdrawReceipt=P,e.initiate=O,e.burn=C,e.checkBurn=R,e.checkFinality=L,e.checkSync=B,e.proofAlreadyUsed=D,e.unlock=K,e.checkUnlock=F;let j=t=>t[t.length-1]},99518:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(20548),i=r(16247);async function o(t,e){var r,o,s;e=null!=e?e:{};let a=(0,i.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,i.getEthProvider)(),c=new n.ethers.Contract(null!==(o=e.eNEARAddress)&&void 0!==o?o:a.eNEARAddress,null!==(s=e.eNEARAbi)&&void 0!==s?s:a.eNEARAbi,u);return(await c.balanceOf(t)).toString()}e.default=o},67298:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBalance=e.findAllTransfers=e.findAllTransactions=e.recover=e.sendToNear=void 0;var i=r(50144);Object.defineProperty(e,"sendToNear",{enumerable:!0,get:function(){return i.initiate}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return i.recover}}),Object.defineProperty(e,"findAllTransactions",{enumerable:!0,get:function(){return i.findAllTransactions}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return i.findAllTransfers}});var o=r(99518);Object.defineProperty(e,"getBalance",{enumerable:!0,get:function(){return n(o).default}})},50144:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkUnlock=e.unlock=e.checkSync=e.checkBurn=e.burn=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=r(20548),l=r(93694),h=r(4683),d=r(57206),f=s(r(22241)),p=r(16247),m=r(58180),g=r(41249);e.SOURCE_NETWORK="ethereum",e.DESTINATION_NETWORK="near",e.TRANSFER_TYPE="@near-eth/near-ether/bridged-near/sendToNear";let y="burn-e-near-to-natural-near",v="sync-e-near-to-natural-near",w="unlock-e-near-to-natural-near",b=[y,v,w],_={completedStep:null,errors:[],status:f.ACTION_NEEDED,type:e.TRANSFER_TYPE,completedConfirmations:0,burnHashes:[],burnReceipts:[],neededConfirmations:20,unlockHashes:[]};async function M(t){switch(t.completedStep){case null:return await k(t);case y:return await x(t);case v:try{return await P(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&m.urlParams.clear("unlocking"),t}default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function E(t){switch(t.completedStep){case null:return await N(t);case y:return await x(t);case v:return await O(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function A({fromBlock:t,toBlock:e,sender:r,options:n}){var i,o,s;n=null!=n?n:{};let a=(0,p.getBridgeParams)(),u=null!==(i=n.provider)&&void 0!==i?i:(0,p.getEthProvider)(),l=new c.ethers.Contract(null!==(o=n.eNEARAddress)&&void 0!==o?o:a.eNEARAddress,null!==(s=n.eNEARAbi)&&void 0!==s?s:a.eNEARAbi,u),h=l.filters.TransferToNearInitiated(r),d=await l.queryFilter(h,t,e);return d.filter(t=>!t.args.accountId.startsWith("aurora:")).map(t=>t.transactionHash)}async function S({fromBlock:t,toBlock:e,sender:r,options:n}){let i=await A({fromBlock:t,toBlock:e,sender:r,options:n}),o=await Promise.all(i.map(async t=>await I(t,n)));return o}async function I(t,e){var r,n,i,o;e=null!=e?e:{};let s=(0,p.getBridgeParams)(),a=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),u=await a.getTransactionReceipt(t),l=new c.ethers.Contract(null!==(n=e.eNEARAddress)&&void 0!==n?n:s.eNEARAddress,null!==(i=e.eNEARAbi)&&void 0!==i?i:s.eNEARAbi,a),h=l.filters.TransferToNearInitiated(),d=await l.queryFilter(h,u.blockNumber,u.blockNumber),m=d.find(e=>e.transactionHash===t);if(!m)throw Error("Unable to process burn transaction event.");let g=null!==(o=e.eNEARAddress)&&void 0!==o?o:s.eNEARAddress,v=m.args.amount.toString(),w=m.args.accountId,b=m.args.sender,M="NEAR",E=await m.getBlock(),A={..._,id:Math.random().toString().slice(2),startTime:new Date(1e3*E.timestamp).toISOString(),amount:v.toString(),completedStep:y,destinationTokenName:M,recipient:w,sender:b,sourceToken:g,sourceTokenName:M,symbol:M,decimals:24,status:f.IN_PROGRESS,burnHashes:[t],burnReceipts:[u]};return await x(A,e)}async function T({amount:t,recipient:e,options:r}){var n,i,o,s;r=null!=r?r:{};let a=(0,p.getBridgeParams)(),u=null!==(n=r.provider)&&void 0!==n?n:(0,p.getSignerProvider)(),c="NEAR",h=null!==(i=r.signer)&&void 0!==i?i:u.getSigner(),d=null!==(o=r.sender)&&void 0!==o?o:(await h.getAddress()).toLowerCase(),f={..._,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),destinationTokenName:c,recipient:e,sender:d,sourceToken:null!==(s=r.eNEARAddress)&&void 0!==s?s:a.eNEARAddress,symbol:c,sourceTokenName:c,decimals:24};return f=await k(f,r),"undefined"!=typeof window&&(f=await (0,l.track)(f)),f}async function k(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,p.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,p.getSignerProvider)(),l=(await u.getNetwork()).chainId,h=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(l!==h)throw Error(`Wrong eth network for burn, expected: ${h}, got: ${l}`);let d=new c.ethers.Contract(null!==(i=e.eNEARAddress)&&void 0!==i?i:a.eNEARAddress,null!==(o=e.eNEARAbi)&&void 0!==o?o:a.eNEARAbi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),m=await u.getBlockNumber()-20,g=await d.transferToNear(t.amount,t.recipient);return{...t,status:f.IN_PROGRESS,ethCache:{from:g.from,to:g.to,safeReorgHeight:m,data:g.data,nonce:g.nonce},burnHashes:[...t.burnHashes,g.hash]}}async function N(t,e){var r,n;e=null!=e?e:{};let i=(0,p.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),s=C(t.burnHashes),a=(await o.getNetwork()).chainId,u=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(a!==u)throw Error(`Wrong eth network for checkBurn, expected: ${u}, got: ${a}`);let c=await o.getTransactionReceipt(s);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,g.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof g.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:f.FAILED,errors:[...t.errors,e],burnReceipts:[...t.burnReceipts,c]}}c.transactionHash!==s&&(t={...t,burnHashes:[...t.burnHashes,c.transactionHash]});let l=await o.getBlock(c.blockHash);return{...t,status:f.IN_PROGRESS,completedStep:y,startTime:new Date(1e3*l.timestamp).toISOString(),burnReceipts:[...t.burnReceipts,c]}}async function x(t,e){var r,i,o,s,a,u,c,l,h,d,g,y;let b;if("string"==typeof t)return await I(t,e);e=null!=e?e:{};let _=(0,p.getBridgeParams)(),M=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),E=null!==(s=null!==(i=e.nearProvider)&&void 0!==i?i:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,p.getNearProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(a=e.sendToNearSyncInterval)&&void 0!==a?a:_.sendToNearSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let A=C(t.burnReceipts),S=A.blockNumber,T=await (0,m.ethOnNearSyncHeight)(null!==(u=e.nearClientAccount)&&void 0!==u?u:_.nearClientAccount,E),k=Math.max(0,T-S);if(k>t.neededConfirmations){b=await (0,m.findEthProof)("TransferToNearInitiated",A.transactionHash,null!==(c=e.eNEARAddress)&&void 0!==c?c:_.eNEARAddress,null!==(l=e.eNEARAbi)&&void 0!==l?l:_.eNEARAbi,M);let r=await E.query({request_type:"call_function",account_id:null!==(h=e.nativeNEARLockerAddress)&&void 0!==h?h:_.nativeNEARLockerAddress,method_name:"is_used_proof",args_base64:n.from(b).toString("base64"),finality:"optimistic"}),i=JSON.parse(n.from(r.result).toString());if(i){if(e.callIndexer)try{let r;let{transactions:i,timestamps:o}=await (0,m.findFinalizationTxOnNear)({proof:n.from(b).toString("base64"),connectorAccount:null!==(d=e.nativeNEARLockerAddress)&&void 0!==d?d:_.nativeNEARLockerAddress,eventRelayerAccount:null!==(g=e.eventRelayerAccount)&&void 0!==g?g:_.eventRelayerAccount,finalizationMethod:"finalise_eth_to_near_transfer",callIndexer:e.callIndexer});o.length>0&&(r=new Date(o[0]/1e6).toISOString()),t={...t,finishTime:r,unlockHashes:[...t.unlockHashes,...i]}}catch(t){console.error(t)}return{...t,completedStep:w,completedConfirmations:k,status:f.COMPLETE,errors:[...t.errors,"Transfer already finalized."]}}}let N=null!==(y=e.nearEventRelayerMargin)&&void 0!==y?y:_.nearEventRelayerMargin;return k<t.neededConfirmations+N?{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),completedConfirmations:k,status:f.IN_PROGRESS}:{...t,completedConfirmations:k,completedStep:v,status:f.ACTION_NEEDED,proof:b}}async function P(t,e){var r,n,i;let o;e=null!=e?e:{};let s=(0,p.getBridgeParams)(),a=null!==(r=e.nearAccount)&&void 0!==r?r:(0,p.getNearWallet)(),c=a instanceof h.Account,d="undefined"!=typeof window&&(c||"browser"===a.type);if((t=await x(t,e)).status!==f.ACTION_NEEDED)return t;let g=t.proof;return d&&m.urlParams.set({unlocking:t.id}),d&&(t=await (0,l.track)({...t,status:f.IN_PROGRESS})),o=c?await a.functionCall({contractId:null!==(n=e.nativeNEARLockerAddress)&&void 0!==n?n:s.nativeNEARLockerAddress,methodName:"finalise_eth_to_near_transfer",args:g,gas:new u.default("200"+"0".repeat(12)),attachedDeposit:new u.default("6"+"0".repeat(22))}):await a.signAndSendTransaction({receiverId:null!==(i=e.nativeNEARLockerAddress)&&void 0!==i?i:s.nativeNEARLockerAddress,actions:[{type:"FunctionCall",params:{methodName:"finalise_eth_to_near_transfer",args:g,gas:"200"+"0".repeat(12),deposit:"6"+"0".repeat(22)}}]}),{...t,status:f.IN_PROGRESS,unlockHashes:[...t.unlockHashes,o.transaction.hash]}}async function O(t,e){var r,n,i,o,s;let a,u;if(e=null!=e?e:{},0===t.unlockHashes.length){let e=m.urlParams.get("unlocking"),r=m.urlParams.get("transactionHashes"),n=m.urlParams.get("errorCode");if(u=["unlocking","transactionHashes","errorCode","errorMessage"],!e){let e=`A finalization transaction was initiated but could not be verified.
        Click 'Retry' to make sure the transfer is finalized.`;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:f.FAILED,errors:[...t.errors,r]}}if(n){m.urlParams.clear(...u);let e="Error from wallet: "+n;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(!r)return console.log("Tx hash not received: pending redirect or wallet error"),t;if(r.includes(",")){m.urlParams.clear(...u);let e="Error from wallet: expected single txHash, got: "+r;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}a=r}else a=C(t.unlockHashes);let c=h.utils.serialize.base_decode(a),l=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,p.getNearProvider)(),d=await l.txStatus(c,null!==(s=null===(o=null==e?void 0:e.nearAccount)||void 0===o?void 0:o.accountId)&&void 0!==s?s:"todo");if(d.status.Unknown)return t;if(d.status.Failure){u&&m.urlParams.clear(...u);let e=`NEAR transaction failed: ${a}`;return console.error(e),{...t,errors:[...t.errors,e],status:f.FAILED,unlockHashes:[...t.unlockHashes,a]}}return u&&m.urlParams.clear(...u),{...t,completedStep:w,status:f.COMPLETE,unlockHashes:[...t.unlockHashes,a]}}e.i18n={en_US:{steps:t=>(0,d.stepsFor)(t,b,{[y]:`Start transfer of ${(0,p.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from Ethereum`,[v]:`Wait for ${t.neededConfirmations+Number((0,p.getBridgeParams)().nearEventRelayerMargin)} transfer confirmations for security`,[w]:`Deposit ${(0,p.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in NEAR`}),statusMessage:t=>{if(t.status===f.FAILED)return"Failed";if(t.status===f.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from Ethereum";case v:return"Ready to deposit in NEAR";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to NEAR";case y:return`Confirming transfer ${t.completedConfirmations+1} of ${t.neededConfirmations+Number((0,p.getBridgeParams)().nearEventRelayerMargin)}`;case v:return"Depositing in NEAR";case w:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===f.FAILED)return"Retry";if(t.status!==f.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case v:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=M,e.checkStatus=E,e.findAllTransactions=A,e.findAllTransfers=S,e.recover=I,e.initiate=T,e.burn=k,e.checkBurn=N,e.checkSync=x,e.unlock=P,e.checkUnlock=O;let C=t=>t[t.length-1]},25277:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.bridgedETH=e.naturalETH=e.bridgedNEAR=e.naturalNEAR=void 0,e.naturalNEAR=o(r(4532)),e.bridgedNEAR=o(r(67298)),e.naturalETH=o(r(88286)),e.bridgedETH=o(r(6809))},88286:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findAllTransfers=e.findAllTransactions=e.recover=e.sendToNear=void 0;var n=r(89361);Object.defineProperty(e,"sendToNear",{enumerable:!0,get:function(){return n.initiate}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return n.recover}}),Object.defineProperty(e,"findAllTransactions",{enumerable:!0,get:function(){return n.findAllTransactions}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return n.findAllTransfers}})},89361:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkMint=e.mint=e.checkSync=e.checkLock=e.lock=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=r(20548),l=r(93694),h=r(4683),d=r(57206),f=s(r(22241)),p=r(16247),m=r(41249),g=r(58180);e.SOURCE_NETWORK="ethereum",e.DESTINATION_NETWORK="near",e.TRANSFER_TYPE="@near-eth/near-ether/natural-ether/sendToNear";let y="lock-natural-ether-to-nep141",v="sync-natural-ether-to-nep141",w="mint-natural-ether-to-nep141",b=[y,v,w],_={completedStep:null,errors:[],status:f.ACTION_NEEDED,type:e.TRANSFER_TYPE,completedConfirmations:0,lockHashes:[],lockReceipts:[],neededConfirmations:20,mintHashes:[]};async function M(t){switch(t.completedStep){case null:return await k(t);case y:return await x(t);case v:try{return await P(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.clear("minting"),t}default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function E(t){switch(t.completedStep){case null:return await N(t);case y:return await x(t);case v:return await O(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function A({fromBlock:t,toBlock:e,sender:r,options:n}){var i,o,s;n=null!=n?n:{};let a=(0,p.getBridgeParams)(),u=null!==(i=n.provider)&&void 0!==i?i:(0,p.getEthProvider)(),l=new c.ethers.Contract(null!==(o=n.etherCustodianAddress)&&void 0!==o?o:a.etherCustodianAddress,null!==(s=n.etherCustodianAbi)&&void 0!==s?s:a.etherCustodianAbi,u),h=l.filters.Deposited(r),d=await l.queryFilter(h,t,e);return d.filter(t=>!t.args.recipient.startsWith("aurora:")).map(t=>t.transactionHash)}async function S({fromBlock:t,toBlock:e,sender:r,options:n}){let i=await A({fromBlock:t,toBlock:e,sender:r,options:n}),o=await Promise.all(i.map(async t=>await I(t,n)));return o}async function I(t,e){var r,n,i;e=null!=e?e:{};let o=(0,p.getBridgeParams)(),s=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),a=await s.getTransactionReceipt(t),u=new c.ethers.Contract(null!==(n=e.etherCustodianAddress)&&void 0!==n?n:o.etherCustodianAddress,null!==(i=e.etherCustodianAbi)&&void 0!==i?i:o.etherCustodianAbi,s),l=u.filters.Deposited(),h=await u.queryFilter(l,a.blockNumber,a.blockNumber),d=h.find(e=>e.transactionHash===t);if(!d)throw Error("Unable to process lock transaction event.");let m=d.args.sender,g=d.args.recipient,v=d.args.amount.toString(),w=await d.getBlock(),b={..._,id:Math.random().toString().slice(2),startTime:new Date(1e3*w.timestamp).toISOString(),amount:v,completedStep:y,destinationTokenName:"nETH",recipient:g,sender:m,sourceTokenName:"ETH",sourceToken:"ETH",symbol:"ETH",decimals:18,status:f.IN_PROGRESS,lockHashes:[t],lockReceipts:[a]};return await x(b,e)}async function T({amount:t,recipient:e,options:r}){var n,i,o,s,a;r=null!=r?r:{};let u=null!==(n=r.provider)&&void 0!==n?n:(0,p.getSignerProvider)(),c=null!==(i=r.symbol)&&void 0!==i?i:"ETH",h=null!==(o=r.decimals)&&void 0!==o?o:18,d=null!==(s=r.signer)&&void 0!==s?s:u.getSigner(),f=null!==(a=r.sender)&&void 0!==a?a:(await d.getAddress()).toLowerCase(),m={..._,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),destinationTokenName:"n"+c,recipient:e,sender:f,sourceTokenName:c,symbol:c,sourceToken:c,decimals:h};return m=await k(m,r),"undefined"!=typeof window&&(m=await (0,l.track)(m)),m}async function k(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,p.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,p.getSignerProvider)(),l=(await u.getNetwork()).chainId,h=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(l!==h)throw Error(`Wrong eth network for lock, expected: ${h}, got: ${l}`);let d=new c.ethers.Contract(null!==(i=e.etherCustodianAddress)&&void 0!==i?i:a.etherCustodianAddress,null!==(o=e.etherCustodianAbi)&&void 0!==o?o:a.etherCustodianAbi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),m=await u.getBlockNumber()-20,g=await d.depositToNear(t.recipient,0,{value:t.amount});return{...t,status:f.IN_PROGRESS,ethCache:{from:g.from,to:g.to,nonce:g.nonce,data:g.data,value:g.value.toString(),safeReorgHeight:m},lockHashes:[...t.lockHashes,g.hash]}}async function N(t,e){var r,n;e=null!=e?e:{};let i=(0,p.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),s=C(t.lockHashes),a=(await o.getNetwork()).chainId,u=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(a!==u)throw Error(`Wrong eth network for checkLock, expected: ${u}, got: ${a}`);let c=await o.getTransactionReceipt(s);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data,value:t.ethCache.value},r=await (0,m.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof m.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:f.FAILED,errors:[...t.errors,e],lockReceipts:[...t.lockReceipts,c]}}c.transactionHash!==s&&(t={...t,lockHashes:[...t.lockHashes,c.transactionHash]});let l=await o.getBlock(c.blockHash);return{...t,status:f.IN_PROGRESS,completedStep:y,startTime:new Date(1e3*l.timestamp).toISOString(),lockReceipts:[...t.lockReceipts,c]}}async function x(t,e){var r,i,o,s,a,u,c,l,h,d,m,y;let b;if("string"==typeof t)return await I(t,e);e=null!=e?e:{};let _=(0,p.getBridgeParams)(),M=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),E=null!==(s=null!==(i=e.nearProvider)&&void 0!==i?i:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,p.getNearProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(a=e.sendToNearSyncInterval)&&void 0!==a?a:_.sendToNearSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let A=C(t.lockReceipts),S=A.blockNumber,T=await (0,g.ethOnNearSyncHeight)(null!==(u=e.nearClientAccount)&&void 0!==u?u:_.nearClientAccount,E),k=Math.max(0,T-S);if(k>t.neededConfirmations){b=await (0,g.findEthProof)("Deposited",A.transactionHash,null!==(c=e.etherCustodianAddress)&&void 0!==c?c:_.etherCustodianAddress,null!==(l=e.etherCustodianAbi)&&void 0!==l?l:_.etherCustodianAbi,M);let r=await E.query({request_type:"call_function",account_id:null!==(h=e.auroraEvmAccount)&&void 0!==h?h:_.auroraEvmAccount,method_name:"is_used_proof",args_base64:n.from(b).toString("base64"),finality:"optimistic"}),i=!!r.result[0];if(i){if(e.callIndexer)try{let r;let{transactions:i,timestamps:o}=await (0,g.findFinalizationTxOnNear)({proof:n.from(b).toString("base64"),connectorAccount:null!==(d=e.auroraEvmAccount)&&void 0!==d?d:_.auroraEvmAccount,eventRelayerAccount:null!==(m=e.eventRelayerAccount)&&void 0!==m?m:_.eventRelayerAccount,finalizationMethod:"deposit",callIndexer:e.callIndexer});o.length>0&&(r=new Date(o[0]/1e6).toISOString()),t={...t,finishTime:r,mintHashes:[...t.mintHashes,...i]}}catch(t){console.error(t)}return{...t,completedStep:w,completedConfirmations:k,status:f.COMPLETE,errors:[...t.errors,"Transfer already finalized."]}}}let N=null!==(y=e.nearEventRelayerMargin)&&void 0!==y?y:_.nearEventRelayerMargin;return k<t.neededConfirmations+N?{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),completedConfirmations:k,status:f.IN_PROGRESS}:{...t,completedConfirmations:k,completedStep:v,status:f.ACTION_NEEDED,proof:b}}async function P(t,e){var r,n,i;let o;e=null!=e?e:{};let s=(0,p.getBridgeParams)(),a=null!==(r=e.nearAccount)&&void 0!==r?r:(0,p.getNearWallet)(),c=a instanceof h.Account,d="undefined"!=typeof window&&(c||"browser"===a.type);if((t=await x(t,e)).status!==f.ACTION_NEEDED)return t;let m=t.proof;return d&&g.urlParams.set({minting:t.id}),d&&(t=await (0,l.track)({...t,status:f.IN_PROGRESS})),o=c?await a.functionCall({contractId:null!==(n=e.auroraEvmAccount)&&void 0!==n?n:s.auroraEvmAccount,methodName:"deposit",args:m,gas:new u.default("200"+"0".repeat(12)),attachedDeposit:new u.default("6"+"0".repeat(22))}):await a.signAndSendTransaction({receiverId:null!==(i=e.auroraEvmAccount)&&void 0!==i?i:s.auroraEvmAccount,actions:[{type:"FunctionCall",params:{methodName:"deposit",args:m,gas:"200"+"0".repeat(12),deposit:"6"+"0".repeat(22)}}]}),{...t,status:f.IN_PROGRESS,mintHashes:[...t.mintHashes,o.transaction.hash]}}async function O(t,e){var r,n,i,o,s;let a,u;if(e=null!=e?e:{},0===t.mintHashes.length){let e=g.urlParams.get("minting"),r=g.urlParams.get("transactionHashes"),n=g.urlParams.get("errorCode");if(u=["minting","transactionHashes","errorCode","errorMessage"],!e){let e=`A finalization transaction was initiated but could not be verified.
        Click 'Retry' to make sure the transfer is finalized.`;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:f.FAILED,errors:[...t.errors,r]}}if(n){g.urlParams.clear(...u);let e="Error from wallet: "+n;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(!r)return console.log("Tx hash not received: pending redirect or wallet error"),t;if(r.includes(",")){g.urlParams.clear(...u);let e="Error from wallet: expected single txHash, got: "+r;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}a=r}else a=C(t.mintHashes);let c=h.utils.serialize.base_decode(a),l=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,p.getNearProvider)(),d=await l.txStatus(c,null!==(s=null===(o=null==e?void 0:e.nearAccount)||void 0===o?void 0:o.accountId)&&void 0!==s?s:"todo");if(d.status.Unknown)return t;if(d.status.Failure){u&&g.urlParams.clear(...u);let e=`NEAR transaction failed: ${a}`;return console.error(e),{...t,errors:[...t.errors,e],status:f.FAILED,mintHashes:[...t.mintHashes,a]}}return u&&g.urlParams.clear(...u),{...t,completedStep:w,status:f.COMPLETE,mintHashes:[...t.mintHashes,a]}}e.i18n={en_US:{steps:t=>(0,d.stepsFor)(t,b,{[y]:`Start transfer of ${(0,p.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from Ethereum`,[v]:`Wait for ${t.neededConfirmations+Number((0,p.getBridgeParams)().nearEventRelayerMargin)} transfer confirmations for security`,[w]:`Deposit ${(0,p.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in NEAR`}),statusMessage:t=>{if(t.status===f.FAILED)return"Failed";if(t.status===f.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from Ethereum";case v:return"Ready to deposit in NEAR";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to NEAR";case y:return`Confirming transfer ${t.completedConfirmations+1} of ${t.neededConfirmations+Number((0,p.getBridgeParams)().nearEventRelayerMargin)}`;case v:return"Depositing in NEAR";case w:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===f.FAILED)return"Retry";if(t.status!==f.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case v:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=M,e.checkStatus=E,e.findAllTransactions=A,e.findAllTransfers=S,e.recover=I,e.initiate=T,e.lock=k,e.checkLock=N,e.checkSync=x,e.mint=P,e.checkMint=O;let C=t=>t[t.length-1]},95632:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let i=n(r(13550)),o=r(16247);async function s({owner:t,options:e}){var r,n,s;e=null!=e?e:{};let a=null!==(s=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==s?s:(0,o.getNearProvider)(),u=await a.experimental_protocolConfig({finality:"final"}),c=await a.query({request_type:"view_account",account_id:t,finality:"optimistic"}),l=new i.default(u.runtime_config.storage_amount_per_byte),h=new i.default(c.storage_usage).mul(l),d=new i.default(c.locked),f=new i.default(c.amount).add(d),p=f.sub(i.default.max(d,h));return{total:f.toString(),stateStaked:h.toString(),staked:d.toString(),available:p.toString()}}e.default=s},4532:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getBalance=e.findAllTransfers=e.findAllTransactions=e.recover=e.sendToEthereum=void 0;var i=r(78030);Object.defineProperty(e,"sendToEthereum",{enumerable:!0,get:function(){return i.initiate}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return i.recover}}),Object.defineProperty(e,"findAllTransactions",{enumerable:!0,get:function(){return i.findAllTransactions}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return i.findAllTransfers}});var o=r(95632);Object.defineProperty(e,"getBalance",{enumerable:!0,get:function(){return n(o).default}})},78030:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkMint=e.mint=e.proofAlreadyUsed=e.checkSync=e.checkFinality=e.checkLock=e.lock=e.initiate=e.parseLockReceipt=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=a(r(77191)),l=r(20548),h=r(4683),d=r(60822),f=s(r(22241)),p=r(57206),m=r(93694),g=r(58180),y=r(16247),v=r(41249);e.SOURCE_NETWORK="near",e.DESTINATION_NETWORK="ethereum",e.TRANSFER_TYPE="@near-eth/near-ether/natural-near/sendToEthereum";let w="lock-natural-near-to-e-near",b="await-finality-natural-near-to-e-near",_="sync-natural-near-to-e-near",M="mint-natural-near-to-e-near",E=[w,b,_,M];class A extends Error{}let S={completedStep:null,errors:[],status:f.IN_PROGRESS,type:e.TRANSFER_TYPE,finalityBlockHeights:[],nearOnEthClientBlockHeight:null,mintHashes:[],mintReceipts:[],lockReceiptBlockHeights:[],lockReceiptIds:[],lockHashes:[]};async function I(t){switch(t.completedStep){case null:try{return await C(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.clear("locking"),t}case b:return await B(t);case _:return await K(t);default:throw Error(`Don't know how to act on transfer: ${JSON.stringify(t)}`)}}async function T(t){switch(t.completedStep){case null:return await R(t);case w:return await L(t);case b:return await B(t);case _:return await F(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function k({fromBlock:t,toBlock:e,sender:r,callIndexer:n,options:i}){var o;i=null!=i?i:{};let s=(0,y.getBridgeParams)(),a=null!==(o=i.nativeNEARLockerAddress)&&void 0!==o?o:s.nativeNEARLockerAddress,u=await n((0,g.buildIndexerTxQuery)({fromBlock:t,toBlock:e,predecessorAccountId:r,receiverAccountId:a}));return u.filter(t=>"migrate_to_ethereum"===t.args.method_name).map(t=>t.originated_from_transaction_hash)}async function N({fromBlock:t,toBlock:e,sender:r,callIndexer:n,options:i}){let o=await k({fromBlock:t,toBlock:e,sender:r,callIndexer:n,options:i}),s=await Promise.all(o.map(async t=>{try{return await x(t,r,i)}catch(e){return console.log("Failed to recover transfer (transaction failed ?): ",t,e),null}}));return s.filter(t=>null!==t)}async function x(t,e="todo",r){var i,o,s,a;r=null!=r?r:{};let u=(0,y.getBridgeParams)(),c=null!==(s=null!==(i=r.nearProvider)&&void 0!==i?i:null===(o=r.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,y.getNearProvider)(),l=h.utils.serialize.base_decode(t),f=await c.txStatus(l,e);if(e=f.transaction.signer_id,f.status.Unknown)throw Error(`Lock transaction pending: ${t}`);if(f.status.Failure)throw Error(`Lock transaction failed: ${t}`);let p=f.status.SuccessValue;if(!p)throw Error(`Invalid lockTx successValue: '${p}'
      Full lock transaction: ${JSON.stringify(f)}`);class m{constructor(t){Object.assign(this,t)}}let g=new Map([[m,{kind:"struct",fields:[["flag","u8"],["amount","u128"],["recipient",[20]]]}]]),v=(0,d.deserialize)(g,m,n.from(p,"base64")),b=v.amount.toString(),_="0x"+n.from(v.recipient).toString("hex"),M="NEAR",E=await P(f,e,null!==(a=r.nativeNEARLockerAddress)&&void 0!==a?a:u.nativeNEARLockerAddress,c),A=await c.block({blockId:f.transaction_outcome.block_hash}),I={...S,id:Math.random().toString().slice(2),startTime:new Date(A.header.timestamp/1e6).toISOString(),amount:b,completedStep:w,destinationTokenName:M,recipient:_,sender:e,sourceTokenName:M,symbol:M,sourceToken:M,decimals:24,lockHashes:[t],lockReceiptBlockHeights:[E.blockHeight],lockReceiptIds:[E.id]};return await B(I,r)}async function P(t,e,r,n){let i;let o=t.transaction_outcome.outcome.receipt_ids;if(1!==o.length)throw new A(`Lock expects only one receipt, got ${o.length}.
      Full lock transaction: ${JSON.stringify(t)}`);let s=o[0],a=t.receipts_outcome.find(t=>t.id===s).outcome,u=a.status.SuccessReceiptId,c=a.executor_id;switch(c){case e:{let e=t.receipts_outcome.find(t=>t.id===u).outcome;i=u;let n=e.executor_id;if(n!==r)throw new A(`Unexpected receipt outcome format in 2fa transaction.
          Expected nativeNEARLockerAddress '${r}', got '${n}'
          Full withdrawal transaction: ${JSON.stringify(t)}`);break}case r:i=s;break;default:throw new A(`Unexpected receipt outcome format.
        Full withdrawal transaction: ${JSON.stringify(t)}`)}let l=t.receipts_outcome.find(t=>t.id===i).block_hash,h=await n.block({blockId:l}),d=Number(h.header.height);return{id:i,blockHeight:d}}async function O({amount:t,recipient:e,options:r}){var n;r=null!=r?r:{};let i="NEAR",o=null!==(n=r.sender)&&void 0!==n?n:await (0,y.getNearAccountId)(),s={...S,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:t.toString(),destinationTokenName:i,recipient:e,sender:o,sourceTokenName:i,symbol:i,sourceToken:i,decimals:24};try{s=await C(s,r),"undefined"!=typeof window&&(s=await (0,m.track)(s))}catch(t){throw t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.get("locking")&&(await (0,m.untrack)(g.urlParams.get("locking")),g.urlParams.clear("locking")),t}return s}async function C(t,e){var r,n,i;let o;e=null!=e?e:{};let s=(0,y.getBridgeParams)(),a=null!==(r=e.nearAccount)&&void 0!==r?r:(0,y.getNearWallet)(),c=a instanceof h.Account,l="undefined"!=typeof window&&(c||"browser"===a.type);return l&&g.urlParams.set({locking:t.id}),l&&(t=await (0,m.track)({...t,status:f.IN_PROGRESS})),o=c?await a.functionCall({contractId:null!==(n=e.nativeNEARLockerAddress)&&void 0!==n?n:s.nativeNEARLockerAddress,methodName:"migrate_to_ethereum",args:{eth_recipient:t.recipient.replace("0x","")},gas:new u.default("10"+"0".repeat(12)),attachedDeposit:new u.default(t.amount)}):await a.signAndSendTransaction({receiverId:null!==(i=e.nativeNEARLockerAddress)&&void 0!==i?i:s.nativeNEARLockerAddress,actions:[{type:"FunctionCall",params:{methodName:"migrate_to_ethereum",args:{eth_recipient:t.recipient.replace("0x","")},gas:"10"+"0".repeat(12),deposit:t.amount}}]}),{...t,status:f.IN_PROGRESS,lockHashes:[...t.lockHashes,o.transaction.hash]}}async function R(t,e){var r,n,i,o;let s,a,u;e=null!=e?e:{};let c=(0,y.getBridgeParams)();if(0===t.lockHashes.length){let e=g.urlParams.get("locking"),r=g.urlParams.get("transactionHashes"),n=g.urlParams.get("errorCode");if(a=["locking","transactionHashes","errorCode","errorMessage"],!e){let e=`A transaction was initiated but could not be verified.
        Click 'Rescan the blockchain' to check if a transfer was created.`;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:f.FAILED,errors:[...t.errors,r]}}if(n){g.urlParams.clear(...a);let e="Error from wallet: "+n;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(!r)return console.log("Lock tx hash not received: pending redirect or wallet error"),t;if(r.includes(",")){g.urlParams.clear(...a);let e="Error from wallet: expected single txHash, got: "+r;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}s=r}else s=j(t.lockHashes);let l=h.utils.serialize.base_decode(s),d=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,y.getNearProvider)(),p=await d.txStatus(l,t.sender);if(p.status.Unknown)return t;if(p.status.Failure){a&&g.urlParams.clear(...a);let e=`NEAR transaction failed: ${s}`;return console.error(e),{...t,errors:[...t.errors,e],status:f.FAILED,lockHashes:[...t.lockHashes,s]}}try{u=await P(p,t.sender,null!==(o=e.nativeNEARLockerAddress)&&void 0!==o?o:c.nativeNEARLockerAddress,d)}catch(e){if(e instanceof A)return a&&g.urlParams.clear(...a),{...t,errors:[...t.errors,e.message],status:f.FAILED,lockHashes:[...t.lockHashes,s]};throw e}let m=await d.block({blockId:p.transaction_outcome.block_hash}),v=new Date(m.header.timestamp/1e6).toISOString();return a&&g.urlParams.clear(...a),{...t,status:f.IN_PROGRESS,completedStep:w,startTime:v,lockReceiptIds:[...t.lockReceiptIds,u.id],lockReceiptBlockHeights:[...t.lockReceiptBlockHeights,u.blockHeight],lockHashes:[...t.lockHashes,s]}}async function L(t,e){var r,n,i;e=null!=e?e:{};let o=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,y.getNearProvider)(),s=j(t.lockReceiptBlockHeights),a=Number((await o.block({finality:"final"})).header.height);return a<=s?t:{...t,completedStep:b,status:f.IN_PROGRESS,finalityBlockHeights:[...t.finalityBlockHeights,a]}}async function B(t,e){var r,n,i,o,s,a,u,c,l,h,d,p,m,v,w;let b;if("string"==typeof t)return await x(t,"todo",e);e=null!=e?e:{};let E=(0,y.getBridgeParams)(),A=null!==(r=e.provider)&&void 0!==r?r:(0,y.getEthProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(n=e.sendToEthereumSyncInterval)&&void 0!==n?n:E.sendToEthereumSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let S=(await A.getNetwork()).chainId,I=null!==(i=e.ethChainId)&&void 0!==i?i:E.ethChainId;if(S!==I)throw Error(`Wrong eth network for checkSync, expected: ${I}, got: ${S}`);let T=j(t.lockReceiptBlockHeights),k=await (0,g.nearOnEthSyncHeight)(A,null!==(o=e.ethClientAddress)&&void 0!==o?o:E.ethClientAddress,null!==(s=e.ethClientAbi)&&void 0!==s?s:E.ethClientAbi),N=null!==(c=null!==(a=e.nearProvider)&&void 0!==a?a:null===(u=e.nearAccount)||void 0===u?void 0:u.connection.provider)&&void 0!==c?c:(0,y.getNearProvider)();if(!(k>T))return{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),nearOnEthClientBlockHeight:k,status:f.IN_PROGRESS};if(b=await (0,g.findNearProof)(j(t.lockReceiptIds),null!==(l=e.nativeNEARLockerAddress)&&void 0!==l?l:E.nativeNEARLockerAddress,k,N,A,null!==(h=e.ethClientAddress)&&void 0!==h?h:E.ethClientAddress,null!==(d=e.ethClientAbi)&&void 0!==d?d:E.ethClientAbi),await D(A,b,null!==(p=e.eNEARAddress)&&void 0!==p?p:E.eNEARAddress,null!==(m=e.eNEARAbi)&&void 0!==m?m:E.eNEARAbi)){try{let{transactions:r,block:n}=await (0,g.findFinalizationTxOnEthereum)({usedProofPosition:"8",proof:b,connectorAddress:null!==(v=e.eNEARAddress)&&void 0!==v?v:E.eNEARAddress,connectorAbi:null!==(w=e.eNEARAbi)&&void 0!==w?w:E.eNEARAbi,finalizationEvent:"NearToEthTransferFinalised",recipient:t.recipient,amount:t.amount,provider:A});t={...t,finishTime:new Date(1e3*n.timestamp).toISOString(),mintHashes:[...t.mintHashes,...r]}}catch(t){console.error(t)}return{...t,completedStep:M,nearOnEthClientBlockHeight:k,status:f.COMPLETE,errors:[...t.errors,"Mint proof already used."]}}return{...t,completedStep:_,nearOnEthClientBlockHeight:k,status:f.ACTION_NEEDED,proof:b}}async function D(t,e,r,n){let i=new l.ethers.Contract(r,n,t),o=await i.usedProofs("0x"+c.default.decode(e.outcome_proof.outcome.receipt_ids[0]).toString("hex"));return o}async function K(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,y.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,y.getSignerProvider)(),c=(await u.getNetwork()).chainId,h=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(c!==h)throw Error(`Wrong eth network for checkSync, expected: ${h}, got: ${c}`);if((t=await B(t,e)).status!==f.ACTION_NEEDED)return t;let d=t.proof,p=(0,g.borshifyOutcomeProof)(d),m=new l.ethers.Contract(null!==(i=e.eNEARAddress)&&void 0!==i?i:a.eNEARAddress,null!==(o=e.eNEARAbi)&&void 0!==o?o:a.eNEARAbi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),v=await u.getBlockNumber()-20,w=await m.finaliseNearToEthTransfer(p,t.nearOnEthClientBlockHeight);return{...t,status:f.IN_PROGRESS,ethCache:{from:w.from,to:w.to,safeReorgHeight:v,data:w.data,nonce:w.nonce},mintHashes:[...t.mintHashes,w.hash]}}async function F(t,e){var r,n;e=null!=e?e:{};let i=(0,y.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,y.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkMint, expected: ${a}, got: ${s}`);let u=j(t.mintHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,v.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof v.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:f.FAILED,errors:[...t.errors,e],mintReceipts:[...t.mintReceipts,c]}}if(c.transactionHash!==u)return{...t,status:f.COMPLETE,completedStep:M,mintHashes:[...t.mintHashes,c.transactionHash],mintReceipts:[...t.mintReceipts,c]};let l=await o.getBlock(c.blockNumber);return{...t,status:f.COMPLETE,completedStep:M,finishTime:new Date(1e3*l.timestamp).toISOString(),mintReceipts:[...t.mintReceipts,c]}}e.i18n={en_US:{steps:t=>(0,p.stepsFor)(t,E,{[w]:`Start transfer of ${(0,y.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from NEAR`,[b]:"Confirm in NEAR",[_]:"Confirm in Ethereum. This can take around 16 hours. Feel free to return to this window later, to complete the final step of the transfer.",[M]:`Deposit ${(0,y.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Ethereum`}),statusMessage:t=>{if(t.status===f.FAILED)return"Failed";if(t.status===f.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from NEAR";case _:return"Ready to deposit in Ethereum";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring to Ethereum";case w:case b:return"Confirming transfer";case _:return"Depositing in Ethereum";case M:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===f.FAILED)return"Retry";if(t.status!==f.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case _:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=I,e.checkStatus=T,e.findAllTransactions=k,e.findAllTransfers=N,e.recover=x,e.parseLockReceipt=P,e.initiate=O,e.lock=C,e.checkLock=R,e.checkFinality=L,e.checkSync=B,e.proofAlreadyUsed=D,e.mint=K,e.checkMint=F;let j=t=>t[t.length-1]},25355:function(t,e,r){"use strict";/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i,o,s,a=r(63701)("http-errors"),u=r(66644),c=r(30111),l=r(35717),h=r(72953);function d(t){return Number(String(t).charAt(0)+"00")}function f(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function p(t){return"Error"!==t.substr(-5)?t+"Error":t}t.exports=function t(){for(var e,r,n=500,i={},o=0;o<arguments.length;o++){var s=arguments[o];if(s instanceof Error){n=(e=s).status||e.statusCode||n;continue}switch(typeof s){case"string":r=s;break;case"number":n=s,0!==o&&a("non-first-argument status code; replace with createError("+s+", ...)");break;case"object":i=s}}"number"==typeof n&&(n<400||n>=600)&&a("non-error status code; use only 4xx or 5xx status codes"),("number"!=typeof n||!c[n]&&(n<400||n>=600))&&(n=500);var u=t[n]||t[d(n)];for(var l in e||Error.captureStackTrace(e=u?new u(r):Error(r||c[n]),t),u&&e instanceof u&&e.status===n||(e.expose=n<500,e.status=e.statusCode=n),i)"status"!==l&&"statusCode"!==l&&(e[l]=i[l]);return e},t.exports.HttpError=function(){function t(){throw TypeError("cannot construct abstract class")}return l(t,Error),t}(),t.exports.isHttpError=(n=t.exports.HttpError,function(t){return!!t&&"object"==typeof t&&(t instanceof n||t instanceof Error&&"boolean"==typeof t.expose&&"number"==typeof t.statusCode&&t.status===t.statusCode)}),i=t.exports,o=c.codes,s=t.exports.HttpError,o.forEach(function(t){var e,r=h(c[t]);switch(d(t)){case 400:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!0,i}(s,r,t);break;case 500:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!1,i}(s,r,t)}e&&(i[t]=e,i[r]=e)}),i["I'mateapot"]=a.function(i.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')},63701:function(t){"use strict";function e(t,e){if("function"!=typeof t)throw TypeError("argument fn must be a function");return t}function r(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw TypeError("must call property on owner object");if(!n.configurable)throw TypeError("property must be configurable")}/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.exports=function(t){if(!t)throw TypeError("argument namespace is required");function n(t){}return n._file=void 0,n._ignored=!0,n._namespace=t,n._traced=!1,n._warned=Object.create(null),n.function=e,n.property=r,n}},79628:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;let s=o(r(79424)),a=o(r(27812)),u=r(31850),c=r(99791),l=r(25532),h=r(31829),d=r(16666),f=r(46237),p=r(68889),m=o(r(50060));function g(t){return JSON.parse(n.from(t).toString())}function y(t){return n.from(JSON.stringify(t))}class v{constructor(t,e){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=e}get ready(){let t=a.default("Account.ready()");return t("not needed anymore, always ready"),Promise.resolve()}async fetchState(){let t=a.default("Account.fetchState()");t("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(t,e){if(!i.env.NEAR_NO_LOGS)for(let r of e)console.log(`Receipt${r.receiptIds.length>1?"s":""}: ${r.receiptIds.join(", ")}`),this.printLogs(t,r.logs,"	"),r.failure&&console.warn(`	Failure [${t}]: ${r.failure}`)}printLogs(t,e,r=""){if(!i.env.NEAR_NO_LOGS)for(let n of e)console.log(`${r}Log [${t}]: ${n}`)}async signTransaction(t,e){let r=await this.findAccessKey(t,e);if(!r)throw new c.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");let{accessKey:n}=r,i=await this.connection.provider.block({finality:"final"}),o=i.header.hash,s=++n.nonce;return await u.signTransaction(t,s,e,l.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...t){return"string"==typeof t[0]?this.signAndSendTransactionV1(t[0],t[1]):this.signAndSendTransactionV2(t[0])}signAndSendTransactionV1(t,e){let r=a.default("Account.signAndSendTransaction(receiverId, actions");return r("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:t,actions:e})}async signAndSendTransactionV2({receiverId:t,actions:e,returnError:r}){let n,i;let o=await m.default(500,12,1.5,async()=>{[n,i]=await this.signTransaction(t,e);let r=i.transaction.publicKey;try{return await this.connection.provider.sendTransaction(i)}catch(e){if("InvalidNonce"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} with new nonce.`),delete this.accessKeyByPublicKeyCache[r.toString()],null;if("Expired"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} due to expired block hash`),null;throw e.context=new c.ErrorContext(l.baseEncode(n)),e}});if(!o)throw new c.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");let s=[o.transaction_outcome,...o.receipts_outcome].reduce((t,e)=>e.outcome.logs.length||"object"==typeof e.outcome.status&&"object"==typeof e.outcome.status.Failure?t.concat({receiptIds:e.outcome.receipt_ids,logs:e.outcome.logs,failure:void 0!==e.outcome.status.Failure?f.parseRpcError(e.outcome.status.Failure):null}):t,[]);if(this.printLogsAndFailures(i.transaction.receiverId,s),!r&&"object"==typeof o.status&&"object"==typeof o.status.Failure){if(o.status.Failure.error_message&&o.status.Failure.error_type)throw new c.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type);throw f.parseResultError(o)}return o}async findAccessKey(t,e){let r=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!r)return null;let n=this.accessKeyByPublicKeyCache[r.toString()];if(void 0!==n)return{publicKey:r,accessKey:n};try{let t=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:r.toString(),finality:"optimistic"});if(this.accessKeyByPublicKeyCache[r.toString()])return{publicKey:r,accessKey:this.accessKeyByPublicKeyCache[r.toString()]};return this.accessKeyByPublicKeyCache[r.toString()]=t,{publicKey:r,accessKey:t}}catch(t){if("AccessKeyDoesNotExist"==t.type)return null;throw t}}async createAndDeployContract(t,e,r,n){let i=u.fullAccessKey();await this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(n),u.addKey(h.PublicKey.from(e),i),u.deployContract(r)]});let o=new v(this.connection,t);return o}async sendMoney(t,e){return this.signAndSendTransaction({receiverId:t,actions:[u.transfer(e)]})}async createAccount(t,e,r){let n=u.fullAccessKey();return this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(r),u.addKey(h.PublicKey.from(e),n)]})}async deleteAccount(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteAccount(t)]})}async deployContract(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deployContract(t)]})}encodeJSContractArgs(t,e,r){return n.concat([n.from(t),n.from([0]),n.from(e),n.from([0]),n.from(r)])}async functionCall(...t){return"string"==typeof t[0]?this.functionCallV1(t[0],t[1],t[2],t[3],t[4]):this.functionCallV2(t[0])}functionCallV1(t,e,r,n,i){let o=a.default("Account.functionCall(contractId, methodName, args, gas, amount)");return o("use `Account.functionCall(FunctionCallOptions)` instead"),r=r||{},this.validateArgs(r),this.signAndSendTransaction({receiverId:t,actions:[u.functionCall(e,r,n||p.DEFAULT_FUNCTION_CALL_GAS,i)]})}functionCallV2({contractId:t,methodName:e,args:r={},gas:n=p.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:i,walletMeta:o,walletCallbackUrl:s,stringify:a,jsContract:c}){let l;if(this.validateArgs(r),c){let o=this.encodeJSContractArgs(t,e,JSON.stringify(r));l=["call_js_contract",o,n,i,null,!0]}else{let t=void 0===a?u.stringifyJsonOrBytes:a;l=[e,r,n,i,t,!1]}return this.signAndSendTransaction({receiverId:c?this.connection.jsvmAccountId:t,actions:[u.functionCall.apply(void 0,l)],walletMeta:o,walletCallbackUrl:s})}async addKey(t,e,r,n){let i;return r||(r=[]),Array.isArray(r)||(r=[r]),i=e?u.functionCallAccessKey(e,r,n):u.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[u.addKey(h.PublicKey.from(t),i)]})}async deleteKey(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteKey(h.PublicKey.from(t))]})}async stake(t,e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.stake(e,h.PublicKey.from(t))]})}validateArgs(t){let e=void 0!==t.byteLength&&t.byteLength===t.length;if(!e&&(Array.isArray(t)||"object"!=typeof t))throw new d.PositionalArgsError}async viewFunction(t,e,r={},{parse:i=g,stringify:o=y,jsContract:s=!1}={}){let a;this.validateArgs(r),a=s?this.encodeJSContractArgs(t,e,Object.keys(r).length>0?JSON.stringify(r):""):o(r);let u=await this.connection.provider.query({request_type:"call_function",account_id:s?this.connection.jsvmAccountId:t,method_name:s?"view_js_contract":e,args_base64:a.toString("base64"),finality:"optimistic"});return u.logs&&this.printLogs(t,u.logs),u.result&&u.result.length>0&&i(n.from(u.result))}async viewState(t,e={finality:"optimistic"}){let{values:r}=await this.connection.provider.query({request_type:"view_state",...e,account_id:this.accountId,prefix_base64:n.from(t).toString("base64")});return r.map(({key:t,value:e})=>({key:n.from(t,"base64"),value:n.from(e,"base64")}))}async getAccessKeys(){let t=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(t)?t:t.keys}async getAccountDetails(){let t=await this.getAccessKeys(),e=t.filter(t=>"FullAccess"!==t.access_key.permission).map(t=>{let e=t.access_key.permission;return{contractId:e.FunctionCall.receiver_id,amount:e.FunctionCall.allowance,publicKey:t.public_key}});return{authorizedApps:e}}async getAccountBalance(){let t=await this.connection.provider.experimental_protocolConfig({finality:"final"}),e=await this.state(),r=new s.default(t.runtime_config.storage_amount_per_byte),n=new s.default(e.storage_usage).mul(r),i=new s.default(e.locked),o=new s.default(e.amount).add(i),a=o.sub(s.default.max(i,n));return{total:o.toString(),stateStaked:n.toString(),staked:i.toString(),available:a.toString()}}}e.Account=v},39517:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;let n=r(36361);class i{}e.AccountCreator=i;class o extends i{constructor(t,e){super(),this.masterAccount=t,this.initialBalance=e}async createAccount(t,e){await this.masterAccount.createAccount(t,e,this.initialBalance)}}e.LocalAccountCreator=o;class s extends i{constructor(t,e){super(),this.connection=t,this.helperUrl=e}async createAccount(t,e){await n.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:e.toString()}))}}e.UrlAccountCreator=s},54193:function(t,e,r){"use strict";var n,i,o,s,a,u,c=r(48764).Buffer,l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account2FA=e.AccountMultisig=e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=void 0;let h=l(r(79424)),d=l(r(27812)),f=r(79628),p=r(71282),m=r(31829),g=r(31850),y=r(99791),v=r(36361);e.MULTISIG_STORAGE_KEY="__multisigRequest",e.MULTISIG_ALLOWANCE=new h.default(p.parseNearAmount("1")),e.MULTISIG_GAS=new h.default("100000000000000"),e.MULTISIG_DEPOSIT=new h.default("0"),e.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],e.MULTISIG_CONFIRM_METHODS=["confirm"],(n=s=e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})).CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",n.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",n.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",n.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",n.METHOD_NOT_FOUND="Contract method is not found",(i=a=e.MultisigStateStatus||(e.MultisigStateStatus={}))[i.INVALID_STATE=0]="INVALID_STATE",i[i.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",i[i.VALID_STATE=2]="VALID_STATE",i[i.UNKNOWN_STATE=3]="UNKNOWN_STATE",(o=u||(u={}))[o.INVALID_CODE=0]="INVALID_CODE",o[o.VALID_CODE=1]="VALID_CODE",o[o.UNKNOWN_CODE=2]="UNKNOWN_CODE";let w={[e.MULTISIG_STORAGE_KEY]:null};class b extends f.Account{constructor(t,e,r){super(t,e),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}async signAndSendTransactionWithAccount(t,e){return super.signAndSendTransaction({receiverId:t,actions:e})}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:r}){let n;let{accountId:i}=this,o=c.from(JSON.stringify({request:{receiver_id:t,actions:A(r,i,t)}}));try{n=await super.signAndSendTransaction({receiverId:i,actions:[g.functionCall("add_request_and_confirm",o,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(e){if(e.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(t,r);throw e}if(!n.status)throw Error("Request failed");let s={...n.status};if(!s.SuccessValue||"string"!=typeof s.SuccessValue)throw Error("Request failed");return this.setRequest({accountId:i,actions:r,requestId:parseInt(c.from(s.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(n),this.deleteUnconfirmedRequests(),n}async checkMultisigCodeAndStateStatus(t){let r=t?u.UNKNOWN_CODE:u.VALID_CODE;try{return t?await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.deployContract(t),g.functionCall("delete_request",{request_id:4294967295},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]}):await this.deleteRequest(4294967295),{codeStatus:u.VALID_CODE,stateStatus:a.VALID_STATE}}catch(t){if(new RegExp(s.CANNOT_DESERIALIZE_STATE).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.INVALID_STATE};if(new RegExp(s.MULTISIG_NOT_INITIALIZED).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.STATE_NOT_INITIALIZED};if(new RegExp(s.NO_SUCH_REQUEST).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.VALID_STATE};if(new RegExp(s.METHOD_NOT_FOUND).test(t&&t.message))return{codeStatus:u.INVALID_CODE,stateStatus:a.UNKNOWN_STATE};throw t}}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:t},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}async deleteAllRequests(){let t=await this.getRequestIds();t.length&&await Promise.all(t.map(t=>this.deleteRequest(t)))}async deleteUnconfirmedRequests(){let t=await this.getRequestIds(),{requestId:r}=this.getRequest();for(let n of t)if(n!=r)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:n},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(t){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(e.MULTISIG_STORAGE_KEY)||"{}"):w[e.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(e.MULTISIG_STORAGE_KEY,JSON.stringify(t));w[e.MULTISIG_STORAGE_KEY]=t}}e.AccountMultisig=b;class _ extends b{constructor(t,e,r){super(t,e,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}async signAndSendTransaction(...t){if("string"!=typeof t[0])return this.__signAndSendTransaction(t[0]);{let e=d.default("Account.signAndSendTransaction(receiverId, actions");return e("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:t[0],actions:t[1]})}}async __signAndSendTransaction({receiverId:t,actions:e}){await super.signAndSendTransaction({receiverId:t,actions:e}),await this.sendCode();let r=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(r),r}async deployMultisig(t){let{accountId:r}=this,n=(await this.getRecoveryMethods()).data.filter(({kind:t,publicKey:e})=>("phrase"===t||"ledger"===t)&&null!==e).map(t=>t.publicKey),i=(await this.getAccessKeys()).filter(({public_key:t,access_key:{permission:e}})=>"FullAccess"===e&&!n.includes(t)).map(t=>t.public_key).map(M),o=M((await this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),s=c.from(JSON.stringify({num_confirmations:2})),u=[...i.map(t=>g.deleteKey(t)),...i.map(t=>g.addKey(t,g.functionCallAccessKey(r,e.MULTISIG_CHANGE_METHODS,null))),g.addKey(o,g.functionCallAccessKey(r,e.MULTISIG_CONFIRM_METHODS,null)),g.deployContract(t)],l=u.concat(g.functionCall("new",s,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);let{stateStatus:h}=await this.checkMultisigCodeAndStateStatus(t);switch(h){case a.STATE_NOT_INITIALIZED:return await super.signAndSendTransactionWithAccount(r,l);case a.VALID_STATE:return await super.signAndSendTransactionWithAccount(r,u);case a.INVALID_STATE:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}async disableWithFAK({contractBytes:t,cleanupContractBytes:e}){let r=[];e&&(await this.deleteAllRequests().catch(t=>t),r=await this.get2faDisableCleanupActions(e));let n=await this.get2faDisableKeyConversionActions(),i=[...r,...n,g.deployContract(t)],o=await this.findAccessKey(this.accountId,i);if(o&&o.accessKey&&"FullAccess"!==o.accessKey.permission)throw new y.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,i)}async get2faDisableCleanupActions(t){let r=await this.viewState("").catch(t=>{let e=t.cause&&t.cause.name;if("NO_CONTRACT_CODE"==e)return[];throw"TOO_LARGE_CONTRACT_STATE"==e?new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):t}),n=r.map(({key:t})=>t.toString("base64"));return r.length?[g.deployContract(t),g.functionCall("clean",{keys:n},e.MULTISIG_GAS,new h.default("0"))]:[]}async get2faDisableKeyConversionActions(){let{accountId:t}=this,e=await this.getAccessKeys(),r=e.filter(({access_key:t})=>"FullAccess"!==t.permission).filter(({access_key:e})=>{let r=e.permission.FunctionCall;return r.receiver_id===t&&4===r.method_names.length&&r.method_names.includes("add_request_and_confirm")}),n=m.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[g.deleteKey(n),...r.map(({public_key:t})=>g.deleteKey(m.PublicKey.from(t))),...r.map(({public_key:t})=>g.addKey(m.PublicKey.from(t),g.fullAccessKey()))]}async disable(t,e){let r;let{stateStatus:n}=await this.checkMultisigCodeAndStateStatus();if(n!==a.VALID_STATE&&n!==a.STATE_NOT_INITIALIZED)throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");await this.deleteAllRequests().catch(t=>r=t);let i=await this.get2faDisableCleanupActions(e).catch(t=>{if("ContractHasExistingState"===t.type)throw r||t;throw t}),o=[...i,...await this.get2faDisableKeyConversionActions(),g.deployContract(t)];return console.log("disabling 2fa for",this.accountId),await this.signAndSendTransaction({receiverId:this.accountId,actions:o})}async sendCodeDefault(){let{accountId:t}=this,{requestId:e}=this.getRequest(),r=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:t,method:r,requestId:e}),e}async getCodeDefault(t){throw Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){let t=await this.get2faMethod(),e=await this.getCode(t);try{let t=await this.verifyCode(e);return t}catch(t){if(console.warn("Error validating security code:",t),t.toString().includes("invalid 2fa code provided")||t.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw t}}async verifyCodeDefault(t){let{accountId:e}=this,r=this.getRequest();if(!r)throw Error("no request pending");let{requestId:n}=r;return await this.postSignedJson("/2fa/verify",{accountId:e,securityCode:t,requestId:n})}async getRecoveryMethods(){let{accountId:t}=this;return{accountId:t,data:await this.postSignedJson("/account/recoveryMethods",{accountId:t})}}async get2faMethod(){let{data:t}=await this.getRecoveryMethods();if(t&&t.length&&(t=t.find(t=>0===t.kind.indexOf("2fa-"))),!t)return null;let{kind:e,detail:r}=t;return{kind:e,detail:r}}async signatureFor(){let{accountId:t}=this,e=await this.connection.provider.block({finality:"final"}),r=e.header.height.toString(),n=await this.connection.signer.signMessage(c.from(r),t,this.connection.networkId),i=c.from(n.signature).toString("base64");return{blockNumber:r,blockNumberSignature:i}}async postSignedJson(t,e){return await v.fetchJson(this.helperUrl+t,JSON.stringify({...e,...await this.signatureFor()}))}}e.Account2FA=_;let M=t=>m.PublicKey.from(t),E=t=>t.toString().replace("ed25519:",""),A=(t,r,n)=>t.map(t=>{let i=t.enum,{gas:o,publicKey:s,methodName:a,args:u,deposit:l,accessKey:h,code:d}=t[i],f={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:s&&E(s)||void 0,method_name:a,args:u&&c.from(u).toString("base64")||void 0,code:d&&c.from(d).toString("base64")||void 0,amount:l&&l.toString()||void 0,deposit:l&&l.toString()||"0",permission:void 0};if(h&&(n===r&&"fullAccess"!==h.permission.enum&&(f.permission={receiver_id:r,allowance:e.MULTISIG_ALLOWANCE.toString(),method_names:e.MULTISIG_CHANGE_METHODS}),"functionCall"===h.permission.enum)){let{receiverId:t,methodNames:e,allowance:r}=h.permission.functionCall;f.permission={receiver_id:t,allowance:r&&r.toString()||void 0,method_names:e}}return f})},10751:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;let n=r(58231);async function i(t){return new n.Near(t)}e.connect=i},4683:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=o(r(7139)),s(r(51082),e),s(r(10751),e),r(58010)},51082:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.WalletAccount=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;let s=o(r(99791));e.providers=s;let a=o(r(42451));e.utils=a;let u=o(r(31850));e.transactions=u;let c=o(r(56889));e.validators=c;let l=r(79628);Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return l.Account}});let h=o(r(54193));e.multisig=h;let d=o(r(39517));e.accountCreator=d;let f=r(17110);Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return f.Connection}});let p=r(31409);Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return p.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return p.InMemorySigner}});let m=r(98747);Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return m.Contract}});let g=r(31829);Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}});let y=r(58231);Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return y.Near}});let v=r(93765);Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletAccount",{enumerable:!0,get:function(){return v.WalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},17110:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;let n=r(99791),i=r(31409);class o{constructor(t,e,r,n){this.networkId=t,this.provider=e,this.signer=r,this.jsvmAccountId=n}static fromConfig(t){let e=function(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new n.JsonRpcProvider({...t.args});default:throw Error(`Unknown provider type ${t.type}`)}}(t.provider),r=function(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new i.InMemorySigner(t.keyStore);default:throw Error(`Unknown signer type ${t.type}`)}}(t.signer);return new o(t.networkId,e,r,t.jsvmAccountId)}}e.Connection=o},68889:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FUNCTION_CALL_GAS=void 0;let i=n(r(79424));e.DEFAULT_FUNCTION_CALL_GAS=new i.default("30000000000000")},98747:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;let i=n(r(79424)),o=n(r(27812)),s=r(99791),a=r(16666);function u(t,e){return({[t]:(...t)=>e(...t)})[t]}let c=t=>t&&void 0!==t.byteLength&&t.byteLength===t.length,l=t=>"[object Object]"===Object.prototype.toString.call(t);class h{constructor(t,e,r){this.account=t,this.contractId=e;let{viewMethods:n=[],changeMethods:i=[]}=r;n.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(e={},r={},...n)=>{if(n.length||!(l(e)||c(e))||!l(r))throw new a.PositionalArgsError;return this.account.viewFunction(this.contractId,t,e,r)})})}),i.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(...e)=>{if(e.length&&(e.length>3||!(l(e[0])||c(e[0]))))throw new a.PositionalArgsError;if(e.length>1||!(e[0]&&e[0].args)){let r=o.default("contract.methodName(args, gas, amount)");return r("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:t,args:e[0],gas:e[1],amount:e[2]})}return this._changeMethod({methodName:t,...e[0]})})})})}async _changeMethod({args:t,methodName:e,gas:r,amount:n,meta:o,callbackUrl:u}){!function(t){for(let e of Object.keys(t)){let r=t[e];if(r&&!i.default.isBN(r)&&isNaN(r))throw new a.ArgumentTypeError(e,"number, decimal string or BN",r)}}({gas:r,amount:n});let c=await this.account.functionCall({contractId:this.contractId,methodName:e,args:t,gas:r,attachedDeposit:n,walletMeta:o,walletCallbackUrl:u});return s.getTransactionLastResult(c)}}e.Contract=h},7139:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;let n=r(55936);Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});let i=r(28335);Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return i.InMemoryKeyStore}});let o=r(48991);Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return o.BrowserLocalStorageKeyStore}});let s=r(16389);Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},48991:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;let n=r(55936),i=r(31829);class o extends n.KeyStore{constructor(t=window.localStorage,e="near-api-js:keystore:"){super(),this.localStorage=t,this.prefix=e}async setKey(t,e,r){this.localStorage.setItem(this.storageKeyForSecretKey(t,e),r.toString())}async getKey(t,e){let r=this.localStorage.getItem(this.storageKeyForSecretKey(t,e));return r?i.KeyPair.fromString(r):null}async removeKey(t,e){this.localStorage.removeItem(this.storageKeyForSecretKey(t,e))}async clear(){for(let t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)}async getNetworks(){let t=new Set;for(let e of this.storageKeys())if(e.startsWith(this.prefix)){let r=e.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())}async getAccounts(t){let e=[];for(let r of this.storageKeys())if(r.startsWith(this.prefix)){let n=r.substring(this.prefix.length).split(":");n[1]===t&&e.push(n[0])}return e}storageKeyForSecretKey(t,e){return`${this.prefix}${e}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}e.BrowserLocalStorageKeyStore=o},28335:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;let n=r(55936),i=r(31829);class o extends n.KeyStore{constructor(){super(),this.keys={}}async setKey(t,e,r){this.keys[`${e}:${t}`]=r.toString()}async getKey(t,e){let r=this.keys[`${e}:${t}`];return r?i.KeyPair.fromString(r):null}async removeKey(t,e){delete this.keys[`${e}:${t}`]}async clear(){this.keys={}}async getNetworks(){let t=new Set;return Object.keys(this.keys).forEach(e=>{let r=e.split(":");t.add(r[1])}),Array.from(t.values())}async getAccounts(t){let e=[];return Object.keys(this.keys).forEach(r=>{let n=r.split(":");n[n.length-1]===t&&e.push(n.slice(0,n.length-1).join(":"))}),e}toString(){return"InMemoryKeyStore"}}e.InMemoryKeyStore=o},55936:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;class r{}e.KeyStore=r},16389:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;let n=r(55936);class i extends n.KeyStore{constructor(t,e={writeKeyStoreIndex:0}){super(),this.options=e,this.keyStores=t}async setKey(t,e,r){await this.keyStores[this.options.writeKeyStoreIndex].setKey(t,e,r)}async getKey(t,e){for(let r of this.keyStores){let n=await r.getKey(t,e);if(n)return n}return null}async removeKey(t,e){for(let r of this.keyStores)await r.removeKey(t,e)}async clear(){for(let t of this.keyStores)await t.clear()}async getNetworks(){let t=new Set;for(let e of this.keyStores)for(let r of(await e.getNetworks()))t.add(r);return Array.from(t)}async getAccounts(t){let e=new Set;for(let r of this.keyStores)for(let n of(await r.getAccounts(t)))e.add(n);return Array.from(e)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}e.MergeKeyStore=i},58231:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;let i=n(r(79424)),o=r(79628),s=r(17110),a=r(98747),u=r(39517);class c{constructor(t){if(this.config=t,this.connection=s.Connection.fromConfig({networkId:t.networkId,provider:{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||t.deps&&t.deps.keyStore},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){let e=new i.default(t.initialBalance?t.initialBalance:"500000000000000000000000000");this.accountCreator=new u.LocalAccountCreator(new o.Account(this.connection,t.masterAccount),e)}else t.helperUrl?this.accountCreator=new u.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}async account(t){let e=new o.Account(this.connection,t);return e}async createAccount(t,e){if(!this.accountCreator)throw Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(t,e),new o.Account(this.connection,t)}async loadContract(t,e){let r=new o.Account(this.connection,e.sender);return new a.Contract(r,t,e)}async sendTokens(t,e,r){console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead.");let n=new o.Account(this.connection,e),i=await n.sendMoney(r,t);return i.transaction_outcome.id}}e.Near=c},99791:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.JsonRpcProvider=e.Provider=void 0;let n=r(11136);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}});let i=r(23002);Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return i.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}})},23002:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.ErrorContext=e.TypedError=void 0;let s=o(r(27812)),a=r(11136),u=r(36361),c=r(16666);Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return c.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return c.ErrorContext}});let l=r(25532),h=o(r(50060)),d=r(46237),f=123;class p extends a.Provider{constructor(t){if(super(),null!=t&&"object"==typeof t)this.connection=t;else{let e=s.default("JsonRpcProvider(url?: string)");e("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:t}}}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_commit",[n.from(e).toString("base64")])}async sendTransactionAsync(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_async",[n.from(e).toString("base64")])}async txStatus(t,e){return"string"==typeof t?this.txStatusString(t,e):this.txStatusUint8Array(t,e)}async txStatusUint8Array(t,e){return this.sendJsonRpc("tx",[l.baseEncode(t),e])}async txStatusString(t,e){return this.sendJsonRpc("tx",[t,e])}async txStatusReceipts(t,e){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[l.baseEncode(t),e])}async query(...t){let e;if(1===t.length)e=await this.sendJsonRpc("query",t[0]);else{let[r,n]=t;e=await this.sendJsonRpc("query",[r,n])}if(e&&e.error)throw new c.TypedError(`Querying ${t} failed: ${e.error}.
${JSON.stringify(e,null,2)}`,d.getErrorTypeFromErrorMessage(e.error));return e}async block(t){let{finality:e}=t,{blockId:r}=t;if("object"!=typeof t){let e=s.default("JsonRpcProvider.block(blockId)");e("use `block({ blockId })` or `block({ finality })` instead"),r=t}return this.sendJsonRpc("block",{block_id:r,finality:e})}async blockChanges(t){let{finality:e}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:e})}async chunk(t){return this.sendJsonRpc("chunk",[t])}async validators(t){return this.sendJsonRpc("validators",[t])}async experimental_genesisConfig(){let t=s.default("JsonRpcProvider.experimental_protocolConfig()");return t("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(t){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",t)}async experimental_lightClientProof(t){let e=s.default("JsonRpcProvider.experimental_lightClientProof(request)");return e("use `lightClientProof` instead"),await this.lightClientProof(t)}async lightClientProof(t){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)}async accessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:n,finality:r})}async singleAccessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:n,finality:r})}async accountChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:n,finality:r})}async contractStateChanges(t,e,r=""){let{finality:n}=e,{blockId:i}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:r,block_id:i,finality:n})}async contractCodeChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:n,finality:r})}async gasPrice(t){return await this.sendJsonRpc("gas_price",[t])}async sendJsonRpc(t,e){let r=await h.default(500,12,1.5,async()=>{try{let r={method:t,params:e,id:f++,jsonrpc:"2.0"},n=await u.fetchJson(this.connection,JSON.stringify(r));if(n.error){if("object"==typeof n.error.data){if("string"==typeof n.error.data.error_message&&"string"==typeof n.error.data.error_type)throw new c.TypedError(n.error.data.error_message,n.error.data.error_type);throw d.parseRpcError(n.error.data)}{let t=`[${n.error.code}] ${n.error.message}: ${n.error.data}`;if("Timeout"===n.error.data||t.includes("Timeout error")||t.includes("query has timed out"))throw new c.TypedError(t,"TimeoutError");throw new c.TypedError(t,d.getErrorTypeFromErrorMessage(n.error.data))}}return n}catch(r){if("TimeoutError"===r.type)return i.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${t} as it has timed out`,e),null;throw r}}),{result:n}=r;if(void 0===n)throw new c.TypedError(`Exceeded 12 attempts for request to ${t}.`,"RetriesExceeded");return n}}e.JsonRpcProvider=p},11136:function(t,e,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionLastResult=e.Provider=e.IdType=e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,(n=e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})).Unknown="Unknown",n.Pending="Pending",n.Failure="Failure",(i=e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={})).NotStarted="NotStarted",i.Started="Started",i.Failure="Failure",(o=e.IdType||(e.IdType={})).Transaction="transaction",o.Receipt="receipt";class a{}e.Provider=a,e.getTransactionLastResult=function(t){if("object"==typeof t.status&&"string"==typeof t.status.SuccessValue){let e=s.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch(t){return e}}return null}},31409:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySigner=e.Signer=void 0;let i=n(r(72023)),o=r(31829),s=r(28335);class a{}e.Signer=a;class u extends a{constructor(t){super(),this.keyStore=t}static async fromKeyPair(t,e,r){let n=new s.InMemoryKeyStore;return await n.setKey(t,e,r),new u(n)}async createKey(t,e){let r=o.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(e,t,r),r.getPublicKey()}async getPublicKey(t,e){let r=await this.keyStore.getKey(e,t);return null===r?null:r.getPublicKey()}async signMessage(t,e,r){let n=new Uint8Array(i.default.sha256.array(t));if(!e)throw Error("InMemorySigner requires provided account id");let o=await this.keyStore.getKey(r,e);if(null===o)throw Error(`Key for ${e} not found in ${r}`);return o.sign(n)}toString(){return`InMemorySigner(${this.keyStore})`}}e.InMemorySigner=u},31850:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.signTransaction=e.createTransaction=e.SCHEMA=e.Action=e.SignedTransaction=e.Transaction=e.Signature=e.deleteAccount=e.deleteKey=e.addKey=e.stake=e.transfer=e.functionCall=e.stringifyJsonOrBytes=e.deployContract=e.createAccount=e.DeleteAccount=e.DeleteKey=e.AddKey=e.Stake=e.Transfer=e.FunctionCall=e.DeployContract=e.CreateAccount=e.IAction=e.functionCallAccessKey=e.fullAccessKey=e.AccessKey=e.AccessKeyPermission=e.FullAccessPermission=e.FunctionCallPermission=void 0;let o=i(r(72023)),s=r(49243),a=r(25532),u=r(31829);class c extends s.Assignable{}e.FunctionCallPermission=c;class l extends s.Assignable{}e.FullAccessPermission=l;class h extends s.Enum{}e.AccessKeyPermission=h;class d extends s.Assignable{}e.AccessKey=d,e.fullAccessKey=function(){return new d({nonce:0,permission:new h({fullAccess:new l({})})})},e.functionCallAccessKey=function(t,e,r){return new d({nonce:0,permission:new h({functionCall:new c({receiverId:t,allowance:r,methodNames:e})})})};class f extends s.Assignable{}e.IAction=f;class p extends f{}e.CreateAccount=p;class m extends f{}e.DeployContract=m;class g extends f{}e.FunctionCall=g;class y extends f{}e.Transfer=y;class v extends f{}e.Stake=v;class w extends f{}e.AddKey=w;class b extends f{}e.DeleteKey=b;class _ extends f{}function M(t){let e=void 0!==t.byteLength&&t.byteLength===t.length,r=e?t:n.from(JSON.stringify(t));return r}e.DeleteAccount=_,e.createAccount=function(){return new I({createAccount:new p({})})},e.deployContract=function(t){return new I({deployContract:new m({code:t})})},e.stringifyJsonOrBytes=M,e.functionCall=function(t,e,r,n,i=M,o=!1){return new I(o?{functionCall:new g({methodName:t,args:e,gas:r,deposit:n})}:{functionCall:new g({methodName:t,args:i(e),gas:r,deposit:n})})},e.transfer=function(t){return new I({transfer:new y({deposit:t})})},e.stake=function(t,e){return new I({stake:new v({stake:t,publicKey:e})})},e.addKey=function(t,e){return new I({addKey:new w({publicKey:t,accessKey:e})})},e.deleteKey=function(t){return new I({deleteKey:new b({publicKey:t})})},e.deleteAccount=function(t){return new I({deleteAccount:new _({beneficiaryId:t})})};class E extends s.Assignable{}e.Signature=E;class A extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,A,t)}}e.Transaction=A;class S extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,S,t)}}e.SignedTransaction=S;class I extends s.Enum{}function T(t,e,r,n,i,o){return new A({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:i,blockHash:o})}async function k(t,r,n,i){let s=a.serialize(e.SCHEMA,t),u=new Uint8Array(o.default.sha256.array(s)),c=await r.signMessage(s,n,i),l=new S({transaction:t,signature:new E({keyType:t.publicKey.keyType,data:c.signature})});return[u,l]}async function N(...t){if(t[0].constructor===A){let[e,r,n,i]=t;return k(e,r,n,i)}{let[e,r,n,i,o,s,a]=t,u=await o.getPublicKey(s,a),c=T(s,u,e,r,n,i);return k(c,o,s,a)}}e.Action=I,e.SCHEMA=new Map([[E,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",A],["signature",E]]}],[A,{kind:"struct",fields:[["signerId","string"],["publicKey",u.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[I]]]}],[u.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[d,{kind:"struct",fields:[["nonce","u64"],["permission",h]]}],[h,{kind:"enum",field:"enum",values:[["functionCall",c],["fullAccess",l]]}],[c,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[l,{kind:"struct",fields:[]}],[I,{kind:"enum",field:"enum",values:[["createAccount",p],["deployContract",m],["functionCall",g],["transfer",y],["stake",v],["addKey",w],["deleteKey",b],["deleteAccount",_]]}],[p,{kind:"struct",fields:[]}],[m,{kind:"struct",fields:[["code",["u8"]]]}],[g,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[v,{kind:"struct",fields:[["stake","u128"],["publicKey",u.PublicKey]]}],[w,{kind:"struct",fields:[["publicKey",u.PublicKey],["accessKey",d]]}],[b,{kind:"struct",fields:[["publicKey",u.PublicKey]]}],[_,{kind:"struct",fields:[["beneficiaryId","string"]]}]]),e.createTransaction=T,e.signTransaction=N},49243:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assignable=e.Enum=void 0;class r{constructor(t){if(1!==Object.keys(t).length)throw Error("Enum can only take single value");Object.keys(t).map(e=>{this[e]=t[e],this.enum=e})}}e.Enum=r;class n{constructor(t){Object.keys(t).map(e=>{this[e]=t[e]})}}e.Assignable=n},16666:function(t,e,r){"use strict";var n=r(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.ErrorContext=e.TypedError=e.ArgumentTypeError=e.PositionalArgsError=void 0;class i extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}e.PositionalArgsError=i;class o extends Error{constructor(t,e,r){super(`Expected ${e} for '${t}' argument, but got '${JSON.stringify(r)}'`)}}e.ArgumentTypeError=o;class s extends Error{constructor(t,e,r){super(t),this.type=e||"UntypedError",this.context=r}}e.TypedError=s;class a{constructor(t){this.transactionHash=t}}e.ErrorContext=a,e.logWarning=function(...t){n.env.NEAR_NO_LOGS||console.warn(...t)}},50060:function(t,e){"use strict";async function r(t,e,r,n){let i=t;for(let t=0;t<e;t++){let t=await n();if(t)return t;await function(t){return new Promise(e=>setTimeout(e,t))}(i),i*=r}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},71282:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;let i=n(r(79424));e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=new i.default("10",10).pow(new i.default(e.NEAR_NOMINATION_EXP,10));let o=[],s=new i.default(10);for(let t=0,r=new i.default(5);t<e.NEAR_NOMINATION_EXP;t++,r=r.mul(s))o[t]=r;e.formatNearAmount=function(t,r=e.NEAR_NOMINATION_EXP){let n=new i.default(t,10);if(r!==e.NEAR_NOMINATION_EXP){let t=e.NEAR_NOMINATION_EXP-r-1;t>0&&n.iadd(o[t])}t=n.toString();let s=t.substring(0,t.length-e.NEAR_NOMINATION_EXP)||"0",a=t.substring(t.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,r);return`${(function(t){let e=/(-?\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t})(s)}.${a}`.replace(/\.?0*$/,"")},e.parseNearAmount=function(t){var r;if(!t)return null;t=t.replace(/,/g,"").trim();let n=t.split("."),i=n[0],o=n[1]||"";if(n.length>2||o.length>e.NEAR_NOMINATION_EXP)throw Error(`Cannot parse '${t}' as NEAR amount`);return""===(r=(r=i+o.padEnd(e.NEAR_NOMINATION_EXP,"0")).replace(/^0+/,""))?"0":r}},42451:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;let s=o(r(31829));e.key_pair=s;let a=o(r(60822));e.serialize=a;let u=o(r(36361));e.web=u;let c=o(r(49243));e.enums=c;let l=o(r(71282));e.format=l;let h=o(r(46237));e.rpc_errors=h;let d=r(31829);Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return d.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return d.KeyPairEd25519}});let f=r(16666);Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return f.logWarning}})},31829:function(t,e,r){"use strict";var n,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.KeyType=void 0;let s=o(r(50780)),a=r(60822),u=r(49243);(n=i=e.KeyType||(e.KeyType={}))[n.ED25519=0]="ED25519";class c extends u.Assignable{static from(t){return"string"==typeof t?c.fromString(t):t}static fromString(t){let e=t.split(":");if(1===e.length)return new c({keyType:i.ED25519,data:a.base_decode(e[0])});if(2===e.length)return new c({keyType:function(t){if("ed25519"===t.toLowerCase())return i.ED25519;throw Error(`Unknown key type ${t}`)}(e[0]),data:a.base_decode(e[1])});throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${function(t){if(t===i.ED25519)return"ed25519";throw Error(`Unknown key type ${t}`)}(this.keyType)}:${a.base_encode(this.data)}`}verify(t,e){if(this.keyType===i.ED25519)return s.default.sign.detached.verify(t,e,this.data);throw Error(`Unknown key type ${this.keyType}`)}}e.PublicKey=c;class l{static fromRandom(t){if("ED25519"===t.toUpperCase())return h.fromRandom();throw Error(`Unknown curve ${t}`)}static fromString(t){let e=t.split(":");if(1===e.length)return new h(e[0]);if(2===e.length){if("ED25519"===e[0].toUpperCase())return new h(e[1]);throw Error(`Unknown curve: ${e[0]}`)}throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}}e.KeyPair=l;class h extends l{constructor(t){super();let e=s.default.sign.keyPair.fromSecretKey(a.base_decode(t));this.publicKey=new c({keyType:i.ED25519,data:e.publicKey}),this.secretKey=t}static fromRandom(){let t=s.default.sign.keyPair();return new h(a.base_encode(t.secretKey))}sign(t){let e=s.default.sign.detached(t,a.base_decode(this.secretKey));return{signature:e,publicKey:this.publicKey}}verify(t,e){return this.publicKey.verify(t,e)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}e.KeyPairEd25519=h},46237:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=e.ServerError=void 0;let i=n(r(466)),o=n(r(50657)),s=n(r(74106)),a=r(51082),u=r(16666),c={formatNear:()=>(t,e)=>a.utils.format.formatNearAmount(e(t))};class l extends u.TypedError{}e.ServerError=l;class h extends l{}function d(t){let e={},r=function t(e,r,n,i){let o,s,a;for(let t in r){var u;if(u=e[t],"[object String]"===Object.prototype.toString.call(u))return e[t];if(p(e[t]))o=e[t],s=r[t],a=t;else{if(!(p(e.kind)&&p(e.kind[t])))continue;o=e.kind[t],s=r[t],a=t}}if(!o||!s)return n.kind=e,i;for(let t of Object.keys(s.props))n[t]=o[t];return t(o,r,n,a)}(t,o.default.schema,e,""),n=new l(f(r,e),r);return Object.assign(n,e),n}function f(t,e){return"string"==typeof s.default[t]?i.default.render(s.default[t],{...e,...c}):JSON.stringify(e)}function p(t){return"[object Object]"===Object.prototype.toString.call(t)}e.parseRpcError=d,e.parseResultError=function(t){let e=d(t.status.Failure),r=new h;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r},e.formatError=f,e.getErrorTypeFromErrorMessage=function(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}},60822:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25532);Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},36361:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;let i=n(r(25355)),o=n(r(50060)),s=r(99791),a=r(16666);async function u(t,e){let r={url:null};"string"==typeof t?r.url=t:r=t;let n=await o.default(1e3,10,1.5,async()=>{try{let t=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!t.ok){if(503===t.status)return a.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw i.default(t.status,await t.text())}return t}catch(t){if(t.toString().includes("FetchError")||t.toString().includes("Failed to fetch"))return a.logWarning(`Retrying HTTP request for ${r.url} because of error: ${t}`),null;throw t}});if(!n)throw new s.TypedError(`Exceeded 10 attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}e.fetchJson=u},56889:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.diffEpochValidators=e.findSeatPrice=void 0;let i=n(r(79424)),o=n(r(27812));e.findSeatPrice=function(t,e,r,n){if(n&&n<49)return function(t,e){let r=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),n=new i.default(e),o=r.reduce((t,e)=>t.add(e));if(o.lt(n))throw Error("Stakes are below seats");let s=new i.default(1),a=o.add(new i.default(1));for(;!s.eq(a.sub(new i.default(1)));){let t=s.add(a).div(new i.default(2)),e=!1,o=new i.default(0);for(let i=0;i<r.length;++i)if((o=o.add(r[i].div(t))).gte(n)){s=t,e=!0;break}e||(a=t)}return s}(t,e);if(!r){let t=o.default("findSeatPrice(validators, maxNumberOfSeats)");t("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]}return function(t,e,r){if(2!=r.length)throw Error("minimumStakeRatio should have 2 elements");let n=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),o=n.reduce((t,e)=>t.add(e));return t.length<e?o.mul(new i.default(r[0])).div(new i.default(r[1])):n[0].add(new i.default(1))}(t,e,r)},e.diffEpochValidators=function(t,e){let r=new Map;t.forEach(t=>r.set(t.account_id,t));let n=new Set(e.map(t=>t.account_id));return{newValidators:e.filter(t=>!r.has(t.account_id)),removedValidators:t.filter(t=>!n.has(t.account_id)),changedValidators:e.filter(t=>r.has(t.account_id)&&r.get(t.account_id).stake!=t.stake).map(t=>({current:r.get(t.account_id),next:t}))}}},93765:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectedWalletAccount=e.WalletAccount=e.WalletConnection=void 0;let o=i(r(27812)),s=r(79628),a=r(31850),u=r(42451),c=r(25532),l=r(25532),h="pending_key";class d{constructor(t,e){this._near=t;let r=e+"_wallet_auth_key",n=JSON.parse(window.localStorage.getItem(r));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,e=e||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=n||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(t={},e,r,n){let i;if("string"==typeof t){let e=o.default("requestSignIn(contractId, title)");e("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),i={contractId:t,successUrl:r,failureUrl:n}}else i=t;let s=new URL(window.location.href),a=new URL(this._walletBaseUrl+"/login/");if(a.searchParams.set("success_url",i.successUrl||s.href),a.searchParams.set("failure_url",i.failureUrl||s.href),i.contractId){let t=await this._near.account(i.contractId);await t.state(),a.searchParams.set("contract_id",i.contractId);let e=u.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",e.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,h+e.getPublicKey(),e)}i.methodNames&&i.methodNames.forEach(t=>{a.searchParams.append("methodNames",t)}),window.location.assign(a.toString())}async requestSignTransactions(...t){if(Array.isArray(t[0])){let e=o.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)");return e("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:t[0],callbackUrl:t[1],meta:t[2]})}return this._requestSignTransactions(t[0])}async _requestSignTransactions({transactions:t,meta:e,callbackUrl:r}){let i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",t.map(t=>l.serialize(a.SCHEMA,t)).map(t=>n.from(t).toString("base64")).join(",")),o.searchParams.set("callbackUrl",r||i.href),e&&o.searchParams.set("meta",e),window.location.assign(o.toString())}async _completeSignInWithAccessKey(){let t=new URL(window.location.href),e=t.searchParams.get("public_key")||"",r=(t.searchParams.get("all_keys")||"").split(","),n=t.searchParams.get("account_id")||"";n&&(this._authData={accountId:n,allKeys:r},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),e&&await this._moveKeyFromTempToPermanent(n,e)),t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())}async _moveKeyFromTempToPermanent(t,e){let r=await this._keyStore.getKey(this._networkId,h+e);await this._keyStore.setKey(this._networkId,t,r),await this._keyStore.removeKey(this._networkId,h+e)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new f(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}e.WalletConnection=d,e.WalletAccount=d;class f extends s.Account{constructor(t,e,r){super(e,r),this.walletConnection=t}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:e,walletMeta:r,walletCallbackUrl:n=window.location.href}){let i=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId),o=await this.accessKeyForTransaction(t,e,i);if(!o)throw Error(`Cannot find matching key for transaction sent to ${t}`);if(i&&i.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:t,actions:e})}catch(r){if("NotEnoughAllowance"===r.type)o=await this.accessKeyForTransaction(t,e);else throw r}let s=await this.connection.provider.block({finality:"final"}),l=c.baseDecode(s.header.hash),h=u.PublicKey.from(o.public_key),d=o.access_key.nonce+1,f=a.createTransaction(this.accountId,h,t,d,e,l);return await this.walletConnection.requestSignTransactions({transactions:[f],meta:r,callbackUrl:n}),new Promise((t,e)=>{setTimeout(()=>{e(Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(t,e,r){let{access_key:{permission:n}}=t;if("FullAccess"===n)return!0;if(n.FunctionCall){let{receiver_id:t,method_names:i}=n.FunctionCall;if(t===this.accountId&&i.includes("add_request_and_confirm"))return!0;if(t===e){if(1!==r.length)return!1;let[{functionCall:t}]=r;return t&&(!t.deposit||"0"===t.deposit.toString())&&(0===i.length||i.includes(t.methodName))}}return!1}async accessKeyForTransaction(t,e,r){let n=await this.getAccessKeys();if(r){let i=n.find(t=>t.public_key.toString()===r.toString());if(i&&await this.accessKeyMatchesTransaction(i,t,e))return i}let i=this.walletConnection._authData.allKeys;for(let r of n)if(-1!==i.indexOf(r.public_key)&&await this.accessKeyMatchesTransaction(r,t,e))return r;return null}}e.ConnectedWalletAccount=f},79424:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(78967).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(t);r=(h=h.idivn(l)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},h&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=t.allocUnsafe?t.allocUnsafe(o):new t(o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e){this.x=t,this.y=e}Math.imul||(g=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?m(this,t,e):y(this,t,e)},v.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},v.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r._strip(),i._strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=67108864%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(_,b),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(M,b),i(E,b),i(A,b),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(w[t])return w[t];if("k256"===t)e=new _;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else if("p25519"===t)e=new A;else throw Error("Unknown prime "+t);return w[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,S),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},30111:function(t,e,r){"use strict";/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i=r(73085);function o(t){if("number"==typeof t){if(!o[t])throw Error("invalid status code: "+t);return t}if("string"!=typeof t)throw TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!o[e])throw Error("invalid status code: "+e);return e}if(!(e=o[t.toLowerCase()]))throw Error('invalid status message: "'+t+'"');return e}t.exports=o,o.STATUS_CODES=i,o.codes=(n=[],Object.keys(i).forEach(function(t){var e=i[t],r=Number(t);o[r]=e,o[e]=r,o[e.toLowerCase()]=r,n.push(r)}),n),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},93887:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let i=n(r(13550)),o=r(4997),s=r(16247),a=r(58180);async function u({erc20Address:t,options:e}){var r,n;e=null!=e?e:{};let u=(0,s.getBridgeParams)(),c=null!==(r=e.nep141Factory)&&void 0!==r?r:u.nep141Factory,l=null!==(n=e.nearAccount)&&void 0!==n?n:(0,s.getNearWallet)(),h=l instanceof o.Account,d="undefined"!=typeof window&&(h||"browser"===l.type);return d&&a.urlParams.set({bridging:t}),h?await l.functionCall({contractId:c,methodName:"deploy_bridge_token",args:{address:t.replace("0x","")},gas:new i.default("60"+"0".repeat(12)),attachedDeposit:new i.default("302"+"0".repeat(22))}):await l.signAndSendTransaction({receiverId:c,actions:[{type:"FunctionCall",params:{methodName:"deploy_bridge_token",args:{address:t.replace("0x","")},gas:"60"+"0".repeat(12),deposit:"302"+"0".repeat(22)}}]})}e.default=u},28542:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(16247);e.default=function({erc20Address:t,options:e}){var r;e=null!=e?e:{};let i=(0,n.getBridgeParams)(),o=null!==(r=e.nep141Factory)&&void 0!==r?r:i.nep141Factory;return t.replace("0x","").toLowerCase()+"."+o}},27520:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let o=r(16247),s=i(r(28542));async function a({erc20Address:t,owner:e,options:r}){var i,a,u;r=null!=r?r:{};let c=(0,s.default)({erc20Address:t}),l=null!==(u=null!==(i=r.nearProvider)&&void 0!==i?i:null===(a=r.nearAccount)||void 0===a?void 0:a.connection.provider)&&void 0!==u?u:(0,o.getNearProvider)();try{let t=await l.query({request_type:"call_function",account_id:c,method_name:"ft_balance_of",args_base64:n.from(JSON.stringify({account_id:e})).toString("base64"),finality:"optimistic"});return JSON.parse(n.from(t.result).toString())}catch(t){if(console.warn(t),t.message.includes("does not exist while viewing"))return null;throw t}}e.default=a},62924:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});let i=n(r(28542)),o=r(67970);async function s(t){let e=await (0,o.getSymbol)({erc20Address:t});return"n"+e}async function a({erc20Address:t}){let e=(0,i.default)({erc20Address:t}),r=await s(t);return{address:e,decimals:null,icon:null,name:r}}e.default=a},46722:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.findAllTransfers=e.findAllTransactions=e.recover=e.sendToEthereum=e.deploy=e.getMetadata=e.getBalance=e.getAddress=void 0;var i=r(28542);Object.defineProperty(e,"getAddress",{enumerable:!0,get:function(){return n(i).default}});var o=r(27520);Object.defineProperty(e,"getBalance",{enumerable:!0,get:function(){return n(o).default}});var s=r(62924);Object.defineProperty(e,"getMetadata",{enumerable:!0,get:function(){return n(s).default}});var a=r(93887);Object.defineProperty(e,"deploy",{enumerable:!0,get:function(){return n(a).default}});var u=r(61908);Object.defineProperty(e,"sendToEthereum",{enumerable:!0,get:function(){return u.initiate}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return u.recover}}),Object.defineProperty(e,"findAllTransactions",{enumerable:!0,get:function(){return u.findAllTransactions}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return u.findAllTransfers}})},61908:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkUnlock=e.unlock=e.proofAlreadyUsed=e.checkSync=e.checkFinality=e.checkWithdraw=e.withdraw=e.initiate=e.parseWithdrawReceipt=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=a(r(77191)),l=r(20548),h=r(4997),d=r(10697),f=s(r(22241)),p=r(57206),m=r(93694),g=r(58180),y=r(41249),v=r(16247),w=a(r(28542)),b=r(67970);e.SOURCE_NETWORK="near",e.DESTINATION_NETWORK="ethereum",e.TRANSFER_TYPE="@near-eth/nep141-erc20/bridged-nep141/sendToEthereum";let _="withdraw-bridged-nep141-to-erc20",M="await-finality-bridged-nep141-to-erc20",E="sync-bridged-nep141-to-erc20",A="unlock-bridged-nep141-to-erc20",S=[_,M,E,A];class I extends Error{}let T={completedStep:null,errors:[],status:f.IN_PROGRESS,type:e.TRANSFER_TYPE,finalityBlockHeights:[],nearOnEthClientBlockHeight:null,unlockHashes:[],unlockReceipts:[],withdrawReceiptBlockHeights:[],withdrawReceiptIds:[],withdrawHashes:[]};async function k(t){switch(t.completedStep){case null:try{return await L(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.clear("withdrawing"),t}case M:return await K(t);case E:return await j(t);default:throw Error(`Don't know how to act on transfer: ${JSON.stringify(t)}`)}}async function N(t){switch(t.completedStep){case null:return await B(t);case _:return await D(t);case M:return await K(t);case E:return await U(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function x({fromBlock:t,toBlock:e,sender:r,erc20Address:n,callIndexer:i,options:o}){var s;o=null!=o?o:{};let a=null!==(s=o.nep141Address)&&void 0!==s?s:(0,w.default)({erc20Address:n,options:o}),u=await i((0,g.buildIndexerTxQuery)({fromBlock:t,toBlock:e,predecessorAccountId:r,receiverAccountId:a}));return u.filter(t=>"withdraw"===t.args.method_name).map(t=>t.originated_from_transaction_hash)}async function P({fromBlock:t,toBlock:e,sender:r,erc20Address:n,callIndexer:i,options:o}){let s=await x({fromBlock:t,toBlock:e,sender:r,erc20Address:n,callIndexer:i,options:o}),a=await Promise.all(s.map(async t=>{try{return await O(t,r,o)}catch(e){return console.log("Failed to recover transfer (transaction failed ?): ",t,e),null}}));return a.filter(t=>null!==t)}async function O(t,e="todo",r){var i,o,s,a,u;r=null!=r?r:{};let c=null!==(s=null!==(i=r.nearProvider)&&void 0!==i?i:null===(o=r.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,v.getNearProvider)(),l=h.utils.serialize.base_decode(t),f=await c.txStatus(l,e);if(e=f.transaction.signer_id,f.status.Unknown)throw Error(`Withdraw transaction pending: ${t}`);if(f.status.Failure)throw Error(`Withdraw transaction failed: ${t}`);let p=f.status.SuccessValue;if(!p)throw Error(`Invalid withdrawTx successValue: '${p}'
      Full withdrawal transaction: ${JSON.stringify(f)}`);class m{constructor(t){Object.assign(this,t)}}let g=new Map([[m,{kind:"struct",fields:[["flag","u8"],["amount","u128"],["token",[20]],["recipient",[20]]]}]]),y=(0,d.deserialize)(g,m,n.from(p,"base64")),M=y.amount.toString(),E="0x"+n.from(y.recipient).toString("hex"),A="0x"+n.from(y.token).toString("hex"),S=null!==(a=r.symbol)&&void 0!==a?a:await (0,b.getSymbol)({erc20Address:A,options:r}),I=(0,w.default)({erc20Address:A,options:r}),k=null!==(u=r.decimals)&&void 0!==u?u:await (0,b.getDecimals)({erc20Address:A,options:r}),N=await C(f,e,I,c),x=await c.block({blockId:f.transaction_outcome.block_hash}),P={...T,id:Math.random().toString().slice(2),startTime:new Date(x.header.timestamp/1e6).toISOString(),amount:M,completedStep:_,destinationTokenName:S,recipient:E,sender:e,sourceToken:I,sourceTokenName:"n"+S,symbol:S,decimals:k,withdrawHashes:[t],withdrawReceiptBlockHeights:[N.blockHeight],withdrawReceiptIds:[N.id]};return await K(P,r)}async function C(t,e,r,n){let i;let o=t.transaction_outcome.outcome.receipt_ids;if(1!==o.length)throw new I(`Withdrawal expects only one receipt, got ${o.length}.
      Full withdrawal transaction: ${JSON.stringify(t)}`);let s=o[0],a=t.receipts_outcome.find(t=>t.id===s).outcome,u=a.status.SuccessReceiptId,c=a.executor_id;switch(c){case e:{let e=t.receipts_outcome.find(t=>t.id===u).outcome;i=e.status.SuccessReceiptId;let n=e.executor_id;if(n!==r)throw new I(`Unexpected receipt outcome format in 2fa transaction.
          Expected sourceToken '${r}', got '${n}'
          Full withdrawal transaction: ${JSON.stringify(t)}`);break}case r:i=u;break;default:throw new I(`Unexpected receipt outcome format.
        Full withdrawal transaction: ${JSON.stringify(t)}`)}let l=t.receipts_outcome.find(t=>t.id===i).block_hash,h=await n.block({blockId:l}),d=Number(h.header.height);return{id:i,blockHeight:d}}async function R({erc20Address:t,amount:e,recipient:r,options:n}){var i,o,s,a;n=null!=n?n:{};let u=null!==(i=n.symbol)&&void 0!==i?i:await (0,b.getSymbol)({erc20Address:t,options:n}),c=null!==(o=n.nep141Address)&&void 0!==o?o:(0,w.default)({erc20Address:t,options:n}),l=null!==(s=n.decimals)&&void 0!==s?s:await (0,b.getDecimals)({erc20Address:t,options:n}),h=null!==(a=n.sender)&&void 0!==a?a:await (0,v.getNearAccountId)(),d={...T,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:e.toString(),destinationTokenName:u,recipient:r,sender:h,sourceToken:c,sourceTokenName:"n"+u,symbol:u,decimals:l};try{d=await L(d,n),"undefined"!=typeof window&&(d=await (0,m.track)(d))}catch(t){throw t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&g.urlParams.get("withdrawing")&&(await (0,m.untrack)(g.urlParams.get("withdrawing")),g.urlParams.clear("withdrawing")),t}return d}async function L(t,e){var r;let n;e=null!=e?e:{};let i=null!==(r=e.nearAccount)&&void 0!==r?r:(0,v.getNearWallet)(),o=i instanceof h.Account,s="undefined"!=typeof window&&(o||"browser"===i.type);return s&&g.urlParams.set({withdrawing:t.id}),s&&(t=await (0,m.track)({...t,status:f.IN_PROGRESS})),n=o?await i.functionCall({contractId:t.sourceToken,methodName:"withdraw",args:{amount:String(t.amount),recipient:t.recipient.replace("0x","")},gas:new u.default("100"+"0".repeat(12)),attachedDeposit:new u.default("1")}):await i.signAndSendTransaction({receiverId:t.sourceToken,actions:[{type:"FunctionCall",params:{methodName:"withdraw",args:{amount:String(t.amount),recipient:t.recipient.replace("0x","")},gas:"100"+"0".repeat(12),deposit:"1"}}]}),{...t,status:f.IN_PROGRESS,withdrawHashes:[...t.withdrawHashes,n.transaction.hash]}}async function B(t,e){var r,n,i;let o,s,a;if(e=null!=e?e:{},0===t.withdrawHashes.length){let e=g.urlParams.get("withdrawing"),r=g.urlParams.get("transactionHashes"),n=g.urlParams.get("errorCode");if(s=["withdrawing","transactionHashes","errorCode","errorMessage"],!e){let e=`A transaction was initiated but could not be verified.
        Click 'Rescan the blockchain' to check if a transfer was created.`;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:f.FAILED,errors:[...t.errors,r]}}if(n){g.urlParams.clear(...s);let e="Error from wallet: "+n;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(!r)return console.log("Withdraw tx hash not received: pending redirect or wallet error"),t;if(r.includes(",")){g.urlParams.clear(...s);let e="Error from wallet: expected single txHash, got: "+r;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}o=r}else o=H(t.withdrawHashes);let u=h.utils.serialize.base_decode(o),c=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,v.getNearProvider)(),l=await c.txStatus(u,t.sender);if(l.status.Unknown)return t;if(l.status.Failure){s&&g.urlParams.clear(...s);let e=`NEAR transaction failed: ${o}`;return console.error(e),{...t,errors:[...t.errors,e],status:f.FAILED,withdrawHashes:[...t.withdrawHashes,o]}}try{a=await C(l,t.sender,t.sourceToken,c)}catch(e){if(e instanceof I)return s&&g.urlParams.clear(...s),{...t,errors:[...t.errors,e.message],status:f.FAILED,withdrawHashes:[...t.withdrawHashes,o]};throw e}let d=await c.block({blockId:l.transaction_outcome.block_hash}),p=new Date(d.header.timestamp/1e6).toISOString();return s&&g.urlParams.clear(...s),{...t,status:f.IN_PROGRESS,completedStep:_,startTime:p,withdrawReceiptIds:[...t.withdrawReceiptIds,a.id],withdrawReceiptBlockHeights:[...t.withdrawReceiptBlockHeights,a.blockHeight],withdrawHashes:[...t.withdrawHashes,o]}}async function D(t,e){var r,n,i;e=null!=e?e:{};let o=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,v.getNearProvider)(),s=H(t.withdrawReceiptBlockHeights),a=Number((await o.block({finality:"final"})).header.height);return a<=s?t:{...t,completedStep:M,status:f.IN_PROGRESS,finalityBlockHeights:[...t.finalityBlockHeights,a]}}async function K(t,e){var r,n,i,o,s,a,u,c,l,h,d,p,m,y,w;let b;if("string"==typeof t)return await O(t,"todo",e);e=null!=e?e:{};let _=(0,v.getBridgeParams)(),M=null!==(r=e.provider)&&void 0!==r?r:(0,v.getEthProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(n=e.sendToEthereumSyncInterval)&&void 0!==n?n:_.sendToEthereumSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let S=(await M.getNetwork()).chainId,I=null!==(i=e.ethChainId)&&void 0!==i?i:_.ethChainId;if(S!==I)throw Error(`Wrong eth network for checkSync, expected: ${I}, got: ${S}`);let T=H(t.withdrawReceiptBlockHeights),k=await (0,g.nearOnEthSyncHeight)(M,null!==(o=e.ethClientAddress)&&void 0!==o?o:_.ethClientAddress,null!==(s=e.ethClientAbi)&&void 0!==s?s:_.ethClientAbi),N=null!==(c=null!==(a=e.nearProvider)&&void 0!==a?a:null===(u=e.nearAccount)||void 0===u?void 0:u.connection.provider)&&void 0!==c?c:(0,v.getNearProvider)();if(!(k>T))return{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),nearOnEthClientBlockHeight:k,status:f.IN_PROGRESS};if(b=await (0,g.findNearProof)(H(t.withdrawReceiptIds),null!==(l=e.nep141Factory)&&void 0!==l?l:_.nep141Factory,k,N,M,null!==(h=e.ethClientAddress)&&void 0!==h?h:_.ethClientAddress,null!==(d=e.ethClientAbi)&&void 0!==d?d:_.ethClientAbi),await F(M,b,null!==(p=e.erc20LockerAddress)&&void 0!==p?p:_.erc20LockerAddress,null!==(m=e.erc20LockerAbi)&&void 0!==m?m:_.erc20LockerAbi)){try{let{transactions:r,block:n}=await (0,g.findFinalizationTxOnEthereum)({usedProofPosition:"3",proof:b,connectorAddress:null!==(y=e.erc20LockerAddress)&&void 0!==y?y:_.erc20LockerAddress,connectorAbi:null!==(w=e.erc20LockerAbi)&&void 0!==w?w:_.erc20LockerAbi,finalizationEvent:"Unlocked",recipient:t.recipient,amount:t.amount,provider:M});t={...t,finishTime:new Date(1e3*n.timestamp).toISOString(),unlockHashes:[...t.unlockHashes,...r]}}catch(t){console.error(t)}return{...t,completedStep:A,nearOnEthClientBlockHeight:k,status:f.COMPLETE,errors:[...t.errors,"Unlock proof already used."]}}return{...t,completedStep:E,nearOnEthClientBlockHeight:k,status:f.ACTION_NEEDED,proof:b}}async function F(t,e,r,n){let i=new l.ethers.Contract(r,n,t),o=await i.usedProofs_("0x"+c.default.decode(e.outcome_proof.outcome.receipt_ids[0]).toString("hex"));return o}async function j(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,v.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,v.getSignerProvider)(),c=(await u.getNetwork()).chainId,h=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(c!==h)throw Error(`Wrong eth network for checkSync, expected: ${h}, got: ${c}`);if((t=await K(t,e)).status!==f.ACTION_NEEDED)return t;let d=t.proof,p=(0,g.borshifyOutcomeProof)(d),m=new l.ethers.Contract(null!==(i=e.erc20LockerAddress)&&void 0!==i?i:a.erc20LockerAddress,null!==(o=e.erc20LockerAbi)&&void 0!==o?o:a.erc20LockerAbi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),y=await u.getBlockNumber()-20,w=await m.unlockToken(p,t.nearOnEthClientBlockHeight);return{...t,status:f.IN_PROGRESS,ethCache:{from:w.from,to:w.to,safeReorgHeight:y,data:w.data,nonce:w.nonce},unlockHashes:[...t.unlockHashes,w.hash]}}async function U(t,e){var r,n;e=null!=e?e:{};let i=(0,v.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,v.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkUnlock, expected: ${a}, got: ${s}`);let u=H(t.unlockHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,y.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof y.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:f.FAILED,errors:[...t.errors,e],unlockReceipts:[...t.unlockReceipts,c]}}c.transactionHash!==u&&(t={...t,unlockHashes:[...t.unlockHashes,c.transactionHash]});let l=await o.getBlock(c.blockNumber);return{...t,status:f.COMPLETE,completedStep:A,finishTime:new Date(1e3*l.timestamp).toISOString(),unlockReceipts:[...t.unlockReceipts,c]}}e.i18n={en_US:{steps:t=>(0,p.stepsFor)(t,S,{[_]:`Start transfer of ${(0,v.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} from NEAR`,[M]:"Confirm in NEAR",[E]:"Confirm in Ethereum. This can take around 16 hours. Feel free to return to this window later, to complete the final step of the transfer.",[A]:`Deposit ${(0,v.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in Ethereum`}),statusMessage:t=>{if(t.status===f.FAILED)return"Failed";if(t.status===f.ACTION_NEEDED)switch(t.completedStep){case null:return"Ready to transfer from NEAR";case E:return"Ready to deposit in Ethereum";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:return"Transferring from NEAR";case _:case M:return"Confirming transfer";case E:return"Depositing in Ethereum";case A:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===f.FAILED)return"Retry";if(t.status!==f.ACTION_NEEDED)return null;switch(t.completedStep){case null:return"Transfer";case E:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=k,e.checkStatus=N,e.findAllTransactions=x,e.findAllTransfers=P,e.recover=O,e.parseWithdrawReceipt=C,e.initiate=R,e.withdraw=L,e.checkWithdraw=B,e.checkFinality=D,e.checkSync=K,e.proofAlreadyUsed=F,e.unlock=j,e.checkUnlock=U;let H=t=>t[t.length-1]},57275:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.naturalErc20=e.bridgedNep141=void 0,e.bridgedNep141=o(r(46722)),e.naturalErc20=o(r(8424))},66420:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(16247),i=r(58180);async function o({erc20Address:t,owner:e,spender:r,options:o}){var s,a;o=null!=o?o:{};let u=(0,n.getBridgeParams)(),c=null!==(s=o.provider)&&void 0!==s?s:(0,n.getEthProvider)(),l=null!==(a=o.erc20Abi)&&void 0!==a?a:u.erc20Abi,h=await i.erc20.getAllowance({erc20Address:t,owner:e,spender:r,provider:c,erc20Abi:l});return h}e.default=o},93398:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(16247),i=r(58180);async function o({erc20Address:t,owner:e,options:r}){var o,s;r=null!=r?r:{};let a=(0,n.getBridgeParams)(),u=null!==(o=r.provider)&&void 0!==o?o:(0,n.getEthProvider)(),c=null!==(s=r.erc20Abi)&&void 0!==s?s:a.erc20Abi,l=await i.erc20.getBalance({erc20Address:t,owner:e,provider:u,erc20Abi:c});return l}e.default=o},67970:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSymbol=e.getDecimals=void 0;let i=r(20548),o=r(16247),s=r(58180),a=n(r(28542)),u={};async function c({erc20Address:t,options:e}){var r,n;let i;if(void 0!==u[t])return u[t];e=null!=e?e:{};let a=(0,o.getBridgeParams)(),c=null!==(r=e.provider)&&void 0!==r?r:(0,o.getEthProvider)(),l=null!==(n=e.erc20Abi)&&void 0!==n?n:a.erc20Abi;try{i=await s.erc20.getDecimals({erc20Address:t,provider:c,erc20Abi:l}),u[t]=i}catch{console.log(`Failed to read token decimals for: ${t}`),i=0}return i}e.getDecimals=c;let l={};async function h({erc20Address:t,options:e}){var r,n,u,c;let h;if(void 0!==l[t])return l[t];e=null!=e?e:{};try{let i=null!==(u=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==u?u:(0,o.getNearProvider)(),l=null!==(c=e.nep141Address)&&void 0!==c?c:(0,a.default)({erc20Address:t,options:e}),d=await s.nep141.getMetadata({nep141Address:l,nearProvider:i});h=d.icon}catch(t){console.warn(t)}if(!h){let e=`https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${i.ethers.utils.getAddress(t)}/logo.png`;h=await new Promise(t=>{let r=new Image;r.onload=()=>t(e),r.onerror=()=>t(null),r.src=e})}return l[t]=h,h}let d={};async function f({erc20Address:t,options:e}){var r,n;let i;if(d[t])return d[t];e=null!=e?e:{};let a=(0,o.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,o.getEthProvider)(),c=null!==(n=e.erc20Abi)&&void 0!==n?n:a.erc20Abi;try{i=await s.erc20.getSymbol({erc20Address:t,provider:u,erc20Abi:c}),d[t]=i}catch{console.log(`Failed to read token symbol for: ${t}`),i="0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2"===t.toLowerCase()?"MKR":t.slice(0,5)+"…"}return i}async function p({erc20Address:t,options:e}){let[r,n,i]=await Promise.all([c({erc20Address:t,options:e}),h({erc20Address:t,options:e}),f({erc20Address:t,options:e})]);return{erc20Address:t,decimals:r,icon:n,symbol:i}}e.getSymbol=f,e.default=p},8424:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.findAllTransfers=e.findAllTransactions=e.recover=e.checkApprove=e.approve=e.sendToNear=e.getBalance=e.getAllowance=e.getMetadata=void 0;var i=r(67970);Object.defineProperty(e,"getMetadata",{enumerable:!0,get:function(){return n(i).default}});var o=r(66420);Object.defineProperty(e,"getAllowance",{enumerable:!0,get:function(){return n(o).default}});var s=r(93398);Object.defineProperty(e,"getBalance",{enumerable:!0,get:function(){return n(s).default}});var a=r(52622);Object.defineProperty(e,"sendToNear",{enumerable:!0,get:function(){return a.initiate}}),Object.defineProperty(e,"approve",{enumerable:!0,get:function(){return a.approve}}),Object.defineProperty(e,"checkApprove",{enumerable:!0,get:function(){return a.checkApprove}}),Object.defineProperty(e,"recover",{enumerable:!0,get:function(){return a.recover}}),Object.defineProperty(e,"findAllTransactions",{enumerable:!0,get:function(){return a.findAllTransactions}}),Object.defineProperty(e,"findAllTransfers",{enumerable:!0,get:function(){return a.findAllTransfers}})},52622:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkMint=e.mint=e.checkSync=e.checkLock=e.lock=e.checkApprove=e.approve=e.initiate=e.recover=e.findAllTransfers=e.findAllTransactions=e.checkStatus=e.act=e.i18n=e.TRANSFER_TYPE=e.DESTINATION_NETWORK=e.SOURCE_NETWORK=void 0;let u=a(r(13550)),c=r(20548),l=r(93694),h=r(4997),d=r(57206),f=s(r(22241)),p=r(16247),m=r(58180),g=r(41249),y=r(67970);e.SOURCE_NETWORK="ethereum",e.DESTINATION_NETWORK="near",e.TRANSFER_TYPE="@near-eth/nep141-erc20/natural-erc20/sendToNear";let v="approve-natural-erc20-to-nep141",w="lock-natural-erc20-to-nep141",b="sync-natural-erc20-to-nep141",_="mint-natural-erc20-to-nep141",M=[w,b,_],E={completedStep:null,errors:[],status:f.ACTION_NEEDED,type:e.TRANSFER_TYPE,completedConfirmations:0,lockHashes:[],lockReceipts:[],neededConfirmations:20,mintHashes:[]};async function A(t){switch(t.completedStep){case null:case v:return await O(t);case w:return await R(t);case b:try{return await L(t)}catch(t){throw console.error(t),t.message.includes("Failed to redirect to sign transaction")&&await new Promise(t=>setTimeout(t,1e4)),"undefined"!=typeof window&&m.urlParams.clear("minting"),t}default:throw Error(`Don't know how to act on transfer: ${t.id}`)}}async function S(t){switch(t.completedStep){case null:case v:return await C(t);case w:return await R(t);case b:return await B(t);default:throw Error(`Don't know how to checkStatus for transfer ${t.id}`)}}async function I({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}){var o,s,a;i=null!=i?i:{};let u=(0,p.getBridgeParams)(),l=null!==(o=i.provider)&&void 0!==o?o:(0,p.getEthProvider)(),h=new c.ethers.Contract(null!==(s=i.erc20LockerAddress)&&void 0!==s?s:u.erc20LockerAddress,null!==(a=i.erc20LockerAbi)&&void 0!==a?a:u.erc20LockerAbi,l),d=h.filters.Locked(n,r),f=await h.queryFilter(d,t,e);return f.filter(t=>!t.args.accountId.startsWith("aurora:")).map(t=>t.transactionHash)}async function T({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}){let o=await I({fromBlock:t,toBlock:e,sender:r,erc20Address:n,options:i}),s=await Promise.all(o.map(async t=>await k(t,i)));return s}async function k(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,p.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),l=await u.getTransactionReceipt(t),h=new c.ethers.Contract(null!==(n=e.erc20LockerAddress)&&void 0!==n?n:a.erc20LockerAddress,null!==(i=e.erc20LockerAbi)&&void 0!==i?i:a.erc20LockerAbi,u),d=h.filters.Locked(),m=await h.queryFilter(d,l.blockNumber,l.blockNumber),g=m.find(e=>e.transactionHash===t);if(!g)throw Error("Unable to process lock transaction event.");let v=g.args.token,b=g.args.amount.toString(),_=g.args.accountId,M=g.args.sender,A=null!==(o=e.symbol)&&void 0!==o?o:await (0,y.getSymbol)({erc20Address:v,options:e}),S=null!==(s=e.decimals)&&void 0!==s?s:await (0,y.getDecimals)({erc20Address:v,options:e}),I=await g.getBlock(),T={...E,id:Math.random().toString().slice(2),startTime:new Date(1e3*I.timestamp).toISOString(),amount:b,completedStep:w,destinationTokenName:"n"+A,recipient:_,sender:M,sourceToken:v,sourceTokenName:A,symbol:A,decimals:S,status:f.IN_PROGRESS,lockHashes:[t],lockReceipts:[l]};return await R(T,e)}async function N({erc20Address:t,amount:e,recipient:r,options:n}){var i,o,s,a,u;n=null!=n?n:{};let c=null!==(i=n.provider)&&void 0!==i?i:(0,p.getSignerProvider)(),h=null!==(o=n.symbol)&&void 0!==o?o:await (0,y.getSymbol)({erc20Address:t,options:n}),d=null!==(s=n.decimals)&&void 0!==s?s:await (0,y.getDecimals)({erc20Address:t,options:n}),f=null!==(a=n.signer)&&void 0!==a?a:c.getSigner(),m=null!==(u=n.sender)&&void 0!==u?u:(await f.getAddress()).toLowerCase(),g={...E,id:Math.random().toString().slice(2),startTime:new Date().toISOString(),amount:e.toString(),destinationTokenName:"n"+h,recipient:r,sender:m,sourceToken:t,sourceTokenName:h,symbol:h,decimals:d};return g=await O(g,n),"undefined"!=typeof window&&(g=await (0,l.track)(g)),g}async function x({erc20Address:t,amount:e,options:r}){var n,i,o,s,a;r=null!=r?r:{};let u=(0,p.getBridgeParams)(),l=null!==(n=r.provider)&&void 0!==n?n:(0,p.getSignerProvider)(),h=(await l.getNetwork()).chainId,d=null!==(i=r.ethChainId)&&void 0!==i?i:u.ethChainId;if(h!==d)throw Error(`Wrong eth network for approve, expected: ${d}, got: ${h}`);let m=await l.getBlockNumber()-20,g=new c.ethers.Contract(t,null!==(o=r.erc20Abi)&&void 0!==o?o:u.erc20Abi,null!==(s=r.signer)&&void 0!==s?s:l.getSigner()),y=await g.approve(null!==(a=r.erc20LockerAddress)&&void 0!==a?a:u.erc20LockerAddress,e);return{...E,amount:e.toString(),sourceToken:t,ethCache:{from:y.from,to:y.to,safeReorgHeight:m,data:y.data,nonce:y.nonce},approvalHashes:[y.hash],approvalReceipts:[],status:f.IN_PROGRESS}}async function P(t,e){var r,n;e=null!=e?e:{};let i=(0,p.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),s=(await o.getNetwork()).chainId,a=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(s!==a)throw Error(`Wrong eth network for checkApprove, expected: ${a}, got: ${s}`);let u=D(t.approvalHashes),c=await o.getTransactionReceipt(u);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,g.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof g.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,approvalReceipts:[...t.approvalReceipts,c],errors:[...t.errors,e],status:f.FAILED}}return c.transactionHash!==u&&(t={...t,approvalHashes:[...t.approvalHashes,c.transactionHash]}),{...t,approvalReceipts:[...t.approvalReceipts,c],completedStep:v,status:f.ACTION_NEEDED}}async function O(t,e){var r,n,i,o,s;e=null!=e?e:{};let a=(0,p.getBridgeParams)(),u=null!==(r=e.provider)&&void 0!==r?r:(0,p.getSignerProvider)(),l=(await u.getNetwork()).chainId,h=null!==(n=e.ethChainId)&&void 0!==n?n:a.ethChainId;if(l!==h)throw Error(`Wrong eth network for lock, expected: ${h}, got: ${l}`);let d=new c.ethers.Contract(null!==(i=e.erc20LockerAddress)&&void 0!==i?i:a.erc20LockerAddress,null!==(o=e.erc20LockerAbi)&&void 0!==o?o:a.erc20LockerAbi,null!==(s=e.signer)&&void 0!==s?s:u.getSigner()),m=await u.getBlockNumber()-20,g=await d.lockToken(t.sourceToken,t.amount,t.recipient);return{...t,status:f.IN_PROGRESS,ethCache:{from:g.from,to:g.to,safeReorgHeight:m,data:g.data,nonce:g.nonce},lockHashes:[...t.lockHashes,g.hash]}}async function C(t,e){var r,n;e=null!=e?e:{};let i=(0,p.getBridgeParams)(),o=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),s=D(t.lockHashes),a=(await o.getNetwork()).chainId,u=null!==(n=e.ethChainId)&&void 0!==n?n:i.ethChainId;if(a!==u)throw Error(`Wrong eth network for checkLock, expected: ${u}, got: ${a}`);let c=await o.getTransactionReceipt(s);if(!c){if(!t.ethCache)return t;try{let e={nonce:t.ethCache.nonce,from:t.ethCache.from,to:t.ethCache.to,data:t.ethCache.data},r=await (0,g.findReplacementTx)(o,t.ethCache.safeReorgHeight,e);if(!r)return t;c=await o.getTransactionReceipt(r.hash)}catch(e){if(console.error(e),e instanceof g.TxValidationError)return{...t,errors:[...t.errors,e.message],status:f.FAILED};throw e}}if(!c)return t;if(!c.status){let e=`Transaction failed: ${c.transactionHash}`;return{...t,status:f.FAILED,errors:[...t.errors,e],lockReceipts:[...t.lockReceipts,c]}}c.transactionHash!==s&&(t={...t,lockHashes:[...t.lockHashes,c.transactionHash]});let l=await o.getBlock(c.blockHash);return{...t,status:f.IN_PROGRESS,completedStep:w,startTime:new Date(1e3*l.timestamp).toISOString(),lockReceipts:[...t.lockReceipts,c]}}async function R(t,e){var r,i,o,s,a,u,c,l,h,d,g,y;let v;if("string"==typeof t)return await k(t,e);e=null!=e?e:{};let w=(0,p.getBridgeParams)(),M=null!==(r=e.provider)&&void 0!==r?r:(0,p.getEthProvider)(),E=null!==(s=null!==(i=e.nearProvider)&&void 0!==i?i:null===(o=e.nearAccount)||void 0===o?void 0:o.connection.provider)&&void 0!==s?s:(0,p.getNearProvider)();if(t.checkSyncInterval||(t={...t,checkSyncInterval:null!==(a=e.sendToNearSyncInterval)&&void 0!==a?a:w.sendToNearSyncInterval}),t.nextCheckSyncTimestamp&&new Date<new Date(t.nextCheckSyncTimestamp))return t;let A=D(t.lockReceipts),S=A.blockNumber,I=await (0,m.ethOnNearSyncHeight)(null!==(u=e.nearClientAccount)&&void 0!==u?u:w.nearClientAccount,E),T=Math.max(0,I-S);if(T>t.neededConfirmations){v=await (0,m.findEthProof)("Locked",A.transactionHash,null!==(c=e.erc20LockerAddress)&&void 0!==c?c:w.erc20LockerAddress,null!==(l=e.erc20LockerAbi)&&void 0!==l?l:w.erc20LockerAbi,M);let r=await E.query({request_type:"call_function",account_id:null!==(h=e.nep141Factory)&&void 0!==h?h:w.nep141Factory,method_name:"is_used_proof",args_base64:n.from(v).toString("base64"),finality:"optimistic"}),i=JSON.parse(n.from(r.result).toString());if(i){if(e.callIndexer)try{let r;let{transactions:i,timestamps:o}=await (0,m.findFinalizationTxOnNear)({proof:n.from(v).toString("base64"),connectorAccount:null!==(d=e.nep141Factory)&&void 0!==d?d:w.nep141Factory,eventRelayerAccount:null!==(g=e.eventRelayerAccount)&&void 0!==g?g:w.eventRelayerAccount,finalizationMethod:"deposit",callIndexer:e.callIndexer});o.length>0&&(r=new Date(o[0]/1e6).toISOString()),t={...t,finishTime:r,mintHashes:[...t.mintHashes,...i]}}catch(t){console.error(t)}return{...t,completedStep:_,completedConfirmations:T,status:f.COMPLETE,errors:[...t.errors,"Transfer already finalized."]}}}let N=null!==(y=e.nearEventRelayerMargin)&&void 0!==y?y:w.nearEventRelayerMargin;return T<t.neededConfirmations+N?{...t,nextCheckSyncTimestamp:new Date(Date.now()+t.checkSyncInterval),completedConfirmations:T,status:f.IN_PROGRESS}:{...t,completedConfirmations:T,completedStep:b,status:f.ACTION_NEEDED,proof:v}}async function L(t,e){var r,n,i;let o;e=null!=e?e:{};let s=(0,p.getBridgeParams)(),a=null!==(r=e.nearAccount)&&void 0!==r?r:(0,p.getNearWallet)(),c=a instanceof h.Account,d="undefined"!=typeof window&&(c||"browser"===a.type);if((t=await R(t,e)).status!==f.ACTION_NEEDED)return t;let g=t.proof;return d&&m.urlParams.set({minting:t.id}),d&&(t=await (0,l.track)({...t,status:f.IN_PROGRESS})),o=c?await a.functionCall({contractId:null!==(n=e.nep141Factory)&&void 0!==n?n:s.nep141Factory,methodName:"deposit",args:g,gas:new u.default("200"+"0".repeat(12)),attachedDeposit:new u.default("6"+"0".repeat(22))}):await a.signAndSendTransaction({receiverId:null!==(i=e.nep141Factory)&&void 0!==i?i:s.nep141Factory,actions:[{type:"FunctionCall",params:{methodName:"deposit",args:g,gas:"200"+"0".repeat(12),deposit:"6"+"0".repeat(22)}}]}),{...t,status:f.IN_PROGRESS,mintHashes:[...t.mintHashes,o.transaction.hash]}}async function B(t,e){var r,n,i,o,s;let a,u;if(e=null!=e?e:{},0===t.mintHashes.length){let e=m.urlParams.get("minting"),r=m.urlParams.get("transactionHashes"),n=m.urlParams.get("errorCode");if(u=["minting","transactionHashes","errorCode","errorMessage"],!e){let e=`A finalization transaction was initiated but could not be verified.
        Click 'Retry' to make sure the transfer is finalized.`;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(e!==t.id){let r=`Couldn't determine transaction outcome.
        Got transfer id '${e} in URL, expected '${t.id}`;return console.error(r),{...t,status:f.FAILED,errors:[...t.errors,r]}}if(n){m.urlParams.clear(...u);let e="Error from wallet: "+n;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}if(!r)return console.log("Tx hash not received: pending redirect or wallet error"),t;if(r.includes(",")){m.urlParams.clear(...u);let e="Error from wallet: expected single txHash, got: "+r;return console.error(e),{...t,status:f.FAILED,errors:[...t.errors,e]}}a=r}else a=D(t.mintHashes);let c=h.utils.serialize.base_decode(a),l=null!==(i=null!==(r=e.nearProvider)&&void 0!==r?r:null===(n=e.nearAccount)||void 0===n?void 0:n.connection.provider)&&void 0!==i?i:(0,p.getNearProvider)(),d=await l.txStatus(c,null!==(s=null===(o=null==e?void 0:e.nearAccount)||void 0===o?void 0:o.accountId)&&void 0!==s?s:"todo");if(d.status.Unknown)return t;if(d.status.Failure){u&&m.urlParams.clear(...u);let e=`NEAR transaction failed: ${a}`;return console.error(e),{...t,errors:[...t.errors,e],status:f.FAILED,mintHashes:[...t.mintHashes,a]}}return u&&m.urlParams.clear(...u),{...t,completedStep:_,status:f.COMPLETE,mintHashes:[...t.mintHashes,a]}}e.i18n={en_US:{steps:t=>(0,d.stepsFor)(t,M,{[w]:`Start transfer of ${(0,p.formatLargeNum)(t.amount,t.decimals).toString()} ${t.sourceTokenName} to NEAR`,[b]:`Wait for ${t.neededConfirmations+Number((0,p.getBridgeParams)().nearEventRelayerMargin)} transfer confirmations for security`,[_]:`Deposit ${(0,p.formatLargeNum)(t.amount,t.decimals).toString()} ${t.destinationTokenName} in NEAR`}),statusMessage:t=>{if(t.status===f.FAILED)return"Failed";if(t.status===f.ACTION_NEEDED)switch(t.completedStep){case null:case v:return"Ready to transfer from Ethereum";case b:return"Ready to deposit in NEAR";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}switch(t.completedStep){case null:case v:return"Transferring to NEAR";case w:return`Confirming transfer ${t.completedConfirmations+1} of ${t.neededConfirmations+Number((0,p.getBridgeParams)().nearEventRelayerMargin)}`;case b:return"Depositing in NEAR";case _:return"Transfer complete";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}},callToAction:t=>{if(t.status===f.FAILED)return"Retry";if(t.status!==f.ACTION_NEEDED)return null;switch(t.completedStep){case null:case v:return"Transfer";case b:return"Deposit";default:throw Error(`Transfer in unexpected state, transfer with ID=${t.id} & status=${t.status} has completedStep=${t.completedStep}`)}}}},e.act=A,e.checkStatus=S,e.findAllTransactions=I,e.findAllTransfers=T,e.recover=k,e.initiate=N,e.approve=x,e.checkApprove=P,e.lock=O,e.checkLock=C,e.checkSync=R,e.mint=L,e.checkMint=B;let D=t=>t[t.length-1]},94890:function(t,e,r){"use strict";/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i,o,s,a=r(39486)("http-errors"),u=r(66644),c=r(95909),l=r(35717),h=r(72953);function d(t){return Number(String(t).charAt(0)+"00")}function f(t,e){var r=Object.getOwnPropertyDescriptor(t,"name");r&&r.configurable&&(r.value=e,Object.defineProperty(t,"name",r))}function p(t){return"Error"!==t.substr(-5)?t+"Error":t}t.exports=function t(){for(var e,r,n=500,i={},o=0;o<arguments.length;o++){var s=arguments[o];if(s instanceof Error){n=(e=s).status||e.statusCode||n;continue}switch(typeof s){case"string":r=s;break;case"number":n=s,0!==o&&a("non-first-argument status code; replace with createError("+s+", ...)");break;case"object":i=s}}"number"==typeof n&&(n<400||n>=600)&&a("non-error status code; use only 4xx or 5xx status codes"),("number"!=typeof n||!c[n]&&(n<400||n>=600))&&(n=500);var u=t[n]||t[d(n)];for(var l in e||Error.captureStackTrace(e=u?new u(r):Error(r||c[n]),t),u&&e instanceof u&&e.status===n||(e.expose=n<500,e.status=e.statusCode=n),i)"status"!==l&&"statusCode"!==l&&(e[l]=i[l]);return e},t.exports.HttpError=function(){function t(){throw TypeError("cannot construct abstract class")}return l(t,Error),t}(),t.exports.isHttpError=(n=t.exports.HttpError,function(t){return!!t&&"object"==typeof t&&(t instanceof n||t instanceof Error&&"boolean"==typeof t.expose&&"number"==typeof t.statusCode&&t.status===t.statusCode)}),i=t.exports,o=c.codes,s=t.exports.HttpError,o.forEach(function(t){var e,r=h(c[t]);switch(d(t)){case 400:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!0,i}(s,r,t);break;case 500:e=function(t,e,r){var n=p(e);function i(t){var e=null!=t?t:c[r],o=Error(e);return Error.captureStackTrace(o,i),u(o,i.prototype),Object.defineProperty(o,"message",{enumerable:!0,configurable:!0,value:e,writable:!0}),Object.defineProperty(o,"name",{enumerable:!1,configurable:!0,value:n,writable:!0}),o}return l(i,t),f(i,n),i.prototype.status=r,i.prototype.statusCode=r,i.prototype.expose=!1,i}(s,r,t)}e&&(i[t]=e,i[r]=e)}),i["I'mateapot"]=a.function(i.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')},39486:function(t){"use strict";function e(t,e){if("function"!=typeof t)throw TypeError("argument fn must be a function");return t}function r(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw TypeError("must call property on owner object");if(!n.configurable)throw TypeError("property must be configurable")}/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.exports=function(t){if(!t)throw TypeError("argument namespace is required");function n(t){}return n._file=void 0,n._ignored=!0,n._namespace=t,n._traced=!1,n._warned=Object.create(null),n.function=e,n.property=r,n}},83062:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;let s=o(r(54432)),a=o(r(27812)),u=r(82506),c=r(48079),l=r(25532),h=r(29397),d=r(94173),f=r(1037),p=r(36226),m=o(r(8370));function g(t){return JSON.parse(n.from(t).toString())}function y(t){return n.from(JSON.stringify(t))}class v{constructor(t,e){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=e}get ready(){let t=a.default("Account.ready()");return t("not needed anymore, always ready"),Promise.resolve()}async fetchState(){let t=a.default("Account.fetchState()");t("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(t,e){if(!i.env.NEAR_NO_LOGS)for(let r of e)console.log(`Receipt${r.receiptIds.length>1?"s":""}: ${r.receiptIds.join(", ")}`),this.printLogs(t,r.logs,"	"),r.failure&&console.warn(`	Failure [${t}]: ${r.failure}`)}printLogs(t,e,r=""){if(!i.env.NEAR_NO_LOGS)for(let n of e)console.log(`${r}Log [${t}]: ${n}`)}async signTransaction(t,e){let r=await this.findAccessKey(t,e);if(!r)throw new c.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");let{accessKey:n}=r,i=await this.connection.provider.block({finality:"final"}),o=i.header.hash,s=++n.nonce;return await u.signTransaction(t,s,e,l.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...t){return"string"==typeof t[0]?this.signAndSendTransactionV1(t[0],t[1]):this.signAndSendTransactionV2(t[0])}signAndSendTransactionV1(t,e){let r=a.default("Account.signAndSendTransaction(receiverId, actions");return r("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:t,actions:e})}async signAndSendTransactionV2({receiverId:t,actions:e,returnError:r}){let n,i;let o=await m.default(500,12,1.5,async()=>{[n,i]=await this.signTransaction(t,e);let r=i.transaction.publicKey;try{return await this.connection.provider.sendTransaction(i)}catch(e){if("InvalidNonce"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} with new nonce.`),delete this.accessKeyByPublicKeyCache[r.toString()],null;if("Expired"===e.type)return d.logWarning(`Retrying transaction ${t}:${l.baseEncode(n)} due to expired block hash`),null;throw e.context=new c.ErrorContext(l.baseEncode(n)),e}});if(!o)throw new c.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");let s=[o.transaction_outcome,...o.receipts_outcome].reduce((t,e)=>e.outcome.logs.length||"object"==typeof e.outcome.status&&"object"==typeof e.outcome.status.Failure?t.concat({receiptIds:e.outcome.receipt_ids,logs:e.outcome.logs,failure:void 0!==e.outcome.status.Failure?f.parseRpcError(e.outcome.status.Failure):null}):t,[]);if(this.printLogsAndFailures(i.transaction.receiverId,s),!r&&"object"==typeof o.status&&"object"==typeof o.status.Failure){if(o.status.Failure.error_message&&o.status.Failure.error_type)throw new c.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type);throw f.parseResultError(o)}return o}async findAccessKey(t,e){let r=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!r)return null;let n=this.accessKeyByPublicKeyCache[r.toString()];if(void 0!==n)return{publicKey:r,accessKey:n};try{let t=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:r.toString(),finality:"optimistic"});if(this.accessKeyByPublicKeyCache[r.toString()])return{publicKey:r,accessKey:this.accessKeyByPublicKeyCache[r.toString()]};return this.accessKeyByPublicKeyCache[r.toString()]=t,{publicKey:r,accessKey:t}}catch(t){if("AccessKeyDoesNotExist"==t.type)return null;throw t}}async createAndDeployContract(t,e,r,n){let i=u.fullAccessKey();await this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(n),u.addKey(h.PublicKey.from(e),i),u.deployContract(r)]});let o=new v(this.connection,t);return o}async sendMoney(t,e){return this.signAndSendTransaction({receiverId:t,actions:[u.transfer(e)]})}async createAccount(t,e,r){let n=u.fullAccessKey();return this.signAndSendTransaction({receiverId:t,actions:[u.createAccount(),u.transfer(r),u.addKey(h.PublicKey.from(e),n)]})}async deleteAccount(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteAccount(t)]})}async deployContract(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deployContract(t)]})}encodeJSContractArgs(t,e,r){return n.concat([n.from(t),n.from([0]),n.from(e),n.from([0]),n.from(r)])}async functionCall(...t){return"string"==typeof t[0]?this.functionCallV1(t[0],t[1],t[2],t[3],t[4]):this.functionCallV2(t[0])}functionCallV1(t,e,r,n,i){let o=a.default("Account.functionCall(contractId, methodName, args, gas, amount)");return o("use `Account.functionCall(FunctionCallOptions)` instead"),r=r||{},this.validateArgs(r),this.signAndSendTransaction({receiverId:t,actions:[u.functionCall(e,r,n||p.DEFAULT_FUNCTION_CALL_GAS,i)]})}functionCallV2({contractId:t,methodName:e,args:r={},gas:n=p.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:i,walletMeta:o,walletCallbackUrl:s,stringify:a,jsContract:c}){let l;if(this.validateArgs(r),c){let o=this.encodeJSContractArgs(t,e,JSON.stringify(r));l=["call_js_contract",o,n,i,null,!0]}else{let t=void 0===a?u.stringifyJsonOrBytes:a;l=[e,r,n,i,t,!1]}return this.signAndSendTransaction({receiverId:c?this.connection.jsvmAccountId:t,actions:[u.functionCall.apply(void 0,l)],walletMeta:o,walletCallbackUrl:s})}async addKey(t,e,r,n){let i;return r||(r=[]),Array.isArray(r)||(r=[r]),i=e?u.functionCallAccessKey(e,r,n):u.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[u.addKey(h.PublicKey.from(t),i)]})}async deleteKey(t){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.deleteKey(h.PublicKey.from(t))]})}async stake(t,e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[u.stake(e,h.PublicKey.from(t))]})}validateArgs(t){let e=void 0!==t.byteLength&&t.byteLength===t.length;if(!e&&(Array.isArray(t)||"object"!=typeof t))throw new d.PositionalArgsError}async viewFunction(t,e,r={},{parse:i=g,stringify:o=y,jsContract:s=!1}={}){let a;this.validateArgs(r),a=s?this.encodeJSContractArgs(t,e,Object.keys(r).length>0?JSON.stringify(r):""):o(r);let u=await this.connection.provider.query({request_type:"call_function",account_id:s?this.connection.jsvmAccountId:t,method_name:s?"view_js_contract":e,args_base64:a.toString("base64"),finality:"optimistic"});return u.logs&&this.printLogs(t,u.logs),u.result&&u.result.length>0&&i(n.from(u.result))}async viewState(t,e={finality:"optimistic"}){let{values:r}=await this.connection.provider.query({request_type:"view_state",...e,account_id:this.accountId,prefix_base64:n.from(t).toString("base64")});return r.map(({key:t,value:e})=>({key:n.from(t,"base64"),value:n.from(e,"base64")}))}async getAccessKeys(){let t=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(t)?t:t.keys}async getAccountDetails(){let t=await this.getAccessKeys(),e=t.filter(t=>"FullAccess"!==t.access_key.permission).map(t=>{let e=t.access_key.permission;return{contractId:e.FunctionCall.receiver_id,amount:e.FunctionCall.allowance,publicKey:t.public_key}});return{authorizedApps:e}}async getAccountBalance(){let t=await this.connection.provider.experimental_protocolConfig({finality:"final"}),e=await this.state(),r=new s.default(t.runtime_config.storage_amount_per_byte),n=new s.default(e.storage_usage).mul(r),i=new s.default(e.locked),o=new s.default(e.amount).add(i),a=o.sub(s.default.max(i,n));return{total:o.toString(),stateStaked:n.toString(),staked:i.toString(),available:a.toString()}}}e.Account=v},15796:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;let n=r(49637);class i{}e.AccountCreator=i;class o extends i{constructor(t,e){super(),this.masterAccount=t,this.initialBalance=e}async createAccount(t,e){await this.masterAccount.createAccount(t,e,this.initialBalance)}}e.LocalAccountCreator=o;class s extends i{constructor(t,e){super(),this.connection=t,this.helperUrl=e}async createAccount(t,e){await n.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:e.toString()}))}}e.UrlAccountCreator=s},57751:function(t,e,r){"use strict";var n,i,o,s,a,u,c=r(48764).Buffer,l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Account2FA=e.AccountMultisig=e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=void 0;let h=l(r(54432)),d=l(r(27812)),f=r(83062),p=r(77514),m=r(29397),g=r(82506),y=r(48079),v=r(49637);e.MULTISIG_STORAGE_KEY="__multisigRequest",e.MULTISIG_ALLOWANCE=new h.default(p.parseNearAmount("1")),e.MULTISIG_GAS=new h.default("100000000000000"),e.MULTISIG_DEPOSIT=new h.default("0"),e.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],e.MULTISIG_CONFIRM_METHODS=["confirm"],(n=s=e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})).CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",n.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",n.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",n.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",n.METHOD_NOT_FOUND="Contract method is not found",(i=a=e.MultisigStateStatus||(e.MultisigStateStatus={}))[i.INVALID_STATE=0]="INVALID_STATE",i[i.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",i[i.VALID_STATE=2]="VALID_STATE",i[i.UNKNOWN_STATE=3]="UNKNOWN_STATE",(o=u||(u={}))[o.INVALID_CODE=0]="INVALID_CODE",o[o.VALID_CODE=1]="VALID_CODE",o[o.UNKNOWN_CODE=2]="UNKNOWN_CODE";let w={[e.MULTISIG_STORAGE_KEY]:null};class b extends f.Account{constructor(t,e,r){super(t,e),this.storage=r.storage,this.onAddRequestResult=r.onAddRequestResult}async signAndSendTransactionWithAccount(t,e){return super.signAndSendTransaction({receiverId:t,actions:e})}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:r}){let n;let{accountId:i}=this,o=c.from(JSON.stringify({request:{receiver_id:t,actions:A(r,i,t)}}));try{n=await super.signAndSendTransaction({receiverId:i,actions:[g.functionCall("add_request_and_confirm",o,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(e){if(e.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(t,r);throw e}if(!n.status)throw Error("Request failed");let s={...n.status};if(!s.SuccessValue||"string"!=typeof s.SuccessValue)throw Error("Request failed");return this.setRequest({accountId:i,actions:r,requestId:parseInt(c.from(s.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(n),this.deleteUnconfirmedRequests(),n}async checkMultisigCodeAndStateStatus(t){let r=t?u.UNKNOWN_CODE:u.VALID_CODE;try{return t?await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.deployContract(t),g.functionCall("delete_request",{request_id:4294967295},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]}):await this.deleteRequest(4294967295),{codeStatus:u.VALID_CODE,stateStatus:a.VALID_STATE}}catch(t){if(new RegExp(s.CANNOT_DESERIALIZE_STATE).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.INVALID_STATE};if(new RegExp(s.MULTISIG_NOT_INITIALIZED).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.STATE_NOT_INITIALIZED};if(new RegExp(s.NO_SUCH_REQUEST).test(t&&t.kind&&t.kind.ExecutionError))return{codeStatus:r,stateStatus:a.VALID_STATE};if(new RegExp(s.METHOD_NOT_FOUND).test(t&&t.message))return{codeStatus:u.INVALID_CODE,stateStatus:a.UNKNOWN_STATE};throw t}}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:t},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}async deleteAllRequests(){let t=await this.getRequestIds();t.length&&await Promise.all(t.map(t=>this.deleteRequest(t)))}async deleteUnconfirmedRequests(){let t=await this.getRequestIds(),{requestId:r}=this.getRequest();for(let n of t)if(n!=r)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[g.functionCall("delete_request",{request_id:n},e.MULTISIG_GAS,e.MULTISIG_DEPOSIT)]})}catch(t){console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(e.MULTISIG_STORAGE_KEY)||"{}"):w[e.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(e.MULTISIG_STORAGE_KEY,JSON.stringify(t));w[e.MULTISIG_STORAGE_KEY]=t}}e.AccountMultisig=b;class _ extends b{constructor(t,e,r){super(t,e,r),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=r.helperUrl||this.helperUrl,this.storage=r.storage,this.sendCode=r.sendCode||this.sendCodeDefault,this.getCode=r.getCode||this.getCodeDefault,this.verifyCode=r.verifyCode||this.verifyCodeDefault,this.onConfirmResult=r.onConfirmResult}async signAndSendTransaction(...t){if("string"!=typeof t[0])return this.__signAndSendTransaction(t[0]);{let e=d.default("Account.signAndSendTransaction(receiverId, actions");return e("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:t[0],actions:t[1]})}}async __signAndSendTransaction({receiverId:t,actions:e}){await super.signAndSendTransaction({receiverId:t,actions:e}),await this.sendCode();let r=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(r),r}async deployMultisig(t){let{accountId:r}=this,n=(await this.getRecoveryMethods()).data.filter(({kind:t,publicKey:e})=>("phrase"===t||"ledger"===t)&&null!==e).map(t=>t.publicKey),i=(await this.getAccessKeys()).filter(({public_key:t,access_key:{permission:e}})=>"FullAccess"===e&&!n.includes(t)).map(t=>t.public_key).map(M),o=M((await this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),s=c.from(JSON.stringify({num_confirmations:2})),u=[...i.map(t=>g.deleteKey(t)),...i.map(t=>g.addKey(t,g.functionCallAccessKey(r,e.MULTISIG_CHANGE_METHODS,null))),g.addKey(o,g.functionCallAccessKey(r,e.MULTISIG_CONFIRM_METHODS,null)),g.deployContract(t)],l=u.concat(g.functionCall("new",s,e.MULTISIG_GAS,e.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",r);let{stateStatus:h}=await this.checkMultisigCodeAndStateStatus(t);switch(h){case a.STATE_NOT_INITIALIZED:return await super.signAndSendTransactionWithAccount(r,l);case a.VALID_STATE:return await super.signAndSendTransactionWithAccount(r,u);case a.INVALID_STATE:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}async disableWithFAK({contractBytes:t,cleanupContractBytes:e}){let r=[];e&&(await this.deleteAllRequests().catch(t=>t),r=await this.get2faDisableCleanupActions(e));let n=await this.get2faDisableKeyConversionActions(),i=[...r,...n,g.deployContract(t)],o=await this.findAccessKey(this.accountId,i);if(o&&o.accessKey&&"FullAccess"!==o.accessKey.permission)throw new y.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,i)}async get2faDisableCleanupActions(t){let r=await this.viewState("").catch(t=>{let e=t.cause&&t.cause.name;if("NO_CONTRACT_CODE"==e)return[];throw"TOO_LARGE_CONTRACT_STATE"==e?new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):t}),n=r.map(({key:t})=>t.toString("base64"));return r.length?[g.deployContract(t),g.functionCall("clean",{keys:n},e.MULTISIG_GAS,new h.default("0"))]:[]}async get2faDisableKeyConversionActions(){let{accountId:t}=this,e=await this.getAccessKeys(),r=e.filter(({access_key:t})=>"FullAccess"!==t.permission).filter(({access_key:e})=>{let r=e.permission.FunctionCall;return r.receiver_id===t&&4===r.method_names.length&&r.method_names.includes("add_request_and_confirm")}),n=m.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[g.deleteKey(n),...r.map(({public_key:t})=>g.deleteKey(m.PublicKey.from(t))),...r.map(({public_key:t})=>g.addKey(m.PublicKey.from(t),g.fullAccessKey()))]}async disable(t,e){let r;let{stateStatus:n}=await this.checkMultisigCodeAndStateStatus();if(n!==a.VALID_STATE&&n!==a.STATE_NOT_INITIALIZED)throw new y.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");await this.deleteAllRequests().catch(t=>r=t);let i=await this.get2faDisableCleanupActions(e).catch(t=>{if("ContractHasExistingState"===t.type)throw r||t;throw t}),o=[...i,...await this.get2faDisableKeyConversionActions(),g.deployContract(t)];return console.log("disabling 2fa for",this.accountId),await this.signAndSendTransaction({receiverId:this.accountId,actions:o})}async sendCodeDefault(){let{accountId:t}=this,{requestId:e}=this.getRequest(),r=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:t,method:r,requestId:e}),e}async getCodeDefault(t){throw Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){let t=await this.get2faMethod(),e=await this.getCode(t);try{let t=await this.verifyCode(e);return t}catch(t){if(console.warn("Error validating security code:",t),t.toString().includes("invalid 2fa code provided")||t.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw t}}async verifyCodeDefault(t){let{accountId:e}=this,r=this.getRequest();if(!r)throw Error("no request pending");let{requestId:n}=r;return await this.postSignedJson("/2fa/verify",{accountId:e,securityCode:t,requestId:n})}async getRecoveryMethods(){let{accountId:t}=this;return{accountId:t,data:await this.postSignedJson("/account/recoveryMethods",{accountId:t})}}async get2faMethod(){let{data:t}=await this.getRecoveryMethods();if(t&&t.length&&(t=t.find(t=>0===t.kind.indexOf("2fa-"))),!t)return null;let{kind:e,detail:r}=t;return{kind:e,detail:r}}async signatureFor(){let{accountId:t}=this,e=await this.connection.provider.block({finality:"final"}),r=e.header.height.toString(),n=await this.connection.signer.signMessage(c.from(r),t,this.connection.networkId),i=c.from(n.signature).toString("base64");return{blockNumber:r,blockNumberSignature:i}}async postSignedJson(t,e){return await v.fetchJson(this.helperUrl+t,JSON.stringify({...e,...await this.signatureFor()}))}}e.Account2FA=_;let M=t=>m.PublicKey.from(t),E=t=>t.toString().replace("ed25519:",""),A=(t,r,n)=>t.map(t=>{let i=t.enum,{gas:o,publicKey:s,methodName:a,args:u,deposit:l,accessKey:h,code:d}=t[i],f={type:i[0].toUpperCase()+i.substr(1),gas:o&&o.toString()||void 0,public_key:s&&E(s)||void 0,method_name:a,args:u&&c.from(u).toString("base64")||void 0,code:d&&c.from(d).toString("base64")||void 0,amount:l&&l.toString()||void 0,deposit:l&&l.toString()||"0",permission:void 0};if(h&&(n===r&&"fullAccess"!==h.permission.enum&&(f.permission={receiver_id:r,allowance:e.MULTISIG_ALLOWANCE.toString(),method_names:e.MULTISIG_CHANGE_METHODS}),"functionCall"===h.permission.enum)){let{receiverId:t,methodNames:e,allowance:r}=h.permission.functionCall;f.permission={receiver_id:t,allowance:r&&r.toString()||void 0,method_names:e}}return f})},1989:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;let n=r(96252);async function i(t){return new n.Near(t)}e.connect=i},4997:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=o(r(48913)),s(r(24633),e),s(r(1989),e),r(58010)},24633:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.WalletAccount=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;let s=o(r(48079));e.providers=s;let a=o(r(7544));e.utils=a;let u=o(r(82506));e.transactions=u;let c=o(r(92409));e.validators=c;let l=r(83062);Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return l.Account}});let h=o(r(57751));e.multisig=h;let d=o(r(15796));e.accountCreator=d;let f=r(56191);Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return f.Connection}});let p=r(94527);Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return p.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return p.InMemorySigner}});let m=r(47235);Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return m.Contract}});let g=r(29397);Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}});let y=r(96252);Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return y.Near}});let v=r(82808);Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return v.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletAccount",{enumerable:!0,get:function(){return v.WalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return v.WalletConnection}})},56191:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;let n=r(48079),i=r(94527);class o{constructor(t,e,r,n){this.networkId=t,this.provider=e,this.signer=r,this.jsvmAccountId=n}static fromConfig(t){let e=function(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new n.JsonRpcProvider({...t.args});default:throw Error(`Unknown provider type ${t.type}`)}}(t.provider),r=function(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new i.InMemorySigner(t.keyStore);default:throw Error(`Unknown signer type ${t.type}`)}}(t.signer);return new o(t.networkId,e,r,t.jsvmAccountId)}}e.Connection=o},36226:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FUNCTION_CALL_GAS=void 0;let i=n(r(54432));e.DEFAULT_FUNCTION_CALL_GAS=new i.default("30000000000000")},47235:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;let i=n(r(54432)),o=n(r(27812)),s=r(48079),a=r(94173);function u(t,e){return({[t]:(...t)=>e(...t)})[t]}let c=t=>t&&void 0!==t.byteLength&&t.byteLength===t.length,l=t=>"[object Object]"===Object.prototype.toString.call(t);class h{constructor(t,e,r){this.account=t,this.contractId=e;let{viewMethods:n=[],changeMethods:i=[]}=r;n.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(e={},r={},...n)=>{if(n.length||!(l(e)||c(e))||!l(r))throw new a.PositionalArgsError;return this.account.viewFunction(this.contractId,t,e,r)})})}),i.forEach(t=>{Object.defineProperty(this,t,{writable:!1,enumerable:!0,value:u(t,async(...e)=>{if(e.length&&(e.length>3||!(l(e[0])||c(e[0]))))throw new a.PositionalArgsError;if(e.length>1||!(e[0]&&e[0].args)){let r=o.default("contract.methodName(args, gas, amount)");return r("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:t,args:e[0],gas:e[1],amount:e[2]})}return this._changeMethod({methodName:t,...e[0]})})})})}async _changeMethod({args:t,methodName:e,gas:r,amount:n,meta:o,callbackUrl:u}){!function(t){for(let e of Object.keys(t)){let r=t[e];if(r&&!i.default.isBN(r)&&isNaN(r))throw new a.ArgumentTypeError(e,"number, decimal string or BN",r)}}({gas:r,amount:n});let c=await this.account.functionCall({contractId:this.contractId,methodName:e,args:t,gas:r,attachedDeposit:n,walletMeta:o,walletCallbackUrl:u});return s.getTransactionLastResult(c)}}e.Contract=h},48913:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;let n=r(32599);Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return n.KeyStore}});let i=r(12581);Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return i.InMemoryKeyStore}});let o=r(57081);Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return o.BrowserLocalStorageKeyStore}});let s=r(84482);Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return s.MergeKeyStore}})},57081:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;let n=r(32599),i=r(29397);class o extends n.KeyStore{constructor(t=window.localStorage,e="near-api-js:keystore:"){super(),this.localStorage=t,this.prefix=e}async setKey(t,e,r){this.localStorage.setItem(this.storageKeyForSecretKey(t,e),r.toString())}async getKey(t,e){let r=this.localStorage.getItem(this.storageKeyForSecretKey(t,e));return r?i.KeyPair.fromString(r):null}async removeKey(t,e){this.localStorage.removeItem(this.storageKeyForSecretKey(t,e))}async clear(){for(let t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)}async getNetworks(){let t=new Set;for(let e of this.storageKeys())if(e.startsWith(this.prefix)){let r=e.substring(this.prefix.length).split(":");t.add(r[1])}return Array.from(t.values())}async getAccounts(t){let e=[];for(let r of this.storageKeys())if(r.startsWith(this.prefix)){let n=r.substring(this.prefix.length).split(":");n[1]===t&&e.push(n[0])}return e}storageKeyForSecretKey(t,e){return`${this.prefix}${e}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}e.BrowserLocalStorageKeyStore=o},12581:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;let n=r(32599),i=r(29397);class o extends n.KeyStore{constructor(){super(),this.keys={}}async setKey(t,e,r){this.keys[`${e}:${t}`]=r.toString()}async getKey(t,e){let r=this.keys[`${e}:${t}`];return r?i.KeyPair.fromString(r):null}async removeKey(t,e){delete this.keys[`${e}:${t}`]}async clear(){this.keys={}}async getNetworks(){let t=new Set;return Object.keys(this.keys).forEach(e=>{let r=e.split(":");t.add(r[1])}),Array.from(t.values())}async getAccounts(t){let e=[];return Object.keys(this.keys).forEach(r=>{let n=r.split(":");n[n.length-1]===t&&e.push(n.slice(0,n.length-1).join(":"))}),e}toString(){return"InMemoryKeyStore"}}e.InMemoryKeyStore=o},32599:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;class r{}e.KeyStore=r},84482:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;let n=r(32599);class i extends n.KeyStore{constructor(t,e={writeKeyStoreIndex:0}){super(),this.options=e,this.keyStores=t}async setKey(t,e,r){await this.keyStores[this.options.writeKeyStoreIndex].setKey(t,e,r)}async getKey(t,e){for(let r of this.keyStores){let n=await r.getKey(t,e);if(n)return n}return null}async removeKey(t,e){for(let r of this.keyStores)await r.removeKey(t,e)}async clear(){for(let t of this.keyStores)await t.clear()}async getNetworks(){let t=new Set;for(let e of this.keyStores)for(let r of(await e.getNetworks()))t.add(r);return Array.from(t)}async getAccounts(t){let e=new Set;for(let r of this.keyStores)for(let n of(await r.getAccounts(t)))e.add(n);return Array.from(e)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}e.MergeKeyStore=i},96252:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;let i=n(r(54432)),o=r(83062),s=r(56191),a=r(47235),u=r(15796);class c{constructor(t){if(this.config=t,this.connection=s.Connection.fromConfig({networkId:t.networkId,provider:{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||t.deps&&t.deps.keyStore},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){let e=new i.default(t.initialBalance?t.initialBalance:"500000000000000000000000000");this.accountCreator=new u.LocalAccountCreator(new o.Account(this.connection,t.masterAccount),e)}else t.helperUrl?this.accountCreator=new u.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}async account(t){let e=new o.Account(this.connection,t);return e}async createAccount(t,e){if(!this.accountCreator)throw Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(t,e),new o.Account(this.connection,t)}async loadContract(t,e){let r=new o.Account(this.connection,e.sender);return new a.Contract(r,t,e)}async sendTokens(t,e,r){console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead.");let n=new o.Account(this.connection,e),i=await n.sendMoney(r,t);return i.transaction_outcome.id}}e.Near=c},48079:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.JsonRpcProvider=e.Provider=void 0;let n=r(61819);Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return n.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}});let i=r(19633);Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return i.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return i.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return i.ErrorContext}})},19633:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.ErrorContext=e.TypedError=void 0;let s=o(r(27812)),a=r(61819),u=r(49637),c=r(94173);Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return c.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return c.ErrorContext}});let l=r(25532),h=o(r(8370)),d=r(1037),f=123;class p extends a.Provider{constructor(t){if(super(),null!=t&&"object"==typeof t)this.connection=t;else{let e=s.default("JsonRpcProvider(url?: string)");e("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:t}}}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_commit",[n.from(e).toString("base64")])}async sendTransactionAsync(t){let e=t.encode();return this.sendJsonRpc("broadcast_tx_async",[n.from(e).toString("base64")])}async txStatus(t,e){return"string"==typeof t?this.txStatusString(t,e):this.txStatusUint8Array(t,e)}async txStatusUint8Array(t,e){return this.sendJsonRpc("tx",[l.baseEncode(t),e])}async txStatusString(t,e){return this.sendJsonRpc("tx",[t,e])}async txStatusReceipts(t,e){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[l.baseEncode(t),e])}async query(...t){let e;if(1===t.length)e=await this.sendJsonRpc("query",t[0]);else{let[r,n]=t;e=await this.sendJsonRpc("query",[r,n])}if(e&&e.error)throw new c.TypedError(`Querying ${t} failed: ${e.error}.
${JSON.stringify(e,null,2)}`,d.getErrorTypeFromErrorMessage(e.error));return e}async block(t){let{finality:e}=t,{blockId:r}=t;if("object"!=typeof t){let e=s.default("JsonRpcProvider.block(blockId)");e("use `block({ blockId })` or `block({ finality })` instead"),r=t}return this.sendJsonRpc("block",{block_id:r,finality:e})}async blockChanges(t){let{finality:e}=t,{blockId:r}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:r,finality:e})}async chunk(t){return this.sendJsonRpc("chunk",[t])}async validators(t){return this.sendJsonRpc("validators",[t])}async experimental_genesisConfig(){let t=s.default("JsonRpcProvider.experimental_protocolConfig()");return t("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(t){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",t)}async experimental_lightClientProof(t){let e=s.default("JsonRpcProvider.experimental_lightClientProof(request)");return e("use `lightClientProof` instead"),await this.lightClientProof(t)}async lightClientProof(t){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)}async accessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:n,finality:r})}async singleAccessKeyChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:n,finality:r})}async accountChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:n,finality:r})}async contractStateChanges(t,e,r=""){let{finality:n}=e,{blockId:i}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:r,block_id:i,finality:n})}async contractCodeChanges(t,e){let{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:n,finality:r})}async gasPrice(t){return await this.sendJsonRpc("gas_price",[t])}async sendJsonRpc(t,e){let r=await h.default(500,12,1.5,async()=>{try{let r={method:t,params:e,id:f++,jsonrpc:"2.0"},n=await u.fetchJson(this.connection,JSON.stringify(r));if(n.error){if("object"==typeof n.error.data){if("string"==typeof n.error.data.error_message&&"string"==typeof n.error.data.error_type)throw new c.TypedError(n.error.data.error_message,n.error.data.error_type);throw d.parseRpcError(n.error.data)}{let t=`[${n.error.code}] ${n.error.message}: ${n.error.data}`;if("Timeout"===n.error.data||t.includes("Timeout error")||t.includes("query has timed out"))throw new c.TypedError(t,"TimeoutError");throw new c.TypedError(t,d.getErrorTypeFromErrorMessage(n.error.data))}}return n}catch(r){if("TimeoutError"===r.type)return i.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${t} as it has timed out`,e),null;throw r}}),{result:n}=r;if(void 0===n)throw new c.TypedError(`Exceeded 12 attempts for request to ${t}.`,"RetriesExceeded");return n}}e.JsonRpcProvider=p},61819:function(t,e,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionLastResult=e.Provider=e.IdType=e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,(n=e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})).Unknown="Unknown",n.Pending="Pending",n.Failure="Failure",(i=e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={})).NotStarted="NotStarted",i.Started="Started",i.Failure="Failure",(o=e.IdType||(e.IdType={})).Transaction="transaction",o.Receipt="receipt";class a{}e.Provider=a,e.getTransactionLastResult=function(t){if("object"==typeof t.status&&"string"==typeof t.status.SuccessValue){let e=s.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch(t){return e}}return null}},94527:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySigner=e.Signer=void 0;let i=n(r(72023)),o=r(29397),s=r(12581);class a{}e.Signer=a;class u extends a{constructor(t){super(),this.keyStore=t}static async fromKeyPair(t,e,r){let n=new s.InMemoryKeyStore;return await n.setKey(t,e,r),new u(n)}async createKey(t,e){let r=o.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(e,t,r),r.getPublicKey()}async getPublicKey(t,e){let r=await this.keyStore.getKey(e,t);return null===r?null:r.getPublicKey()}async signMessage(t,e,r){let n=new Uint8Array(i.default.sha256.array(t));if(!e)throw Error("InMemorySigner requires provided account id");let o=await this.keyStore.getKey(r,e);if(null===o)throw Error(`Key for ${e} not found in ${r}`);return o.sign(n)}toString(){return`InMemorySigner(${this.keyStore})`}}e.InMemorySigner=u},82506:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.signTransaction=e.createTransaction=e.SCHEMA=e.Action=e.SignedTransaction=e.Transaction=e.Signature=e.deleteAccount=e.deleteKey=e.addKey=e.stake=e.transfer=e.functionCall=e.stringifyJsonOrBytes=e.deployContract=e.createAccount=e.DeleteAccount=e.DeleteKey=e.AddKey=e.Stake=e.Transfer=e.FunctionCall=e.DeployContract=e.CreateAccount=e.IAction=e.functionCallAccessKey=e.fullAccessKey=e.AccessKey=e.AccessKeyPermission=e.FullAccessPermission=e.FunctionCallPermission=void 0;let o=i(r(72023)),s=r(8720),a=r(25532),u=r(29397);class c extends s.Assignable{}e.FunctionCallPermission=c;class l extends s.Assignable{}e.FullAccessPermission=l;class h extends s.Enum{}e.AccessKeyPermission=h;class d extends s.Assignable{}e.AccessKey=d,e.fullAccessKey=function(){return new d({nonce:0,permission:new h({fullAccess:new l({})})})},e.functionCallAccessKey=function(t,e,r){return new d({nonce:0,permission:new h({functionCall:new c({receiverId:t,allowance:r,methodNames:e})})})};class f extends s.Assignable{}e.IAction=f;class p extends f{}e.CreateAccount=p;class m extends f{}e.DeployContract=m;class g extends f{}e.FunctionCall=g;class y extends f{}e.Transfer=y;class v extends f{}e.Stake=v;class w extends f{}e.AddKey=w;class b extends f{}e.DeleteKey=b;class _ extends f{}function M(t){let e=void 0!==t.byteLength&&t.byteLength===t.length,r=e?t:n.from(JSON.stringify(t));return r}e.DeleteAccount=_,e.createAccount=function(){return new I({createAccount:new p({})})},e.deployContract=function(t){return new I({deployContract:new m({code:t})})},e.stringifyJsonOrBytes=M,e.functionCall=function(t,e,r,n,i=M,o=!1){return new I(o?{functionCall:new g({methodName:t,args:e,gas:r,deposit:n})}:{functionCall:new g({methodName:t,args:i(e),gas:r,deposit:n})})},e.transfer=function(t){return new I({transfer:new y({deposit:t})})},e.stake=function(t,e){return new I({stake:new v({stake:t,publicKey:e})})},e.addKey=function(t,e){return new I({addKey:new w({publicKey:t,accessKey:e})})},e.deleteKey=function(t){return new I({deleteKey:new b({publicKey:t})})},e.deleteAccount=function(t){return new I({deleteAccount:new _({beneficiaryId:t})})};class E extends s.Assignable{}e.Signature=E;class A extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,A,t)}}e.Transaction=A;class S extends s.Assignable{encode(){return a.serialize(e.SCHEMA,this)}static decode(t){return a.deserialize(e.SCHEMA,S,t)}}e.SignedTransaction=S;class I extends s.Enum{}function T(t,e,r,n,i,o){return new A({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:i,blockHash:o})}async function k(t,r,n,i){let s=a.serialize(e.SCHEMA,t),u=new Uint8Array(o.default.sha256.array(s)),c=await r.signMessage(s,n,i),l=new S({transaction:t,signature:new E({keyType:t.publicKey.keyType,data:c.signature})});return[u,l]}async function N(...t){if(t[0].constructor===A){let[e,r,n,i]=t;return k(e,r,n,i)}{let[e,r,n,i,o,s,a]=t,u=await o.getPublicKey(s,a),c=T(s,u,e,r,n,i);return k(c,o,s,a)}}e.Action=I,e.SCHEMA=new Map([[E,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[S,{kind:"struct",fields:[["transaction",A],["signature",E]]}],[A,{kind:"struct",fields:[["signerId","string"],["publicKey",u.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[I]]]}],[u.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[d,{kind:"struct",fields:[["nonce","u64"],["permission",h]]}],[h,{kind:"enum",field:"enum",values:[["functionCall",c],["fullAccess",l]]}],[c,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[l,{kind:"struct",fields:[]}],[I,{kind:"enum",field:"enum",values:[["createAccount",p],["deployContract",m],["functionCall",g],["transfer",y],["stake",v],["addKey",w],["deleteKey",b],["deleteAccount",_]]}],[p,{kind:"struct",fields:[]}],[m,{kind:"struct",fields:[["code",["u8"]]]}],[g,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[y,{kind:"struct",fields:[["deposit","u128"]]}],[v,{kind:"struct",fields:[["stake","u128"],["publicKey",u.PublicKey]]}],[w,{kind:"struct",fields:[["publicKey",u.PublicKey],["accessKey",d]]}],[b,{kind:"struct",fields:[["publicKey",u.PublicKey]]}],[_,{kind:"struct",fields:[["beneficiaryId","string"]]}]]),e.createTransaction=T,e.signTransaction=N},8720:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assignable=e.Enum=void 0;class r{constructor(t){if(1!==Object.keys(t).length)throw Error("Enum can only take single value");Object.keys(t).map(e=>{this[e]=t[e],this.enum=e})}}e.Enum=r;class n{constructor(t){Object.keys(t).map(e=>{this[e]=t[e]})}}e.Assignable=n},94173:function(t,e,r){"use strict";var n=r(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.ErrorContext=e.TypedError=e.ArgumentTypeError=e.PositionalArgsError=void 0;class i extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}e.PositionalArgsError=i;class o extends Error{constructor(t,e,r){super(`Expected ${e} for '${t}' argument, but got '${JSON.stringify(r)}'`)}}e.ArgumentTypeError=o;class s extends Error{constructor(t,e,r){super(t),this.type=e||"UntypedError",this.context=r}}e.TypedError=s;class a{constructor(t){this.transactionHash=t}}e.ErrorContext=a,e.logWarning=function(...t){n.env.NEAR_NO_LOGS||console.warn(...t)}},8370:function(t,e){"use strict";async function r(t,e,r,n){let i=t;for(let t=0;t<e;t++){let t=await n();if(t)return t;await function(t){return new Promise(e=>setTimeout(e,t))}(i),i*=r}return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},77514:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;let i=n(r(54432));e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=new i.default("10",10).pow(new i.default(e.NEAR_NOMINATION_EXP,10));let o=[],s=new i.default(10);for(let t=0,r=new i.default(5);t<e.NEAR_NOMINATION_EXP;t++,r=r.mul(s))o[t]=r;e.formatNearAmount=function(t,r=e.NEAR_NOMINATION_EXP){let n=new i.default(t,10);if(r!==e.NEAR_NOMINATION_EXP){let t=e.NEAR_NOMINATION_EXP-r-1;t>0&&n.iadd(o[t])}t=n.toString();let s=t.substring(0,t.length-e.NEAR_NOMINATION_EXP)||"0",a=t.substring(t.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,r);return`${(function(t){let e=/(-?\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t})(s)}.${a}`.replace(/\.?0*$/,"")},e.parseNearAmount=function(t){var r;if(!t)return null;t=t.replace(/,/g,"").trim();let n=t.split("."),i=n[0],o=n[1]||"";if(n.length>2||o.length>e.NEAR_NOMINATION_EXP)throw Error(`Cannot parse '${t}' as NEAR amount`);return""===(r=(r=i+o.padEnd(e.NEAR_NOMINATION_EXP,"0")).replace(/^0+/,""))?"0":r}},7544:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;let s=o(r(29397));e.key_pair=s;let a=o(r(10697));e.serialize=a;let u=o(r(49637));e.web=u;let c=o(r(8720));e.enums=c;let l=o(r(77514));e.format=l;let h=o(r(1037));e.rpc_errors=h;let d=r(29397);Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return d.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return d.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return d.KeyPairEd25519}});let f=r(94173);Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return f.logWarning}})},29397:function(t,e,r){"use strict";var n,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.KeyType=void 0;let s=o(r(50780)),a=r(10697),u=r(8720);(n=i=e.KeyType||(e.KeyType={}))[n.ED25519=0]="ED25519";class c extends u.Assignable{static from(t){return"string"==typeof t?c.fromString(t):t}static fromString(t){let e=t.split(":");if(1===e.length)return new c({keyType:i.ED25519,data:a.base_decode(e[0])});if(2===e.length)return new c({keyType:function(t){if("ed25519"===t.toLowerCase())return i.ED25519;throw Error(`Unknown key type ${t}`)}(e[0]),data:a.base_decode(e[1])});throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${function(t){if(t===i.ED25519)return"ed25519";throw Error(`Unknown key type ${t}`)}(this.keyType)}:${a.base_encode(this.data)}`}verify(t,e){if(this.keyType===i.ED25519)return s.default.sign.detached.verify(t,e,this.data);throw Error(`Unknown key type ${this.keyType}`)}}e.PublicKey=c;class l{static fromRandom(t){if("ED25519"===t.toUpperCase())return h.fromRandom();throw Error(`Unknown curve ${t}`)}static fromString(t){let e=t.split(":");if(1===e.length)return new h(e[0]);if(2===e.length){if("ED25519"===e[0].toUpperCase())return new h(e[1]);throw Error(`Unknown curve: ${e[0]}`)}throw Error("Invalid encoded key format, must be <curve>:<encoded key>")}}e.KeyPair=l;class h extends l{constructor(t){super();let e=s.default.sign.keyPair.fromSecretKey(a.base_decode(t));this.publicKey=new c({keyType:i.ED25519,data:e.publicKey}),this.secretKey=t}static fromRandom(){let t=s.default.sign.keyPair();return new h(a.base_encode(t.secretKey))}sign(t){let e=s.default.sign.detached(t,a.base_decode(this.secretKey));return{signature:e,publicKey:this.publicKey}}verify(t,e){return this.publicKey.verify(t,e)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}e.KeyPairEd25519=h},1037:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=e.ServerError=void 0;let i=n(r(466)),o=n(r(72945)),s=n(r(66174)),a=r(24633),u=r(94173),c={formatNear:()=>(t,e)=>a.utils.format.formatNearAmount(e(t))};class l extends u.TypedError{}e.ServerError=l;class h extends l{}function d(t){let e={},r=function t(e,r,n,i){let o,s,a;for(let t in r){var u;if(u=e[t],"[object String]"===Object.prototype.toString.call(u))return e[t];if(p(e[t]))o=e[t],s=r[t],a=t;else{if(!(p(e.kind)&&p(e.kind[t])))continue;o=e.kind[t],s=r[t],a=t}}if(!o||!s)return n.kind=e,i;for(let t of Object.keys(s.props))n[t]=o[t];return t(o,r,n,a)}(t,o.default.schema,e,""),n=new l(f(r,e),r);return Object.assign(n,e),n}function f(t,e){return"string"==typeof s.default[t]?i.default.render(s.default[t],{...e,...c}):JSON.stringify(e)}function p(t){return"[object Object]"===Object.prototype.toString.call(t)}e.parseRpcError=d,e.parseResultError=function(t){let e=d(t.status.Failure),r=new h;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r},e.formatError=f,e.getErrorTypeFromErrorMessage=function(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}},10697:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25532);Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},49637:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;let i=n(r(94890)),o=n(r(8370)),s=r(48079),a=r(94173);async function u(t,e){let r={url:null};"string"==typeof t?r.url=t:r=t;let n=await o.default(1e3,10,1.5,async()=>{try{let t=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!t.ok){if(503===t.status)return a.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw i.default(t.status,await t.text())}return t}catch(t){if(t.toString().includes("FetchError")||t.toString().includes("Failed to fetch"))return a.logWarning(`Retrying HTTP request for ${r.url} because of error: ${t}`),null;throw t}});if(!n)throw new s.TypedError(`Exceeded 10 attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}e.fetchJson=u},92409:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.diffEpochValidators=e.findSeatPrice=void 0;let i=n(r(54432)),o=n(r(27812));e.findSeatPrice=function(t,e,r,n){if(n&&n<49)return function(t,e){let r=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),n=new i.default(e),o=r.reduce((t,e)=>t.add(e));if(o.lt(n))throw Error("Stakes are below seats");let s=new i.default(1),a=o.add(new i.default(1));for(;!s.eq(a.sub(new i.default(1)));){let t=s.add(a).div(new i.default(2)),e=!1,o=new i.default(0);for(let i=0;i<r.length;++i)if((o=o.add(r[i].div(t))).gte(n)){s=t,e=!0;break}e||(a=t)}return s}(t,e);if(!r){let t=o.default("findSeatPrice(validators, maxNumberOfSeats)");t("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]}return function(t,e,r){if(2!=r.length)throw Error("minimumStakeRatio should have 2 elements");let n=t.map(t=>new i.default(t.stake,10)).sort((t,e)=>t.cmp(e)),o=n.reduce((t,e)=>t.add(e));return t.length<e?o.mul(new i.default(r[0])).div(new i.default(r[1])):n[0].add(new i.default(1))}(t,e,r)},e.diffEpochValidators=function(t,e){let r=new Map;t.forEach(t=>r.set(t.account_id,t));let n=new Set(e.map(t=>t.account_id));return{newValidators:e.filter(t=>!r.has(t.account_id)),removedValidators:t.filter(t=>!n.has(t.account_id)),changedValidators:e.filter(t=>r.has(t.account_id)&&r.get(t.account_id).stake!=t.stake).map(t=>({current:r.get(t.account_id),next:t}))}}},82808:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectedWalletAccount=e.WalletAccount=e.WalletConnection=void 0;let o=i(r(27812)),s=r(83062),a=r(82506),u=r(7544),c=r(25532),l=r(25532),h="pending_key";class d{constructor(t,e){this._near=t;let r=e+"_wallet_auth_key",n=JSON.parse(window.localStorage.getItem(r));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,e=e||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=n||{allKeys:[]},this._authDataKey=r,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(t={},e,r,n){let i;if("string"==typeof t){let e=o.default("requestSignIn(contractId, title)");e("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),i={contractId:t,successUrl:r,failureUrl:n}}else i=t;let s=new URL(window.location.href),a=new URL(this._walletBaseUrl+"/login/");if(a.searchParams.set("success_url",i.successUrl||s.href),a.searchParams.set("failure_url",i.failureUrl||s.href),i.contractId){let t=await this._near.account(i.contractId);await t.state(),a.searchParams.set("contract_id",i.contractId);let e=u.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",e.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,h+e.getPublicKey(),e)}i.methodNames&&i.methodNames.forEach(t=>{a.searchParams.append("methodNames",t)}),window.location.assign(a.toString())}async requestSignTransactions(...t){if(Array.isArray(t[0])){let e=o.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)");return e("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:t[0],callbackUrl:t[1],meta:t[2]})}return this._requestSignTransactions(t[0])}async _requestSignTransactions({transactions:t,meta:e,callbackUrl:r}){let i=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",t.map(t=>l.serialize(a.SCHEMA,t)).map(t=>n.from(t).toString("base64")).join(",")),o.searchParams.set("callbackUrl",r||i.href),e&&o.searchParams.set("meta",e),window.location.assign(o.toString())}async _completeSignInWithAccessKey(){let t=new URL(window.location.href),e=t.searchParams.get("public_key")||"",r=(t.searchParams.get("all_keys")||"").split(","),n=t.searchParams.get("account_id")||"";n&&(this._authData={accountId:n,allKeys:r},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),e&&await this._moveKeyFromTempToPermanent(n,e)),t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())}async _moveKeyFromTempToPermanent(t,e){let r=await this._keyStore.getKey(this._networkId,h+e);await this._keyStore.setKey(this._networkId,t,r),await this._keyStore.removeKey(this._networkId,h+e)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new f(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}e.WalletConnection=d,e.WalletAccount=d;class f extends s.Account{constructor(t,e,r){super(e,r),this.walletConnection=t}signAndSendTransaction(...t){return"string"==typeof t[0]?this._signAndSendTransaction({receiverId:t[0],actions:t[1]}):this._signAndSendTransaction(t[0])}async _signAndSendTransaction({receiverId:t,actions:e,walletMeta:r,walletCallbackUrl:n=window.location.href}){let i=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId),o=await this.accessKeyForTransaction(t,e,i);if(!o)throw Error(`Cannot find matching key for transaction sent to ${t}`);if(i&&i.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:t,actions:e})}catch(r){if("NotEnoughAllowance"===r.type)o=await this.accessKeyForTransaction(t,e);else throw r}let s=await this.connection.provider.block({finality:"final"}),l=c.baseDecode(s.header.hash),h=u.PublicKey.from(o.public_key),d=o.access_key.nonce+1,f=a.createTransaction(this.accountId,h,t,d,e,l);return await this.walletConnection.requestSignTransactions({transactions:[f],meta:r,callbackUrl:n}),new Promise((t,e)=>{setTimeout(()=>{e(Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(t,e,r){let{access_key:{permission:n}}=t;if("FullAccess"===n)return!0;if(n.FunctionCall){let{receiver_id:t,method_names:i}=n.FunctionCall;if(t===this.accountId&&i.includes("add_request_and_confirm"))return!0;if(t===e){if(1!==r.length)return!1;let[{functionCall:t}]=r;return t&&(!t.deposit||"0"===t.deposit.toString())&&(0===i.length||i.includes(t.methodName))}}return!1}async accessKeyForTransaction(t,e,r){let n=await this.getAccessKeys();if(r){let i=n.find(t=>t.public_key.toString()===r.toString());if(i&&await this.accessKeyMatchesTransaction(i,t,e))return i}let i=this.walletConnection._authData.allKeys;for(let r of n)if(-1!==i.indexOf(r.public_key)&&await this.accessKeyMatchesTransaction(r,t,e))return r;return null}}e.ConnectedWalletAccount=f},54432:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(52179).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){c(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?d[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],l=p[t];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(t);r=(h=h.idivn(l)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},h&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(h,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=t.allocUnsafe?t.allocUnsafe(o):new t(o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function y(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(t,e){this.x=t,this.y=e}Math.imul||(g=m),o.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?m(this,t,e):y(this,t,e)},v.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},v.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},v.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},v.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},v.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},v.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},v.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},v.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},v.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},v.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),y(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r._strip(),i._strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=67108864%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new S(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(_,b),_.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(M,b),i(E,b),i(A,b),A.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(w[t])return w[t];if("k256"===t)e=new _;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else if("p25519"===t)e=new A;else throw Error("Unknown prime "+t);return w[t]=e,e},S.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},S.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},S.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},S.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},S.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},S.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},S.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,S),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},95909:function(t,e,r){"use strict";/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var n,i=r(7597);function o(t){if("number"==typeof t){if(!o[t])throw Error("invalid status code: "+t);return t}if("string"!=typeof t)throw TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!o[e])throw Error("invalid status code: "+e);return e}if(!(e=o[t.toLowerCase()]))throw Error('invalid status message: "'+t+'"');return e}t.exports=o,o.STATUS_CODES=i,o.codes=(n=[],Object.keys(i).forEach(function(t){var e=i[t],r=Number(t);o[r]=e,o[e]=r,o[e.toLowerCase()]=r,n.push(r)}),n),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},22326:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getNep141FromErc20=e.getErc20FromNep141=e.BURN_SIGNATURE=e.EXIT_TO_ETHEREUM_SIGNATURE=e.EXIT_TO_NEAR_SIGNATURE=void 0;let i=r(25091);async function o({nep141Address:t,nearProvider:e,auroraEvmAccount:r}){class o{constructor(t){Object.assign(this,t)}}let s=new Map([[o,{kind:"struct",fields:[["nep141","String"]]}]]),a=new o({nep141:t}),u=(0,i.serialize)(s,a),c=await e.query({request_type:"call_function",account_id:r,method_name:"get_erc20_from_nep141",args_base64:n.from(u).toString("base64"),finality:"optimistic"}),l=n.from(c.result).toString("hex");return"0x"+l}async function s({auroraErc20Address:t,nearProvider:e,auroraEvmAccount:r}){let i=await e.query({request_type:"call_function",account_id:r,method_name:"get_nep141_from_erc20",args_base64:n.from(t.toLowerCase().slice(2),"hex").toString("base64"),finality:"optimistic"}),o=n.from(i.result).toString("utf-8");return o}e.EXIT_TO_NEAR_SIGNATURE="0x5a91b8bc9c1981673db8fb226dbd8fcdd0c23f45cd28abb31403a5392f6dd0c7",e.EXIT_TO_ETHEREUM_SIGNATURE="0xd046c2bb01a5622bc4b9696332391d87491373762eeac0831c48400e2d5a5f07",e.BURN_SIGNATURE="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",e.getErc20FromNep141=o,e.getNep141FromErc20=s},70958:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.borshifyOutcomeProof=void 0;let o=i(r(18269)),s=i(r(77191));e.borshifyOutcomeProof=function(t){return n.concat([o.default.toBN(t.outcome_proof.proof.length).toBuffer("le",4),n.concat(t.outcome_proof.proof.map(t=>n.concat([s.default.decode(t.hash),n.from(["Right"===t.direction?1:0])]))),s.default.decode(t.outcome_proof.block_hash),s.default.decode(t.outcome_proof.id),n.concat([o.default.toBN(t.outcome_proof.outcome.logs.length).toBuffer("le",4),o.default.toBN(t.outcome_proof.outcome.receipt_ids.length).toBuffer("le",4),n.concat(t.outcome_proof.outcome.receipt_ids.map(t=>s.default.decode(t))),o.default.toBN(t.outcome_proof.outcome.gas_burnt).toBuffer("le",8),o.default.toBN(t.outcome_proof.outcome.tokens_burnt).toBuffer("le",16),o.default.toBN(t.outcome_proof.outcome.executor_id.length).toBuffer("le",4),n.from(t.outcome_proof.outcome.executor_id,"utf8"),(t=>{if("SuccessValue"in t){let e=n.from(t.SuccessValue,"base64");return n.concat([n.from([2]),o.default.toBN(e.length).toBuffer("le",4),e])}if("SuccessReceiptId"in t)return n.concat([n.from([3]),s.default.decode(t.SuccessReceiptId)]);throw Error("status not supported")})(t.outcome_proof.outcome.status),o.default.toBN(t.outcome_root_proof.length).toBuffer("le",4),n.concat(t.outcome_root_proof.map(t=>n.concat([s.default.decode(t.hash),n.from(["Right"===t.direction?1:0])]))),s.default.decode(t.block_header_lite.prev_block_hash),s.default.decode(t.block_header_lite.inner_rest_hash),o.default.toBN(t.block_header_lite.inner_lite.height).toBuffer("le",8),s.default.decode(t.block_header_lite.inner_lite.epoch_id),s.default.decode(t.block_header_lite.inner_lite.next_epoch_id),s.default.decode(t.block_header_lite.inner_lite.prev_state_root),s.default.decode(t.block_header_lite.inner_lite.outcome_root),o.default.toBN(t.block_header_lite.inner_lite.timestamp_nanosec||t.block_header_lite.inner_lite.timestamp).toBuffer("le",8),s.default.decode(t.block_header_lite.inner_lite.next_bp_hash),s.default.decode(t.block_header_lite.inner_lite.block_merkle_root),o.default.toBN(t.block_proof.length).toBuffer("le",4),n.concat(t.block_proof.map(t=>n.concat([s.default.decode(t.hash),n.from(["Right"===t.direction?1:0])])))])])}},67558:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSymbol=e.getDecimals=e.getAllowance=e.getBalance=void 0;let n=r(20548);async function i({erc20Address:t,owner:e,provider:r,erc20Abi:i}){let o=new n.ethers.Contract(t,i,r);return(await o.balanceOf(e)).toString()}async function o({erc20Address:t,owner:e,spender:r,provider:i,erc20Abi:o}){let s=new n.ethers.Contract(t,o,i),a=await s.allowance(e,r);return a.toString()}async function s({erc20Address:t,provider:e,erc20Abi:r}){let i=new n.ethers.Contract(t,r,e),o=await i.decimals();return Number(o)}async function a({erc20Address:t,provider:e,erc20Abi:r}){let i=new n.ethers.Contract(t,r,e),o=await i.symbol();return o}e.getBalance=i,e.getAllowance=o,e.getDecimals=s,e.getSymbol=a},60474:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.ethOnNearSyncHeight=void 0;let i=r(25091);class o{constructor(t){Object.assign(this,t)}}let s=new Map([[o,{kind:"struct",fields:[["last_block_number","u64"]]}]]);async function a(t,e){var r;let a=await e.query({request_type:"call_function",account_id:t,method_name:"last_block_number",args_base64:"",finality:"optimistic"}),u=(r=n.from(a.result),(0,i.deserialize)(s,o,r));return u.last_block_number.toNumber()}e.ethOnNearSyncHeight=a},92001:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.findFinalizationTxOnEthereum=e.findFinalizationTxOnNear=e.SearchError=void 0;let i=r(20548),o=n(r(77191));class s extends Error{}async function a({proof:t,connectorAccount:e,eventRelayerAccount:r,finalizationMethod:n,callIndexer:i}){let o=`SELECT public.receipts.originated_from_transaction_hash, public.receipts.included_in_block_timestamp
    FROM public.receipts
    JOIN public.action_receipt_actions
    ON public.action_receipt_actions.receipt_id = public.receipts.receipt_id
    WHERE (receipt_predecessor_account_id = '${r}'
      AND receipt_receiver_account_id = '${e}'
      AND args ->> 'method_name' = '${n}'
      AND args ->> 'args_base64' = '${t}'
    )`,s=await i(o),a=s.map(t=>t.originated_from_transaction_hash),u=s.map(t=>Number(t.included_in_block_timestamp));return{transactions:a,timestamps:u}}async function u(t,e,r,n){let i=await n.getStorageAt(e,t,r);return 1===Number(i)}async function c({usedProofPosition:t,proof:e,connectorAddress:r,connectorAbi:n,finalizationEvent:a,recipient:c,amount:l,provider:h}){let d="0".repeat(63)+t,f=o.default.decode(e.outcome_proof.outcome.receipt_ids[0]).toString("hex"),p=i.ethers.utils.keccak256("0x"+f+d),m=await h.getBlockNumber(),g=0;for(;g<m;){let t=Math.floor((g+m)/2),e=await u(p,r,t,h);e?m=t:g=t+1}let y=new i.ethers.Contract(r,n,h),v=y.filters[a](),w=await y.queryFilter(v,g,g),b=w.filter(t=>t.args.recipient.toLowerCase()===c.toLowerCase()&&t.args.amount.toString()===l).map(t=>t.transactionHash);if(0===b.length)throw new s(`Finalization tx on Ethereum not found for proof: ${JSON.stringify(e)}`);let _=await h.getBlock(g);return{transactions:b,block:_}}e.SearchError=s,e.findFinalizationTxOnNear=a,e.findFinalizationTxOnEthereum=c},49579:function(t,e,r){"use strict";var n=r(34155),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.findNearProof=e.findEthProof=void 0;let o=r(54748),s=r(36699),a=r(22751),u=r(25091),c=r(23059),l=r(20548),h=i(r(77191));class d{constructor(t){Object.assign(this,t)}}let f=new Map([[d,{kind:"struct",fields:[["log_index","u64"],["log_entry_data",["u8"]],["receipt_index","u64"],["receipt_data",["u8"]],["header_data",["u8"]],["proof",[["u8"]]]]}]]);async function p(t,e,r,i,o){let c=new l.ethers.Contract(r,i,o),h=await o.getTransactionReceipt(e);if(!h.status)throw Error(`Invalid Ethereum receipt status received from provider, please try again.
       If retrying doesn't solve this error, connecting a Metamask account may solve the issue`);let p=await o.send("eth_getBlockByNumber",[l.ethers.utils.hexValue(h.blockNumber),!0]);"1"===n.env.tempGoerliGethFix&&(p.miner="0x0000000000000000000000000000000000000000");let y=await m(o,p),v=await g(p,y,h.transactionIndex),w=c.filters[t](),b=await c.queryFilter(w,h.blockNumber,h.blockNumber),_=b.find(t=>t.transactionHash===e),M=h.logs.findIndex(t=>t.logIndex===_.logIndex),E=h.logs[M];h.cumulativeGasUsed=h.cumulativeGasUsed.toNumber();let A=new d({log_index:M,log_entry_data:Array.from(s.Log.fromObject(E).serialize()),receipt_index:v.txIndex,receipt_data:Array.from(s.Receipt.fromObject(h).serialize()),header_data:Array.from(v.header_rlp),proof:Array.from(v.receiptProof).map(a.rlp.encode).map(t=>Array.from(t))});return(0,u.serialize)(f,A)}async function m(t,e){let r=await Promise.all(e.transactions.map(async e=>await t.getTransactionReceipt(e.hash))),n=new o.Trie;if(r.forEach(t=>{let e=a.rlp.encode(t.transactionIndex);t.cumulativeGasUsed=t.cumulativeGasUsed.toNumber();let r=s.Receipt.fromObject(t).serialize();n.put(e,r)}),n.root.toString("hex")!==e.receiptsRoot.slice(2))throw Error("Failed to build receipts trie root.");return n}async function g(t,e,r){let n=e.findPath(a.rlp.encode(r)).stack.map(t=>({raw:t.raw()})),i=s.Header.fromRpc(t);return{header_rlp:i.serialize(),receiptProof:s.Proof.fromStack(n),txIndex:r}}async function y(t,e,r,n,i,o,s){let u=new l.ethers.Contract(o,s,i),d=h.default.encode((0,a.toBuffer)(await u.blockHashes(r))),f=await n.lightClientProof({type:c.IdType.Receipt,receipt_id:t,receiver_id:e,light_client_head:d});return f}e.findEthProof=p,e.findNearProof=y},58180:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.buildIndexerTxQuery=e.findNearProof=e.findEthProof=e.nearOnEthSyncHeight=e.ethOnNearSyncHeight=e.borshifyOutcomeProof=e.findFinalizationTxOnNear=e.findFinalizationTxOnEthereum=e.aurora=e.nep141=e.erc20=e.urlParams=void 0,e.urlParams=o(r(75533)),e.erc20=o(r(67558)),e.nep141=o(r(31325)),e.aurora=o(r(22326));var s=r(92001);Object.defineProperty(e,"findFinalizationTxOnEthereum",{enumerable:!0,get:function(){return s.findFinalizationTxOnEthereum}}),Object.defineProperty(e,"findFinalizationTxOnNear",{enumerable:!0,get:function(){return s.findFinalizationTxOnNear}});var a=r(70958);Object.defineProperty(e,"borshifyOutcomeProof",{enumerable:!0,get:function(){return a.borshifyOutcomeProof}});var u=r(60474);Object.defineProperty(e,"ethOnNearSyncHeight",{enumerable:!0,get:function(){return u.ethOnNearSyncHeight}});var c=r(11145);Object.defineProperty(e,"nearOnEthSyncHeight",{enumerable:!0,get:function(){return c.nearOnEthSyncHeight}});var l=r(49579);Object.defineProperty(e,"findEthProof",{enumerable:!0,get:function(){return l.findEthProof}}),Object.defineProperty(e,"findNearProof",{enumerable:!0,get:function(){return l.findNearProof}});var h=r(88346);Object.defineProperty(e,"buildIndexerTxQuery",{enumerable:!0,get:function(){return h.buildIndexerTxQuery}})},88346:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildIndexerTxQuery=void 0,e.buildIndexerTxQuery=function({fromBlock:t,toBlock:e,predecessorAccountId:r,receiverAccountId:n}){let i=/^(([a-z\d]+[-_])*[a-z\d]+\.)*([a-z\d]+[-_])*[a-z\d]+$/;if(!i.test(r))throw Error(`Invalid predecessor_account_id format: ${r}`);if(!i.test(n))throw Error(`Invalid receiver_account_id format: ${n}`);if(!/^[\d]*$/.test(t))throw Error(`Invalid fromBlock format: ${t}`);if(!/^((latest)|[\d]*)$/.test(e))throw Error(`Invalid toBlock format: ${e}`);return`SELECT public.receipts.originated_from_transaction_hash, public.action_receipt_actions.args
    FROM public.receipts
    JOIN public.action_receipt_actions
    ON public.action_receipt_actions.receipt_id = public.receipts.receipt_id
    WHERE (predecessor_account_id = '${r}'
      AND receiver_account_id = '${n}'
      AND included_in_block_timestamp > ${t}
      ${"latest"!==e?"AND included_in_block_timestamp < "+e:""}
    )`}},11145:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nearOnEthSyncHeight=void 0;let n=r(20548);async function i(t,e,r){let i=new n.ethers.Contract(e,r,t),{currentHeight:o}=await i.bridgeState();return Number(o)}e.nearOnEthSyncHeight=i},31325:function(t,e,r){"use strict";var n=r(48764).Buffer;async function i({nep141Address:t,nearProvider:e}){let r=await e.query({request_type:"call_function",account_id:t,method_name:"ft_metadata",args_base64:"",finality:"optimistic"});return JSON.parse(n.from(r.result).toString())}async function o({nep141Address:t,owner:e,nearProvider:r}){let i=await r.query({request_type:"call_function",account_id:t,method_name:"ft_balance_of",args_base64:n.from(JSON.stringify({account_id:e})).toString("base64"),finality:"optimistic"});return JSON.parse(n.from(i.result).toString())}Object.defineProperty(e,"__esModule",{value:!0}),e.getBalance=e.getMetadata=void 0,e.getMetadata=i,e.getBalance=o},75533:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clear=e.set=e.get=void 0,e.get=function(...t){let e=new URLSearchParams(window.location.search);return 0===t.length?Object.fromEntries(e.entries()):1===t.length?e.get(t[0]):t.reduce((t,r)=>({...t,[r]:e.get(r)}),{})},e.set=function(t){let e=new URLSearchParams(window.location.search);for(let r in t)e.set(r,t[r]);window.history.replaceState({},"",`${location.pathname}?${e.toString()}`)},e.clear=function(...t){if(0===t.length)window.history.replaceState({},"",location.pathname);else{let e=new URLSearchParams(window.location.search);t.forEach(t=>e.delete(t)),e.toString()?window.history.replaceState({},"",`${location.pathname}?${e.toString()}`):window.history.replaceState({},"",location.pathname)}}},23059:function(t,e,r){"use strict";var n,i,o,s=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionLastResult=e.Provider=e.IdType=e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,(n=e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})).Unknown="Unknown",n.Pending="Pending",n.Failure="Failure",(i=e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={})).NotStarted="NotStarted",i.Started="Started",i.Failure="Failure",(o=e.IdType||(e.IdType={})).Transaction="transaction",o.Receipt="receipt";class a{}e.Provider=a,e.getTransactionLastResult=function(t){if("object"==typeof t.status&&"string"==typeof t.status.SuccessValue){let e=s.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch(t){return e}}return null}},25091:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25532);Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return n.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return n.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return n.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return n.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return n.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return n.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return n.BinaryReader}})},93776:function(t,e,r){var n;!function(i){"use strict";/*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   */var o,s,a,u="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",l="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},d=!0,f="[DecimalError] ",p=f+"Invalid argument: ",m=f+"Precision limit exceeded",g=f+"crypto unavailable",y="[object Decimal]",v=Math.floor,w=Math.pow,b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,_=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,M=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,E=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,A=c.length-1,S=l.length-1,I={toStringTag:y};function T(t){var e,r,n,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)(r=7-(n=t[e]+"").length)&&(o+=K(r)),o+=n;(r=7-(n=(s=t[e])+"").length)&&(o+=K(r))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function k(t,e,r){if(t!==~~t||t<e||t>r)throw Error(p+t)}function N(t,e,r,n){var i,o,s,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=7,i=0):(i=Math.ceil((e+1)/7),e%=7),o=w(10,7-e),a=t[i]%o|0,null==n?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),s=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):s=(r<4&&a+1==o||r>3&&a+1==o/2)&&(t[i+1]/o/100|0)==w(10,e-2)-1||(a==o/2||0==a)&&(t[i+1]/o/100|0)==0:e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),s=(n||r<4)&&9999==a||!n&&r>3&&4999==a):s=((n||r<4)&&a+1==o||!n&&r>3&&a+1==o/2)&&(t[i+1]/o/1e3|0)==w(10,e-3)-1,s}function x(t,e,r){for(var n,i,o=[0],s=0,a=t.length;s<a;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=u.indexOf(t.charAt(s++)),n=0;n<o.length;n++)o[n]>r-1&&(void 0===o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}I.absoluteValue=I.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),O(t)},I.ceil=function(){return O(new this.constructor(this),this.e+1,2)},I.clampedTo=I.clamp=function(t,e){var r=this.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(p+e);return 0>this.cmp(t)?t:this.cmp(e)>0?e:new r(this)},I.comparedTo=I.cmp=function(t){var e,r,n,i,o=this.d,s=(t=new this.constructor(t)).d,a=this.s,u=t.s;if(!o||!s)return a&&u?a!==u?a:o===s?0:!o^a<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?a:s[0]?-u:0;if(a!==u)return a;if(this.e!==t.e)return this.e>t.e^a<0?1:-1;for(e=0,r=(n=o.length)<(i=s.length)?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^a<0?1:-1;return n===i?0:n>i^a<0?1:-1},I.cosine=I.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(t,e){var r,n,i;if(e.isZero())return e;(n=e.d.length)<32?i=(1/W(4,r=Math.ceil(n/3))).toString():(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=z(t,1,e.times(i),new t(1));for(var o=r;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}(n,V(n,r)),n.precision=t,n.rounding=e,O(2==a||3==a?r.neg():r,t,e,!0)):new n(1):new n(NaN)},I.cubeRoot=I.cbrt=function(){var t,e,r,n,i,o,s,a,u,c,l=this.constructor;if(!this.isFinite()||this.isZero())return new l(this);for(d=!1,(o=this.s*w(this.s*this,1/3))&&Math.abs(o)!=1/0?n=new l(o.toString()):(r=T(this.d),(o=((t=this.e)-r.length+1)%3)&&(r+=1==o||-2==o?"0":"00"),o=w(r,1/3),t=v((t+1)/3)-(t%3==(t<0?-1:2)),(n=new l(r=o==1/0?"5e"+t:(r=o.toExponential()).slice(0,r.indexOf("e")+1)+t)).s=this.s),s=(t=l.precision)+3;;)if(n=P((c=(u=(a=n).times(a).times(a)).plus(this)).plus(this).times(a),c.plus(u),s+2,1),T(a.d).slice(0,s)===(r=T(n.d)).slice(0,s)){if("9999"!=(r=r.slice(s-3,s+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(O(n,t+1,1),e=!n.times(n).times(n).eq(this));break}if(!i&&(O(a,t+1,0),a.times(a).times(a).eq(this))){n=a;break}s+=4,i=1}return d=!0,O(n,t,l.rounding,e)},I.decimalPlaces=I.dp=function(){var t,e=this.d,r=NaN;if(e){if(r=((t=e.length-1)-v(this.e/7))*7,t=e[t])for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r},I.dividedBy=I.div=function(t){return P(this,new this.constructor(t))},I.dividedToIntegerBy=I.divToInt=function(t){var e=this.constructor;return O(P(this,new e(t),0,1,1),e.precision,e.rounding)},I.equals=I.eq=function(t){return 0===this.cmp(t)},I.floor=function(){return O(new this.constructor(this),this.e+1,3)},I.greaterThan=I.gt=function(t){return this.cmp(t)>0},I.greaterThanOrEqualTo=I.gte=function(t){var e=this.cmp(t);return 1==e||0===e},I.hyperbolicCosine=I.cosh=function(){var t,e,r,n,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;r=s.precision,n=s.rounding,s.precision=r+Math.max(o.e,o.sd())+4,s.rounding=1,(i=o.d.length)<32?e=(1/W(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=z(s,1,o.times(e),new s(1),!0);for(var u,c=t,l=new s(8);c--;)u=o.times(o),o=a.minus(u.times(l.minus(u.times(l))));return O(o,s.precision=r,s.rounding=n,!0)},I.hyperbolicSine=I.sinh=function(){var t,e,r,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,r=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(n=i.d.length)<3)i=z(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(n))>16?16:0|t,i=z(o,2,i=i.times(1/W(5,t)),i,!0);for(var s,a=new o(5),u=new o(16),c=new o(20);t--;)s=i.times(i),i=i.times(a.plus(s.times(u.times(s).plus(c))))}return o.precision=e,o.rounding=r,O(i,e,r,!0)},I.hyperbolicTangent=I.tanh=function(){var t,e,r=this.constructor;return this.isFinite()?this.isZero()?new r(this):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,P(this.sinh(),this.cosh(),r.precision=t,r.rounding=e)):new r(this.s)},I.inverseCosine=I.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,o=r.rounding;return -1!==n?0===n?e.isNeg()?B(r,i,o):new r(0):new r(NaN):e.isZero()?B(r,i+4,o).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=B(r,i+4,o).times(.5),r.precision=i,r.rounding=o,t.minus(e))},I.inverseHyperbolicCosine=I.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,d=!1,r=r.times(r).minus(1).sqrt().plus(r),d=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)},I.inverseHyperbolicSine=I.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,d=!1,r=r.times(r).plus(1).sqrt().plus(r),d=!0,n.precision=t,n.rounding=e,r.ln())},I.inverseHyperbolicTangent=I.atanh=function(){var t,e,r,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,Math.max(n=i.sd(),t)<-(2*i.e)-1)?O(new o(i),t,e,!0):(o.precision=r=n-i.e,i=P(i.plus(1),new o(1).minus(i),r+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5)):new o(NaN)},I.inverseSine=I.asin=function(){var t,e,r,n,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),r=o.precision,n=o.rounding,-1!==e)?0===e?((t=B(o,r+4,n).times(.5)).s=i.s,t):new o(NaN):(o.precision=r+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=n,i.times(2))},I.inverseTangent=I.atan=function(){var t,e,r,n,i,o,s,a,u,c=this,l=c.constructor,h=l.precision,f=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=S)return(s=B(l,h+4,f).times(.25)).s=c.s,s}else{if(!c.s)return new l(NaN);if(h+4<=S)return(s=B(l,h+4,f).times(.5)).s=c.s,s}for(l.precision=a=h+10,l.rounding=1,t=r=Math.min(28,a/7+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(d=!1,e=Math.ceil(a/7),n=1,u=c.times(c),s=new l(c),i=c;-1!==t;)if(i=i.times(u),o=s.minus(i.div(n+=2)),i=i.times(u),void 0!==(s=o.plus(i.div(n+=2))).d[e])for(t=e;s.d[t]===o.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),d=!0,O(s,l.precision=h,l.rounding=f,!0)},I.isFinite=function(){return!!this.d},I.isInteger=I.isInt=function(){return!!this.d&&v(this.e/7)>this.d.length-2},I.isNaN=function(){return!this.s},I.isNegative=I.isNeg=function(){return this.s<0},I.isPositive=I.isPos=function(){return this.s>0},I.isZero=function(){return!!this.d&&0===this.d[0]},I.lessThan=I.lt=function(t){return 0>this.cmp(t)},I.lessThanOrEqualTo=I.lte=function(t){return 1>this.cmp(t)},I.logarithm=I.log=function(t){var e,r,n,i,o,s,a,u=this.constructor,c=u.precision,l=u.rounding;if(null==t)t=new u(10),e=!0;else{if(r=(t=new u(t)).d,t.s<0||!r||!r[0]||t.eq(1))return new u(NaN);e=t.eq(10)}if(r=this.d,this.s<0||!r||!r[0]||this.eq(1))return new u(r&&!r[0]?-1/0:1!=this.s?NaN:r?0:1/0);if(e){if(r.length>1)i=!0;else{for(n=r[0];n%10==0;)n/=10;i=1!==n}}if(d=!1,N((a=P(q(this,s=c+5),e?L(u,s+10):q(t,s),s,1)).d,n=c,l))do if(s+=10,a=P(q(this,s),e?L(u,s+10):q(t,s),s,1),!i){+T(a.d).slice(n+1,n+15)+1==1e14&&(a=O(a,c+1,0));break}while(N(a.d,n+=10,l));return d=!0,O(a,c,l)},I.minus=I.sub=function(t){var e,r,n,i,o,s,a,u,c,l,h,f,p=this.constructor;if(t=new p(t),!this.d||!t.d)return this.s&&t.s?this.d?t.s=-t.s:t=new p(t.d||this.s!==t.s?this:NaN):t=new p(NaN),t;if(this.s!=t.s)return t.s=-t.s,this.plus(t);if(c=this.d,f=t.d,a=p.precision,u=p.rounding,!c[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!c[0])return new p(3===u?-0:0);t=new p(this)}return d?O(t,a,u):t}if(r=v(t.e/7),l=v(this.e/7),c=c.slice(),o=l-r){for((h=o<0)?(e=c,o=-o,s=f.length):(e=f,r=l,s=c.length),o>(n=Math.max(Math.ceil(a/7),s)+2)&&(o=n,e.length=1),e.reverse(),n=o;n--;)e.push(0);e.reverse()}else{for((h=(n=c.length)<(s=f.length))&&(s=n),n=0;n<s;n++)if(c[n]!=f[n]){h=c[n]<f[n];break}o=0}for(h&&(e=c,c=f,f=e,t.s=-t.s),s=c.length,n=f.length-s;n>0;--n)c[s++]=0;for(n=f.length;n>o;){if(c[--n]<f[n]){for(i=n;i&&0===c[--i];)c[i]=1e7-1;--c[i],c[n]+=1e7}c[n]-=f[n]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=R(c,r),d?O(t,a,u):t):new p(3===u?-0:0)},I.modulo=I.mod=function(t){var e,r=this.constructor;return(t=new r(t),this.d&&t.s&&(!t.d||t.d[0]))?t.d&&(!this.d||this.d[0])?(d=!1,9==r.modulo?(e=P(this,t.abs(),0,3,1),e.s*=t.s):e=P(this,t,0,r.modulo,1),e=e.times(t),d=!0,this.minus(e)):O(new r(this),r.precision,r.rounding):new r(NaN)},I.naturalExponential=I.exp=function(){return H(this)},I.naturalLogarithm=I.ln=function(){return q(this)},I.negated=I.neg=function(){var t=new this.constructor(this);return t.s=-t.s,O(t)},I.plus=I.add=function(t){var e,r,n,i,o,s,a,u,c,l,h=this.constructor;if(t=new h(t),!this.d||!t.d)return this.s&&t.s?this.d||(t=new h(t.d||this.s===t.s?this:NaN)):t=new h(NaN),t;if(this.s!=t.s)return t.s=-t.s,this.minus(t);if(c=this.d,l=t.d,a=h.precision,u=h.rounding,!c[0]||!l[0])return l[0]||(t=new h(this)),d?O(t,a,u):t;if(o=v(this.e/7),n=v(t.e/7),c=c.slice(),i=o-n){for(i<0?(r=c,i=-i,s=l.length):(r=l,n=o,s=c.length),i>(s=(o=Math.ceil(a/7))>s?o+1:s+1)&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((s=c.length)-(i=l.length)<0&&(i=s,r=l,l=c,c=r),e=0;i;)e=(c[--i]=c[i]+l[i]+e)/1e7|0,c[i]%=1e7;for(e&&(c.unshift(e),++n),s=c.length;0==c[--s];)c.pop();return t.d=c,t.e=R(c,n),d?O(t,a,u):t},I.precision=I.sd=function(t){var e;if(void 0!==t&&!!t!==t&&1!==t&&0!==t)throw Error(p+t);return this.d?(e=D(this.d),t&&this.e+1>e&&(e=this.e+1)):e=NaN,e},I.round=function(){var t=this.constructor;return O(new t(this),this.e+1,t.rounding)},I.sine=I.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:z(t,2,e,e);r=(r=1.4*Math.sqrt(n))>16?16:0|r,e=z(t,2,e=e.times(1/W(5,r)),e);for(var i,o=new t(5),s=new t(16),a=new t(20);r--;)i=e.times(e),e=e.times(o.plus(i.times(s.times(i).minus(a))));return e}(n,V(n,r)),n.precision=t,n.rounding=e,O(a>2?r.neg():r,t,e,!0)):new n(NaN)},I.squareRoot=I.sqrt=function(){var t,e,r,n,i,o,s=this.d,a=this.e,u=this.s,c=this.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?this:1/0);for(d=!1,0==(u=Math.sqrt(+this))||u==1/0?(((e=T(s)).length+a)%2==0&&(e+="0"),u=Math.sqrt(e),a=v((a+1)/2)-(a<0||a%2),n=new c(e=u==1/0?"5e"+a:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+a)):n=new c(u.toString()),r=(a=c.precision)+3;;)if(n=(o=n).plus(P(this,o,r+2,1)).times(.5),T(o.d).slice(0,r)===(e=T(n.d)).slice(0,r)){if("9999"!=(e=e.slice(r-3,r+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(O(n,a+1,1),t=!n.times(n).eq(this));break}if(!i&&(O(o,a+1,0),o.times(o).eq(this))){n=o;break}r+=4,i=1}return d=!0,O(n,a,c.rounding,t)},I.tangent=I.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,(r=r.sin()).s=1,r=P(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,O(2==a||4==a?r.neg():r,t,e,!0)):new n(NaN)},I.times=I.mul=function(t){var e,r,n,i,o,s,a,u,c,l=this.constructor,h=this.d,f=(t=new l(t)).d;if(t.s*=this.s,!h||!h[0]||!f||!f[0])return new l(t.s&&(!h||h[0]||f)&&(!f||f[0]||h)?h&&f?0*t.s:t.s/0:NaN);for(r=v(this.e/7)+v(t.e/7),(u=h.length)<(c=f.length)&&(o=h,h=f,f=o,s=u,u=c,c=s),o=[],n=s=u+c;n--;)o.push(0);for(n=c;--n>=0;){for(e=0,i=u+n;i>n;)a=o[i]+f[n]*h[i-n-1]+e,o[i--]=a%1e7|0,e=a/1e7|0;o[i]=(o[i]+e)%1e7|0}for(;!o[--s];)o.pop();return e?++r:o.shift(),t.d=o,t.e=R(o,r),d?O(t,l.precision,l.rounding):t},I.toBinary=function(t,e){return Z(this,2,t,e)},I.toDecimalPlaces=I.toDP=function(t,e){var r=this,n=r.constructor;return(r=new n(r),void 0===t)?r:(k(t,0,1e9),void 0===e?e=n.rounding:k(e,0,8),O(r,t+r.e+1,e))},I.toExponential=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=C(n,!0):(k(t,0,1e9),void 0===e?e=i.rounding:k(e,0,8),r=C(n=O(new i(n),t+1,e),!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r},I.toFixed=function(t,e){var r,n,i=this.constructor;return void 0===t?r=C(this):(k(t,0,1e9),void 0===e?e=i.rounding:k(e,0,8),r=C(n=O(new i(this),t+this.e+1,e),!1,t+n.e+1)),this.isNeg()&&!this.isZero()?"-"+r:r},I.toFraction=function(t){var e,r,n,i,o,s,a,u,c,l,h,f,m=this.d,g=this.constructor;if(!m)return new g(this);if(c=r=new g(1),n=u=new g(0),s=(o=(e=new g(n)).e=D(m)-this.e-1)%7,e.d[0]=w(10,s<0?7+s:s),null==t)t=o>0?e:c;else{if(!(a=new g(t)).isInt()||a.lt(c))throw Error(p+a);t=a.gt(e)?o>0?e:c:a}for(d=!1,a=new g(T(m)),l=g.precision,g.precision=o=14*m.length;h=P(a,e,0,1,1),1!=(i=r.plus(h.times(n))).cmp(t);)r=n,n=i,i=c,c=u.plus(h.times(i)),u=i,i=e,e=a.minus(h.times(i)),a=i;return i=P(t.minus(r),n,0,1,1),u=u.plus(i.times(c)),r=r.plus(i.times(n)),u.s=c.s=this.s,f=1>P(c,n,o,1).minus(this).abs().cmp(P(u,r,o,1).minus(this).abs())?[c,n]:[u,r],g.precision=l,d=!0,f},I.toHexadecimal=I.toHex=function(t,e){return Z(this,16,t,e)},I.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),null==t){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),void 0===e?e=n.rounding:k(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(d=!1,r=P(r,t,0,e,1).times(t),d=!0,O(r)):(t.s=r.s,r=t),r},I.toNumber=function(){return+this},I.toOctal=function(t,e){return Z(this,8,t,e)},I.toPower=I.pow=function(t){var e,r,n,i,o,s,a=this,u=a.constructor,c=+(t=new u(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new u(w(+a,c));if((a=new u(a)).eq(1))return a;if(n=u.precision,o=u.rounding,t.eq(1))return O(a,n,o);if((e=v(t.e/7))>=t.d.length-1&&(r=c<0?-c:c)<=9007199254740991)return i=F(u,a,r,n),t.s<0?new u(1).div(i):O(i,n,o);if((s=a.s)<0){if(e<t.d.length-1)return new u(NaN);if((1&t.d[e])==0&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(e=0!=(r=w(+a,c))&&isFinite(r)?new u(r+"").e:v(c*(Math.log("0."+T(a.d))/Math.LN10+a.e+1)))>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(d=!1,u.rounding=a.s=1,r=Math.min(12,(e+"").length),(i=H(t.times(q(a,n+r)),n)).d&&N((i=O(i,n+5,1)).d,n,o)&&(e=n+10,+T((i=O(H(t.times(q(a,e+r)),e),e+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=O(i,n+1,0))),i.s=s,d=!0,u.rounding=o,O(i,n,o))},I.toPrecision=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=C(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(k(t,1,1e9),void 0===e?e=i.rounding:k(e,0,8),r=C(n=O(new i(n),t,e),t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r},I.toSignificantDigits=I.toSD=function(t,e){var r=this.constructor;return void 0===t?(t=r.precision,e=r.rounding):(k(t,1,1e9),void 0===e?e=r.rounding:k(e,0,8)),O(new r(this),t,e)},I.toString=function(){var t=this.constructor,e=C(this,this.e<=t.toExpNeg||this.e>=t.toExpPos);return this.isNeg()&&!this.isZero()?"-"+e:e},I.truncated=I.trunc=function(){return O(new this.constructor(this),this.e+1,1)},I.valueOf=I.toJSON=function(){var t=this.constructor,e=C(this,this.e<=t.toExpNeg||this.e>=t.toExpPos);return this.isNeg()?"-"+e:e};var P=function(){function t(t,e,r){var n,i=0,o=t.length;for(t=t.slice();o--;)n=t[o]*e+i,t[o]=n%r|0,i=n/r|0;return i&&t.unshift(i),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;)t.shift()}return function(n,i,o,a,u,c){var l,h,d,f,p,m,g,y,w,b,_,M,E,A,S,I,T,k,N,x,P=n.constructor,C=n.s==i.s?1:-1,R=n.d,L=i.d;if(!R||!R[0]||!L||!L[0])return new P(n.s&&i.s&&(R?!L||R[0]!=L[0]:L)?R&&0==R[0]||!L?0*C:C/0:NaN);for(c?(p=1,h=n.e-i.e):(c=1e7,p=7,h=v(n.e/p)-v(i.e/p)),N=L.length,T=R.length,b=(w=new P(C)).d=[],d=0;L[d]==(R[d]||0);d++);if(L[d]>(R[d]||0)&&h--,null==o?(A=o=P.precision,a=P.rounding):A=u?o+(n.e-i.e)+1:o,A<0)b.push(1),m=!0;else{if(A=A/p+2|0,d=0,1==N){for(f=0,L=L[0],A++;(d<T||f)&&A--;d++)S=f*c+(R[d]||0),b[d]=S/L|0,f=S%L|0;m=f||d<T}else{for((f=c/(L[0]+1)|0)>1&&(L=t(L,f,c),R=t(R,f,c),N=L.length,T=R.length),I=N,M=(_=R.slice(0,N)).length;M<N;)_[M++]=0;(x=L.slice()).unshift(0),k=L[0],L[1]>=c/2&&++k;do f=0,(l=e(L,_,N,M))<0?(E=_[0],N!=M&&(E=E*c+(_[1]||0)),(f=E/k|0)>1?(f>=c&&(f=c-1),y=(g=t(L,f,c)).length,M=_.length,1==(l=e(g,_,y,M))&&(f--,r(g,N<y?x:L,y,c))):(0==f&&(l=f=1),g=L.slice()),(y=g.length)<M&&g.unshift(0),r(_,g,M,c),-1==l&&(M=_.length,(l=e(L,_,N,M))<1&&(f++,r(_,N<M?x:L,M,c))),M=_.length):0===l&&(f++,_=[0]),b[d++]=f,l&&_[0]?_[M++]=R[I]||0:(_=[R[I]],M=1);while((I++<T||void 0!==_[0])&&A--);m=void 0!==_[0]}b[0]||b.shift()}if(1==p)w.e=h,s=m;else{for(d=1,f=b[0];f>=10;f/=10)d++;w.e=d+h*p-1,O(w,u?o+w.e+1:o,a,m)}return w}}();function O(t,e,r,n){var i,o,s,a,u,c,l,h,f,p=t.constructor;t:if(null!=e){if(!(h=t.d))return t;for(i=1,a=h[0];a>=10;a/=10)i++;if((o=e-i)<0)o+=7,s=e,u=(l=h[f=0])/w(10,i-s-1)%10|0;else if((f=Math.ceil((o+1)/7))>=(a=h.length)){if(n){for(;a++<=f;)h.push(0);l=u=0,i=1,o%=7,s=o-7+1}else break t}else{for(i=1,l=a=h[f];a>=10;a/=10)i++;o%=7,u=(s=o-7+i)<0?0:l/w(10,i-s-1)%10|0}if(n=n||e<0||void 0!==h[f+1]||(s<0?l:l%w(10,i-s-1)),c=r<4?(u||n)&&(0==r||r==(t.s<0?3:2)):u>5||5==u&&(4==r||n||6==r&&(o>0?s>0?l/w(10,i-s):0:h[f-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,c?(e-=t.e+1,h[0]=w(10,(7-e%7)%7),t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=f,a=1,f--):(h.length=f+1,a=w(10,7-o),h[f]=s>0?(l/w(10,i-s)%w(10,s)|0)*a:0),c)for(;;){if(0==f){for(o=1,s=h[0];s>=10;s/=10)o++;for(s=h[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(t.e++,1e7==h[0]&&(h[0]=1));break}if(h[f]+=a,1e7!=h[f])break;h[f--]=0,a=1}for(o=h.length;0===h[--o];)h.pop()}return d&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function C(t,e,r){if(!t.isFinite())return $(t);var n,i=t.e,o=T(t.d),s=o.length;return e?(r&&(n=r-s)>0?o=o.charAt(0)+"."+o.slice(1)+K(n):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+K(-i-1)+o,r&&(n=r-s)>0&&(o+=K(n))):i>=s?(o+=K(i+1-s),r&&(n=r-i-1)>0&&(o=o+"."+K(n))):((n=i+1)<s&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(o+="."),o+=K(n))),o}function R(t,e){var r=t[0];for(e*=7;r>=10;r/=10)e++;return e}function L(t,e,r){if(e>A)throw d=!0,r&&(t.precision=r),Error(m);return O(new t(c),e,1,!0)}function B(t,e,r){if(e>S)throw Error(m);return O(new t(l),e,r,!0)}function D(t){var e=t.length-1,r=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function K(t){for(var e="";t--;)e+="0";return e}function F(t,e,r,n){var i,o=new t(1),s=Math.ceil(n/7+4);for(d=!1;;){if(r%2&&J((o=o.times(e)).d,s)&&(i=!0),0===(r=v(r/2))){r=o.d.length-1,i&&0===o.d[r]&&++o.d[r];break}J((e=e.times(e)).d,s)}return d=!0,o}function j(t){return 1&t.d[t.d.length-1]}function U(t,e,r){for(var n,i=new t(e[0]),o=0;++o<e.length;)if((n=new t(e[o])).s)i[r](n)&&(i=n);else{i=n;break}return i}function H(t,e){var r,n,i,o,s,a,u,c=0,l=0,h=0,f=t.constructor,p=f.rounding,m=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(null==e?(d=!1,u=m):u=e,a=new f(.03125);t.e>-2;)t=t.times(a),h+=5;for(u+=n=Math.log(w(2,h))/Math.LN10*2+5|0,r=o=s=new f(1),f.precision=u;;){if(o=O(o.times(t),u,1),r=r.times(++l),T((a=s.plus(P(o,r,u,1))).d).slice(0,u)===T(s.d).slice(0,u)){for(i=h;i--;)s=O(s.times(s),u,1);if(null!=e)return f.precision=m,s;if(!(c<3&&N(s.d,u-n,p,c)))return O(s,f.precision=m,p,d=!0);f.precision=u+=10,r=o=a=new f(1),l=0,c++}s=a}}function q(t,e){var r,n,i,o,s,a,u,c,l,h,f,p=1,m=t,g=m.d,y=m.constructor,v=y.rounding,w=y.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new y(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==e?(d=!1,l=w):l=e,y.precision=l+=10,n=(r=T(g)).charAt(0),!(15e14>Math.abs(o=m.e)))return c=L(y,l+2,w).times(o+""),m=q(new y(n+"."+r.slice(1)),l-10).plus(c),y.precision=w,null==e?O(m,w,v,d=!0):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=T((m=m.times(t)).d)).charAt(0),p++;for(o=m.e,n>1?(m=new y("0."+r),o++):m=new y(n+"."+r.slice(1)),h=m,u=s=m=P(m.minus(1),m.plus(1),l,1),f=O(m.times(m),l,1),i=3;;){if(s=O(s.times(f),l,1),T((c=u.plus(P(s,new y(i),l,1))).d).slice(0,l)===T(u.d).slice(0,l)){if(u=u.times(2),0!==o&&(u=u.plus(L(y,l+2,w).times(o+""))),u=P(u,new y(p),l,1),null!=e)return y.precision=w,u;if(!N(u.d,l-10,v,a))return O(u,y.precision=w,v,d=!0);y.precision=l+=10,c=s=m=P(h.minus(1),h.plus(1),l,1),f=O(m.times(m),l,1),i=a=1}u=c,i+=2}}function $(t){return String(t.s*t.s/0)}function G(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;48===e.charCodeAt(n);n++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(n,i)){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=7;n<i;)t.d.push(+e.slice(n,n+=7));n=7-(e=e.slice(n)).length}else n-=i;for(;n--;)e+="0";t.d.push(+e),d&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function z(t,e,r,n,i){var o,s,a,u,c=t.precision,l=Math.ceil(c/7);for(d=!1,u=r.times(r),a=new t(n);;){if(s=P(a.times(u),new t(e++*e++),c,1),a=i?n.plus(s):n.minus(s),n=P(s.times(u),new t(e++*e++),c,1),void 0!==(s=a.plus(n)).d[l]){for(o=l;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=n,n=s,s=o}return d=!0,s.d.length=l+1,s}function W(t,e){for(var r=t;--e;)r*=t;return r}function V(t,e){var r,n=e.s<0,i=B(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return a=n?4:1,e;if((r=e.divToInt(i)).isZero())a=n?3:2;else{if((e=e.minus(r.times(i))).lte(o))return a=j(r)?n?2:3:n?4:1,e;a=j(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Z(t,e,r,n){var i,o,a,c,l,h,d,f,p,m=t.constructor,g=void 0!==r;if(g?(k(r,1,1e9),void 0===n?n=m.rounding:k(n,0,8)):(r=m.precision,n=m.rounding),t.isFinite()){for(a=(d=C(t)).indexOf("."),g?(i=2,16==e?r=4*r-3:8==e&&(r=3*r-2)):i=e,a>=0&&(d=d.replace(".",""),(p=new m(1)).e=d.length-a,p.d=x(C(p),10,i),p.e=p.d.length),o=l=(f=x(d,10,i)).length;0==f[--l];)f.pop();if(f[0]){if(a<0?o--:((t=new m(t)).d=f,t.e=o,f=(t=P(t,p,r,n,0,i)).d,o=t.e,h=s),a=f[r],c=i/2,h=h||void 0!==f[r+1],h=n<4?(void 0!==a||h)&&(0===n||n===(t.s<0?3:2)):a>c||a===c&&(4===n||h||6===n&&1&f[r-1]||n===(t.s<0?8:7)),f.length=r,h)for(;++f[--r]>i-1;)f[r]=0,r||(++o,f.unshift(1));for(l=f.length;!f[l-1];--l);for(a=0,d="";a<l;a++)d+=u.charAt(f[a]);if(g){if(l>1){if(16==e||8==e){for(a=16==e?4:3,--l;l%a;l++)d+="0";for(l=(f=x(d,i,e)).length;!f[l-1];--l);for(a=1,d="1.";a<l;a++)d+=u.charAt(f[a])}else d=d.charAt(0)+"."+d.slice(1)}d=d+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)d="0"+d;d="0."+d}else if(++o>l)for(o-=l;o--;)d+="0";else o<l&&(d=d.slice(0,o)+"."+d.slice(o))}else d=g?"0p+0":"0";d=(16==e?"0x":2==e?"0b":8==e?"0o":"")+d}else d=$(t);return t.s<0?"-"+d:d}function J(t,e){if(t.length>e)return t.length=e,!0}function X(t){return new this(t).abs()}function Y(t){return new this(t).acos()}function Q(t){return new this(t).acosh()}function tt(t,e){return new this(t).plus(e)}function te(t){return new this(t).asin()}function tr(t){return new this(t).asinh()}function tn(t){return new this(t).atan()}function ti(t){return new this(t).atanh()}function to(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,o=n+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(r=e.s<0?B(this,n,i):new this(0)).s=t.s:!t.d||e.isZero()?(r=B(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,r=this.atan(P(t,e,o,1)),e=B(this,o,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(P(t,e,o,1)):(r=B(this,o,1).times(e.s>0?.25:.75)).s=t.s:r=new this(NaN),r}function ts(t){return new this(t).cbrt()}function ta(t){return O(t=new this(t),t.e+1,2)}function tu(t,e,r){return new this(t).clamp(e,r)}function tc(t){if(!t||"object"!=typeof t)throw Error(f+"Object expected");var e,r,n,i=!0===t.defaults,o=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(r=o[e],i&&(this[r]=h[r]),void 0!==(n=t[r])){if(v(n)===n&&n>=o[e+1]&&n<=o[e+2])this[r]=n;else throw Error(p+r+": "+n)}if(r="crypto",i&&(this[r]=h[r]),void 0!==(n=t[r])){if(!0===n||!1===n||0===n||1===n){if(n){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(g)}else this[r]=!1}else throw Error(p+r+": "+n)}return this}function tl(t){return new this(t).cos()}function th(t){return new this(t).cosh()}function td(t,e){return new this(t).div(e)}function tf(t){return new this(t).exp()}function tp(t){return O(t=new this(t),t.e+1,3)}function tm(){var t,e,r=new this(0);for(t=0,d=!1;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return d=!0,new this(1/0);r=e}return d=!0,r.sqrt()}function tg(t){return t instanceof o||t&&t.toStringTag===y||!1}function ty(t){return new this(t).ln()}function tv(t,e){return new this(t).log(e)}function tw(t){return new this(t).log(2)}function tb(t){return new this(t).log(10)}function t_(){return U(this,arguments,"lt")}function tM(){return U(this,arguments,"gt")}function tE(t,e){return new this(t).mod(e)}function tA(t,e){return new this(t).mul(e)}function tS(t,e){return new this(t).pow(e)}function tI(t){var e,r,n,i,o=0,s=new this(1),a=[];if(void 0===t?t=this.precision:k(t,1,1e9),n=Math.ceil(t/7),this.crypto){if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));o<n;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);o<n;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(i%1e7),o+=4);o=n/4}else throw Error(g)}else for(;o<n;)a[o++]=1e7*Math.random()|0;for(n=a[--o],t%=7,n&&t&&(i=w(10,7-t),a[o]=(n/i|0)*i);0===a[o];o--)a.pop();if(o<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=7)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<7&&(r-=7-n)}return s.e=r,s.d=a,s}function tT(t){return O(t=new this(t),t.e+1,this.rounding)}function tk(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function tN(t){return new this(t).sin()}function tx(t){return new this(t).sinh()}function tP(t){return new this(t).sqrt()}function tO(t,e){return new this(t).sub(e)}function tC(){var t=0,e=arguments,r=new this(e[t]);for(d=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return d=!0,O(r,this.precision,this.rounding)}function tR(t){return new this(t).tan()}function tL(t){return new this(t).tanh()}function tB(t){return O(t=new this(t),t.e+1,1)}(o=function t(e){var r,n,i;function s(t){var e,r,n;if(!(this instanceof s))return new s(t);if(this.constructor=s,tg(t)){this.s=t.s,d?!t.d||t.e>s.maxE?(this.e=NaN,this.d=null):t.e<s.minE?(this.e=0,this.d=[0]):(this.e=t.e,this.d=t.d.slice()):(this.e=t.e,this.d=t.d?t.d.slice():t.d);return}if("number"==(n=typeof t)){if(0===t){this.s=1/t<0?-1:1,this.e=0,this.d=[0];return}if(t<0?(t=-t,this.s=-1):this.s=1,t===~~t&&t<1e7){for(e=0,r=t;r>=10;r/=10)e++;d?e>s.maxE?(this.e=NaN,this.d=null):e<s.minE?(this.e=0,this.d=[0]):(this.e=e,this.d=[t]):(this.e=e,this.d=[t]);return}if(0*t!=0){t||(this.s=NaN),this.e=NaN,this.d=null;return}return G(this,t.toString())}if("string"!==n)throw Error(p+t);return 45===(r=t.charCodeAt(0))?(t=t.slice(1),this.s=-1):(43===r&&(t=t.slice(1)),this.s=1),E.test(t)?G(this,t):function(t,e){var r,n,i,s,a,u,c,l,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),E.test(e))return G(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(_.test(e))r=16,e=e.toLowerCase();else if(b.test(e))r=2;else if(M.test(e))r=8;else throw Error(p+e);for((s=e.search(/p/i))>0?(c=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),a=(s=e.indexOf("."))>=0,n=t.constructor,a&&(s=(u=(e=e.replace(".","")).length)-s,i=F(n,new n(r),s,2*s)),s=h=(l=x(e,r,1e7)).length-1;0===l[s];--s)l.pop();return s<0?new n(0*t.s):(t.e=R(l,h),t.d=l,d=!1,a&&(t=P(t,i,4*u)),c&&(t=t.times(54>Math.abs(c)?w(2,c):o.pow(2,c))),d=!0,t)}(this,t)}if(s.prototype=I,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=tc,s.clone=t,s.isDecimal=tg,s.abs=X,s.acos=Y,s.acosh=Q,s.add=tt,s.asin=te,s.asinh=tr,s.atan=tn,s.atanh=ti,s.atan2=to,s.cbrt=ts,s.ceil=ta,s.clamp=tu,s.cos=tl,s.cosh=th,s.div=td,s.exp=tf,s.floor=tp,s.hypot=tm,s.ln=ty,s.log=tv,s.log10=tb,s.log2=tw,s.max=t_,s.min=tM,s.mod=tE,s.mul=tA,s.pow=tS,s.random=tI,s.round=tT,s.sign=tk,s.sin=tN,s.sinh=tx,s.sqrt=tP,s.sub=tO,s.sum=tC,s.tan=tR,s.tanh=tL,s.trunc=tB,void 0===e&&(e={}),e&&!0!==e.defaults)for(r=0,i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];r<i.length;)e.hasOwnProperty(n=i[r++])||(e[n]=this[n]);return s.config(e),s}(h)).prototype.constructor=o,o.default=o.Decimal=o,c=new o(c),l=new o(l),void 0!==(n=(function(){return o}).call(e,r,e,t))&&(t.exports=n)}(0)},36699:function(t,e,r){let n=r(24544),i=r(37795),o=r(18815),s=r(60695),a=r(38126),u=r(72379);t.exports={Account:n,Header:i,Log:o,Proof:s,Receipt:a,Transaction:u}},24544:function(t,e,r){let{keccak:n,encode:i,decode:o,toBuffer:s}=r(9782),a=r(90386);class u extends a{static get fields(){return["nonce","balance","storageRoot","codeHash"]}static get NULL(){return new u([s(),s(),n(i()),n()])}constructor(t=u.NULL){super(u.fields,t)}static fromBuffer(t){return t?new u(o(t)):new u}static fromHex(t){return t?new u(o(t)):new u}static fromRaw(t){return new u(t)}static fromObject(t){return u.fromRpc(t)}static fromRpc(t){return t?new u([s(t.nonce),s(t.balance),s(t.storageHash||t.storageRoot||n(i())),s(t.codeHash||t.codeRoot||n())]):new u}}t.exports=u},90386:function(t,e,r){let{encode:n,toHex:i}=r(9782);class o extends Array{get buffer(){return n(this.raw)}constructor(t,e){super(...e),t.forEach((t,e)=>{Object.defineProperty(this,t,{value:this[e],writable:!1})}),Object.defineProperty(this,"fields",{value:t,writable:!1}),Object.defineProperty(this,"hex",{get:function(){return i(this.buffer)}}),Object.defineProperty(this,"raw",{get:function(){return this.fields.filter((t,e)=>void 0!==this[e]).map((t,e)=>this[e])}}),Object.defineProperty(this,"object",{get:function(){let t={};return this.fields.forEach((e,r)=>{this[r]instanceof Array?t[e]=this[r]:t[e]=i(this[r])}),t}}),Object.defineProperty(this,"json",{get:function(){return JSON.stringify(this.object)}})}serialize(){return this.buffer}toBuffer(){return this.buffer}toHex(){return this.hex}toObject(){return this.object}toString(){return this.json}toJson(){return this.json}}t.exports=o},37795:function(t,e,r){let{decode:n,toBuffer:i,KECCAK256_RLP_ARRAY:o,KECCAK256_NULL:s}=r(9782),a=r(90386);r(22751);let u=r(39447);class c extends a{static get fields(){return["parentHash","sha3Uncles","miner","stateRoot","transactionsRoot","receiptRoot","logsBloom","difficulty","number","gasLimit","gasUsed","timestamp","extraData","mixHash","nonce","baseFeePerGas","withdrawalsRoot"]}constructor(t=this.NULL){super(c.fields,t)}static fromBuffer(t){return t?new this(n(t)):new this}static fromHex(t){return t?new this(n(t)):new this}static fromRaw(t){return new this(t)}static fromObject(t){return this.fromRpc(t)}static fromRpc(t){if(!t)return new this;{let e=[i(t.parentHash),i(t.sha3Uncles)||o,i(t.miner),i(t.stateRoot)||s,i(t.transactionsRoot)||s,i(t.receiptsRoot)||i(t.receiptRoot)||s,i(t.logsBloom),i(t.difficulty),i(t.number),i(t.gasLimit),i(t.gasUsed),i(t.timestamp),i(t.extraData),i(t.mixHash),i(t.nonce)];return void 0!==t.baseFeePerGas&&null!==t.baseFeePerGas&&e.push(i(t.baseFeePerGas)),void 0!==t.withdrawalsRoot&&null!==t.withdrawalsRoot&&e.push(i(t.withdrawalsRoot)),new this(e)}}static fromWeb3(t){let e=Object.assign({},t);return e.difficulty=u.utils.toHex(e.difficulty),e.number=u.utils.toHex(e.number),e.gasLimit=u.utils.toHex(e.gasLimit),e.gasUsed=u.utils.toHex(e.gasUsed),e.timestamp=u.utils.toHex(e.timestamp),this.fromRpc(e)}}t.exports=c},18815:function(t,e,r){let{decode:n,toBuffer:i}=r(9782),o=r(90386);class s extends o{static get fields(){return["address","topics","data"]}constructor(t=s.NULL){super(s.fields,t)}static fromBuffer(t){return t?new s(n(t)):new s}static fromHex(t){return t?new s(n(t)):new s}static fromRaw(t){return new s(t)}static fromObject(t){return s.fromRpc(t)}static fromRpc(t){let e=[];for(var r=0;r<t.topics.length;r++)e.push(i(t.topics[r]));return new s([i(t.address),e,i(t.data)])}static fromWeb3(t){return this.fromRpc(t)}}t.exports=s},60695:function(t,e,r){let{keccak:n,encode:i,decode:o,toHex:s}=r(9782),a=r(90386);class u extends a{static get fields(){return["rootNode"]}static get NULL(){return new u([i()])}constructor(t=u.NULL){super(t.map(t=>s(n(i(t)))),t)}static fromBuffer(t){return t?new u(o(t)):new u}static fromHex(t){return t?new u(o(t)):new u}static fromRaw(t){return new u(t)}static fromObject(t){return u.fromRpc(t)}static fromRpc(t){if(t)return new u(t.map(t=>o(t)))}static fromStack(t){return new u(t.map(t=>t.raw))}}t.exports=u},38126:function(t,e,r){var n=r(48764).Buffer;let{decode:i,toBuffer:o}=r(9782),s=r(90386),a=r(18815),u=r(39447);class c extends s{static get fields(){return["postTransactionState","cumulativeGasUsed","bloomFilter","setOfLogs"]}get buffer(){let t=super.buffer;return"0x0"!==this.type&&0!==this.type&&(t=n.concat([o(this.type),t])),t}constructor(t=c.NULL){super(c.fields,t)}static fromBuffer(t){return t?new c(i(t)):new c}static fromHex(t){return t?new c(i(t)):new c}static fromRaw(t){return new c(t)}static fromObject(t){return c.fromRpc(t)}static fromRpc(t){let e=[];for(var r=0;r<t.logs.length;r++)e.push(a.fromRpc(t.logs[r]));let n=new c([o(t.status||t.root),o(t.cumulativeGasUsed),o(t.logsBloom),e]);return n.type=t.type,n}static fromWeb3(t){let e=Object.assign({},t);return e.cumulativeGasUsed=u.utils.toHex(e.cumulativeGasUsed),!0===t.status?e.status="0x1":!1===t.status&&(e.status="0x0"),this.fromRpc(e)}}t.exports=c},72379:function(t,e,r){let{decode:n,toBuffer:i}=r(9782),o=r(90386);class s extends o{static get fields(){return["nonce","gasPrice","gasLimit","to","value","data","v","r","s"]}constructor(t=s.NULL){super(s.fields,t)}static fromBuffer(t){return t?new s(n(t)):new s}static fromHex(t){return t?new s(n(t)):new s}static fromRaw(t){return new s(t)}static fromObject(t){return s.fromRpc(t)}static fromRpc(t){return new s([i(t.nonce),i(t.gasPrice),i(t.gas||t.gasLimit),i(t.to),i(t.value),i(t.input||t.data),i(t.v),i(t.r),i(t.s)])}}t.exports=s},9782:function(t,e,r){let n=r(91094).keccak256,i=r(22325),o=r(51675),s=r(89509).Buffer,a=s.from("1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","hex"),u=s.from("56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421","hex"),c=s.from("c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470","hex"),l=t=>"0x0"===t?o.encode(s.alloc(0)):o.encode(t),h=o.decode,d=t=>"0x0"===t?s.alloc(0):g(t),f=t=>{var e;return d((e=g(e=t),n.create().update(e).digest()))},p=t=>{var e;return t instanceof Array?p(l(t)):"0x"+g(t).toString("hex")},m=t=>{var e,r,n;return e=d(t),void 0===r&&(r=!1),n=s.allocUnsafe(32).fill(0),(e=g(e),r)?e.length<32?(e.copy(n),n):e.slice(0,32):e.length<32?(e.copy(n,32-e.length),n):e.slice(-32)};function g(t){if(!s.isBuffer(t)){if(Array.isArray(t))t=s.from(t);else if("string"==typeof t){var e,r,n;t="string"==typeof(e=t)&&e.match(/^0x[0-9A-Fa-f]*$/)&&(!r||e.length===2+2*r)?s.from(y("string"!=typeof(n=t)?n:!function(t){if("string"!=typeof t)throw Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}(n)?n:n.slice(2)),"hex"):s.from(t)}else if("number"==typeof t)t=new s(y(("0x"+t.toString(16)).slice(2)),"hex");else if(null==t)t=s.allocUnsafe(0);else if(i.isBN(t))t=t.toArrayLike(s);else if(t.toArray)t=s.from(t.toArray());else throw Error("invalid type")}return t}function y(t){var e=t;if("string"!=typeof e)throw Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof e+", while padToEven.");return e.length%2&&(e="0"+e),e}t.exports={keccak:f,encode:l,decode:h,toBuffer:d,toHex:p,toWord:m,mappingAt:(...t)=>(t[0]=m(t[0]),p(t.reduce((t,e)=>{let r=s.concat([m(e),t]);return f(r)}))),KECCAK256_RLP_ARRAY:a,KECCAK256_RLP_NULL:u,KECCAK256_NULL:c}},22325:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{c="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(44362).Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,a>=49?i+=a-49+10:a>=17?i+=a-17+10:i+=a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,s=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=a(t,e,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c,l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var c=h[t],f=d[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);r=(p=p.idivn(f)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==c),this.toArrayLike(c,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i,o,s=this.byteLength(),a=r||Math.max(1,s);n(s<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var u=new t(a),c=this.clone();if("le"===e){for(o=0;!c.isZero();o++)i=c.andln(255),c.iushrn(8),u[o]=i;for(;o<a;o++)u[o]=0}else{for(o=0;o<a-s;o++)u[o]=0;for(o=0;!c.isZero();o++)i=c.andln(255),c.iushrn(8),u[a-o-1]=i}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function m(t,e,r){return new g().mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=f),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):m(this,t,e)},g.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},g.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=(i/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r.strip(),i.strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=67108864%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(w,v),w.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(_,v),i(M,v),M.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(y[t])return y[t];if("k256"===t)e=new w;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else if("p25519"===t)e=new M;else throw Error("Unknown prime "+t);return y[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new A(t)},i(A,E),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},46877:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(339);function i(t){return!!("string"==typeof t&&/^(0x)?[0-9a-f]{512}$/i.test(t))&&!!(/^(0x)?[0-9a-f]{512}$/.test(t)||/^(0x)?[0-9A-F]{512}$/.test(t))}function o(t,e){"object"==typeof e&&e.constructor===Uint8Array&&(e=n.bytesToHex(e));let r=n.keccak256(e).replace("0x","");for(let e=0;e<12;e+=4){let n=(parseInt(r.substr(e,2),16)<<8)+parseInt(r.substr(e+2,2),16)&2047,i=function(t){if(t>=48&&t<=57)return t-48;if(t>=65&&t<=70)return t-55;if(t>=97&&t<=102)return t-87;throw Error("invalid bloom")}(t.charCodeAt(t.length-1-Math.floor(n/4))),o=1<<n%4;if((i&o)!==o)return!1}return!0}function s(t){return"string"==typeof t&&!!(/^(0x)?[0-9a-f]{64}$/i.test(t)&&(/^(0x)?[0-9a-f]{64}$/.test(t)||/^(0x)?[0-9A-F]{64}$/.test(t)))}function a(t){return"string"==typeof t&&!!(t.match(/^(0x)?[0-9a-fA-F]{40}$/)||t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/))}e.isBloom=i,e.isInBloom=o,e.isUserEthereumAddressInBloom=function(t,e){if(!i(t))throw Error("Invalid bloom given");if(!a(e))throw Error(`Invalid ethereum address given: "${e}"`);let r=n.padLeft(e,64);return o(t,r)},e.isContractAddressInBloom=function(t,e){if(!i(t))throw Error("Invalid bloom given");if(!a(e))throw Error(`Invalid contract address given: "${e}"`);return o(t,e)},e.isTopicInBloom=function(t,e){if(!i(t))throw Error("Invalid bloom given");if(!s(e))throw Error("Invalid topic");return o(t,e)},e.isTopic=s,e.isAddress=a},339:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let n=r(91094);function i(t){if(null==t)throw Error("cannot convert null value to array");if("string"==typeof t){let e=t.match(/^(0x)?[0-9a-fA-F]*$/);if(!e)throw Error("invalid hexidecimal string");if("0x"!==e[1])throw Error("hex string must have 0x prefix");(t=t.substring(2)).length%2&&(t="0"+t);let r=[];for(let e=0;e<t.length;e+=2)r.push(parseInt(t.substr(e,2),16));return o(new Uint8Array(r))}if(function(t){if(!t||parseInt(String(t.length))!=t.length||"string"==typeof t)return!1;for(let e=0;e<t.length;e++){let r=t[e];if(r<0||r>=256||parseInt(String(r))!=r)return!1}return!0}(t))return o(new Uint8Array(t));throw Error("invalid arrayify value")}function o(t){return void 0!==t.slice||(t.slice=()=>{let e=Array.prototype.slice.call(arguments);return o(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}e.keccak256=function(t){return"0x"+n.keccak_256(i(t))},e.padLeft=(t,e)=>{let r=/^0x/i.test(t)||"number"==typeof t;t=t.toString().replace(/^0x/i,"");let n=e-t.length+1>=0?e-t.length+1:0;return(r?"0x":"")+Array(n).join("0")+t},e.bytesToHex=function(t){let e=[];for(let r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return`0x${e.join("").replace(/^0+/,"")}`},e.toByteArray=i},82192:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keccak512=e.keccak384=e.keccak256=e.keccak224=void 0;let n=r(84589),i=r(58040);e.keccak224=(0,i.wrapHash)(n.keccak_224),e.keccak256=(()=>{let t=(0,i.wrapHash)(n.keccak_256);return t.create=n.keccak_256.create,t})(),e.keccak384=(0,i.wrapHash)(n.keccak_384),e.keccak512=(0,i.wrapHash)(n.keccak_512)},37270:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCurve=e.getHash=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n=r(45238),i=r(23037),o=r(70409);function s(t){return{hash:t,hmac:(e,...r)=>(0,n.hmac)(t,e,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}e.getHash=s,e.createCurve=function(t,e){let r=e=>(0,o.weierstrass)({...t,...s(e)});return Object.freeze({...r(e),create:r})}},46061:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateBasic=e.wNAF=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n=r(66998),i=r(4870),o=BigInt(0),s=BigInt(1);e.wNAF=function(t,e){let r=(t,e)=>{let r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,i=e;for(;r>o;)r&s&&(n=n.add(i)),i=i.double(),r>>=s;return n},precomputeWindow(t,e){let{windows:r,windowSize:i}=n(e),o=[],s=t,a=s;for(let t=0;t<r;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){let{windows:a,windowSize:u}=n(e),c=t.ZERO,l=t.BASE,h=BigInt(2**e-1),d=2**e,f=BigInt(e);for(let t=0;t<a;t++){let e=t*u,n=Number(o&h);o>>=f,n>u&&(n-=d,o+=s);let a=e+Math.abs(n)-1,p=t%2!=0,m=n<0;0===n?l=l.add(r(p,i[e])):c=c.add(r(m,i[a]))}return{p:c,f:l}},wNAFCached(t,e,r,n){let i=t._WINDOW_SIZE||1,o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,n(o))),this.wNAF(i,o,r)}}},e.validateBasic=function(t){return(0,n.validateField)(t.Fp),(0,i.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}},31315:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createHasher=e.isogenyMap=e.hash_to_field=e.expand_message_xof=e.expand_message_xmd=void 0;let n=r(66998),i=r(4870),o=i.bytesToNumberBE;function s(t,e){if(t<0||t>=1<<8*e)throw Error(`bad I2OSP call: value=${t} length=${e}`);let r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=255&t,t>>>=8;return new Uint8Array(r)}function a(t){if(!(t instanceof Uint8Array))throw Error("Uint8Array expected")}function u(t){if(!Number.isSafeInteger(t))throw Error("number expected")}function c(t,e,r,n){a(t),a(e),u(r),e.length>255&&(e=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:o,blockLen:c}=n,l=Math.ceil(r/o);if(l>255)throw Error("Invalid xmd length");let h=(0,i.concatBytes)(e,s(e.length,1)),d=s(0,c),f=s(r,2),p=Array(l),m=n((0,i.concatBytes)(d,t,f,s(0,1),h));p[0]=n((0,i.concatBytes)(m,s(1,1),h));for(let t=1;t<=l;t++){let e=[function(t,e){let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}(m,p[t-1]),s(t+1,1),h];p[t]=n((0,i.concatBytes)(...e))}let g=(0,i.concatBytes)(...p);return g.slice(0,r)}function l(t,e,r,n,o){if(a(t),a(e),u(r),e.length>255&&(e=o.create({dkLen:Math.ceil(2*n/8)}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()),r>65535||e.length>255)throw Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(t).update(s(r,2)).update(e).update(s(e.length,1)).digest()}function h(t,e,r){let s;(0,i.validateObject)(r,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:h,k:d,m:f,hash:p,expand:m,DST:g}=r;a(t),u(e);let y=function(t){if(t instanceof Uint8Array)return t;if("string"==typeof t)return(0,i.utf8ToBytes)(t);throw Error("DST must be Uint8Array or string")}(g),v=h.toString(2).length,w=Math.ceil((v+d)/8),b=e*f*w;if("xmd"===m)s=c(t,y,b,p);else if("xof"===m)s=l(t,y,b,d,p);else if("_internal_pass"===m)s=t;else throw Error('expand must be "xmd" or "xof"');let _=Array(e);for(let t=0;t<e;t++){let e=Array(f);for(let r=0;r<f;r++){let i=w*(r+t*f),a=s.subarray(i,i+w);e[r]=(0,n.mod)(o(a),h)}_[t]=e}return _}e.expand_message_xmd=c,e.expand_message_xof=l,e.hash_to_field=h,e.isogenyMap=function(t,e){let r=e.map(t=>Array.from(t).reverse());return(e,n)=>{let[i,o,s,a]=r.map(r=>r.reduce((r,n)=>t.add(t.mul(r,e),n)));return e=t.div(i,o),n=t.mul(n,t.div(s,a)),{x:e,y:n}}},e.createHasher=function(t,e,r){if("function"!=typeof e)throw Error("mapToCurve() must be defined");return{hashToCurve(n,i){let o=h(n,2,{...r,DST:r.DST,...i}),s=t.fromAffine(e(o[0])),a=t.fromAffine(e(o[1])),u=s.add(a).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,i){let o=h(n,1,{...r,DST:r.encodeDST,...i}),s=t.fromAffine(e(o[0])).clearCofactor();return s.assertValidity(),s}}}},66998:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hashToPrivateScalar=e.FpSqrtEven=e.FpSqrtOdd=e.Field=e.nLength=e.FpIsSquare=e.FpDiv=e.FpInvertBatch=e.FpPow=e.validateField=e.isNegativeLE=e.FpSqrt=e.tonelliShanks=e.invert=e.pow2=e.pow=e.mod=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n=r(4870),i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),u=BigInt(4),c=BigInt(5),l=BigInt(8);function h(t,e){let r=t%e;return r>=i?r:e+r}function d(t,e,r){if(r<=i||e<i)throw Error("Expected power/modulo > 0");if(r===o)return i;let n=o;for(;e>i;)e&o&&(n=n*t%r),t=t*t%r,e>>=o;return n}function f(t,e){if(t===i||e<=i)throw Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=h(t,e),n=e,s=i,a=o,u=o,c=i;for(;r!==i;){let t=n/r,e=n%r,i=s-u*t,o=a-c*t;n=r,r=e,s=u,a=c,u=i,c=o}let l=n;if(l!==o)throw Error("invert: does not exist");return h(s,e)}function p(t){let e,r,n;let a=(t-o)/s;for(e=t-o,r=0;e%s===i;e/=s,r++);for(n=s;n<t&&d(n,a,t)!==t-o;n++);if(1===r){let e=(t+o)/u;return function(t,r){let n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(e+o)/s;return function(t,i){if(t.pow(i,a)===t.neg(t.ONE))throw Error("Cannot find square root");let s=r,u=t.pow(t.mul(t.ONE,n),e),l=t.pow(i,c),h=t.pow(i,e);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<s&&!t.eql(r,t.ONE);e++)r=t.sqr(r);let r=t.pow(u,o<<BigInt(s-e-1));u=t.sqr(r),l=t.mul(l,r),h=t.mul(h,u),s=e}return l}}function m(t){if(t%u===a){let e=(t+o)/u;return function(t,r){let n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw Error("Cannot find square root");return n}}if(t%l===c){let e=(t-c)/l;return function(t,r){let n=t.mul(r,s),i=t.pow(n,e),o=t.mul(r,i),a=t.mul(t.mul(o,s),i),u=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(u),r))throw Error("Cannot find square root");return u}}return p(t)}BigInt(9),BigInt(16),e.mod=h,e.pow=d,e.pow2=function(t,e,r){let n=t;for(;e-- >i;)n*=n,n%=r;return n},e.invert=f,e.tonelliShanks=p,e.FpSqrt=m,e.isNegativeLE=(t,e)=>(h(t,e)&o)===o;let g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(t,e,r){if(r<i)throw Error("Expected power > 0");if(r===i)return t.ONE;if(r===o)return e;let n=t.ONE,s=e;for(;r>i;)r&o&&(n=t.mul(n,s)),s=t.sqr(s),r>>=o;return n}function v(t,e){let r=Array(e.length),n=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),i=t.inv(n);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),i),r}function w(t,e){let r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}e.validateField=function(t){let e=g.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(t,e)},e.FpPow=y,e.FpInvertBatch=v,e.FpDiv=function(t,e,r){return t.mul(e,"bigint"==typeof r?f(r,t.ORDER):t.inv(r))},e.FpIsSquare=function(t){let e=(t.ORDER-o)/s;return r=>{let n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}},e.nLength=w,e.Field=function(t,e,r=!1,s={}){if(t<=i)throw Error(`Expected Fp ORDER > 0, got ${t}`);let{nBitLength:a,nByteLength:u}=w(t,e);if(u>2048)throw Error("Field lengths over 2048 bytes are not supported");let c=m(t),l=Object.freeze({ORDER:t,BITS:a,BYTES:u,MASK:(0,n.bitMask)(a),ZERO:i,ONE:o,create:e=>h(e,t),isValid:e=>{if("bigint"!=typeof e)throw Error(`Invalid field element: expected bigint, got ${typeof e}`);return i<=e&&e<t},is0:t=>t===i,isOdd:t=>(t&o)===o,neg:e=>h(-e,t),eql:(t,e)=>t===e,sqr:e=>h(e*e,t),add:(e,r)=>h(e+r,t),sub:(e,r)=>h(e-r,t),mul:(e,r)=>h(e*r,t),pow:(t,e)=>y(l,t,e),div:(e,r)=>h(e*f(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>f(e,t),sqrt:s.sqrt||(t=>c(l,t)),invertBatch:t=>v(l,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?(0,n.numberToBytesLE)(t,u):(0,n.numberToBytesBE)(t,u),fromBytes:t=>{if(t.length!==u)throw Error(`Fp.fromBytes: expected ${u}, got ${t.length}`);return r?(0,n.bytesToNumberLE)(t):(0,n.bytesToNumberBE)(t)}});return Object.freeze(l)},e.FpSqrtOdd=function(t,e){if(!t.isOdd)throw Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)},e.FpSqrtEven=function(t,e){if(!t.isOdd)throw Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r},e.hashToPrivateScalar=function(t,e,r=!1){t=(0,n.ensureBytes)("privateHash",t);let i=t.length,s=w(e).nByteLength+8;if(s<24||i<s||i>1024)throw Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${i}`);let a=r?(0,n.bytesToNumberLE)(t):(0,n.bytesToNumberBE)(t);return h(a,e-o)+o}},4870:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateObject=e.createHmacDrbg=e.bitMask=e.bitSet=e.bitGet=e.bitLen=e.utf8ToBytes=e.equalBytes=e.concatBytes=e.ensureBytes=e.numberToVarBytesBE=e.numberToBytesLE=e.numberToBytesBE=e.bytesToNumberLE=e.bytesToNumberBE=e.hexToBytes=e.hexToNumber=e.numberToHexUnpadded=e.bytesToHex=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let r=BigInt(0),n=BigInt(1),i=BigInt(2),o=t=>t instanceof Uint8Array,s=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a(t){if(!o(t))throw Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=s[t[r]];return e}function u(t){let e=t.toString(16);return 1&e.length?`0${e}`:e}function c(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function l(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){let n=2*e,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw Error("Invalid byte sequence");r[e]=o}return r}function h(t,e){return l(t.toString(16).padStart(2*e,"0"))}function d(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),r=0;return t.forEach(t=>{if(!o(t))throw Error("Uint8Array expected");e.set(t,r),r+=t.length}),e}e.bytesToHex=a,e.numberToHexUnpadded=u,e.hexToNumber=c,e.hexToBytes=l,e.bytesToNumberBE=function(t){return c(a(t))},e.bytesToNumberLE=function(t){if(!o(t))throw Error("Uint8Array expected");return c(a(Uint8Array.from(t).reverse()))},e.numberToBytesBE=h,e.numberToBytesLE=function(t,e){return h(t,e).reverse()},e.numberToVarBytesBE=function(t){return l(u(t))},e.ensureBytes=function(t,e,r){let n;if("string"==typeof e)try{n=l(e)}catch(r){throw Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else if(o(e))n=Uint8Array.from(e);else throw Error(`${t} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${t} expected ${r} bytes, got ${i}`);return n},e.concatBytes=d,e.equalBytes=function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},e.utf8ToBytes=function(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))},e.bitLen=function(t){let e;for(e=0;t>r;t>>=n,e+=1);return e},e.bitGet=function(t,e){return t>>BigInt(e)&n},e.bitSet=(t,e,i)=>t|(i?n:r)<<BigInt(e),e.bitMask=t=>(i<<BigInt(t-1))-n;let f=t=>new Uint8Array(t),p=t=>Uint8Array.from(t);e.createHmacDrbg=function(t,e,r){if("number"!=typeof t||t<2)throw Error("hashLen must be a number");if("number"!=typeof e||e<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=f(t),i=f(t),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...t)=>r(i,n,...t),u=(t=f())=>{i=a(p([0]),t),n=a(),0!==t.length&&(i=a(p([1]),t),n=a())},c=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let t=0,r=[];for(;t<e;){n=a();let e=n.slice();r.push(e),t+=n.length}return d(...r)};return(t,e)=>{let r;for(s(),u(t);!(r=e(c()));)u();return s(),r}};let m={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};e.validateObject=function(t,e,r={}){let n=(e,r,n)=>{let i=m[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let o=t[e];if((!n||void 0!==o)&&!i(o,t))throw Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${r}`)};for(let[t,r]of Object.entries(e))n(t,r,!1);for(let[t,e]of Object.entries(r))n(t,e,!0);return t}},70409:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n=r(66998),i=r(4870),o=r(4870),s=r(46061),{bytesToNumberBE:a,hexToBytes:u}=i;e.DER={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){let{Err:r}=e.DER;if(t.length<2||2!==t[0])throw new r("Invalid signature integer tag");let n=t[1],i=t.subarray(2,n+2);if(!n||i.length!==n)throw new r("Invalid signature integer: wrong length");if(128&i[0])throw new r("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:a(i),l:t.subarray(n+2)}},toSig(t){let{Err:r}=e.DER,n="string"==typeof t?u(t):t;if(!(n instanceof Uint8Array))throw Error("ui8a expected");let i=n.length;if(i<2||48!=n[0])throw new r("Invalid signature tag");if(n[1]!==i-2)throw new r("Invalid signature: incorrect length");let{d:o,l:s}=e.DER._parseInt(n.subarray(2)),{d:a,l:c}=e.DER._parseInt(s);if(c.length)throw new r("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(t){let e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{let e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}};let c=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(3),f=BigInt(4);function p(t){let e=function(t){let e=(0,s.validateBasic)(t);i.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=e;if(r){if(!n.eql(o,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,a=e.toBytes||((t,e,n)=>{let o=e.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),u=e.fromBytes||(t=>{let e=t.subarray(1),n=r.fromBytes(e.subarray(0,r.BYTES)),i=r.fromBytes(e.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function h(t){let{a:n,b:i}=e,o=r.sqr(t),s=r.mul(o,t);return r.add(r.add(s,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),h(e.Gx)))throw Error("bad generator point: equation left != right");function f(t){return"bigint"==typeof t&&c<t&&t<e.n}function p(t){if(!f(t))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function m(t){let r;let{allowedPrivateKeyLengths:s,nByteLength:a,wrapPrivateKey:u,n:c}=e;if(s&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=i.bytesToHex(t)),"string"!=typeof t||!s.includes(t.length))throw Error("Invalid key");t=t.padStart(2*a,"0")}try{r="bigint"==typeof t?t:i.bytesToNumberBE((0,o.ensureBytes)("private key",t,a))}catch(e){throw Error(`private key must be ${a} bytes, hex or bigint, not ${typeof t}`)}return u&&(r=n.mod(r,c)),p(r),r}let g=new Map;function y(t){if(!(t instanceof v))throw Error("ProjectivePoint expected")}class v{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw Error("x required");if(null==e||!r.isValid(e))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(t){let{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw Error("invalid affine point");if(t instanceof v)throw Error("projective point not allowed");let i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?v.ZERO:new v(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(v.fromAffine)}static fromHex(t){let e=v.fromAffine(u((0,o.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return v.BASE.multiply(m(t))}_setWindowSize(t){this._WINDOW_SIZE=t,g.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw Error("bad point: ZERO")}let{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),o=h(t);if(!r.eql(i,o))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw Error("Field doesn't support isOdd")}equals(t){y(t);let{px:e,py:n,pz:i}=this,{px:o,py:s,pz:a}=t,u=r.eql(r.mul(e,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return u&&c}negate(){return new v(this.px,r.neg(this.py),this.pz)}double(){let{a:t,b:n}=e,i=r.mul(n,d),{px:o,py:s,pz:a}=this,u=r.ZERO,c=r.ZERO,l=r.ZERO,h=r.mul(o,o),f=r.mul(s,s),p=r.mul(a,a),m=r.mul(o,s);return m=r.add(m,m),l=r.mul(o,a),l=r.add(l,l),u=r.mul(t,l),c=r.mul(i,p),c=r.add(u,c),u=r.sub(f,c),c=r.add(f,c),c=r.mul(u,c),u=r.mul(m,u),l=r.mul(i,l),p=r.mul(t,p),m=r.sub(h,p),m=r.mul(t,m),m=r.add(m,l),l=r.add(h,h),h=r.add(l,h),h=r.add(h,p),h=r.mul(h,m),c=r.add(c,h),p=r.mul(s,a),p=r.add(p,p),h=r.mul(p,m),u=r.sub(u,h),l=r.mul(p,f),l=r.add(l,l),new v(u,c,l=r.add(l,l))}add(t){y(t);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=t,c=r.ZERO,l=r.ZERO,h=r.ZERO,f=e.a,p=r.mul(e.b,d),m=r.mul(n,s),g=r.mul(i,a),w=r.mul(o,u),b=r.add(n,i),_=r.add(s,a);b=r.mul(b,_),_=r.add(m,g),b=r.sub(b,_),_=r.add(n,o);let M=r.add(s,u);return _=r.mul(_,M),M=r.add(m,w),_=r.sub(_,M),M=r.add(i,o),c=r.add(a,u),M=r.mul(M,c),c=r.add(g,w),M=r.sub(M,c),h=r.mul(f,_),c=r.mul(p,w),h=r.add(c,h),c=r.sub(g,h),h=r.add(g,h),l=r.mul(c,h),g=r.add(m,m),g=r.add(g,m),w=r.mul(f,w),_=r.mul(p,_),g=r.add(g,w),w=r.sub(m,w),w=r.mul(f,w),_=r.add(_,w),m=r.mul(g,_),l=r.add(l,m),m=r.mul(M,_),c=r.mul(b,c),c=r.sub(c,m),m=r.mul(b,g),h=r.mul(M,h),new v(c,l,h=r.add(h,m))}subtract(t){return this.add(t.negate())}is0(){return this.equals(v.ZERO)}wNAF(t){return b.wNAFCached(this,g,t,t=>{let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(v.fromAffine)})}multiplyUnsafe(t){let n=v.ZERO;if(t===c)return n;if(p(t),t===l)return this;let{endo:i}=e;if(!i)return b.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:a,k2:u}=i.splitScalar(t),h=n,d=n,f=this;for(;s>c||u>c;)s&l&&(h=h.add(f)),u&l&&(d=d.add(f)),f=f.double(),s>>=l,u>>=l;return o&&(h=h.negate()),a&&(d=d.negate()),d=new v(r.mul(d.px,i.beta),d.py,d.pz),h.add(d)}multiply(t){let n,i;p(t);let{endo:o}=e;if(o){let{k1neg:e,k1:s,k2neg:a,k2:u}=o.splitScalar(t),{p:c,f:l}=this.wNAF(s),{p:h,f:d}=this.wNAF(u);c=b.constTimeNegate(e,c),h=b.constTimeNegate(a,h),h=new v(r.mul(h.px,o.beta),h.py,h.pz),n=c.add(h),i=l.add(d)}else{let{p:e,f:r}=this.wNAF(t);n=e,i=r}return v.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(t,e,r){let n=v.BASE,i=(t,e)=>e!==c&&e!==l&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,r));return o.is0()?void 0:o}toAffine(t){let{px:e,py:n,pz:i}=this,o=this.is0();null==t&&(t=o?r.ONE:r.inv(i));let s=r.mul(e,t),a=r.mul(n,t),u=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){let{h:t,isTorsionFree:r}=e;if(t===l)return!0;if(r)return r(v,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:t,clearCofactor:r}=e;return t===l?this:r?r(v,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),a(v,this,t)}toHex(t=!0){return i.bytesToHex(this.toRawBytes(t))}}v.BASE=new v(e.Gx,e.Gy,r.ONE),v.ZERO=new v(r.ZERO,r.ONE,r.ZERO);let w=e.nBitLength,b=(0,s.wNAF)(v,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:v,normPrivateKeyToScalar:m,weierstrassEquation:h,isWithinCurveOrder:f}}function m(t,e){let r=t.ORDER,n=c;for(let t=r-l;t%h===c;t/=h)n+=l;let i=n,o=h<<i-l-l,s=o*h,a=(r-l)/s,u=(a-l)/h,p=s-l,m=t.pow(e,a),g=t.pow(e,(a+l)/h),y=(e,r)=>{let n=m,s=t.pow(r,p),a=t.sqr(s);a=t.mul(a,r);let c=t.mul(e,a);c=t.pow(c,u),c=t.mul(c,s),s=t.mul(c,r),a=t.mul(c,e);let d=t.mul(a,s);c=t.pow(d,o);let f=t.eql(c,t.ONE);s=t.mul(a,g),c=t.mul(d,n),a=t.cmov(s,a,f),d=t.cmov(c,d,f);for(let e=i;e>l;e--){let r=e-h;r=h<<r-l;let i=t.pow(d,r),o=t.eql(i,t.ONE);s=t.mul(a,n),n=t.mul(n,n),i=t.mul(d,n),a=t.cmov(s,a,o),d=t.cmov(i,d,o)}return{isValid:f,value:a}};if(t.ORDER%f===d){let r=(t.ORDER-d)/f,n=t.sqrt(t.neg(e));y=(e,i)=>{let o=t.sqr(i),s=t.mul(e,i);o=t.mul(o,s);let a=t.pow(o,r);a=t.mul(a,s);let u=t.mul(a,n),c=t.mul(t.sqr(a),i),l=t.eql(c,e),h=t.cmov(u,a,l);return{isValid:l,value:h}}}return y}e.weierstrassPoints=p,e.weierstrass=function(t){let r=function(t){let e=(0,s.validateBasic)(t);return i.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:a,n:u}=r,h=a.BYTES+1,d=2*a.BYTES+1;function f(t){return n.mod(t,u)}function m(t){return n.invert(t,u)}let{ProjectivePoint:g,normPrivateKeyToScalar:y,weierstrassEquation:v,isWithinCurveOrder:w}=p({...r,toBytes(t,e,r){let n=e.toAffine(),o=a.toBytes(n.x),s=i.concatBytes;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,a.toBytes(n.y))},fromBytes(t){let e=t.length,r=t[0],n=t.subarray(1);if(e===h&&(2===r||3===r)){let t=i.bytesToNumberBE(n);if(!(c<t&&t<a.ORDER))throw Error("Point is not on curve");let e=v(t),o=a.sqrt(e),s=(o&l)===l;return(1&r)==1!==s&&(o=a.neg(o)),{x:t,y:o}}if(e===d&&4===r){let t=a.fromBytes(n.subarray(0,a.BYTES)),e=a.fromBytes(n.subarray(a.BYTES,2*a.BYTES));return{x:t,y:e}}throw Error(`Point of length ${e} was invalid. Expected ${h} compressed bytes or ${d} uncompressed bytes`)}}),b=t=>i.bytesToHex(i.numberToBytesBE(t,r.nByteLength));function _(t){let e=u>>l;return t>e}let M=(t,e,r)=>i.bytesToNumberBE(t.slice(e,r));class E{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){let e=r.nByteLength;return new E(M(t=(0,o.ensureBytes)("compactSignature",t,2*e),0,e),M(t,e,2*e))}static fromDER(t){let{r,s:n}=e.DER.toSig((0,o.ensureBytes)("DER",t));return new E(r,n)}assertValidity(){if(!w(this.r))throw Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new E(this.r,this.s,t)}recoverPublicKey(t){let{r:e,s:n,recovery:i}=this,s=I((0,o.ensureBytes)("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");let u=2===i||3===i?e+r.n:e;if(u>=a.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&i)==0?"02":"03",l=g.fromHex(c+b(u)),h=m(u),d=f(-s*h),p=f(n*h),y=g.BASE.multiplyAndAddUnsafe(l,d,p);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}function A(t){let e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===h||n===d:r?n===2*h||n===2*d:t instanceof g}let S=r.bits2int||function(t){let e=i.bytesToNumberBE(t),n=8*t.length-r.nBitLength;return n>0?e>>BigInt(n):e},I=r.bits2int_modN||function(t){return f(S(t))},T=i.bitMask(r.nBitLength);function k(t){if("bigint"!=typeof t)throw Error("bigint expected");if(!(c<=t&&t<T))throw Error(`bigint expected < 2^${r.nBitLength}`);return i.numberToBytesBE(t,r.nByteLength)}let N={lowS:r.lowS,prehash:!1},x={lowS:r.lowS,prehash:!1};return g.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(t,e=!0){return g.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(A(t))throw Error("first arg must be private key");if(!A(e))throw Error("second arg must be public key");let n=g.fromHex(e);return n.multiply(y(t)).toRawBytes(r)},sign:function(t,e,n=N){let{seed:s,k2sig:u}=function(t,e,n=N){if(["recovered","canonical"].some(t=>t in n))throw Error("sign() legacy options not supported");let{hash:s,randomBytes:u}=r,{lowS:h,prehash:d,extraEntropy:p}=n;null==h&&(h=!0),t=(0,o.ensureBytes)("msgHash",t),d&&(t=(0,o.ensureBytes)("prehashed msgHash",s(t)));let v=I(t),b=y(e),M=[k(b),k(v)];if(null!=p){let t=!0===p?u(a.BYTES):p;M.push((0,o.ensureBytes)("extraEntropy",t,a.BYTES))}let A=i.concatBytes(...M);return{seed:A,k2sig:function(t){let e=S(t);if(!w(e))return;let r=m(e),n=g.BASE.multiply(e).toAffine(),i=f(n.x);if(i===c)return;let o=f(r*f(v+i*b));if(o===c)return;let s=(n.x===i?0:2)|Number(n.y&l),a=o;return h&&_(o)&&(a=_(o)?f(-o):o,s^=1),new E(i,a,s)}}}(t,e,n),h=i.createHmacDrbg(r.hash.outputLen,r.nByteLength,r.hmac);return h(s,u)},verify:function(t,n,i,s=x){let a,u;if(n=(0,o.ensureBytes)("msgHash",n),i=(0,o.ensureBytes)("publicKey",i),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:l}=s;try{if("string"==typeof t||t instanceof Uint8Array)try{u=E.fromDER(t)}catch(r){if(!(r instanceof e.DER.Err))throw r;u=E.fromCompact(t)}else if("object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s){let{r:e,s:r}=t;u=new E(e,r)}else throw Error("PARSE");a=g.fromHex(i)}catch(t){if("PARSE"===t.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&u.hasHighS())return!1;l&&(n=r.hash(n));let{r:h,s:d}=u,p=I(n),y=m(d),v=f(p*y),w=f(h*y),b=g.BASE.multiplyAndAddUnsafe(a,v,w)?.toAffine();if(!b)return!1;let _=f(b.x);return _===h},ProjectivePoint:g,Signature:E,utils:{isValidPrivateKey(t){try{return y(t),!0}catch(t){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{let t=r.randomBytes(a.BYTES+8),e=n.hashToPrivateScalar(t,u);return i.numberToBytesBE(e,r.nByteLength)},precompute:(t=8,e=g.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}},e.SWUFpSqrtRatio=m,e.mapToCurveSimpleSWU=function(t,e){if(n.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=m(t,e.Z);if(!t.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,u,c,l,h;i=t.sqr(n),i=t.mul(i,e.Z),o=t.sqr(i),o=t.add(o,i),s=t.add(o,t.ONE),s=t.mul(s,e.B),a=t.cmov(e.Z,t.neg(o),!t.eql(o,t.ZERO)),a=t.mul(a,e.A),o=t.sqr(s),c=t.sqr(a),u=t.mul(c,e.A),o=t.add(o,u),o=t.mul(o,s),c=t.mul(c,a),u=t.mul(c,e.B),o=t.add(o,u),l=t.mul(i,s);let{isValid:d,value:f}=r(o,c);h=t.mul(i,n),h=t.mul(h,f),l=t.cmov(l,s,d),h=t.cmov(h,f,d);let p=t.isOdd(n)===t.isOdd(h);return h=t.cmov(t.neg(h),h,p),{x:l=t.div(l,a),y:h}}}},70041:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let n=r(10820),i=r(23037),o=r(66998),s=r(70409),a=r(4870),u=r(31315),c=r(37270),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),h=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),d=BigInt(1),f=BigInt(2),p=(t,e)=>(t+e/f)/e;function m(t){let e=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%l,h=c*c*t%l,d=(0,o.pow2)(h,e,l)*h%l,p=(0,o.pow2)(d,e,l)*h%l,m=(0,o.pow2)(p,f,l)*c%l,y=(0,o.pow2)(m,n,l)*m%l,v=(0,o.pow2)(y,i,l)*y%l,w=(0,o.pow2)(v,a,l)*v%l,b=(0,o.pow2)(w,u,l)*w%l,_=(0,o.pow2)(b,a,l)*v%l,M=(0,o.pow2)(_,e,l)*h%l,E=(0,o.pow2)(M,s,l)*y%l,A=(0,o.pow2)(E,r,l)*c%l,S=(0,o.pow2)(A,f,l);if(!g.eql(g.sqr(S),t))throw Error("Cannot find square root");return S}let g=(0,o.Field)(l,void 0,void 0,{sqrt:m});e.secp256k1=(0,c.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:h,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),s=p(e*t,h),a=p(-r*t,h),u=(0,o.mod)(t-s*e-a*n,h),c=(0,o.mod)(-s*r-a*e,h),l=u>i,f=c>i;if(l&&(u=h-u),f&&(c=h-c),u>i||c>i)throw Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:f,k2:c}}}},n.sha256);let y=BigInt(0),v=t=>"bigint"==typeof t&&y<t&&t<l,w=t=>"bigint"==typeof t&&y<t&&t<h,b={};function _(t,...e){let r=b[t];if(void 0===r){let e=(0,n.sha256)(Uint8Array.from(t,t=>t.charCodeAt(0)));r=(0,a.concatBytes)(e,e),b[t]=r}return(0,n.sha256)((0,a.concatBytes)(r,...e))}let M=t=>t.toRawBytes(!0).slice(1),E=t=>(0,a.numberToBytesBE)(t,32),A=t=>(0,o.mod)(t,l),S=t=>(0,o.mod)(t,h),I=e.secp256k1.ProjectivePoint,T=(t,e,r)=>I.BASE.multiplyAndAddUnsafe(t,e,r);function k(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t),n=I.fromPrivateKey(r),i=n.hasEvenY()?r:S(-r);return{scalar:i,bytes:M(n)}}function N(t){if(!v(t))throw Error("bad x: need 0 < x < p");let e=A(t*t),r=A(e*t+BigInt(7)),n=m(r);n%f!==y&&(n=A(-n));let i=new I(t,n,d);return i.assertValidity(),i}function x(...t){return S((0,a.bytesToNumberBE)(_("BIP0340/challenge",...t)))}function P(t,e,r){let n=(0,a.ensureBytes)("signature",t,64),i=(0,a.ensureBytes)("message",e),o=(0,a.ensureBytes)("publicKey",r,32);try{let t=N((0,a.bytesToNumberBE)(o)),e=(0,a.bytesToNumberBE)(n.subarray(0,32));if(!v(e))return!1;let r=(0,a.bytesToNumberBE)(n.subarray(32,64));if(!w(r))return!1;let s=x(E(e),M(t),i),u=T(t,r,S(-s));if(!u||!u.hasEvenY()||u.toAffine().x!==e)return!1;return!0}catch(t){return!1}}e.schnorr={getPublicKey:function(t){return k(t).bytes},sign:function(t,e,r=(0,i.randomBytes)(32)){let n=(0,a.ensureBytes)("message",t),{bytes:o,scalar:s}=k(e),u=(0,a.ensureBytes)("auxRand",r,32),c=E(s^(0,a.bytesToNumberBE)(_("BIP0340/aux",u))),l=_("BIP0340/nonce",c,o,n),h=S((0,a.bytesToNumberBE)(l));if(h===y)throw Error("sign failed: k is zero");let{bytes:d,scalar:f}=k(h),p=x(d,o,n),m=new Uint8Array(64);if(m.set(d,0),m.set(E(S(f+p*s)),32),!P(m,n,o))throw Error("sign: Invalid signature produced");return m},verify:P,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:N,pointToBytes:M,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:_,mod:o.mod}};let O=(0,u.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(t=>BigInt(t)))),C=(0,s.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}),R=(0,u.createHasher)(e.secp256k1.ProjectivePoint,t=>{let{x:e,y:r}=C(g.create(t[0]));return O(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});e.hashToCurve=R.hashToCurve,e.encodeToCurve=R.encodeToCurve},79131:function(t,e){"use strict";function r(t){if(!Number.isSafeInteger(t)||t<0)throw Error(`Wrong positive integer: ${t}`)}function n(t){if("boolean"!=typeof t)throw Error(`Expected boolean, not ${t}`)}function i(t,...e){if(!(t instanceof Uint8Array))throw Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function o(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(t.outputLen),r(t.blockLen)}function s(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function a(t,e){i(t);let r=e.outputLen;if(t.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.output=e.exists=e.hash=e.bytes=e.bool=e.number=void 0,e.number=r,e.bool=n,e.bytes=i,e.hash=o,e.exists=s,e.output=a,e.default={number:r,bool:n,bytes:i,hash:o,exists:s,output:a}},14955:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHA2=void 0;let n=r(79131),i=r(23037);class o extends i.Hash{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,i.createView)(this.buffer)}update(t){n.default.exists(this);let{view:e,buffer:r,blockLen:o}=this;t=(0,i.toBytes)(t);let s=t.length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let e=(0,i.createView)(t);for(;o<=s-n;n+=o)this.process(e,n);continue}r.set(t.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){n.default.exists(this),n.default.output(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:o,isLE:s}=this,{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let t=a;t<o;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,c=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+c,a,n)}(r,o-8,BigInt(8*this.length),s),this.process(r,0);let u=(0,i.createView)(t),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,h=this.get();if(l>h.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)u.setUint32(4*t,h[t],s)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}e.SHA2=o},97946:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=e.toBig=e.split=e.fromBig=void 0;let r=BigInt(4294967296-1),n=BigInt(32);function i(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function o(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let o=0;o<t.length;o++){let{h:s,l:a}=i(t[o],e);[r[o],n[o]]=[s,a]}return[r,n]}function s(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/4294967296|0)|0,l:0|i}}e.fromBig=i,e.split=o,e.toBig=(t,e)=>BigInt(t>>>0)<<n|BigInt(e>>>0),e.add=s;let a={fromBig:i,split:o,toBig:e.toBig,shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add:s,add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/4294967296|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/4294967296|0)|0,add5H:(t,e,r,n,i,o)=>e+r+n+i+o+(t/4294967296|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};e.default=a},38378:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},45238:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;let n=r(79131),i=r(23037);class o extends i.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,n.default.hash(t);let r=(0,i.toBytes)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return n.default.exists(this),this.iHash.update(t),this}digestInto(t){n.default.exists(this),n.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=o,e.hmac=(t,e,r)=>new o(t,e).update(r).digest(),e.hmac.create=(t,e)=>new o(t,e)},10820:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha224=e.sha256=void 0;let n=r(14955),i=r(23037),o=(t,e,r)=>t&e^~t&r,s=(t,e,r)=>t&e^t&r^e&r,a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),u=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|u[0],this.B=0|u[1],this.C=0|u[2],this.D=0|u[3],this.E=0|u[4],this.F=0|u[5],this.G=0|u[6],this.H=0|u[7]}get(){let{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)c[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=c[t-15],r=c[t-2],n=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,o=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;c[t]=o+c[t-7]+n+c[t-16]|0}let{A:r,B:n,C:u,D:l,E:h,F:d,G:f,H:p}=this;for(let t=0;t<64;t++){let e=(0,i.rotr)(h,6)^(0,i.rotr)(h,11)^(0,i.rotr)(h,25),m=p+e+o(h,d,f)+a[t]+c[t]|0,g=(0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22),y=g+s(r,n,u)|0;p=f,f=d,d=h,h=l+m|0,l=u,u=n,n=r,r=m+y|0}r=r+this.A|0,n=n+this.B|0,u=u+this.C|0,l=l+this.D|0,h=h+this.E|0,d=d+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(r,n,u,l,h,d,f,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class h extends l{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.sha256=(0,i.wrapConstructor)(()=>new l),e.sha224=(0,i.wrapConstructor)(()=>new h)},84589:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shake256=e.shake128=e.keccak_512=e.keccak_384=e.keccak_256=e.keccak_224=e.sha3_512=e.sha3_384=e.sha3_256=e.sha3_224=e.Keccak=e.keccakP=void 0;let n=r(79131),i=r(97946),o=r(23037),[s,a,u]=[[],[],[]],c=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(7),f=BigInt(256),p=BigInt(113);for(let t=0,e=l,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),a.push((t+1)*(t+2)/2%64);let i=c;for(let t=0;t<7;t++)(e=(e<<l^(e>>d)*p)%f)&h&&(i^=l<<(l<<BigInt(t))-l);u.push(i)}let[m,g]=i.default.split(u,!0),y=(t,e,r)=>r>32?i.default.rotlBH(t,e,r):i.default.rotlSH(t,e,r),v=(t,e,r)=>r>32?i.default.rotlBL(t,e,r):i.default.rotlSL(t,e,r);function w(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let n=(e+8)%10,i=(e+2)%10,o=r[i],s=r[i+1],a=y(o,s,1)^r[n],u=v(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=u}let e=t[2],i=t[3];for(let r=0;r<24;r++){let n=a[r],o=y(e,i,n),u=v(e,i,n),c=s[r];e=t[c],i=t[c+1],t[c]=o,t[c+1]=u}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=m[n],t[1]^=g[n]}r.fill(0)}e.keccakP=w;class b extends o.Hash{constructor(t,e,r,i=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,n.default.number(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,o.u32)(this.state)}keccak(){w(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){n.default.exists(this);let{blockLen:e,state:r}=this;t=(0,o.toBytes)(t);let i=t.length;for(let n=0;n<i;){let o=Math.min(e-this.pos,i-n);for(let e=0;e<o;e++)r[this.pos++]^=t[n++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,(128&e)!=0&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){n.default.exists(this,!1),n.default.bytes(t),this.finish();let e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return n.default.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(n.default.output(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return t||(t=new b(e,r,n,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=o,t.destroyed=this.destroyed,t}}e.Keccak=b;let _=(t,e,r)=>(0,o.wrapConstructor)(()=>new b(e,t,r));e.sha3_224=_(6,144,28),e.sha3_256=_(6,136,32),e.sha3_384=_(6,104,48),e.sha3_512=_(6,72,64),e.keccak_224=_(1,144,28),e.keccak_256=_(1,136,32),e.keccak_384=_(1,104,48),e.keccak_512=_(1,72,64);let M=(t,e,r)=>(0,o.wrapXOFConstructorWithOpts)((n={})=>new b(e,t,void 0===n.dkLen?r:n.dkLen,!0));e.shake128=M(31,168,16),e.shake256=M(31,136,32)},23037:function(t,e,r){"use strict";/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;let n=r(38378),i=t=>t instanceof Uint8Array;if(e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw Error("Non little-endian hardware is not supported");let o=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));e.bytesToHex=function(t){if(!i(t))throw Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=o[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){let n=2*e,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw Error("Invalid byte sequence");r[e]=o}return r};let s=async()=>{};async function a(t,r,n){let i=Date.now();for(let o=0;o<t;o++){n(o);let t=Date.now()-i;t>=0&&t<r||(await (0,e.nextTick)(),i+=t)}}function u(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function c(t){if("string"==typeof t&&(t=u(t)),!i(t))throw Error(`expected Uint8Array, got ${typeof t}`);return t}e.nextTick=s,e.asyncLoop=a,e.utf8ToBytes=u,e.toBytes=c,e.concatBytes=function(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),r=0;return t.forEach(t=>{if(!i(t))throw Error("Uint8Array expected");e.set(t,r),r+=t.length}),e};class l{clone(){return this._cloneInto()}}e.Hash=l;let h=t=>"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object;e.checkOpts=function(t,e){if(void 0!==e&&("object"!=typeof e||!h(e)))throw Error("Options should be object or undefined");let r=Object.assign(t,e);return r},e.wrapConstructor=function(t){let e=e=>t().update(c(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.wrapXOFConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(c(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},e.randomBytes=function(t=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(t));throw Error("crypto.getRandomValues must be defined")}},95053:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=void 0;var n=r(70041);Object.defineProperty(e,"secp256k1",{enumerable:!0,get:function(){return n.secp256k1}})},58040:function(t,e,r){"use strict";t=r.nmd(t);var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=e.wrapHash=e.equalsBytes=e.hexToBytes=e.bytesToUtf8=e.utf8ToBytes=e.createView=e.concatBytes=e.toHex=e.bytesToHex=e.assertBytes=e.assertBool=void 0;let i=n(r(79131)),o=r(23037),s=i.default.bool;e.assertBool=s;let a=i.default.bytes;e.assertBytes=a;var u=r(23037);Object.defineProperty(e,"bytesToHex",{enumerable:!0,get:function(){return u.bytesToHex}}),Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return u.bytesToHex}}),Object.defineProperty(e,"concatBytes",{enumerable:!0,get:function(){return u.concatBytes}}),Object.defineProperty(e,"createView",{enumerable:!0,get:function(){return u.createView}}),Object.defineProperty(e,"utf8ToBytes",{enumerable:!0,get:function(){return u.utf8ToBytes}}),e.bytesToUtf8=function(t){if(!(t instanceof Uint8Array))throw TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof t}`);return new TextDecoder().decode(t)},e.hexToBytes=function(t){let e=t.startsWith("0x")?t.substring(2):t;return(0,o.hexToBytes)(e)},e.equalsBytes=function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},e.wrapHash=function(t){return e=>(i.default.bytes(e),t(e))},e.crypto=(()=>{let e="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r="function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):void 0,web:e}})()},48670:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;var s=o(r(69282)),a=r(14538),u=r(43091),c=r(54846),l=r(18888),h=r(14651),d=r(45641),f=r(63746),p=r(2971),m=function(){function t(t,e,r,n){void 0===t&&(t=new a.BN(0)),void 0===e&&(e=new a.BN(0)),void 0===r&&(r=l.KECCAK256_RLP),void 0===n&&(n=l.KECCAK256_NULL),this.nonce=t,this.balance=e,this.stateRoot=r,this.codeHash=n,this._validate()}return t.fromAccountData=function(e){var r=e.nonce,n=e.balance,i=e.stateRoot,o=e.codeHash;return new t(r?new a.BN((0,h.toBuffer)(r)):void 0,n?new a.BN((0,h.toBuffer)(n)):void 0,i?(0,h.toBuffer)(i):void 0,o?(0,h.toBuffer)(o):void 0)},t.fromRlpSerializedAccount=function(t){var e=a.rlp.decode(t);if(!Array.isArray(e))throw Error("Invalid serialized account input. Must be array");return this.fromValuesArray(e)},t.fromValuesArray=function(e){var r=i(e,4),n=r[0],o=r[1],s=r[2],u=r[3];return new t(new a.BN(n),new a.BN(o),s,u)},t.prototype._validate=function(){if(this.nonce.lt(new a.BN(0)))throw Error("nonce must be greater than zero");if(this.balance.lt(new a.BN(0)))throw Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw Error("codeHash must have a length of 32")},t.prototype.raw=function(){return[(0,p.bnToUnpaddedBuffer)(this.nonce),(0,p.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},t.prototype.serialize=function(){return a.rlp.encode(this.raw())},t.prototype.isContract=function(){return!this.codeHash.equals(l.KECCAK256_NULL)},t.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(l.KECCAK256_NULL)},t}();e.Account=m,e.isValidAddress=function(t){try{(0,f.assertIsString)(t)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(t)},e.toChecksumAddress=function(t,e){(0,f.assertIsHexString)(t);var r=(0,c.stripHexPrefix)(t).toLowerCase(),n="";e&&(n=(0,p.toType)(e,p.TypeOutput.BN).toString()+"0x");for(var i=(0,d.keccakFromString)(n+r).toString("hex"),o="0x",s=0;s<r.length;s++)parseInt(i[s],16)>=8?o+=r[s].toUpperCase():o+=r[s];return o},e.isValidChecksumAddress=function(t,r){return(0,e.isValidAddress)(t)&&(0,e.toChecksumAddress)(t,r)===t},e.generateAddress=function(t,e){(0,f.assertIsBuffer)(t),(0,f.assertIsBuffer)(e);var r=new a.BN(e);return r.isZero()?(0,d.rlphash)([t,null]).slice(-20):(0,d.rlphash)([t,n.from(r.toArray())]).slice(-20)},e.generateAddress2=function(t,e,r){return(0,f.assertIsBuffer)(t),(0,f.assertIsBuffer)(e),(0,f.assertIsBuffer)(r),(0,s.default)(20===t.length),(0,s.default)(32===e.length),(0,d.keccak256)(n.concat([n.from("ff","hex"),t,e,(0,d.keccak256)(r)])).slice(-20)},e.isValidPrivate=function(t){return(0,u.privateKeyVerify)(t)},e.isValidPublic=function(t,e){return(void 0===e&&(e=!1),(0,f.assertIsBuffer)(t),64===t.length)?(0,u.publicKeyVerify)(n.concat([n.from([4]),t])):!!e&&(0,u.publicKeyVerify)(t)},e.pubToAddress=function(t,e){return void 0===e&&(e=!1),(0,f.assertIsBuffer)(t),e&&64!==t.length&&(t=n.from((0,u.publicKeyConvert)(t,!1).slice(1))),(0,s.default)(64===t.length),(0,d.keccak)(t).slice(-20)},e.publicToAddress=e.pubToAddress,e.privateToPublic=function(t){return(0,f.assertIsBuffer)(t),n.from((0,u.publicKeyCreate)(t,!1)).slice(1)},e.privateToAddress=function(t){return(0,e.publicToAddress)((0,e.privateToPublic)(t))},e.importPublic=function(t){return(0,f.assertIsBuffer)(t),64!==t.length&&(t=n.from((0,u.publicKeyConvert)(t,!1).slice(1))),t},e.zeroAddress=function(){var t=(0,h.zeros)(20);return(0,h.bufferToHex)(t)},e.isZeroAddress=function(t){try{(0,f.assertIsString)(t)}catch(t){return!1}return(0,e.zeroAddress)()===t}},6871:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Address=void 0;var o=i(r(69282)),s=r(14538),a=r(14651),u=r(48670),c=function(){function t(t){(0,o.default)(20===t.length,"Invalid address length"),this.buf=t}return t.zero=function(){return new t((0,a.zeros)(20))},t.fromString=function(e){return(0,o.default)((0,u.isValidAddress)(e),"Invalid address"),new t((0,a.toBuffer)(e))},t.fromPublicKey=function(e){return(0,o.default)(n.isBuffer(e),"Public key should be Buffer"),new t((0,u.pubToAddress)(e))},t.fromPrivateKey=function(e){return(0,o.default)(n.isBuffer(e),"Private key should be Buffer"),new t((0,u.privateToAddress)(e))},t.generate=function(e,r){return(0,o.default)(s.BN.isBN(r)),new t((0,u.generateAddress)(e.buf,r.toArrayLike(n)))},t.generate2=function(e,r,i){return(0,o.default)(n.isBuffer(r)),(0,o.default)(n.isBuffer(i)),new t((0,u.generateAddress2)(e.buf,r,i))},t.prototype.equals=function(t){return this.buf.equals(t.buf)},t.prototype.isZero=function(){return this.equals(t.zero())},t.prototype.isPrecompileOrSystemAddress=function(){var t=new s.BN(this.buf),e=new s.BN(0),r=new s.BN("ffff","hex");return t.gte(e)&&t.lte(r)},t.prototype.toString=function(){return"0x"+this.buf.toString("hex")},t.prototype.toBuffer=function(){return n.from(this.buf)},t}();e.Address=c},14651:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToHex=e.bufferToInt=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;var s=r(14538),a=r(54846),u=r(63746);e.intToHex=function(t){if(!Number.isSafeInteger(t)||t<0)throw Error("Received an invalid integer type: ".concat(t));return"0x".concat(t.toString(16))},e.intToBuffer=function(t){var r=(0,e.intToHex)(t);return n.from((0,a.padToEven)(r.slice(2)),"hex")},e.zeros=function(t){return n.allocUnsafe(t).fill(0)};var c=function(t,r,n){var i=(0,e.zeros)(r);return n?t.length<r?(t.copy(i),i):t.slice(0,r):t.length<r?(t.copy(i,r-t.length),i):t.slice(-r)};e.setLengthLeft=function(t,e){return(0,u.assertIsBuffer)(t),c(t,e,!1)},e.setLengthRight=function(t,e){return(0,u.assertIsBuffer)(t),c(t,e,!0)};var l=function(t){for(var e=t[0];t.length>0&&"0"===e.toString();)e=(t=t.slice(1))[0];return t};e.unpadBuffer=function(t){return(0,u.assertIsBuffer)(t),l(t)},e.unpadArray=function(t){return(0,u.assertIsArray)(t),l(t)},e.unpadHexString=function(t){return(0,u.assertIsHexString)(t),l(t=(0,a.stripHexPrefix)(t))},e.toBuffer=function(t){if(null==t)return n.allocUnsafe(0);if(n.isBuffer(t)||Array.isArray(t)||t instanceof Uint8Array)return n.from(t);if("string"==typeof t){if(!(0,a.isHexString)(t))throw Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(t));return n.from((0,a.padToEven)((0,a.stripHexPrefix)(t)),"hex")}if("number"==typeof t)return(0,e.intToBuffer)(t);if(s.BN.isBN(t)){if(t.isNeg())throw Error("Cannot convert negative BN to buffer. Given: ".concat(t));return t.toArrayLike(n)}if(t.toArray)return n.from(t.toArray());if(t.toBuffer)return n.from(t.toBuffer());throw Error("invalid type")},e.bufferToInt=function(t){return new s.BN((0,e.toBuffer)(t)).toNumber()},e.bufferToHex=function(t){return"0x"+(t=(0,e.toBuffer)(t)).toString("hex")},e.fromSigned=function(t){return new s.BN(t).fromTwos(256)},e.toUnsigned=function(t){return n.from(t.toTwos(256).toArray())},e.addHexPrefix=function(t){return"string"!=typeof t?t:(0,a.isHexPrefixed)(t)?t:"0x"+t},e.toUtf8=function(t){if((t=(0,a.stripHexPrefix)(t)).length%2!=0)throw Error("Invalid non-even hex string input for toUtf8() provided");return n.from(t.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")},e.baToJSON=function(t){if(n.isBuffer(t))return"0x".concat(t.toString("hex"));if(t instanceof Array){for(var r=[],i=0;i<t.length;i++)r.push((0,e.baToJSON)(t[i]));return r}},e.validateNoLeadingZeroes=function(t){var e,r;try{for(var n=i(Object.entries(t)),s=n.next();!s.done;s=n.next()){var a=o(s.value,2),u=a[0],c=a[1];if(void 0!==c&&c.length>0&&0===c[0])throw Error("".concat(u," cannot have leading zeroes, received: ").concat(c.toString("hex")))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},e.arrToBufArr=function t(e){return Array.isArray(e)?e.map(function(e){return t(e)}):n.from(e)},e.bufArrToArr=function t(e){return Array.isArray(e)?e.map(function(e){return t(e)}):Uint8Array.from(null!=e?e:[])}},18888:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.MAX_INTEGER=e.MAX_UINT64=void 0;var n=r(48764),i=r(14538);e.MAX_UINT64=new i.BN("ffffffffffffffff",16),e.MAX_INTEGER=new i.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),e.TWO_POW256=new i.BN("10000000000000000000000000000000000000000000000000000000000000000",16),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=n.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=n.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=n.Buffer.from(e.KECCAK256_RLP_S,"hex")},14538:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.rlp=e.BN=void 0;var a=s(r(13550));e.BN=a.default;var u=o(r(51675));e.rlp=u},45641:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.rlphash=e.ripemd160FromArray=e.ripemd160FromString=e.ripemd160=e.sha256FromArray=e.sha256FromString=e.sha256=e.keccakFromArray=e.keccakFromHexString=e.keccakFromString=e.keccak256=e.keccak=void 0;var i=r(72543),o=r(23482),s=r(14538),a=r(14651),u=r(63746);e.keccak=function(t,e){switch(void 0===e&&(e=256),(0,u.assertIsBuffer)(t),e){case 224:return(0,i.keccak224)(t);case 256:return(0,i.keccak256)(t);case 384:return(0,i.keccak384)(t);case 512:return(0,i.keccak512)(t);default:throw Error("Invald algorithm: keccak".concat(e))}},e.keccak256=function(t){return(0,e.keccak)(t)},e.keccakFromString=function(t,r){void 0===r&&(r=256),(0,u.assertIsString)(t);var i=n.from(t,"utf8");return(0,e.keccak)(i,r)},e.keccakFromHexString=function(t,r){return void 0===r&&(r=256),(0,u.assertIsHexString)(t),(0,e.keccak)((0,a.toBuffer)(t),r)},e.keccakFromArray=function(t,r){return void 0===r&&(r=256),(0,u.assertIsArray)(t),(0,e.keccak)((0,a.toBuffer)(t),r)};var c=function(t){return t=(0,a.toBuffer)(t),o("sha256").update(t).digest()};e.sha256=function(t){return(0,u.assertIsBuffer)(t),c(t)},e.sha256FromString=function(t){return(0,u.assertIsString)(t),c(t)},e.sha256FromArray=function(t){return(0,u.assertIsArray)(t),c(t)};var l=function(t,e){t=(0,a.toBuffer)(t);var r=o("rmd160").update(t).digest();return!0===e?(0,a.setLengthLeft)(r,32):r};e.ripemd160=function(t,e){return(0,u.assertIsBuffer)(t),l(t,e)},e.ripemd160FromString=function(t,e){return(0,u.assertIsString)(t),l(t,e)},e.ripemd160FromArray=function(t,e){return(0,u.assertIsArray)(t),l(t,e)},e.rlphash=function(t){return(0,e.keccak)(s.rlp.encode(t))}},63746:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.assertIsString=e.assertIsArray=e.assertIsBuffer=e.assertIsHexString=void 0;var i=r(54846);e.assertIsHexString=function(t){if(!(0,i.isHexString)(t))throw Error("This method only supports 0x-prefixed hex strings but input was: ".concat(t))},e.assertIsBuffer=function(t){if(!n.isBuffer(t))throw Error("This method only supports Buffer but input was: ".concat(t))},e.assertIsArray=function(t){if(!Array.isArray(t))throw Error("This method only supports number arrays but input was: ".concat(t))},e.assertIsString=function(t){if("string"!=typeof t)throw Error("This method only supports strings but input was: ".concat(t))}},22751:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.isHexString=e.getKeys=e.fromAscii=e.fromUtf8=e.toAscii=e.arrayContainsArray=e.getBinarySize=e.padToEven=e.stripHexPrefix=e.isHexPrefixed=void 0,i(r(18888),e),i(r(48670),e),i(r(6871),e),i(r(45641),e),i(r(77112),e),i(r(14651),e),i(r(80867),e),i(r(14538),e),i(r(2971),e);var o=r(54846);Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return o.isHexPrefixed}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return o.stripHexPrefix}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return o.padToEven}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return o.getBinarySize}}),Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return o.arrayContainsArray}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return o.toAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return o.fromUtf8}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return o.fromAscii}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return o.getKeys}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return o.isHexString}})},54846:function(t,e,r){"use strict";var n=r(48764).Buffer;function i(t){if("string"!=typeof t)throw Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof t));return"0"===t[0]&&"x"===t[1]}function o(t){var e=t;if("string"!=typeof e)throw Error("[padToEven] value must be type 'string', received ".concat(typeof e));return e.length%2&&(e="0".concat(e)),e}Object.defineProperty(e,"__esModule",{value:!0}),e.isHexString=e.getKeys=e.fromAscii=e.fromUtf8=e.toAscii=e.arrayContainsArray=e.getBinarySize=e.padToEven=e.stripHexPrefix=e.isHexPrefixed=void 0,e.isHexPrefixed=i,e.stripHexPrefix=function(t){if("string"!=typeof t)throw Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof t));return i(t)?t.slice(2):t},e.padToEven=o,e.getBinarySize=function(t){if("string"!=typeof t)throw Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof t));return n.byteLength(t,"utf8")},e.arrayContainsArray=function(t,e,r){if(!0!==Array.isArray(t))throw Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof t,"'"));if(!0!==Array.isArray(e))throw Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof e,"'"));return e[r?"some":"every"](function(e){return t.indexOf(e)>=0})},e.toAscii=function(t){var e="",r=0,n=t.length;for("0x"===t.substring(0,2)&&(r=2);r<n;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},e.fromUtf8=function(t){var e=n.from(t,"utf8");return"0x".concat(o(e.toString("hex")).replace(/^0+|0+$/g,""))},e.fromAscii=function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r).toString(16);e+=n.length<2?"0".concat(n):n}return"0x".concat(e)},e.getKeys=function(t,e,r){if(!Array.isArray(t))throw Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof t));if("string"!=typeof e)throw Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof t));for(var n=[],i=0;i<t.length;i++){var o=t[i][e];if(r&&!o)o="";else if("string"!=typeof o)throw Error("invalid abi - expected type 'string', received ".concat(typeof o));n.push(o)}return n},e.isHexString=function(t,e){return"string"==typeof t&&!!t.match(/^0x[0-9A-Fa-f]*$/)&&(!e||t.length===2+2*e)}},80867:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defineProperties=void 0;var o=i(r(69282)),s=r(54846),a=r(14538),u=r(14651);e.defineProperties=function(t,e,r){if(t.raw=[],t._fields=[],t.toJSON=function(e){if(void 0===e&&(e=!1),e){var r={};return t._fields.forEach(function(e){r[e]="0x".concat(t[e].toString("hex"))}),r}return(0,u.baToJSON)(t.raw)},t.serialize=function(){return a.rlp.encode(t.raw)},e.forEach(function(e,r){function i(){return t.raw[r]}function s(i){"00"!==(i=(0,u.toBuffer)(i)).toString("hex")||e.allowZero||(i=n.allocUnsafe(0)),e.allowLess&&e.length?(i=(0,u.unpadBuffer)(i),(0,o.default)(e.length>=i.length,"The field ".concat(e.name," must not have more ").concat(e.length," bytes"))):!(e.allowZero&&0===i.length)&&e.length&&(0,o.default)(e.length===i.length,"The field ".concat(e.name," must have byte length of ").concat(e.length)),t.raw[r]=i}t._fields.push(e.name),Object.defineProperty(t,e.name,{enumerable:!0,configurable:!0,get:i,set:s}),e.default&&(t[e.name]=e.default),e.alias&&Object.defineProperty(t,e.alias,{enumerable:!1,configurable:!0,set:s,get:i})}),r){if("string"==typeof r&&(r=n.from((0,s.stripHexPrefix)(r),"hex")),n.isBuffer(r)&&(r=a.rlp.decode(r)),Array.isArray(r)){if(r.length>t._fields.length)throw Error("wrong number of fields in data");r.forEach(function(e,r){t[t._fields[r]]=(0,u.toBuffer)(e)})}else if("object"==typeof r){var i=Object.keys(r);e.forEach(function(e){-1!==i.indexOf(e.name)&&(t[e.name]=r[e.name]),-1!==i.indexOf(e.alias)&&(t[e.alias]=r[e.alias])})}else throw Error("invalid data")}}},77112:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.hashPersonalMessage=e.isValidSignature=e.fromRpcSig=e.toCompactSig=e.toRpcSig=e.ecrecover=e.ecsign=void 0;var i=r(43091),o=r(14538),s=r(14651),a=r(45641),u=r(63746),c=r(2971);function l(t,e){var r=(0,c.toType)(t,c.TypeOutput.BN);if(r.eqn(0)||r.eqn(1))return(0,c.toType)(t,c.TypeOutput.BN);if(!e)return r.subn(27);var n=(0,c.toType)(e,c.TypeOutput.BN);return r.sub(n.muln(2).addn(35))}function h(t){var e=new o.BN(t);return e.eqn(0)||e.eqn(1)}e.ecsign=function(t,e,r){var o=(0,i.ecdsaSign)(t,e),s=o.signature,a=o.recid,u=n.from(s.slice(0,32)),l=n.from(s.slice(32,64));if(!r||"number"==typeof r){if(r&&!Number.isSafeInteger(r))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:u,s:l,v:r?a+(2*r+35):a+27}}return{r:u,s:l,v:(0,c.toType)(r,c.TypeOutput.BN).muln(2).addn(35).addn(a).toArrayLike(n)}},e.ecrecover=function(t,e,r,o,a){var u=n.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(o,32)],64),c=l(e,a);if(!h(c))throw Error("Invalid signature v value");var d=(0,i.ecdsaRecover)(u,c.toNumber(),t);return n.from((0,i.publicKeyConvert)(d,!1).slice(1))},e.toRpcSig=function(t,e,r,i){if(!h(l(t,i)))throw Error("Invalid signature v value");return(0,s.bufferToHex)(n.concat([(0,s.setLengthLeft)(e,32),(0,s.setLengthLeft)(r,32),(0,s.toBuffer)(t)]))},e.toCompactSig=function(t,e,r,i){if(!h(l(t,i)))throw Error("Invalid signature v value");var o=(0,c.toType)(t,c.TypeOutput.Number),a=r;return(o>28&&o%2==1||1===o||28===o)&&(a=n.from(r),a[0]|=128),(0,s.bufferToHex)(n.concat([(0,s.setLengthLeft)(e,32),(0,s.setLengthLeft)(a,32)]))},e.fromRpcSig=function(t){var e,r,n,i=(0,s.toBuffer)(t);if(i.length>=65)e=i.slice(0,32),r=i.slice(32,64),n=(0,s.bufferToInt)(i.slice(64));else if(64===i.length)e=i.slice(0,32),r=i.slice(32,64),n=(0,s.bufferToInt)(i.slice(32,33))>>7,r[0]&=127;else throw Error("Invalid signature length");return n<27&&(n+=27),{v:n,r:e,s:r}},e.isValidSignature=function(t,e,r,n,i){void 0===n&&(n=!0);var s=new o.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),a=new o.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==e.length||32!==r.length||!h(l(t,i)))return!1;var u=new o.BN(e),c=new o.BN(r);return!(u.isZero()||u.gt(a)||c.isZero()||c.gt(a))&&(!n||1!==c.cmp(s))},e.hashPersonalMessage=function(t){(0,u.assertIsBuffer)(t);var e=n.from("\x19Ethereum Signed Message:\n".concat(t.length),"utf-8");return(0,a.keccak)(n.concat([e,t]))}},2971:function(t,e,r){"use strict";var n,i,o=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=e.bnToRlp=e.bnToUnpaddedBuffer=e.bnToHex=void 0;var s=r(14538),a=r(54846),u=r(14651);function c(t){return(0,u.unpadBuffer)(t.toArrayLike(o))}e.bnToHex=function(t){return"0x".concat(t.toString(16))},e.bnToUnpaddedBuffer=c,e.bnToRlp=function(t){return c(t)},(n=i=e.TypeOutput||(e.TypeOutput={}))[n.Number=0]="Number",n[n.BN=1]="BN",n[n.Buffer=2]="Buffer",n[n.PrefixedHexString=3]="PrefixedHexString",e.toType=function(t,e){if(null===t)return null;if(void 0!==t){if("string"!=typeof t||(0,a.isHexString)(t)){if("number"==typeof t&&!Number.isSafeInteger(t))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)")}else throw Error("A string must be provided with a 0x-prefix, given: ".concat(t));var r=(0,u.toBuffer)(t);if(e===i.Buffer)return r;if(e===i.BN)return new s.BN(r);if(e!==i.Number)return"0x".concat(r.toString("hex"));var n=new s.BN(r),o=new s.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(o))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}}},15919:function(t,e,r){"use strict";var n=r(48764).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.createHashFunction=function(t){return function(e){var r=t();return r.update(e),n.from(r.digest())}}},72543:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(15919),i=r(70608);e.keccak224=n.createHashFunction(function(){return i("keccak224")}),e.keccak256=n.createHashFunction(function(){return i("keccak256")}),e.keccak384=n.createHashFunction(function(){return i("keccak384")}),e.keccak512=n.createHashFunction(function(){return i("keccak512")})},30459:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(61798);e.getRandomBytes=function(t){return new Promise(function(e,r){n(t,function(t,n){if(t){r(t);return}e(n)})})},e.getRandomBytesSync=function(t){return n(t)}},43091:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(s,a)}u((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(17221),s=r(30459);e.createPrivateKey=function(){return n(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,s.getRandomBytes(32)];case 1:if(t=e.sent(),o.privateKeyVerify(t))return[2,t];return[3,0];case 2:return[2]}})})},e.createPrivateKeySync=function(){for(;;){var t=s.getRandomBytesSync(32);if(o.privateKeyVerify(t))return t}},function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(17221))},70608:function(t,e,r){t.exports=r(62131)(r(65665))},62131:function(t,e,r){let n=r(63240),i=r(84792);t.exports=function(t){let e=n(t),r=i(t);return function(t,n){let i="string"==typeof t?t.toLowerCase():t;switch(i){case"keccak224":return new e(1152,448,null,224,n);case"keccak256":return new e(1088,512,null,256,n);case"keccak384":return new e(832,768,null,384,n);case"keccak512":return new e(576,1024,null,512,n);case"sha3-224":return new e(1152,448,6,224,n);case"sha3-256":return new e(1088,512,6,256,n);case"sha3-384":return new e(832,768,6,384,n);case"sha3-512":return new e(576,1024,6,512,n);case"shake128":return new r(1344,256,31,n);case"shake256":return new r(1088,512,31,n);default:throw Error("Invald algorithm: "+t)}}}},63240:function(t,e,r){var n=r(48764).Buffer;let{Transform:i}=r(88473);t.exports=t=>class e extends i{constructor(e,r,n,i,o){super(o),this._rate=e,this._capacity=r,this._delimitedSuffix=n,this._hashBitLength=i,this._options=o,this._state=new t,this._state.initialize(e,r),this._finalized=!1}_transform(t,e,r){let n=null;try{this.update(t,e)}catch(t){n=t}r(n)}_flush(t){let e=null;try{this.push(this.digest())}catch(t){e=t}t(e)}update(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Digest already called");return n.isBuffer(t)||(t=n.from(t,e)),this._state.absorb(t),this}digest(t){if(this._finalized)throw Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let e=this._state.squeeze(this._hashBitLength/8);return void 0!==t&&(e=e.toString(t)),this._resetState(),e}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let t=new e(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(t._state),t._finalized=this._finalized,t}}},84792:function(t,e,r){var n=r(48764).Buffer;let{Transform:i}=r(88473);t.exports=t=>class e extends i{constructor(e,r,n,i){super(i),this._rate=e,this._capacity=r,this._delimitedSuffix=n,this._options=i,this._state=new t,this._state.initialize(e,r),this._finalized=!1}_transform(t,e,r){let n=null;try{this.update(t,e)}catch(t){n=t}r(n)}_flush(){}_read(t){this.push(this.squeeze(t))}update(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw TypeError("Data must be a string or a buffer");if(this._finalized)throw Error("Squeeze already called");return n.isBuffer(t)||(t=n.from(t,e)),this._state.absorb(t),this}squeeze(t,e){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(t);return void 0!==e&&(r=r.toString(e)),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let t=new e(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(t._state),t._finalized=this._finalized,t}}},44732:function(t,e){let r=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];e.p1600=function(t){for(let e=0;e<24;++e){let n=t[0]^t[10]^t[20]^t[30]^t[40],i=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],h=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49],f=h^(o<<1|s>>>31),p=d^(s<<1|o>>>31),m=t[0]^f,g=t[1]^p,y=t[10]^f,v=t[11]^p,w=t[20]^f,b=t[21]^p,_=t[30]^f,M=t[31]^p,E=t[40]^f,A=t[41]^p;f=n^(a<<1|u>>>31),p=i^(u<<1|a>>>31);let S=t[2]^f,I=t[3]^p,T=t[12]^f,k=t[13]^p,N=t[22]^f,x=t[23]^p,P=t[32]^f,O=t[33]^p,C=t[42]^f,R=t[43]^p;f=o^(c<<1|l>>>31),p=s^(l<<1|c>>>31);let L=t[4]^f,B=t[5]^p,D=t[14]^f,K=t[15]^p,F=t[24]^f,j=t[25]^p,U=t[34]^f,H=t[35]^p,q=t[44]^f,$=t[45]^p;f=a^(h<<1|d>>>31),p=u^(d<<1|h>>>31);let G=t[6]^f,z=t[7]^p,W=t[16]^f,V=t[17]^p,Z=t[26]^f,J=t[27]^p,X=t[36]^f,Y=t[37]^p,Q=t[46]^f,tt=t[47]^p;f=c^(n<<1|i>>>31),p=l^(i<<1|n>>>31);let te=t[8]^f,tr=t[9]^p,tn=t[18]^f,ti=t[19]^p,to=t[28]^f,ts=t[29]^p,ta=t[38]^f,tu=t[39]^p,tc=t[48]^f,tl=t[49]^p,th=v<<4|y>>>28,td=y<<4|v>>>28,tf=w<<3|b>>>29,tp=b<<3|w>>>29,tm=M<<9|_>>>23,tg=_<<9|M>>>23,ty=E<<18|A>>>14,tv=A<<18|E>>>14,tw=S<<1|I>>>31,tb=I<<1|S>>>31,t_=k<<12|T>>>20,tM=T<<12|k>>>20,tE=N<<10|x>>>22,tA=x<<10|N>>>22,tS=O<<13|P>>>19,tI=P<<13|O>>>19,tT=C<<2|R>>>30,tk=R<<2|C>>>30,tN=B<<30|L>>>2,tx=L<<30|B>>>2,tP=D<<6|K>>>26,tO=K<<6|D>>>26,tC=j<<11|F>>>21,tR=F<<11|j>>>21,tL=U<<15|H>>>17,tB=H<<15|U>>>17,tD=$<<29|q>>>3,tK=q<<29|$>>>3,tF=G<<28|z>>>4,tj=z<<28|G>>>4,tU=V<<23|W>>>9,tH=W<<23|V>>>9,tq=Z<<25|J>>>7,t$=J<<25|Z>>>7,tG=X<<21|Y>>>11,tz=Y<<21|X>>>11,tW=tt<<24|Q>>>8,tV=Q<<24|tt>>>8,tZ=te<<27|tr>>>5,tJ=tr<<27|te>>>5,tX=tn<<20|ti>>>12,tY=ti<<20|tn>>>12,tQ=ts<<7|to>>>25,t0=to<<7|ts>>>25,t1=ta<<8|tu>>>24,t2=tu<<8|ta>>>24,t6=tc<<14|tl>>>18,t8=tl<<14|tc>>>18;t[0]=m^~t_&tC,t[1]=g^~tM&tR,t[10]=tF^~tX&tf,t[11]=tj^~tY&tp,t[20]=tw^~tP&tq,t[21]=tb^~tO&t$,t[30]=tZ^~th&tE,t[31]=tJ^~td&tA,t[40]=tN^~tU&tQ,t[41]=tx^~tH&t0,t[2]=t_^~tC&tG,t[3]=tM^~tR&tz,t[12]=tX^~tf&tS,t[13]=tY^~tp&tI,t[22]=tP^~tq&t1,t[23]=tO^~t$&t2,t[32]=th^~tE&tL,t[33]=td^~tA&tB,t[42]=tU^~tQ&tm,t[43]=tH^~t0&tg,t[4]=tC^~tG&t6,t[5]=tR^~tz&t8,t[14]=tf^~tS&tD,t[15]=tp^~tI&tK,t[24]=tq^~t1&ty,t[25]=t$^~t2&tv,t[34]=tE^~tL&tW,t[35]=tA^~tB&tV,t[44]=tQ^~tm&tT,t[45]=t0^~tg&tk,t[6]=tG^~t6&m,t[7]=tz^~t8&g,t[16]=tS^~tD&tF,t[17]=tI^~tK&tj,t[26]=t1^~ty&tw,t[27]=t2^~tv&tb,t[36]=tL^~tW&tZ,t[37]=tB^~tV&tJ,t[46]=tm^~tT&tN,t[47]=tg^~tk&tx,t[8]=t6^~m&t_,t[9]=t8^~g&tM,t[18]=tD^~tF&tX,t[19]=tK^~tj&tY,t[28]=ty^~tw&tP,t[29]=tv^~tb&tO,t[38]=tW^~tZ&th,t[39]=tV^~tJ&td,t[48]=tT^~tN&tU,t[49]=tk^~tx&tH,t[0]^=r[2*e],t[1]^=r[2*e+1]}}},65665:function(t,e,r){var n=r(48764).Buffer;let i=r(44732);function o(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}o.prototype.initialize=function(t,e){for(let t=0;t<50;++t)this.state[t]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1},o.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(i.p1600(this.state),this.count=0)},o.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(128&t)!=0&&this.count===this.blockSize-1&&i.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),i.p1600(this.state),this.count=0,this.squeezing=!0},o.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);let e=n.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(i.p1600(this.state),this.count=0);return e},o.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing},t.exports=o},94278:function(t,e,r){"use strict";var n=r(43614),i=r(83206),o=new n(0),s=new n(-1),a={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function u(t){var e=a[t?t.toLowerCase():"ether"];if("string"!=typeof e)throw Error("[ethjs-unit] the unit provided "+t+" doesn't exists, please use the one of the following units "+JSON.stringify(a,null,2));return new n(e,10)}function c(t){if("string"==typeof t){if(!t.match(/^-?[0-9.]+$/))throw Error("while converting number to string, invalid number value '"+t+"', should be a number matching (^-?[0-9.]+).");return t}if("number"==typeof t)return String(t);if("object"==typeof t&&t.toString&&(t.toTwos||t.dividedToIntegerBy))return t.toPrecision?String(t.toPrecision()):t.toString(10);throw Error("while converting number to string, invalid number value '"+t+"' type "+typeof t+".")}t.exports={unitMap:a,numberToString:c,getValueOfUnit:u,fromWei:function(t,e,r){var n=i(t),c=n.lt(o),l=u(e),h=a[e].length-1||1,d=r||{};c&&(n=n.mul(s));for(var f=n.mod(l).toString(10);f.length<h;)f="0"+f;d.pad||(f=f.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var p=n.div(l).toString(10);d.commify&&(p=p.replace(/\B(?=(\d{3})+(?!\d))/g,","));var m=""+p+("0"==f?"":"."+f);return c&&(m="-"+m),m},toWei:function(t,e){var r=c(t),i=u(e),o=a[e].length-1||1,l="-"===r.substring(0,1);if(l&&(r=r.substring(1)),"."===r)throw Error("[ethjs-unit] while converting number "+t+" to wei, invalid value");var h=r.split(".");if(h.length>2)throw Error("[ethjs-unit] while converting number "+t+" to wei,  too many decimal points");var d=h[0],f=h[1];if(d||(d="0"),f||(f="0"),f.length>o)throw Error("[ethjs-unit] while converting number "+t+" to wei, too many decimal places");for(;f.length<o;)f+="0";d=new n(d),f=new n(f);var p=d.mul(i).add(f);return l&&(p=p.mul(s)),new n(p.toString(10),10)}}},43614:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{u=r(48764).Buffer}catch(t){}function s(t,e,r){for(var n=0,i=Math.min(t.length,r),o=e;o<i;o++){var s=t.charCodeAt(o)-48;n<<=4,s>=49&&s<=54?n|=s-49+10:s>=17&&s<=22?n|=s-17+10:n|=15&s}return n}function a(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,a>=49?i+=a-49+10:a>=17?i+=a-17+10:i+=a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n,i=0;i<this.length;i++)this.words[i]=0;var o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,u=Math.min(o,o-s)+r,c=0,l=r;l<u;l+=n)c=a(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=a(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u,c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var d=l[t],f=h[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);r=(p=p.idivn(f)).isZero()?m+r:c[d-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==u),this.toArrayLike(u,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i,o,s=this.byteLength(),a=r||Math.max(1,s);n(s<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var u=new t(a),c=this.clone();if("le"===e){for(o=0;!c.isZero();o++)i=c.andln(255),c.iushrn(8),u[o]=i;for(;o<a;o++)u[o]=0}else{for(o=0;o<a-s;o++)u[o]=0;for(o=0;!c.isZero();o++)i=c.andln(255),c.iushrn(8),u[a-o-1]=i}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function p(t,e,r){return new m().mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(f=d),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,e):r<63?d(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},m.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},m.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},m.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},m.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),p(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=(i/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r.strip(),i.strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=67108864%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},i(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,y),i(b,y),i(_,y),_.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(g[t])return g[t];if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new b;else if("p25519"===t)e=new _;else throw Error("Unknown prime "+t);return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,M),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},41249:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findReplacementTx=e.getTransactionByNonce=e.TxValidationError=e.SearchError=void 0;let n=r(20548);class i extends Error{}e.SearchError=i;class o extends Error{}async function s(t,e,r,n){let o=await t.getTransactionCount(r,"latest")-1;if(o<n)return null;let s=await t.getTransactionCount(r,e-1)-1;if(n<=s){let t=`Nonce ${n} from ${r} is used before block ${e}`;throw new i(t)}let a=await t.getBlockNumber(),u=e;for(;u<a;){let e=Math.floor((u+a)/2),i=await t.getTransactionCount(r,e)-1;i<n?u=e+1:a=e}let c=await t.getBlockWithTransactions(u),l=c.transactions.find(t=>t.from.toLowerCase()===r.toLowerCase()&&t.nonce===n);if(!l)throw new i("Error finding transaction in block.");return l}async function a(t,e,r,i){let a=await s(t,e,r.from,r.nonce);if(!a)return null;if("0x"===a.data&&a.from===a.to&&a.value.isZero())throw new o("Transaction canceled.");if(a.to.toLowerCase()!==r.to.toLowerCase()){let t=`Failed to validate transaction recipient.
      Expected ${r.to}, got ${a.to}.
      Transaction was dropped and replaced by '${a.hash}'`;throw new o(t)}if(r.data&&a.data!==r.data){let t=`Failed to validate transaction data.
        Expected ${r.data}, got ${a.data}.
        Transaction was dropped and replaced by '${a.hash}'`;throw new o(t)}if(r.value&&a.value.toString()!==r.value){let t=`Failed to validate transaction value.
        Expected ${r.value}, got ${a.value.toString()}.
        Transaction was dropped and replaced by '${a.hash}'`;throw new o(t)}if(i){let e=new n.ethers.Contract(i.address,i.abi,t),r=e.filters[i.name](),s=await e.queryFilter(r,a.blockNumber,a.blockNumber),u=s.find(t=>t.transactionHash===a.hash);if(!u||!i.validate({returnValues:u.args})){let t=`Failed to validate event.
        Transaction was dropped and replaced by '${a.hash}'`;throw new o(t)}}return a}e.TxValidationError=o,e.getTransactionByNonce=s,e.findReplacementTx=a},23944:function(t){t.exports=function(t){if("string"!=typeof t)throw Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return"0x"===t.slice(0,2)}},16101:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trie=void 0;let n=r(22751),i=r(14706),o=r(23963);class s{constructor(){this._db=new Map}get(t){let e=this._db.get(t.toString("hex"));return e}put(t,e){this._db.set(t.toString("hex"),e)}del(t){this._db.delete(t.toString("hex"))}batch(t){t.forEach(t=>{"put"===t.type?this.put(t.key,t.value):"del"===t.type&&this.del(t.key)})}}class a{constructor(){this.EMPTY_TRIE_ROOT=n.KECCAK256_RLP,this.db=new s,this._root=this.EMPTY_TRIE_ROOT}get root(){return this._root}get isCheckpoint(){return!1}get(t){let{node:e,remaining:r}=this.findPath(t),n=null;return e&&0===r.length&&(n=e.value),n}put(t,e){if(!e||""===e.toString())return this.del(t);if(this.root.equals(n.KECCAK256_RLP))this._createInitialNode(t,e);else{let{remaining:r,stack:n}=this.findPath(t);this._updateNode(t,e,r,n)}}del(t){let{node:e,stack:r}=this.findPath(t);e&&this._deleteNode(t,r)}lookupNode(t){if((0,o.isRawNode)(t))return(0,o.decodeRawNode)(t);let e=null,r=this.db.get(t);return void 0!==r&&(e=(0,o.decodeNode)(r)),e}findPath(t){let e=[],r=(0,i.bufferToNibbles)(t),n=(t,s)=>{let a=r.slice((0,i.matchingNibbleLength)(s,r)),u=this.lookupNode(t);if(null!==u){if(e.push(u),u instanceof o.BranchNode){if(0===a.length)return{node:u,remaining:[],stack:e};{let t=a[0],r=u.getBranch(t);if(!r)return{node:null,remaining:a,stack:e};{let e=s.slice();return e.push(t),n(r,e)}}}if(u instanceof o.LeafNode)return(0,i.doKeysMatch)(a,u.key)?{node:u,remaining:[],stack:e}:{node:null,remaining:a,stack:e};if(u instanceof o.ExtensionNode){let t=(0,i.matchingNibbleLength)(a,u.key);if(t!==u.key.length)return{node:null,remaining:a,stack:e};{let t=u.key,e=s.concat(t),r=u.value;return n(r,e)}}}};return n(this._root,[])}_createInitialNode(t,e){let r=new o.LeafNode((0,i.bufferToNibbles)(t),e);this._root=r.hash(),this.db.put(this.root,r.serialize())}_updateNode(t,e,r,n){let s=[],a=n.pop();if(void 0===a)throw Error("Stack underflow");let u=(0,i.bufferToNibbles)(t),c=!1;if(a instanceof o.LeafNode){let t=0;for(let e=0;e<n.length;e++){let r=n[e];r instanceof o.BranchNode?t++:t+=r.key.length}(0,i.matchingNibbleLength)(a.key,u.slice(t))===a.key.length&&0===r.length&&(c=!0)}if(c)a.value=e,n.push(a);else if(a instanceof o.BranchNode){if(n.push(a),0!==r.length){r.shift();let t=new o.LeafNode(r,e);n.push(t)}else a.value=e}else{let t=a.key,u=(0,i.matchingNibbleLength)(t,r),c=new o.BranchNode;if(0!==u){let i=a.key.slice(0,u),s=new o.ExtensionNode(i,e);n.push(s),t.splice(0,u),r.splice(0,u)}if(n.push(c),0!==t.length){let e=t.shift();if(0!==t.length||a instanceof o.LeafNode){a.key=t;let r=this._formatNode(a,!1,s);c.setBranch(e,r)}else this._formatNode(a,!1,s,!0),c.setBranch(e,a.value)}else c.value=a.value;if(0!==r.length){r.shift();let t=new o.LeafNode(r,e);n.push(t)}else c.value=e}this._saveStack(u,n,s)}_deleteNode(t,e){let r=e.pop(),n=e.pop(),s=[],a=(0,i.bufferToNibbles)(t);if(void 0===n){this._root=this.EMPTY_TRIE_ROOT;return}if(r instanceof o.BranchNode)r.value=null;else{if(!(n instanceof o.BranchNode))throw Error("Expected branch node");let t=r.key;a.splice(a.length-t.length),this._formatNode(r,!1,s,!0),n.setBranch(a.pop(),null),r=n,n=e.pop()}let u=r.getChildren();if(1===u.length){let t=u[0][1],r=u[0][0],i=this.lookupNode(t);i&&(a=((t,e,r,n,i)=>{if(!n||n instanceof o.BranchNode){if(n&&i.push(n),r instanceof o.BranchNode){let r=new o.ExtensionNode([e],null);i.push(r),t.push(e)}else{let n=r.key;n.unshift(e),r.key=n.slice(0),t=t.concat(n)}i.push(r)}else{let s=n.key;if(r instanceof o.BranchNode)s.push(e),t.push(e),n.key=s,i.push(n);else{let n=r.key;n.unshift(e),t=t.concat(n),s=s.concat(n),r.key=s}i.push(r)}return t})(a,r,i,n,e),this._saveStack(a,e,s))}else n&&e.push(n),e.push(r),this._saveStack(a,e,s)}_saveStack(t,e,r){let n;for(;e.length;){let i=e.pop();if(i instanceof o.LeafNode)t.splice(t.length-i.key.length);else if(i instanceof o.ExtensionNode)t.splice(t.length-i.key.length),n&&(i.value=n);else if(i instanceof o.BranchNode&&n){let e=t.pop();i.setBranch(e,n)}n=this._formatNode(i,0===e.length,r)}n&&(this._root=n),this.db.batch(r)}_formatNode(t,e,r,i=!1){let o=t.serialize();if(o.length>=32||e){let t=(0,n.keccak)(o);return i&&this.isCheckpoint?r.push({type:"del",key:t}):r.push({type:"put",key:t,value:o}),t}return t.raw()}}e.Trie=a},54748:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trie=void 0;var n=r(16101);Object.defineProperty(e,"Trie",{enumerable:!0,get:function(){return n.Trie}})},23963:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.isRawNode=e.decodeNode=e.decodeRawNode=e.LeafNode=e.ExtensionNode=e.BranchNode=void 0;let a=s(r(51675)),u=r(22751),c=r(14706),l=r(80621);class h{constructor(){this._branches=Array(16).fill(null),this._value=null}static fromArray(t){let e=new h;return e._branches=t.slice(0,16),e._value=t[16],e}get value(){return this._value&&this._value.length>0?this._value:null}set value(t){this._value=t}setBranch(t,e){this._branches[t]=e}raw(){return[...this._branches,this._value]}serialize(){return a.encode(this.raw())}hash(){return(0,u.keccak256)(this.serialize())}getBranch(t){let e=this._branches[t];return null!==e&&e.length>0?e:null}getChildren(){let t=[];for(let e=0;e<16;e++){let r=this._branches[e];null!==r&&r.length>0&&t.push([e,r])}return t}}e.BranchNode=h;class d{constructor(t,e){this._nibbles=t,this._value=e}static encodeKey(t){return(0,l.addHexPrefix)(t,!1)}static decodeKey(t){return(0,l.removeHexPrefix)(t)}get key(){return this._nibbles.slice(0)}set key(t){this._nibbles=t}get value(){return this._value}set value(t){this._value=t}encodedKey(){return d.encodeKey(this._nibbles.slice(0))}raw(){return[(0,c.nibblesToBuffer)(this.encodedKey()),this._value]}serialize(){return a.encode(this.raw())}hash(){return(0,u.keccak256)(this.serialize())}}e.ExtensionNode=d;class f{constructor(t,e){this._nibbles=t,this._value=e}static encodeKey(t){return(0,l.addHexPrefix)(t,!0)}static decodeKey(t){return(0,l.removeHexPrefix)(t)}get key(){return this._nibbles.slice(0)}set key(t){this._nibbles=t}get value(){return this._value}set value(t){this._value=t}encodedKey(){return f.encodeKey(this._nibbles.slice(0))}raw(){return[(0,c.nibblesToBuffer)(this.encodedKey()),this._value]}serialize(){return a.encode(this.raw())}hash(){return(0,u.keccak256)(this.serialize())}}function p(t){if(17===t.length)return h.fromArray(t);if(2===t.length){let e=(0,c.bufferToNibbles)(t[0]);return(0,l.isTerminator)(e)?new f(f.decodeKey(e),t[1]):new d(d.decodeKey(e),t[1])}throw Error("Invalid node")}e.LeafNode=f,e.decodeRawNode=p,e.decodeNode=function(t){let e=a.decode(t);if(!Array.isArray(e))throw Error("Invalid node");return p(e)},e.isRawNode=function(t){return Array.isArray(t)&&!n.isBuffer(t)}},80621:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTerminator=e.removeHexPrefix=e.addHexPrefix=void 0,e.addHexPrefix=function(t,e){return t.length%2?t.unshift(1):(t.unshift(0),t.unshift(0)),e&&(t[0]+=2),t},e.removeHexPrefix=function(t){return t=t[0]%2?t.slice(1):t.slice(2)},e.isTerminator=function(t){return t[0]>1}},14706:function(t,e,r){"use strict";var n=r(48764).Buffer;function i(t,e){let r=0;for(;t[r]===e[r]&&t.length>r;)r++;return r}Object.defineProperty(e,"__esModule",{value:!0}),e.doKeysMatch=e.matchingNibbleLength=e.nibblesToBuffer=e.bufferToNibbles=void 0,e.bufferToNibbles=function(t){let e=n.from(t),r=[];for(let t=0;t<e.length;t++){let n=2*t;r[n]=e[t]>>4,r[++n]=e[t]%16}return r},e.nibblesToBuffer=function(t){let e=n.alloc(t.length/2);for(let r=0;r<e.length;r++){let n=2*r;e[r]=(t[n]<<4)+t[++n]}return e},e.matchingNibbleLength=i,e.doKeysMatch=function(t,e){let r=i(t,e);return r===t.length&&r===e.length}},64898:function(t,e,r){"use strict";var n=r(48764).Buffer,i=r(34155);Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidStatusCodeError=e.InvalidCertError=void 0;let o=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class s extends Error{constructor(t,e){super(t),this.fingerprint256=e}}e.InvalidCertError=s;class a extends Error{constructor(t){super(`Request Failed. Status Code: ${t}`),this.statusCode=t}}function u(t,e){if(!e||"text"===e||"json"===e)try{let r=new TextDecoder("utf8",{fatal:!0}).decode(t);if("text"===e)return r;try{return JSON.parse(r)}catch(t){if("json"===e)throw t;return r}}catch(t){if("text"===e||"json"===e)throw t}return t}e.InvalidStatusCodeError=a;let c={},l=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map(t=>t.toLowerCase())),h=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map(t=>t.toLowerCase()));async function d(t,e){let r={...o,...e},n=new Headers;"json"===r.type&&n.set("Content-Type","application/json");let i=new URL(t);if(i.username){let t=btoa(`${i.username}:${i.password}`);n.set("Authorization",`Basic ${t}`),i.username="",i.password=""}for(let e in t=""+i,r.headers){let t=e.toLowerCase();(l.has(t)||r.cors&&!h.has(t))&&n.set(e,r.headers[e])}let s={headers:n,redirect:r.redirect?"follow":"manual"};r.referrer||(s.referrerPolicy="no-referrer"),r.cors&&(s.mode="cors"),r.data&&(r.method||(s.method="POST"),s.body="json"===r.type?JSON.stringify(r.data):r.data);let c=await fetch(t,s);if(r.expectStatusCode&&c.status!==r.expectStatusCode)throw new a(c.status);let d=u(new Uint8Array(await c.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(c.headers.entries()),status:c.status,body:d}:d}let f=!!("object"==typeof i&&i.versions&&i.versions.node&&i.versions.v8);e.default=function(t,e){let i=f?function t(e,i){let l={...o,...i},h=r(22321),d=r(78428),f=r(47715),{promisify:p}=r(89539),{resolve:m}=r(11987),g=!!/^https/.test(e),y={method:l.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}},v=t=>t.replace(/:| /g,"").toLowerCase();if(l.keepAlive){let t=[g,g&&l.sslPinnedCertificates?.map(t=>v(t)).sort()].join();y.agent=c[t]||(c[t]=new(g?d:h).Agent({keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024}))}"json"===l.type&&(y.headers["Content-Type"]="application/json"),l.data&&(l.method||(y.method="POST"),y.body="json"===l.type?JSON.stringify(l.data):l.data),y.headers={...y.headers,...l.headers},l.sslAllowSelfSigned&&(y.rejectUnauthorized=!1);let w=async r=>{let i=r.statusCode;if(l.redirect&&300<=i&&i<400&&r.headers.location){if(10==l._redirectCount)throw Error("Request failed. Too much redirects.");return l._redirectCount+=1,await t(m(e,r.headers.location),l)}if(l.expectStatusCode&&i!==l.expectStatusCode)throw r.resume(),new a(i);let o=[];for await(let t of r)o.push(t);let s=n.concat(o),c=r.headers["content-encoding"];"br"===c&&(s=await p(f.brotliDecompress)(s)),("gzip"===c||"deflate"===c)&&(s=await p(f.unzip)(s));let h=u(s,l.type);return l.full?{headers:r.headers,status:i,body:h}:h};return new Promise((r,n)=>{let i=async r=>{if(r&&"DEPTH_ZERO_SELF_SIGNED_CERT"===r.code)try{await t(e,{...l,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(t){t&&t.fingerprint256&&(r=new s(`Self-signed SSL certificate: ${t.fingerprint256}`,t.fingerprint256))}n(r)},o=(g?d:h).request(e,y,t=>{t.on("error",i),(async()=>{try{r(await w(t))}catch(t){n(t)}})()});o.on("error",i);let a=l.sslPinnedCertificates?.map(t=>v(t)),u=t=>{let e=v(t.getPeerCertificate()?.fingerprint256||"");if(!(!e&&t.isSessionReused())&&!a.includes(e))return o.emit("error",new s(`Invalid SSL certificate: ${e} Expected: ${a}`,e)),o.abort()};l.sslPinnedCertificates&&o.on("socket",t=>{let e=t.listeners("secureConnect").map(t=>(t.name||"").replace("bound ","")).includes("mfetchSecureConnect");e||t.on("secureConnect",u.bind(null,t))}),l.keepAlive&&o.setNoDelay(!0),y.body&&o.write(y.body),o.end()})}:d;return i(t,e)}},12422:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createAsyncLocalStorage",{enumerable:!0,get:function(){return o}});let r=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}}let i=globalThis.AsyncLocalStorage;function o(){return i?new i:new n}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},88427:function(t,e,r){"use strict";function n(t){}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"clientHookInServerComponentError",{enumerable:!0,get:function(){return n}}),r(38754),r(67294),("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},30636:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{ReadonlyURLSearchParams:function(){return f},useSearchParams:function(){return p},usePathname:function(){return m},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return u.useServerInsertedHTML},useRouter:function(){return g},useParams:function(){return y},useSelectedLayoutSegments:function(){return v},useSelectedLayoutSegment:function(){return w},redirect:function(){return c.redirect},permanentRedirect:function(){return c.permanentRedirect},RedirectType:function(){return c.RedirectType},notFound:function(){return l.notFound}});let n=r(67294),i=r(89031),o=r(11593),s=r(88427),a=r(6160),u=r(30252),c=r(37866),l=r(49363),h=Symbol("internal for urlsearchparams readonly");function d(){return Error("ReadonlyURLSearchParams cannot be modified")}class f{[Symbol.iterator](){return this[h][Symbol.iterator]()}append(){throw d()}delete(){throw d()}set(){throw d()}sort(){throw d()}constructor(t){this[h]=t,this.entries=t.entries.bind(t),this.forEach=t.forEach.bind(t),this.get=t.get.bind(t),this.getAll=t.getAll.bind(t),this.has=t.has.bind(t),this.keys=t.keys.bind(t),this.values=t.values.bind(t),this.toString=t.toString.bind(t),this.size=t.size}}function p(){(0,s.clientHookInServerComponentError)("useSearchParams");let t=(0,n.useContext)(o.SearchParamsContext),e=(0,n.useMemo)(()=>t?new f(t):null,[t]);return e}function m(){return(0,s.clientHookInServerComponentError)("usePathname"),(0,n.useContext)(o.PathnameContext)}function g(){(0,s.clientHookInServerComponentError)("useRouter");let t=(0,n.useContext)(i.AppRouterContext);if(null===t)throw Error("invariant expected app router to be mounted");return t}function y(){(0,s.clientHookInServerComponentError)("useParams");let t=(0,n.useContext)(i.GlobalLayoutRouterContext),e=(0,n.useContext)(o.PathParamsContext);return(0,n.useMemo)(()=>(null==t?void 0:t.tree)?function t(e,r){void 0===r&&(r={});let n=e[1];for(let e of Object.values(n)){let n=e[0],i=Array.isArray(n),o=i?n[1]:n;if(!o||o.startsWith("__PAGE__"))continue;let s=i&&("c"===n[2]||"oc"===n[2]);s?r[n[0]]=n[1].split("/"):i&&(r[n[0]]=n[1]),r=t(e,r)}return r}(t.tree):e,[null==t?void 0:t.tree,e])}function v(t){void 0===t&&(t="children"),(0,s.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:e}=(0,n.useContext)(i.LayoutRouterContext);return function t(e,r,n,i){let o;if(void 0===n&&(n=!0),void 0===i&&(i=[]),n)o=e[1][r];else{var s;let t=e[1];o=null!=(s=t.children)?s:Object.values(t)[0]}if(!o)return i;let u=o[0],c=(0,a.getSegmentValue)(u);return!c||c.startsWith("__PAGE__")?i:(i.push(c),t(o,r,!1,i))}(e,t)}function w(t){void 0===t&&(t="children"),(0,s.clientHookInServerComponentError)("useSelectedLayoutSegment");let e=v(t);return 0===e.length?null:e[0]}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},49363:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{notFound:function(){return n},isNotFoundError:function(){return i}});let r="NEXT_NOT_FOUND";function n(){let t=Error(r);throw t.digest=r,t}function i(t){return(null==t?void 0:t.digest)===r}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},37866:function(t,e,r){"use strict";var n,i;Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{RedirectType:function(){return n},getRedirectError:function(){return a},redirect:function(){return u},permanentRedirect:function(){return c},isRedirectError:function(){return l},getURLFromRedirectError:function(){return h},getRedirectTypeFromError:function(){return d}});let o=r(23743),s="NEXT_REDIRECT";function a(t,e,r){void 0===r&&(r=!1);let n=Error(s);n.digest=s+";"+e+";"+t+";"+r;let i=o.requestAsyncStorage.getStore();return i&&(n.mutableCookies=i.mutableCookies),n}function u(t,e){throw void 0===e&&(e="replace"),a(t,e,!1)}function c(t,e){throw void 0===e&&(e="replace"),a(t,e,!0)}function l(t){if("string"!=typeof(null==t?void 0:t.digest))return!1;let[e,r,n,i]=t.digest.split(";",4);return e===s&&("replace"===r||"push"===r)&&"string"==typeof n&&("true"===i||"false"===i)}function h(t){return l(t)?t.digest.split(";",3)[2]:null}function d(t){if(!l(t))throw Error("Not a redirect error");return t.digest.split(";",2)[1]}(i=n||(n={})).push="push",i.replace="replace",("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},23743:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"requestAsyncStorage",{enumerable:!0,get:function(){return i}});let n=r(12422),i=(0,n.createAsyncLocalStorage)();("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},6160:function(t,e){"use strict";function r(t){return Array.isArray(t)?t[1]:t}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},30252:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{ServerInsertedHTMLContext:function(){return o},useServerInsertedHTML:function(){return s}});let n=r(61757),i=n._(r(67294)),o=i.default.createContext(null);function s(t){let e=(0,i.useContext)(o);e&&e(t)}},47715:function(t,e,r){var n=r(48764).Buffer,i=r(34155);!function(){"use strict";var e={742:function(t,e,r){var o=r(491),s=r(562),a=r(450),u=r(324),c=r(320);for(var l in c)e[l]=c[l];function h(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,h.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?a.deflateEnd(this.strm):(this.mode===e.INFLATE||this.mode===e.GUNZIP||this.mode===e.INFLATERAW||this.mode===e.UNZIP)&&u.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null},h.prototype.write=function(t,e,r,n,i,o,s){return this._write(!0,t,e,r,n,i,o,s)},h.prototype.writeSync=function(t,e,r,n,i,o,s){return this._write(!1,t,e,r,n,i,o,s)},h.prototype._write=function(t,r,s,a,u,c,l,h){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==e.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===r,"must provide flush value"),this.write_in_progress=!0,r!==e.Z_NO_FLUSH&&r!==e.Z_PARTIAL_FLUSH&&r!==e.Z_SYNC_FLUSH&&r!==e.Z_FULL_FLUSH&&r!==e.Z_FINISH&&r!==e.Z_BLOCK)throw Error("Invalid flush value");if(null==s&&(s=n.alloc(0),u=0,a=0),this.strm.avail_in=u,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=h,this.strm.output=c,this.strm.next_out=l,this.flush=r,!t)return(this._process(),this._checkError())?this._afterSync():void 0;var d=this;return i.nextTick(function(){d._process(),d._after()}),this},h.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},h.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31===this.strm.input[t]){if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break}else{this.mode=e.INFLATE;break}case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=u.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=u.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=u.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=u.inflate(this.strm,this.flush);break;default:throw Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},h.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(t,r,n,i,s){o(4==arguments.length||5==arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(t>=8&&t<=15,"invalid windowBits"),o(r>=-1&&r<=9,"invalid compression level"),o(n>=1&&n<=9,"invalid memlevel"),o(i===e.Z_FILTERED||i===e.Z_HUFFMAN_ONLY||i===e.Z_RLE||i===e.Z_FIXED||i===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,t,n,i,s),this._setDictionary()},h.prototype.params=function(){throw Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(t,r,n,i,o){switch(this.level=t,this.windowBits=r,this.memLevel=n,this.strategy=i,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,(this.mode===e.GZIP||this.mode===e.GUNZIP)&&(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),(this.mode===e.DEFLATERAW||this.mode===e.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=u.inflateInit2(this.strm,this.windowBits);break;default:throw Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=a.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=u.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=h},23:function(t,e,r){var n=r(300).Buffer,o=r(781).Transform,s=r(742),a=r(837),u=r(491).ok,c=r(300).kMaxLength,l="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=1/0,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(s),d=0;d<h.length;d++){var f=h[d];f.match(/^Z/)&&Object.defineProperty(e,f,{enumerable:!0,value:s[f],writable:!1})}for(var p={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},m=Object.keys(p),g=0;g<m.length;g++){var y=m[g];p[p[y]]=y}function v(t,e,r){var i=[],o=0;function s(){for(var e;null!==(e=t.read());)i.push(e),o+=e.length;t.once("readable",s)}function a(){var e,s=null;o>=c?s=RangeError(l):e=n.concat(i,o),i=[],t.close(),r(s,e)}t.on("error",function(e){t.removeListener("end",a),t.removeListener("readable",s),r(e)}),t.on("end",a),t.end(e),s()}function w(t,e){if("string"==typeof e&&(e=n.from(e)),!n.isBuffer(e))throw TypeError("Not a string or buffer");var r=t._finishFlushFlag;return t._processChunk(e,r)}function b(t){if(!(this instanceof b))return new b(t);k.call(this,t,s.DEFLATE)}function _(t){if(!(this instanceof _))return new _(t);k.call(this,t,s.INFLATE)}function M(t){if(!(this instanceof M))return new M(t);k.call(this,t,s.GZIP)}function E(t){if(!(this instanceof E))return new E(t);k.call(this,t,s.GUNZIP)}function A(t){if(!(this instanceof A))return new A(t);k.call(this,t,s.DEFLATERAW)}function S(t){if(!(this instanceof S))return new S(t);k.call(this,t,s.INFLATERAW)}function I(t){if(!(this instanceof I))return new I(t);k.call(this,t,s.UNZIP)}function T(t){return t===s.Z_NO_FLUSH||t===s.Z_PARTIAL_FLUSH||t===s.Z_SYNC_FLUSH||t===s.Z_FULL_FLUSH||t===s.Z_FINISH||t===s.Z_BLOCK}function k(t,r){var i=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,o.call(this,t),t.flush&&!T(t.flush))throw Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!T(t.finishFlush))throw Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||s.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:s.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!n.isBuffer(t.dictionary))throw Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(r);var a=this;this._hadError=!1,this._handle.onerror=function(t,r){N(a),a._hadError=!0;var n=Error(t);n.errno=r,n.code=e.codes[r],a.emit("error",n)};var u=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(u=t.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,u,t.memLevel||e.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!i._handle},configurable:!0,enumerable:!0})}function N(t,e){e&&i.nextTick(e),t._handle&&(t._handle.close(),t._handle=null)}function x(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(p),writable:!1}),e.Deflate=b,e.Inflate=_,e.Gzip=M,e.Gunzip=E,e.DeflateRaw=A,e.InflateRaw=S,e.Unzip=I,e.createDeflate=function(t){return new b(t)},e.createInflate=function(t){return new _(t)},e.createDeflateRaw=function(t){return new A(t)},e.createInflateRaw=function(t){return new S(t)},e.createGzip=function(t){return new M(t)},e.createGunzip=function(t){return new E(t)},e.createUnzip=function(t){return new I(t)},e.deflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new b(e),t,r)},e.deflateSync=function(t,e){return w(new b(e),t)},e.gzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new M(e),t,r)},e.gzipSync=function(t,e){return w(new M(e),t)},e.deflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new A(e),t,r)},e.deflateRawSync=function(t,e){return w(new A(e),t)},e.unzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new I(e),t,r)},e.unzipSync=function(t,e){return w(new I(e),t)},e.inflate=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new _(e),t,r)},e.inflateSync=function(t,e){return w(new _(e),t)},e.gunzip=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new E(e),t,r)},e.gunzipSync=function(t,e){return w(new E(e),t)},e.inflateRaw=function(t,e,r){return"function"==typeof e&&(r=e,e={}),v(new S(e),t,r)},e.inflateRawSync=function(t,e){return w(new S(e),t)},a.inherits(k,o),k.prototype.params=function(t,r,n){if(t<e.Z_MIN_LEVEL||t>e.Z_MAX_LEVEL)throw RangeError("Invalid compression level: "+t);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var o=this;this.flush(s.Z_SYNC_FLUSH,function(){u(o._handle,"zlib binding closed"),o._handle.params(t,r),!o._hadError&&(o._level=t,o._strategy=r,n&&n())})}else i.nextTick(n)},k.prototype.reset=function(){return u(this._handle,"zlib binding closed"),this._handle.reset()},k.prototype._flush=function(t){this._transform(n.alloc(0),"",t)},k.prototype.flush=function(t,e){var r=this,o=this._writableState;"function"!=typeof t&&(void 0!==t||e)||(e=t,t=s.Z_FULL_FLUSH),o.ended?e&&i.nextTick(e):o.ending?e&&this.once("end",e):o.needDrain?e&&this.once("drain",function(){return r.flush(t,e)}):(this._flushFlag=t,this.write(n.alloc(0),"",e))},k.prototype.close=function(t){N(this,t),i.nextTick(x,this)},k.prototype._transform=function(t,e,r){var i,o=this._writableState,a=(o.ending||o.ended)&&(!t||o.length===t.length);return null===t||n.isBuffer(t)?this._handle?void(a?i=this._finishFlushFlag:(i=this._flushFlag,t.length>=o.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),this._processChunk(t,i,r)):r(Error("zlib binding closed")):r(Error("invalid input"))},k.prototype._processChunk=function(t,e,r){var i=t&&t.length,o=this._chunkSize-this._offset,s=0,a=this,h="function"==typeof r;if(!h){var d,f=[],p=0;this.on("error",function(t){d=t}),u(this._handle,"zlib binding closed");do var m=this._handle.writeSync(e,t,s,i,this._buffer,this._offset,o);while(!this._hadError&&v(m[0],m[1]));if(this._hadError)throw d;if(p>=c)throw N(this),RangeError(l);var g=n.concat(f,p);return N(this),g}u(this._handle,"zlib binding closed");var y=this._handle.write(e,t,s,i,this._buffer,this._offset,o);function v(c,l){if(this&&(this.buffer=null,this.callback=null),!a._hadError){var d=o-l;if(u(d>=0,"have should not go down"),d>0){var m=a._buffer.slice(a._offset,a._offset+d);a._offset+=d,h?a.push(m):(f.push(m),p+=m.length)}if((0===l||a._offset>=a._chunkSize)&&(o=a._chunkSize,a._offset=0,a._buffer=n.allocUnsafe(a._chunkSize)),0===l){if(s+=i-c,i=c,!h)return!0;var g=a._handle.write(e,t,s,i,a._buffer,a._offset,a._chunkSize);return g.callback=v,void(g.buffer=t)}if(!h)return!1;r()}}y.buffer=t,y.callback=v},a.inherits(b,k),a.inherits(_,k),a.inherits(M,k),a.inherits(E,k),a.inherits(A,k),a.inherits(S,k),a.inherits(I,k)},380:function(t,e){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+n),i);return}for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(e=0,n=0,r=t.length;e<r;e++)n+=t[e].length;for(e=0,s=new Uint8Array(n),i=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},i={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},496:function(t){t.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do o=o+(i=i+e[n++]|0)|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}},320:function(t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},307:function(t){var e=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=function(t,r,n,i){var o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^e[(t^r[s])&255];return -1^t}},450:function(t,e,r){var n,i=r(380),o=r(842),s=r(496),a=r(307),u=r(31);function c(t,e){return t.msg=u[e],e}function l(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function d(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function f(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,d(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function m(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function g(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,l=t.w_mask,h=t.prev,d=t.strstart+258,f=c[o+s-1],p=c[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(r=e)+s]!==p||c[r+s-1]!==f||c[r]!==c[o]||c[++r]!==c[o+1])continue;o+=2,r++;do;while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<d);if(n=258-(d-o),o=d-258,n>s){if(t.match_start=e,s=n,n>=a)break;f=c[o+s-1],p=c[o+s]}}while((e=h[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function y(t){var e,r,n,o,u,c=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=c+(c-262)){i.arraySet(t.window,t.window,c,c,0),t.match_start-=c,t.strstart-=c,t.block_start-=c,e=r=t.hash_size;do n=t.head[--e],t.head[e]=n>=c?n-c:0;while(--r);e=r=c;do n=t.prev[--e],t.prev[e]=n>=c?n-c:0;while(--r);o+=c}if(0===t.strm.avail_in)break;if(r=function(t,e,r,n){var o=t.avail_in;return(o>n&&(o=n),0===o)?0:(t.avail_in-=o,i.arraySet(e,t.input,t.next_in,o,r),1===t.state.wrap?t.adler=s(t.adler,e,o,r):2===t.state.wrap&&(t.adler=a(t.adler,e,o,r)),t.next_in+=o,t.total_in+=o,o)}(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function v(t,e){for(var r,n;;){if(t.lookahead<262){if(y(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=g(t,r)),t.match_length>=3){if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask}else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(f(t,!1),0===t.strm.avail_out))return 1}return(t.insert=t.strstart<2?t.strstart:2,4===e)?(f(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function w(t,e){for(var r,n,i;;){if(t.lookahead<262){if(y(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=g(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(f(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&f(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return(t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e)?(f(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):c(t,-2)}function E(t){var e,r=M(t);return 0===r&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function A(t,e,r,n,o,s){if(!t)return -2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||s<0||s>4)return c(t,-2);8===n&&(n=9);var u=new _;return t.state=u,u.strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,E(t)}n=[new b(0,0,0,0,function(t,e){var r=65535;for(65535>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(y(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,f(t,!1),0===t.strm.avail_out)||t.strstart-t.block_start>=t.w_size-262&&(f(t,!1),0===t.strm.avail_out))return 1}return(t.insert=0,4===e)?(f(t,!0),0===t.strm.avail_out)?3:4:(t.strstart>t.block_start&&(f(t,!1),t.strm.avail_out),1)}),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,w),new b(8,16,32,32,w),new b(8,16,128,128,w),new b(8,32,128,256,w),new b(32,128,258,1024,w),new b(32,258,258,4096,w)],e.deflateInit=function(t,e){return A(t,e,8,15,8,0)},e.deflateInit2=A,e.deflateReset=E,e.deflateResetKeep=M,e.deflateSetHeader=function(t,e){return t&&t.state&&2===t.state.wrap?(t.state.gzhead=e,0):-2},e.deflate=function(t,e){if(!t||!t.state||e>5||e<0)return t?c(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return c(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status){if(2===i.wrap)t.adler=0,p(i,31),p(i,139),p(i,8),i.gzhead?(p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),p(i,255&i.gzhead.time),p(i,i.gzhead.time>>8&255),p(i,i.gzhead.time>>16&255),p(i,i.gzhead.time>>24&255),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(p(i,255&i.gzhead.extra.length),p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(p(i,0),p(i,0),p(i,0),p(i,0),p(i,0),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,3),i.status=113);else{var r,i,s,u,g=8+(i.w_bits-8<<4)<<8;g|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(g|=32),g+=31-g%31,i.status=113,m(i,g),0!==i.strstart&&(m(i,t.adler>>>16),m(i,65535&t.adler)),t.adler=1}}if(69===i.status){if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),d(t),s=i.pending,i.pending!==i.pending_buf_size));)p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73}if(73===i.status){if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),d(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,p(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91}if(91===i.status){if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),d(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,p(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103}if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&d(t),i.pending+2<=i.pending_buf_size&&(p(i,255&t.adler),p(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(d(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&l(e)<=l(r)&&4!==e)return c(t,-5);if(666===i.status&&0!==t.avail_in)return c(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(y(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(f(t,!1),0===t.strm.avail_out))return 1}return(t.insert=0,4===e)?(f(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=258){if(y(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=t.strstart+258;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=258-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(f(t,!1),0===t.strm.avail_out))return 1}return(t.insert=0,4===e)?(f(t,!0),0===t.strm.avail_out)?3:4:t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if((3===v||4===v)&&(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),d(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(p(i,255&t.adler),p(i,t.adler>>8&255),p(i,t.adler>>16&255),p(i,t.adler>>24&255),p(i,255&t.total_in),p(i,t.total_in>>8&255),p(i,t.total_in>>16&255),p(i,t.total_in>>24&255)):(m(i,t.adler>>>16),m(i,65535&t.adler)),d(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?c(t,-2):(t.state=null,113===e?c(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var r,n,o,a,u,c,l,d,f=e.length;if(!t||!t.state||2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return -2;for(1===a&&(t.adler=s(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===a&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,e,f-r.w_size,r.w_size,0),e=d,f=r.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=f,t.next_in=0,t.input=e,y(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++;while(--o);r.strstart=n,r.lookahead=2,y(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,r.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},333:function(t){t.exports=function(t,e){var r,n,i,o,s,a,u,c,l,h,d,f,p,m,g,y,v,w,b,_,M,E,A,S,I;r=t.state,n=t.next_in,S=t.input,i=n+(t.avail_in-5),o=t.next_out,I=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,h=r.wnext,d=r.window,f=r.hold,p=r.bits,m=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do for(p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),w=m[f&y];;){if(f>>>=b=w>>>24,p-=b,0==(b=w>>>16&255))I[o++]=65535&w;else if(16&b)for(_=65535&w,(b&=15)&&(p<b&&(f+=S[n++]<<p,p+=8),_+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),w=g[f&v];;){if(f>>>=b=w>>>24,p-=b,16&(b=w>>>16&255)){if(M=65535&w,p<(b&=15)&&(f+=S[n++]<<p,(p+=8)<b&&(f+=S[n++]<<p,p+=8)),(M+=f&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=b,p-=b,M>(b=o-s)){if((b=M-b)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break e}if(E=0,A=d,0===h){if(E+=c-b,b<_){_-=b;do I[o++]=d[E++];while(--b);E=o-M,A=I}}else if(h<b){if(E+=c+h-b,(b-=h)<_){_-=b;do I[o++]=d[E++];while(--b);if(E=0,h<_){_-=b=h;do I[o++]=d[E++];while(--b);E=o-M,A=I}}}else if(E+=h-b,b<_){_-=b;do I[o++]=d[E++];while(--b);E=o-M,A=I}for(;_>2;)I[o++]=A[E++],I[o++]=A[E++],I[o++]=A[E++],_-=3;_&&(I[o++]=A[E++],_>1&&(I[o++]=A[E++]))}else{E=o-M;do I[o++]=I[E++],I[o++]=I[E++],I[o++]=I[E++],_-=3;while(_>2);_&&(I[o++]=I[E++],_>1&&(I[o++]=I[E++]))}}else if((64&b)==0){w=g[(65535&w)+(f&(1<<b)-1)];continue}else{t.msg="invalid distance code",r.mode=30;break e}break}else if((64&b)==0){w=m[(65535&w)+(f&(1<<b)-1)];continue}else if(32&b){r.mode=12;break e}else{t.msg="invalid literal/length code",r.mode=30;break e}break}while(n<i&&o<a);n-=_=p>>3,p-=_<<3,f&=(1<<p)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),r.hold=f,r.bits=p}},324:function(t,e,r){var n,i,o=r(380),s=r(496),a=r(307),u=r(333),c=r(19);function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new o.Buf32(852),e.distcode=e.distdyn=new o.Buf32(592),e.sane=1,e.back=-1,0):-2}function f(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,d(t)):-2}function p(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,f(t)):-2}function m(t,e){var r,n;return t?(n=new h,t.state=n,n.window=null,0!==(r=p(t,e))&&(t.state=null),r):-2}var g=!0;function y(t,e,r,n){var i,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new o.Buf8(s.wsize)),n>=s.wsize?(o.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>n&&(i=n),o.arraySet(s.window,e,r-n,i,s.wnext),(n-=i)?(o.arraySet(s.window,e,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}e.inflateReset=f,e.inflateReset2=p,e.inflateResetKeep=d,e.inflateInit=function(t){return m(t,15)},e.inflateInit2=m,e.inflate=function(t,e){var r,h,d,f,p,m,v,w,b,_,M,E,A,S,I,T,k,N,x,P,O,C,R,L,B=0,D=new o.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return -2;12===(r=t.state).mode&&(r.mode=13),p=t.next_out,d=t.output,v=t.avail_out,f=t.next_in,h=t.input,m=t.avail_in,w=r.hold,b=r.bits,_=m,M=v,C=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(2&r.wrap&&35615===w){r.check=0,D[0]=255&w,D[1]=w>>>8&255,r.check=a(r.check,D,2,0),w=0,b=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",r.mode=30;break}if((15&w)!=8){t.msg="unknown compression method",r.mode=30;break}if(w>>>=4,b-=4,O=(15&w)+8,0===r.wbits)r.wbits=O;else if(O>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<O,t.adler=r.check=1,r.mode=512&w?10:12,w=0,b=0;break;case 2:for(;b<16;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(r.flags=w,(255&r.flags)!=8){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=w>>8&1),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,r.check=a(r.check,D,2,0)),w=0,b=0,r.mode=3;case 3:for(;b<32;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}r.head&&(r.head.time=w),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,D[2]=w>>>16&255,D[3]=w>>>24&255,r.check=a(r.check,D,4,0)),w=0,b=0,r.mode=4;case 4:for(;b<16;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}r.head&&(r.head.xflags=255&w,r.head.os=w>>8),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,r.check=a(r.check,D,2,0)),w=0,b=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}r.length=w,r.head&&(r.head.extra_len=w),512&r.flags&&(D[0]=255&w,D[1]=w>>>8&255,r.check=a(r.check,D,2,0)),w=0,b=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((E=r.length)>m&&(E=m),E&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=Array(r.head.extra_len)),o.arraySet(r.head.extra,h,f,E,O)),512&r.flags&&(r.check=a(r.check,h,E,f)),m-=E,f+=E,r.length-=E),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===m)break e;E=0;do O=h[f+E++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&E<m);if(512&r.flags&&(r.check=a(r.check,h,E,f)),m-=E,f+=E,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===m)break e;E=0;do O=h[f+E++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&E<m);if(512&r.flags&&(r.check=a(r.check,h,E,f)),m-=E,f+=E,O)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(w!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}w=0,b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;b<32;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}t.adler=r.check=l(w),w=0,b=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=p,t.avail_out=v,t.next_in=f,t.avail_in=m,r.hold=w,r.bits=b,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break e;case 13:if(r.last){w>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}switch(r.last=1&w,b-=1,3&(w>>>=1)){case 0:r.mode=14;break;case 1:if(function(t){if(g){var e;for(n=new o.Buf32(512),i=new o.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(c(1,t.lens,0,288,n,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;c(2,t.lens,0,32,i,0,t.work,{bits:5}),g=!1}t.lencode=n,t.lenbits=9,t.distcode=i,t.distbits=5}(r),r.mode=20,6===e){w>>>=2,b-=2;break e}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}w>>>=2,b-=2;break;case 14:for(w>>>=7&b,b-=7&b;b<32;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&w,w=0,b=0,r.mode=15,6===e)break e;case 15:r.mode=16;case 16:if(E=r.length){if(E>m&&(E=m),E>v&&(E=v),0===E)break e;o.arraySet(d,h,f,E,p),m-=E,f+=E,v-=E,p+=E,r.length-=E;break}r.mode=12;break;case 17:for(;b<14;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(r.nlen=(31&w)+257,w>>>=5,b-=5,r.ndist=(31&w)+1,w>>>=5,b-=5,r.ncode=(15&w)+4,w>>>=4,b-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}r.lens[K[r.have++]]=7&w,w>>>=3,b-=3}for(;r.have<19;)r.lens[K[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},C=c(0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,C){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=(B=r.lencode[w&(1<<r.lenbits)-1])>>>24,T=B>>>16&255,k=65535&B,!(I<=b);){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(k<16)w>>>=I,b-=I,r.lens[r.have++]=k;else{if(16===k){for(L=I+2;b<L;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(w>>>=I,b-=I,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}O=r.lens[r.have-1],E=3+(3&w),w>>>=2,b-=2}else if(17===k){for(L=I+3;b<L;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}w>>>=I,b-=I,O=0,E=3+(7&w),w>>>=3,b-=3}else{for(L=I+7;b<L;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}w>>>=I,b-=I,O=0,E=11+(127&w),w>>>=7,b-=7}if(r.have+E>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;E--;)r.lens[r.have++]=O}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,R={bits:r.lenbits},C=c(1,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,C){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},C=c(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,C){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break e;case 20:r.mode=21;case 21:if(m>=6&&v>=258){t.next_out=p,t.avail_out=v,t.next_in=f,t.avail_in=m,r.hold=w,r.bits=b,u(t,M),p=t.next_out,d=t.output,v=t.avail_out,f=t.next_in,h=t.input,m=t.avail_in,w=r.hold,b=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;I=(B=r.lencode[w&(1<<r.lenbits)-1])>>>24,T=B>>>16&255,k=65535&B,!(I<=b);){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(T&&(240&T)==0){for(N=I,x=T,P=k;I=(B=r.lencode[P+((w&(1<<N+x)-1)>>N)])>>>24,T=B>>>16&255,k=65535&B,!(N+I<=b);){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}w>>>=N,b-=N,r.back+=N}if(w>>>=I,b-=I,r.back+=I,r.length=k,0===T){r.mode=26;break}if(32&T){r.back=-1,r.mode=12;break}if(64&T){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&T,r.mode=22;case 22:if(r.extra){for(L=r.extra;b<L;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=(B=r.distcode[w&(1<<r.distbits)-1])>>>24,T=B>>>16&255,k=65535&B,!(I<=b);){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if((240&T)==0){for(N=I,x=T,P=k;I=(B=r.distcode[P+((w&(1<<N+x)-1)>>N)])>>>24,T=B>>>16&255,k=65535&B,!(N+I<=b);){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}w>>>=N,b-=N,r.back+=N}if(w>>>=I,b-=I,r.back+=I,64&T){t.msg="invalid distance code",r.mode=30;break}r.offset=k,r.extra=15&T,r.mode=24;case 24:if(r.extra){for(L=r.extra;b<L;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===v)break e;if(E=M-v,r.offset>E){if((E=r.offset-E)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}E>r.wnext?(E-=r.wnext,A=r.wsize-E):A=r.wnext-E,E>r.length&&(E=r.length),S=r.window}else S=d,A=p-r.offset,E=r.length;E>v&&(E=v),v-=E,r.length-=E;do d[p++]=S[A++];while(--E);0===r.length&&(r.mode=21);break;case 26:if(0===v)break e;d[p++]=r.length,v--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===m)break e;m--,w|=h[f++]<<b,b+=8}if(M-=v,t.total_out+=M,r.total+=M,M&&(t.adler=r.check=r.flags?a(r.check,d,M,p-M):s(r.check,d,M,p-M)),M=v,(r.flags?w:l(w))!==r.check){t.msg="incorrect data check",r.mode=30;break}w=0,b=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===m)break e;m--,w+=h[f++]<<b,b+=8}if(w!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}w=0,b=0}r.mode=29;case 29:C=1;break e;case 30:C=-3;break e;case 31:return -4;default:return -2}return(t.next_out=p,t.avail_out=v,t.next_in=f,t.avail_in=m,r.hold=w,r.bits=b,(r.wsize||M!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&y(t,t.output,t.next_out,M-t.avail_out))?(r.mode=31,-4):(_-=t.avail_in,M-=t.avail_out,t.total_in+=_,t.total_out+=M,r.total+=M,r.wrap&&M&&(t.adler=r.check=r.flags?a(r.check,d,M,t.next_out-M):s(r.check,d,M,t.next_out-M)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===M||4===e)&&0===C&&(C=-5),C)},e.inflateEnd=function(t){if(!t||!t.state)return -2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var r;return t&&t.state&&(2&(r=t.state).wrap)!=0?(r.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state&&(0===(r=t.state).wrap||11===r.mode)?11===r.mode&&s(1,e,n,0)!==r.check?-3:y(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},19:function(t,e,r){var n=r(380),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,c,l,h,d){var f,p,m,g,y,v,w,b,_,M=d.bits,E=0,A=0,S=0,I=0,T=0,k=0,N=0,x=0,P=0,O=0,C=null,R=0,L=new n.Buf16(16),B=new n.Buf16(16),D=null,K=0;for(E=0;E<=15;E++)L[E]=0;for(A=0;A<u;A++)L[e[r+A]]++;for(I=15,T=M;I>=1&&0===L[I];I--);if(T>I&&(T=I),0===I)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(S=1;S<I&&0===L[S];S++);for(T<S&&(T=S),x=1,E=1;E<=15;E++)if(x<<=1,(x-=L[E])<0)return -1;if(x>0&&(0===t||1!==I))return -1;for(E=1,B[1]=0;E<15;E++)B[E+1]=B[E]+L[E];for(A=0;A<u;A++)0!==e[r+A]&&(h[B[e[r+A]]++]=A);if(0===t?(C=D=h,v=19):1===t?(C=i,R-=257,D=o,K-=257,v=256):(C=s,D=a,v=-1),O=0,A=0,E=S,y=l,k=T,N=0,m=-1,g=(P=1<<T)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){w=E-N,h[A]<v?(b=0,_=h[A]):h[A]>v?(b=D[K+h[A]],_=C[R+h[A]]):(b=96,_=0),f=1<<E-N,S=p=1<<k;do c[y+(O>>N)+(p-=f)]=w<<24|b<<16|_|0;while(0!==p);for(f=1<<E-1;O&f;)f>>=1;if(0!==f?(O&=f-1,O+=f):O=0,A++,0==--L[E]){if(E===I)break;E=e[r+h[A]]}if(E>T&&(O&g)!==m){for(0===N&&(N=T),y+=S,x=1<<(k=E-N);k+N<I&&!((x-=L[k+N])<=0);)k++,x<<=1;if(P+=1<<k,1===t&&P>852||2===t&&P>592)return 1;c[m=O&g]=T<<24|k<<16|y-l|0}}return 0!==O&&(c[y+O]=E-N<<24|4194304),d.bits=T,0}},31:function(t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},842:function(t,e,r){var n,i,o,s=r(380);function a(t){for(var e=t.length;--e>=0;)t[e]=0}var u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],c=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=Array(576);a(d);var f=Array(60);a(f);var p=Array(512);a(p);var m=Array(256);a(m);var g=Array(29);a(g);var y=Array(30);function v(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?p[t]:p[256+(t>>>7)]}function _(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function M(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,_(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function E(t,e,r){M(t,r[2*e],r[2*e+1])}function A(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function S(t,e,r){var n,i,o=Array(16),s=0;for(n=1;n<=15;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=A(o[a]++,a))}}function I(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function T(t){t.bi_valid>8?_(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function k(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function N(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&k(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!k(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function x(t,e,r){var n,i,o,s,a=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===n?E(t,i,e):(E(t,(o=m[i])+256+1,e),0!==(s=u[o])&&M(t,i-=g[o],s),E(t,o=b(--n),r),0!==(s=c[o])&&M(t,n-=y[o],s));while(a<t.last_lit);E(t,256,e)}function P(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(r=0,t.heap_len=0,t.heap_max=573;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)N(t,o,r);i=u;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],N(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,N(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,s,a,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>p&&(o=p,m++),u[2*n+1]=o,!(n>c)&&(t.bl_count[o]++,s=0,n>=f&&(s=d[n-f]),a=u[2*n],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)!((i=t.heap[--r])>c)&&(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),S(o,c,t.bl_count)}function O(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)i=s,s=e[(n+1)*2+1],++a<u&&i===s||(a<c?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function C(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=e[(n+1)*2+1],!(++a<u)||i!==s){if(a<c)do E(t,i,t.bl_tree);while(0!=--a);else 0!==i?(i!==o&&(E(t,i,t.bl_tree),a--),E(t,16,t.bl_tree),M(t,a-3,2)):a<=10?(E(t,17,t.bl_tree),M(t,a-3,3)):(E(t,18,t.bl_tree),M(t,a-11,7));a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4)}}a(y);var R=!1;function L(t,e,r,n){M(t,0+(n?1:0),3),T(t),_(t,r),_(t,~r),s.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}e._tr_init=function(t){R||(function(){var t,e,r,s,a,h=Array(16);for(s=0,r=0;s<28;s++)for(t=0,g[s]=r;t<1<<u[s];t++)m[r++]=s;for(m[r-1]=s,a=0,s=0;s<16;s++)for(t=0,y[s]=a;t<1<<c[s];t++)p[a++]=s;for(a>>=7;s<30;s++)for(t=0,y[s]=a<<7;t<1<<c[s]-7;t++)p[256+a++]=s;for(e=0;e<=15;e++)h[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,h[8]++;for(;t<=255;)d[2*t+1]=9,t++,h[9]++;for(;t<=279;)d[2*t+1]=7,t++,h[7]++;for(;t<=287;)d[2*t+1]=8,t++,h[8]++;for(S(d,287,h),t=0;t<30;t++)f[2*t+1]=5,f[2*t]=A(t,5);n=new v(d,u,257,286,15),i=new v(f,c,0,30,15),o=new v([],l,0,19,7)}(),R=!0),t.l_desc=new w(t.dyn_ltree,n),t.d_desc=new w(t.dyn_dtree,i),t.bl_desc=new w(t.bl_tree,o),t.bi_buf=0,t.bi_valid=0,I(t)},e._tr_stored_block=L,e._tr_flush_block=function(t,e,r,n){var i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),P(t,t.l_desc),P(t,t.d_desc),s=function(t){var e;for(O(t,t.dyn_ltree,t.l_desc.max_code),O(t,t.dyn_dtree,t.d_desc.max_code),P(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?L(t,e,r,n):4===t.strategy||o===i?(M(t,2+(n?1:0),3),x(t,d,f)):(M(t,4+(n?1:0),3),function(t,e,r,n){var i;for(M(t,e-257,5),M(t,r-1,5),M(t,n-4,4),i=0;i<n;i++)M(t,t.bl_tree[2*h[i]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),x(t,t.dyn_ltree,t.dyn_dtree)),I(t),n&&T(t)},e._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[(m[r]+256+1)*2]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){M(t,2,3),E(t,256,d),16===t.bi_valid?(_(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},562:function(t){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},491:function(t){t.exports=r(69282)},300:function(t){t.exports=r(48764)},781:function(t){t.exports=r(79681)},837:function(t){t.exports=r(89539)}},o={};function s(t){var r=o[t];if(void 0!==r)return r.exports;var n=o[t]={exports:{}},i=!0;try{e[t](n,n.exports,s),i=!1}finally{i&&delete o[t]}return n.exports}s.ab="//";var a=s(23);t.exports=a}()},39332:function(t,e,r){t.exports=r(30636)},45033:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{u=r(48764).Buffer}catch(t){}function s(t,e,r){for(var n=0,i=Math.min(t.length,r),o=e;o<i;o++){var s=t.charCodeAt(o)-48;n<<=4,s>=49&&s<=54?n|=s-49+10:s>=17&&s<=22?n|=s-17+10:n|=15&s}return n}function a(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,a>=49?i+=a-49+10:a>=17?i+=a-17+10:i+=a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,s=0;s<this.length;s++)this.words[s]=0;var a=0;if("be"===r)for(s=t.length-1,i=0;s>=0;s-=3)o=t[s]|t[s-1]<<8|t[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===r)for(s=0,i=0;s<t.length;s+=3)o=t[s]|t[s+1]<<8|t[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var r,n,i=0;i<this.length;i++)this.words[i]=0;var o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,u=Math.min(o,o-s)+r,c=0,l=r;l<u;l+=n)c=a(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=a(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u,c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=((a<<i|o)&16777215).toString(16);r=0!=(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var d=l[t],f=h[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);r=(p=p.idivn(f)).isZero()?m+r:c[d-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==u),this.toArrayLike(u,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i,o,s=this.byteLength(),a=r||Math.max(1,s);n(s<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var u=new t(a),c=this.clone();if("le"===e){for(o=0;!c.isZero();o++)i=c.andln(255),c.iushrn(8),u[o]=i;for(;o<a;o++)u[o]=0}else{for(o=0;o<a-s;o++)u[o]=0;for(o=0;!c.isZero();o++)i=c.andln(255),c.iushrn(8),u[a-o-1]=i}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(n=(0|e.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&n;for(;0!==o&&s<e.length;s++)o=(n=(0|e.words[s])+o)>>26,this.words[s]=67108863&n;if(0===o&&s<e.length&&e!==this)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=Math.max(this.length,s),e!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,_=w>>>13,M=0|s[4],E=8191&M,A=M>>>13,S=0|s[5],I=8191&S,T=S>>>13,k=0|s[6],N=8191&k,x=k>>>13,P=0|s[7],O=8191&P,C=P>>>13,R=0|s[8],L=8191&R,B=R>>>13,D=0|s[9],K=8191&D,F=D>>>13,j=0|a[0],U=8191&j,H=j>>>13,q=0|a[1],$=8191&q,G=q>>>13,z=0|a[2],W=8191&z,V=z>>>13,Z=0|a[3],J=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,te=0|a[5],tr=8191&te,tn=te>>>13,ti=0|a[6],to=8191&ti,ts=ti>>>13,ta=0|a[7],tu=8191&ta,tc=ta>>>13,tl=0|a[8],th=8191&tl,td=tl>>>13,tf=0|a[9],tp=8191&tf,tm=tf>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(c+(n=Math.imul(h,U))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,U)|0))<<13)|0;c=((o=Math.imul(d,H))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(p,U),i=(i=Math.imul(p,H))+Math.imul(m,U)|0,o=Math.imul(m,H);var ty=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,$)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(y,U),i=(i=Math.imul(y,H))+Math.imul(v,U)|0,o=Math.imul(v,H),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,G)|0;var tv=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,V)|0)+Math.imul(d,W)|0))<<13)|0;c=((o=o+Math.imul(d,V)|0)+(i>>>13)|0)+(tv>>>26)|0,tv&=67108863,n=Math.imul(b,U),i=(i=Math.imul(b,H))+Math.imul(_,U)|0,o=Math.imul(_,H),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,V)|0;var tw=(c+(n=n+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,X)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,H))+Math.imul(A,U)|0,o=Math.imul(A,H),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,G)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,X)|0;var tb=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,H))+Math.imul(T,U)|0,o=Math.imul(T,H),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,G)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var t_=(c+(n=n+Math.imul(h,tr)|0)|0)+((8191&(i=(i=i+Math.imul(h,tn)|0)+Math.imul(d,tr)|0))<<13)|0;c=((o=o+Math.imul(d,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(N,U),i=(i=Math.imul(N,H))+Math.imul(x,U)|0,o=Math.imul(x,H),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,tr)|0,i=(i=i+Math.imul(p,tn)|0)+Math.imul(m,tr)|0,o=o+Math.imul(m,tn)|0;var tM=(c+(n=n+Math.imul(h,to)|0)|0)+((8191&(i=(i=i+Math.imul(h,ts)|0)+Math.imul(d,to)|0))<<13)|0;c=((o=o+Math.imul(d,ts)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(O,U),i=(i=Math.imul(O,H))+Math.imul(C,U)|0,o=Math.imul(C,H),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,tr)|0,i=(i=i+Math.imul(y,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0,n=n+Math.imul(p,to)|0,i=(i=i+Math.imul(p,ts)|0)+Math.imul(m,to)|0,o=o+Math.imul(m,ts)|0;var tE=(c+(n=n+Math.imul(h,tu)|0)|0)+((8191&(i=(i=i+Math.imul(h,tc)|0)+Math.imul(d,tu)|0))<<13)|0;c=((o=o+Math.imul(d,tc)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,H))+Math.imul(B,U)|0,o=Math.imul(B,H),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,G)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(b,tr)|0,i=(i=i+Math.imul(b,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(y,to)|0,i=(i=i+Math.imul(y,ts)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ts)|0,n=n+Math.imul(p,tu)|0,i=(i=i+Math.imul(p,tc)|0)+Math.imul(m,tu)|0,o=o+Math.imul(m,tc)|0;var tA=(c+(n=n+Math.imul(h,th)|0)|0)+((8191&(i=(i=i+Math.imul(h,td)|0)+Math.imul(d,th)|0))<<13)|0;c=((o=o+Math.imul(d,td)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(K,U),i=(i=Math.imul(K,H))+Math.imul(F,U)|0,o=Math.imul(F,H),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(B,$)|0,o=o+Math.imul(B,G)|0,n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(A,tr)|0,o=o+Math.imul(A,tn)|0,n=n+Math.imul(b,to)|0,i=(i=i+Math.imul(b,ts)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ts)|0,n=n+Math.imul(y,tu)|0,i=(i=i+Math.imul(y,tc)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,tc)|0,n=n+Math.imul(p,th)|0,i=(i=i+Math.imul(p,td)|0)+Math.imul(m,th)|0,o=o+Math.imul(m,td)|0;var tS=(c+(n=n+Math.imul(h,tp)|0)|0)+((8191&(i=(i=i+Math.imul(h,tm)|0)+Math.imul(d,tp)|0))<<13)|0;c=((o=o+Math.imul(d,tm)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(K,$),i=(i=Math.imul(K,G))+Math.imul(F,$)|0,o=Math.imul(F,G),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,V)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,V)|0,n=n+Math.imul(O,J)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(I,tr)|0,i=(i=i+Math.imul(I,tn)|0)+Math.imul(T,tr)|0,o=o+Math.imul(T,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ts)|0)+Math.imul(A,to)|0,o=o+Math.imul(A,ts)|0,n=n+Math.imul(b,tu)|0,i=(i=i+Math.imul(b,tc)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,tc)|0,n=n+Math.imul(y,th)|0,i=(i=i+Math.imul(y,td)|0)+Math.imul(v,th)|0,o=o+Math.imul(v,td)|0;var tI=(c+(n=n+Math.imul(p,tp)|0)|0)+((8191&(i=(i=i+Math.imul(p,tm)|0)+Math.imul(m,tp)|0))<<13)|0;c=((o=o+Math.imul(m,tm)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863,n=Math.imul(K,W),i=(i=Math.imul(K,V))+Math.imul(F,W)|0,o=Math.imul(F,V),n=n+Math.imul(L,J)|0,i=(i=i+Math.imul(L,X)|0)+Math.imul(B,J)|0,o=o+Math.imul(B,X)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(N,tr)|0,i=(i=i+Math.imul(N,tn)|0)+Math.imul(x,tr)|0,o=o+Math.imul(x,tn)|0,n=n+Math.imul(I,to)|0,i=(i=i+Math.imul(I,ts)|0)+Math.imul(T,to)|0,o=o+Math.imul(T,ts)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(A,tu)|0,o=o+Math.imul(A,tc)|0,n=n+Math.imul(b,th)|0,i=(i=i+Math.imul(b,td)|0)+Math.imul(_,th)|0,o=o+Math.imul(_,td)|0;var tT=(c+(n=n+Math.imul(y,tp)|0)|0)+((8191&(i=(i=i+Math.imul(y,tm)|0)+Math.imul(v,tp)|0))<<13)|0;c=((o=o+Math.imul(v,tm)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(K,J),i=(i=Math.imul(K,X))+Math.imul(F,J)|0,o=Math.imul(F,X),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(B,Q)|0,o=o+Math.imul(B,tt)|0,n=n+Math.imul(O,tr)|0,i=(i=i+Math.imul(O,tn)|0)+Math.imul(C,tr)|0,o=o+Math.imul(C,tn)|0,n=n+Math.imul(N,to)|0,i=(i=i+Math.imul(N,ts)|0)+Math.imul(x,to)|0,o=o+Math.imul(x,ts)|0,n=n+Math.imul(I,tu)|0,i=(i=i+Math.imul(I,tc)|0)+Math.imul(T,tu)|0,o=o+Math.imul(T,tc)|0,n=n+Math.imul(E,th)|0,i=(i=i+Math.imul(E,td)|0)+Math.imul(A,th)|0,o=o+Math.imul(A,td)|0;var tk=(c+(n=n+Math.imul(b,tp)|0)|0)+((8191&(i=(i=i+Math.imul(b,tm)|0)+Math.imul(_,tp)|0))<<13)|0;c=((o=o+Math.imul(_,tm)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(K,Q),i=(i=Math.imul(K,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(B,tr)|0,o=o+Math.imul(B,tn)|0,n=n+Math.imul(O,to)|0,i=(i=i+Math.imul(O,ts)|0)+Math.imul(C,to)|0,o=o+Math.imul(C,ts)|0,n=n+Math.imul(N,tu)|0,i=(i=i+Math.imul(N,tc)|0)+Math.imul(x,tu)|0,o=o+Math.imul(x,tc)|0,n=n+Math.imul(I,th)|0,i=(i=i+Math.imul(I,td)|0)+Math.imul(T,th)|0,o=o+Math.imul(T,td)|0;var tN=(c+(n=n+Math.imul(E,tp)|0)|0)+((8191&(i=(i=i+Math.imul(E,tm)|0)+Math.imul(A,tp)|0))<<13)|0;c=((o=o+Math.imul(A,tm)|0)+(i>>>13)|0)+(tN>>>26)|0,tN&=67108863,n=Math.imul(K,tr),i=(i=Math.imul(K,tn))+Math.imul(F,tr)|0,o=Math.imul(F,tn),n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ts)|0)+Math.imul(B,to)|0,o=o+Math.imul(B,ts)|0,n=n+Math.imul(O,tu)|0,i=(i=i+Math.imul(O,tc)|0)+Math.imul(C,tu)|0,o=o+Math.imul(C,tc)|0,n=n+Math.imul(N,th)|0,i=(i=i+Math.imul(N,td)|0)+Math.imul(x,th)|0,o=o+Math.imul(x,td)|0;var tx=(c+(n=n+Math.imul(I,tp)|0)|0)+((8191&(i=(i=i+Math.imul(I,tm)|0)+Math.imul(T,tp)|0))<<13)|0;c=((o=o+Math.imul(T,tm)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(K,to),i=(i=Math.imul(K,ts))+Math.imul(F,to)|0,o=Math.imul(F,ts),n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(B,tu)|0,o=o+Math.imul(B,tc)|0,n=n+Math.imul(O,th)|0,i=(i=i+Math.imul(O,td)|0)+Math.imul(C,th)|0,o=o+Math.imul(C,td)|0;var tP=(c+(n=n+Math.imul(N,tp)|0)|0)+((8191&(i=(i=i+Math.imul(N,tm)|0)+Math.imul(x,tp)|0))<<13)|0;c=((o=o+Math.imul(x,tm)|0)+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,n=Math.imul(K,tu),i=(i=Math.imul(K,tc))+Math.imul(F,tu)|0,o=Math.imul(F,tc),n=n+Math.imul(L,th)|0,i=(i=i+Math.imul(L,td)|0)+Math.imul(B,th)|0,o=o+Math.imul(B,td)|0;var tO=(c+(n=n+Math.imul(O,tp)|0)|0)+((8191&(i=(i=i+Math.imul(O,tm)|0)+Math.imul(C,tp)|0))<<13)|0;c=((o=o+Math.imul(C,tm)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(K,th),i=(i=Math.imul(K,td))+Math.imul(F,th)|0,o=Math.imul(F,td);var tC=(c+(n=n+Math.imul(L,tp)|0)|0)+((8191&(i=(i=i+Math.imul(L,tm)|0)+Math.imul(B,tp)|0))<<13)|0;c=((o=o+Math.imul(B,tm)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863;var tR=(c+(n=Math.imul(K,tp))|0)+((8191&(i=(i=Math.imul(K,tm))+Math.imul(F,tp)|0))<<13)|0;return c=((o=Math.imul(F,tm))+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,u[0]=tg,u[1]=ty,u[2]=tv,u[3]=tw,u[4]=tb,u[5]=t_,u[6]=tM,u[7]=tE,u[8]=tA,u[9]=tS,u[10]=tI,u[11]=tT,u[12]=tk,u[13]=tN,u[14]=tx,u[15]=tP,u[16]=tO,u[17]=tC,u[18]=tR,0!==c&&(u[19]=c,r.length++),r};function p(t,e,r){return new m().mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(f=d),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,e):r<63?d(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,h=(0|t.words[l])*(0|e.words[c]),d=67108863&h;s=s+(h/67108864|0)|0,a=67108863&(d=d+a|0),i+=(s=s+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},m.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},m.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,d=c,f=0;f<s;f++){var p=r[l+f],m=n[l+f],g=r[l+f+s],y=n[l+f+s],v=h*g-d*y;y=h*y+d*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+s]=p-g,n[l+f+s]=m-y,f!==a&&(v=u*h-c*d,d=u*d+c*h,h=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},m.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,r,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)r[s]=0;n(0===o),n((-8192&o)==0)},m.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=Array(n),a=Array(n),u=Array(n),c=Array(n),l=Array(n),h=Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-u[f]*h[f];u[f]=a[f]*h[f]+u[f]*l[f],a[f]=p}return this.conjugate(a,u,n),this.transform(a,u,d,o,n,i),this.conjugate(d,o,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),p(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=(i/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<r;this.words[e]=u|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o;if(i-=s,i=Math.max(0,i),r){for(var u=0;u<s;u++)r.words[u]=this.words[u];r.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var l=0|this.words[u];this.words[u]=c<<26-o|l>>>o,c=l&a}return r&&0!==c&&(r.words[r.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var u=(0|t.words[i])*e;o-=67108863&u,a=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),s=t,a=0|s.words[s.length-1];0!=(n=26-this._countBits(a))&&(s=s.ushln(n),i.iushln(n),a=0|s.words[s.length-1]);var u=i.length-s.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var l=i.clone()._ishlnsubmul(s,1,u);0===l.negative&&(i=l,r&&(r.words[u]=1));for(var h=u-1;h>=0;h--){var d=(0|i.words[s.length+h])*67108864+(0|i.words[s.length+h-1]);for(d=Math.min(d/a|0,67108863),i._ishlnsubmul(s,d,h);0!==i.negative;)d--,i.negative=0,i._ishlnsubmul(s,1,h),i.isZero()||(i.negative^=1);r&&(r.words[h]=d)}return r&&r.strip(),i.strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,s,a;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):(this.negative&t.negative)!=0?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=67108864%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;(e.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;(r.words[0]&m)==0&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(a),s.isub(u)):(r.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:r.iushln(c)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var s=new o(1),a=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,l=1;(r.words[0]&l)==0&&c<26;++c,l<<=1);if(c>0)for(r.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,d=1;(i.words[0]&d)==0&&h<26;++h,d<<=1);if(h>0)for(i.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a)):(i.isub(r),a.isub(s))}return 0>(e=0===r.cmpn(1)?s:a).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},i(v,y),v.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,y),i(b,y),i(_,y),_.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(g[t])return g[t];if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new b;else if("p25519"===t)e=new _;else throw Error("Unknown prime "+t);return g[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},M.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),f=this.pow(t,i),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();n(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var h=c>>l&1;if(i!==r[0]&&(i=this.sqr(i)),0===h&&0===s){a=0;continue}s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)}u=26}return i},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,M),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):0>i.cmpn(0)&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},83206:function(t,e,r){var n=r(45033),i=r(49604);t.exports=function(t){if("string"==typeof t||"number"==typeof t){var e=new n(1),r=String(t).toLowerCase().trim(),o="0x"===r.substr(0,2)||"-0x"===r.substr(0,3),s=i(r);if("-"===s.substr(0,1)&&(s=i(s.slice(1)),e=new n(-1,10)),!(s=""===s?"0":s).match(/^-?[0-9]+$/)&&s.match(/^[0-9A-Fa-f]+$/)||s.match(/^[a-fA-F]+$/)||!0===o&&s.match(/^[0-9A-Fa-f]+$/))return new n(s,16).mul(e);if((s.match(/^-?[0-9]+$/)||""===s)&&!1===o)return new n(s,10).mul(e)}else if("object"==typeof t&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new n(t.toString(10),10);throw Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")}},61798:function(t,e,r){"use strict";var n=r(34155),i=r(89509).Buffer,o=r.g.crypto||r.g.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw RangeError("requested too many random bytes");var r=i.allocUnsafe(t);if(t>0){if(t>65536)for(var s=0;s<t;s+=65536)o.getRandomValues(r.slice(s,s+65536));else o.getRandomValues(r)}return"function"==typeof e?n.nextTick(function(){e(null,r)}):r}:t.exports=function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},51675:function(t,e,r){"use strict";var n=r(48764).Buffer,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getLength=e.decode=e.encode=void 0;var o=i(r(13550));function s(t,e){if("0"===t[0]&&"0"===t[1])throw Error("invalid RLP: extra zeros");return parseInt(t,e)}function a(t,e){if(t<56)return n.from([t+e]);var r=c(t),i=c(e+55+r.length/2);return n.from(i+r,"hex")}function u(t){return"0x"===t.slice(0,2)}function c(t){if(t<0)throw Error("Invalid integer as argument, must be unsigned!");var e=t.toString(16);return e.length%2?"0"+e:e}function l(t){if(!n.isBuffer(t)){var e,r;if("string"==typeof t)return u(t)?n.from((e="string"!=typeof t?t:u(t)?t.slice(2):t).length%2?"0"+e:e,"hex"):n.from(t);if("number"==typeof t||"bigint"==typeof t)return t?(r=c(t),n.from(r,"hex")):n.from([]);if(null==t)return n.from([]);if(t instanceof Uint8Array)return n.from(t);else if(o.default.isBN(t))return n.from(t.toArray());else throw Error("invalid type")}return t}e.encode=function t(e){if(Array.isArray(e)){for(var r=[],i=0;i<e.length;i++)r.push(t(e[i]));var o=n.concat(r);return n.concat([a(o.length,192),o])}var s=l(e);return 1===s.length&&s[0]<128?s:n.concat([a(s.length,128),s])},e.decode=function(t,e){if(void 0===e&&(e=!1),!t||0===t.length)return n.from([]);var r=function t(e){var r,i,o,a,u,c=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(r=l-127,o=128===l?n.from([]):e.slice(1,r),2===r&&o[0]<128)throw Error("invalid rlp encoding: byte must be less 0x80");return{data:o,remainder:e.slice(r)}}if(l<=191){if(i=l-182,e.length-1<i)throw Error("invalid RLP: not enough bytes for string length");if((r=s(e.slice(1,i).toString("hex"),16))<=55)throw Error("invalid RLP: expected string length to be greater than 55");if((o=e.slice(i,r+i)).length<r)throw Error("invalid RLP: not enough bytes for string");return{data:o,remainder:e.slice(r+i)}}if(l<=247){for(r=l-191,a=e.slice(1,r);a.length;)u=t(a),c.push(u.data),a=u.remainder;return{data:c,remainder:e.slice(r)}}i=l-246,r=s(e.slice(1,i).toString("hex"),16);var h=i+r;if(h>e.length)throw Error("invalid rlp: total length is larger than the data");if(0===(a=e.slice(i,h)).length)throw Error("invalid rlp, List has a invalid length");for(;a.length;)u=t(a),c.push(u.data),a=u.remainder;return{data:c,remainder:e.slice(h)}}(l(t));if(e)return r;if(0!==r.remainder.length)throw Error("invalid remainder");return r.data},e.getLength=function(t){if(!t||0===t.length)return n.from([]);var e=l(t),r=e[0];if(r<=127)return e.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var i=r-246,o=s(e.slice(1,i).toString("hex"),16);return i+o}},17221:function(t,e,r){t.exports=r(59119)(r(58573))},58573:function(t,e,r){let n=r(86266).ec,i=new n("secp256k1"),o=i.curve,s=o.n.constructor;function a(t){let e=t[0];switch(e){case 2:case 3:if(33!==t.length)return null;return function(t,e){let r=new s(e);if(r.cmp(o.p)>=0)return null;let n=(r=r.toRed(o.red)).redSqr().redIMul(r).redIAdd(o.b).redSqrt();return 3===t!==n.isOdd()&&(n=n.redNeg()),i.keyPair({pub:{x:r,y:n}})}(e,t.subarray(1,33));case 4:case 6:case 7:if(65!==t.length)return null;return function(t,e,r){let n=new s(e),a=new s(r);if(n.cmp(o.p)>=0||a.cmp(o.p)>=0||(n=n.toRed(o.red),a=a.toRed(o.red),(6===t||7===t)&&a.isOdd()!==(7===t)))return null;let u=n.redSqr().redIMul(n);return a.redSqr().redISub(u.redIAdd(o.b)).isZero()?i.keyPair({pub:{x:n,y:a}}):null}(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function u(t,e){let r=e.encode(null,33===t.length);for(let e=0;e<t.length;++e)t[e]=r[e]}t.exports={contextRandomize:()=>0,privateKeyVerify(t){let e=new s(t);return 0>e.cmp(o.n)&&!e.isZero()?0:1},privateKeyNegate(t){let e=new s(t),r=o.n.sub(e).umod(o.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){let r=new s(e);if(r.cmp(o.n)>=0||(r.iadd(new s(t)),r.cmp(o.n)>=0&&r.isub(o.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new s(e);if(r.cmp(o.n)>=0||r.isZero())return 1;r.imul(new s(t)),r.cmp(o.n)>=0&&(r=r.umod(o.n));let n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){let e=a(t);return null===e?1:0},publicKeyCreate(t,e){let r=new s(e);if(r.cmp(o.n)>=0||r.isZero())return 1;let n=i.keyFromPrivate(e).getPublic();return u(t,n),0},publicKeyConvert(t,e){let r=a(e);if(null===r)return 1;let n=r.getPublic();return u(t,n),0},publicKeyNegate(t,e){let r=a(e);if(null===r)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),u(t,n),0},publicKeyCombine(t,e){let r=Array(e.length);for(let t=0;t<e.length;++t)if(r[t]=a(e[t]),null===r[t])return 1;let n=r[0].getPublic();for(let t=1;t<r.length;++t)n=n.add(r[t].pub);return n.isInfinity()?2:(u(t,n),0)},publicKeyTweakAdd(t,e,r){let n=a(e);if(null===n)return 1;if((r=new s(r)).cmp(o.n)>=0)return 2;let i=n.getPublic().add(o.g.mul(r));return i.isInfinity()?2:(u(t,i),0)},publicKeyTweakMul(t,e,r){let n=a(e);if(null===n)return 1;if((r=new s(r)).cmp(o.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return u(t,i),0},signatureNormalize(t){let e=new s(t.subarray(0,32)),r=new s(t.subarray(32,64));return e.cmp(o.n)>=0||r.cmp(o.n)>=0?1:(1===r.cmp(i.nh)&&t.set(o.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){let r=e.subarray(0,32),n=e.subarray(32,64);if(new s(r).cmp(o.n)>=0||new s(n).cmp(o.n)>=0)return 1;let{output:i}=t,a=i.subarray(4,37);a[0]=0,a.set(r,1);let u=33,c=0;for(;u>1&&0===a[c]&&!(128&a[c+1]);--u,++c);if(128&(a=a.subarray(c))[0]||u>1&&0===a[0]&&!(128&a[1]))return 1;let l=i.subarray(39,72);l[0]=0,l.set(n,1);let h=33,d=0;for(;h>1&&0===l[d]&&!(128&l[d+1]);--h,++d);return 128&(l=l.subarray(d))[0]||h>1&&0===l[0]&&!(128&l[1])?1:(t.outputlen=6+u+h,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=a.length,i.set(a,4),i[4+u]=2,i[5+u]=l.length,i.set(l,6+u),0)},signatureImport(t,e){if(e.length<8||e.length>72||48!==e[0]||e[1]!==e.length-2||2!==e[2])return 1;let r=e[3];if(0===r||5+r>=e.length||2!==e[4+r])return 1;let n=e[5+r];if(0===n||6+r+n!==e.length||128&e[4]||r>1&&0===e[4]&&!(128&e[5])||128&e[r+6]||n>1&&0===e[r+6]&&!(128&e[r+7]))return 1;let i=e.subarray(4,4+r);if(33===i.length&&0===i[0]&&(i=i.subarray(1)),i.length>32)return 1;let a=e.subarray(6+r);if(33===a.length&&0===a[0]&&(a=a.slice(1)),a.length>32)throw Error("S length is too long");let u=new s(i);u.cmp(o.n)>=0&&(u=new s(0));let c=new s(e.subarray(6+r));return c.cmp(o.n)>=0&&(c=new s(0)),t.set(u.toArrayLike(Uint8Array,"be",32),0),t.set(c.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,a){let u;if(a){let t=a;a=i=>{let o=t(e,r,null,n,i),a=o instanceof Uint8Array&&32===o.length;if(!a)throw Error("This is the way");return new s(o)}}let c=new s(r);if(c.cmp(o.n)>=0||c.isZero())return 1;try{u=i.sign(e,r,{canonical:!0,k:a,pers:n})}catch(t){return 1}return t.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),t.recid=u.recoveryParam,0},ecdsaVerify(t,e,r){let n={r:t.subarray(0,32),s:t.subarray(32,64)},u=new s(n.r),c=new s(n.s);if(u.cmp(o.n)>=0||c.cmp(o.n)>=0)return 1;if(1===c.cmp(i.nh)||u.isZero()||c.isZero())return 3;let l=a(r);if(null===l)return 2;let h=l.getPublic(),d=i.verify(e,n,h);return d?0:3},ecdsaRecover(t,e,r,n){let a;let c={r:e.slice(0,32),s:e.slice(32,64)},l=new s(c.r),h=new s(c.s);if(l.cmp(o.n)>=0||h.cmp(o.n)>=0)return 1;if(l.isZero()||h.isZero())return 2;try{a=i.recoverPubKey(n,c,r)}catch(t){return 2}return u(t,a),0},ecdh(t,e,r,n,u,c,l){let h=a(e);if(null===h)return 1;let d=new s(r);if(d.cmp(o.n)>=0||d.isZero())return 2;let f=h.getPublic().mul(d);if(void 0===u){let e=f.encode(null,!0),r=i.hash().update(e).digest();for(let e=0;e<32;++e)t[e]=r[e]}else{c||(c=new Uint8Array(32));let e=f.getX().toArray("be",32);for(let t=0;t<32;++t)c[t]=e[t];l||(l=new Uint8Array(32));let r=f.getY().toArray("be",32);for(let t=0;t<32;++t)l[t]=r[t];let i=u(c,l,n),o=i instanceof Uint8Array&&i.length===t.length;if(!o)return 2;t.set(i)}return 0}}},59119:function(t){let e={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function r(t,e){if(!t)throw Error(e)}function n(t,e,n){if(r(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),void 0!==n){if(Array.isArray(n)){let i=n.join(", "),o=`Expected ${t} to be an Uint8Array with length [${i}]`;r(n.includes(e.length),o)}else{let i=`Expected ${t} to be an Uint8Array with length ${n}`;r(e.length===n,i)}}}function i(t){r("Boolean"===s(t),"Expected compressed to be a Boolean")}function o(t=t=>new Uint8Array(t),e){return"function"==typeof t&&(t=t(e)),n("output",t,e),t}function s(t){return Object.prototype.toString.call(t).slice(8,-1)}t.exports=t=>({contextRandomize(i){if(r(null===i||i instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==i&&n("seed",i,32),1===t.contextRandomize(i))throw Error(e.CONTEXT_RANDOMIZE_UNKNOW)},privateKeyVerify:e=>(n("private key",e,32),0===t.privateKeyVerify(e)),privateKeyNegate(r){switch(n("private key",r,32),t.privateKeyNegate(r)){case 0:return r;case 1:throw Error(e.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(r,i){switch(n("private key",r,32),n("tweak",i,32),t.privateKeyTweakAdd(r,i)){case 0:return r;case 1:throw Error(e.TWEAK_ADD)}},privateKeyTweakMul(r,i){switch(n("private key",r,32),n("tweak",i,32),t.privateKeyTweakMul(r,i)){case 0:return r;case 1:throw Error(e.TWEAK_MUL)}},publicKeyVerify:e=>(n("public key",e,[33,65]),0===t.publicKeyVerify(e)),publicKeyCreate(r,s=!0,a){switch(n("private key",r,32),i(s),a=o(a,s?33:65),t.publicKeyCreate(a,r)){case 0:return a;case 1:throw Error(e.SECKEY_INVALID);case 2:throw Error(e.PUBKEY_SERIALIZE)}},publicKeyConvert(r,s=!0,a){switch(n("public key",r,[33,65]),i(s),a=o(a,s?33:65),t.publicKeyConvert(a,r)){case 0:return a;case 1:throw Error(e.PUBKEY_PARSE);case 2:throw Error(e.PUBKEY_SERIALIZE)}},publicKeyNegate(r,s=!0,a){switch(n("public key",r,[33,65]),i(s),a=o(a,s?33:65),t.publicKeyNegate(a,r)){case 0:return a;case 1:throw Error(e.PUBKEY_PARSE);case 2:throw Error(e.IMPOSSIBLE_CASE);case 3:throw Error(e.PUBKEY_SERIALIZE)}},publicKeyCombine(s,a=!0,u){for(let t of(r(Array.isArray(s),"Expected public keys to be an Array"),r(s.length>0,"Expected public keys array will have more than zero items"),s))n("public key",t,[33,65]);switch(i(a),u=o(u,a?33:65),t.publicKeyCombine(u,s)){case 0:return u;case 1:throw Error(e.PUBKEY_PARSE);case 2:throw Error(e.PUBKEY_COMBINE);case 3:throw Error(e.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(r,s,a=!0,u){switch(n("public key",r,[33,65]),n("tweak",s,32),i(a),u=o(u,a?33:65),t.publicKeyTweakAdd(u,r,s)){case 0:return u;case 1:throw Error(e.PUBKEY_PARSE);case 2:throw Error(e.TWEAK_ADD)}},publicKeyTweakMul(r,s,a=!0,u){switch(n("public key",r,[33,65]),n("tweak",s,32),i(a),u=o(u,a?33:65),t.publicKeyTweakMul(u,r,s)){case 0:return u;case 1:throw Error(e.PUBKEY_PARSE);case 2:throw Error(e.TWEAK_MUL)}},signatureNormalize(r){switch(n("signature",r,64),t.signatureNormalize(r)){case 0:return r;case 1:throw Error(e.SIG_PARSE)}},signatureExport(r,i){n("signature",r,64),i=o(i,72);let s={output:i,outputlen:72};switch(t.signatureExport(s,r)){case 0:return i.slice(0,s.outputlen);case 1:throw Error(e.SIG_PARSE);case 2:throw Error(e.IMPOSSIBLE_CASE)}},signatureImport(r,i){switch(n("signature",r),i=o(i,64),t.signatureImport(i,r)){case 0:return i;case 1:throw Error(e.SIG_PARSE);case 2:throw Error(e.IMPOSSIBLE_CASE)}},ecdsaSign(i,a,u={},c){n("message",i,32),n("private key",a,32),r("Object"===s(u),"Expected options to be an Object"),void 0!==u.data&&n("options.data",u.data),void 0!==u.noncefn&&r("Function"===s(u.noncefn),"Expected options.noncefn to be a Function"),c=o(c,64);let l={signature:c,recid:null};switch(t.ecdsaSign(l,i,a,u.data,u.noncefn)){case 0:return l;case 1:throw Error(e.SIGN);case 2:throw Error(e.IMPOSSIBLE_CASE)}},ecdsaVerify(r,i,o){switch(n("signature",r,64),n("message",i,32),n("public key",o,[33,65]),t.ecdsaVerify(r,i,o)){case 0:return!0;case 3:return!1;case 1:throw Error(e.SIG_PARSE);case 2:throw Error(e.PUBKEY_PARSE)}},ecdsaRecover(a,u,c,l=!0,h){switch(n("signature",a,64),r("Number"===s(u)&&u>=0&&u<=3,"Expected recovery id to be a Number within interval [0, 3]"),n("message",c,32),i(l),h=o(h,l?33:65),t.ecdsaRecover(h,a,u,c)){case 0:return h;case 1:throw Error(e.SIG_PARSE);case 2:throw Error(e.RECOVER);case 3:throw Error(e.IMPOSSIBLE_CASE)}},ecdh(i,a,u={},c){switch(n("public key",i,[33,65]),n("private key",a,32),r("Object"===s(u),"Expected options to be an Object"),void 0!==u.data&&n("options.data",u.data),void 0!==u.hashfn?(r("Function"===s(u.hashfn),"Expected options.hashfn to be a Function"),void 0!==u.xbuf&&n("options.xbuf",u.xbuf,32),void 0!==u.ybuf&&n("options.ybuf",u.ybuf,32),n("output",c)):c=o(c,32),t.ecdh(c,i,a,u.data,u.hashfn,u.xbuf,u.ybuf)){case 0:return c;case 1:throw Error(e.PUBKEY_PARSE);case 2:throw Error(e.ECDH)}}})},49604:function(t,e,r){var n=r(23944);t.exports=function(t){return"string"!=typeof t?t:n(t)?t.slice(2):t}},57458:function(t,e){!function(t){var e,r,n,i=String.fromCharCode;function o(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?(64512&(r=t.charCodeAt(i++)))==56320?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function s(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function a(t,e){return i(t>>e&63|128)}function u(){if(n>=r)throw Error("Invalid byte index");var t=255&e[n];if(n++,(192&t)==128)return 63&t;throw Error("Invalid continuation byte")}t.version="3.0.0",t.encode=function(t){for(var e=o(t),r=e.length,n=-1,u="";++n<r;)u+=function(t){if((4294967168&t)==0)return i(t);var e="";return(4294965248&t)==0?e=i(t>>6&31|192):(4294901760&t)==0?(s(t),e=i(t>>12&15|224)+a(t,6)):(4292870144&t)==0&&(e=i(t>>18&7|240)+a(t,12)+a(t,6)),e+=i(63&t|128)}(e[n]);return u},t.decode=function(t){r=(e=o(t)).length,n=0;for(var a,c=[];!1!==(a=function(){var t,i,o,a;if(n>r)throw Error("Invalid byte index");if(n==r)return!1;if(t=255&e[n],n++,(128&t)==0)return t;if((224&t)==192){if((a=(31&t)<<6|(i=u()))>=128)return a;throw Error("Invalid continuation byte")}if((240&t)==224){if((a=(15&t)<<12|(i=u())<<6|u())>=2048)return s(a),a;throw Error("Invalid continuation byte")}if((248&t)==240&&(a=(7&t)<<18|(i=u())<<12|u()<<6|u())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}());)c.push(a);return function(t){for(var e,r=t.length,n=-1,o="";++n<r;)(e=t[n])>65535&&(e-=65536,o+=i(e>>>10&1023|55296),e=56320|1023&e),o+=i(e);return o}(c)}}(e)},18269:function(t,e,r){var n=r(94278),i=r(90329),o=r(28668),s=r(61798),a=r(13550),u=function(t,e){var r=[];return e.forEach(function(e){if("object"==typeof e.components){if("tuple"!==e.type.substring(0,5))throw Error("components found but type is not tuple; report on GitHub");var n="",i=e.type.indexOf("[");i>=0&&(n=e.type.substring(i));var o=u(t,e.components);Array.isArray(o)&&t?r.push("tuple("+o.join(",")+")"+n):t?r.push("("+o+")"):r.push("("+o.join(",")+")"+n)}else r.push(e.type)}),r},c=function(t){if(!i.isHexStrict(t))throw Error("The parameter must be a valid HEX string.");var e="",r=0,n=t.length;for("0x"===t.substring(0,2)&&(r=2);r<n;r+=2)e+=String.fromCharCode(parseInt(t.slice(r,r+2),16));return e},l=function(t){if(!t)return"0x00";for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r).toString(16);e+=n.length<2?"0"+n:n}return"0x"+e},h=function(t){if(t=t?t.toLowerCase():"ether",!n.unitMap[t])throw Error('This unit "'+t+"\" doesn't exist, please use the one of the following units"+JSON.stringify(n.unitMap,null,2));return t};t.exports={_fireError:function(t,e,r,n,i){return!t||"object"!=typeof t||t instanceof Error||!t.data||((t.data&&"object"==typeof t.data||Array.isArray(t.data))&&(t.data=JSON.stringify(t.data,null,2)),t=t.message+"\n"+t.data),"string"==typeof t&&(t=Error(t)),"function"==typeof n&&n(t,i),"function"==typeof r&&((e&&"function"==typeof e.listeners&&e.listeners("error").length||"function"==typeof n)&&e.catch(function(){}),setTimeout(function(){r(t)},1)),e&&"function"==typeof e.emit&&setTimeout(function(){e.emit("error",t,i),e.removeAllListeners()},1),e},_jsonInterfaceMethodToString:function(t){return t&&"object"==typeof t&&t.name&&-1!==t.name.indexOf("(")?t.name:t.name+"("+u(!1,t.inputs).join(",")+")"},_flattenTypes:u,randomHex:function(t){return"0x"+s(t).toString("hex")},BN:i.BN,isBN:i.isBN,isBigNumber:i.isBigNumber,isHex:i.isHex,isHexStrict:i.isHexStrict,sha3:i.sha3,sha3Raw:i.sha3Raw,keccak256:i.sha3,soliditySha3:o.soliditySha3,soliditySha3Raw:o.soliditySha3Raw,encodePacked:o.encodePacked,isAddress:i.isAddress,checkAddressChecksum:i.checkAddressChecksum,toChecksumAddress:function(t){if(void 0===t)return"";if(!/^(0x)?[0-9a-f]{40}$/i.test(t))throw Error('Given address "'+t+'" is not a valid Ethereum address.');t=t.toLowerCase().replace(/^0x/i,"");for(var e=i.sha3(t).replace(/^0x/i,""),r="0x",n=0;n<t.length;n++)parseInt(e[n],16)>7?r+=t[n].toUpperCase():r+=t[n];return r},toHex:i.toHex,toBN:i.toBN,bytesToHex:i.bytesToHex,hexToBytes:i.hexToBytes,hexToNumberString:i.hexToNumberString,hexToNumber:i.hexToNumber,toDecimal:i.hexToNumber,numberToHex:i.numberToHex,fromDecimal:i.numberToHex,hexToUtf8:i.hexToUtf8,hexToString:i.hexToUtf8,toUtf8:i.hexToUtf8,stripHexPrefix:i.stripHexPrefix,utf8ToHex:i.utf8ToHex,stringToHex:i.utf8ToHex,fromUtf8:i.utf8ToHex,hexToAscii:c,toAscii:c,asciiToHex:l,fromAscii:l,unitMap:n.unitMap,toWei:function(t,e){if(e=h(e),!i.isBN(t)&&"string"!=typeof t)throw Error("Please pass numbers as strings or BN objects to avoid precision errors.");return i.isBN(t)?n.toWei(t,e):n.toWei(t,e).toString(10)},fromWei:function(t,e){if(e=h(e),!i.isBN(t)&&"string"!=typeof t)throw Error("Please pass numbers as strings or BN objects to avoid precision errors.");return i.isBN(t)?n.fromWei(t,e):n.fromWei(t,e).toString(10)},padLeft:i.leftPad,leftPad:i.leftPad,padRight:i.rightPad,rightPad:i.rightPad,toTwosComplement:i.toTwosComplement,isBloom:i.isBloom,isUserEthereumAddressInBloom:i.isUserEthereumAddressInBloom,isContractAddressInBloom:i.isContractAddressInBloom,isTopic:i.isTopic,isTopicInBloom:i.isTopicInBloom,isInBloom:i.isInBloom,compareBlockNumbers:function(t,e){if(t===e||("genesis"===t||"earliest"===t||0===t)&&("genesis"===e||"earliest"===e||0===e))return 0;if("genesis"===t||"earliest"===t||0===t)return -1;{if("genesis"===e||"earliest"===e||0===e)return 1;if("latest"===t||"finalized"===t)return"pending"===e?-1:1;if("latest"===e||"finalized"===e)return"pending"===t?1:-1;if("pending"===t)return 1;if("pending"===e)return -1;if("safe"===t||"safe"===e)return;let r=new a(t),n=new a(e);return r.lt(n)?-1:r.eq(n)?0:1}},toNumber:i.toNumber}},28668:function(t,e,r){var n=r(13550),i=r(90329),o=function(t){if(t.startsWith("int["))return"int256"+t.slice(3);if("int"===t)return"int256";if(t.startsWith("uint["))return"uint256"+t.slice(4);if("uint"===t)return"uint256";if(t.startsWith("fixed["))return"fixed128x128"+t.slice(5);if("fixed"===t)return"fixed128x128";if(t.startsWith("ufixed["))return"ufixed128x128"+t.slice(6);else if("ufixed"===t)return"ufixed128x128";return t},s=function(t){var e=/^\D+(\d+).*$/.exec(t);return e?parseInt(e[1],10):null},a=function(t){var e=/^\D+\d*\[(\d+)\]$/.exec(t);return e?parseInt(e[1],10):null},u=function(t){var e=typeof t;if("string"===e)return i.isHexStrict(t)?new n(t.replace(/0x/i,""),16):new n(t,10);if("number"===e)return new n(t);if(i.isBigNumber(t))return new n(t.toString(10));if(i.isBN(t))return t;throw Error(t+" is not a number")},c=function(t,e,r){var a,c;if("bytes"===(t=o(t))){if(e.replace(/^0x/i,"").length%2!=0)throw Error("Invalid bytes characters "+e.length);return e}if("string"===t)return i.utf8ToHex(e);if("bool"===t)return e?"01":"00";if(t.startsWith("address")){if(a=r?64:40,!i.isAddress(e))throw Error(e+" is not a valid address, or the checksum is invalid.");return i.leftPad(e.toLowerCase(),a)}if(a=s(t),t.startsWith("bytes")){if(!a)throw Error("bytes[] not yet supported in solidity");if(r&&(a=32),a<1||a>32||a<e.replace(/^0x/i,"").length/2)throw Error("Invalid bytes"+a+" for "+e);return i.rightPad(e,2*a)}if(t.startsWith("uint")){if(a%8||a<8||a>256)throw Error("Invalid uint"+a+" size");if((c=u(e)).bitLength()>a)throw Error("Supplied uint exceeds width: "+a+" vs "+c.bitLength());if(c.lt(new n(0)))throw Error("Supplied uint "+c.toString()+" is negative");return a?i.leftPad(c.toString("hex"),a/8*2):c}if(t.startsWith("int")){if(a%8||a<8||a>256)throw Error("Invalid int"+a+" size");if((c=u(e)).bitLength()>a)throw Error("Supplied int exceeds width: "+a+" vs "+c.bitLength());return c.lt(new n(0))?c.toTwos(a).toString("hex"):a?i.leftPad(c.toString("hex"),a/8*2):c}throw Error("Unsupported or invalid type: "+t)},l=function(t){if(Array.isArray(t))throw Error("Autodetection of array types is not supported.");var e,r,o="";if(t&&"object"==typeof t&&(t.hasOwnProperty("v")||t.hasOwnProperty("t")||t.hasOwnProperty("value")||t.hasOwnProperty("type"))?(r=t.hasOwnProperty("t")?t.t:t.type,o=t.hasOwnProperty("v")?t.v:t.value):(r=i.toHex(t,!0),o=i.toHex(t),r.startsWith("int")||r.startsWith("uint")||(r="bytes")),(r.startsWith("int")||r.startsWith("uint"))&&"string"==typeof o&&!/^(-)?0x/i.test(o)&&(o=new n(o)),Array.isArray(o)){if((e=a(r))&&o.length!==e)throw Error(r+" is not matching the given array "+JSON.stringify(o));e=o.length}return Array.isArray(o)?o.map(function(t){return c(r,t,e).toString("hex").replace("0x","")}).join(""):c(r,o,e).toString("hex").replace("0x","")};t.exports={soliditySha3:function(){var t=Array.prototype.slice.call(arguments),e=t.map(l);return i.sha3("0x"+e.join(""))},soliditySha3Raw:function(){return i.sha3Raw("0x"+Array.prototype.slice.call(arguments).map(l).join(""))},encodePacked:function(){var t=Array.prototype.slice.call(arguments);return"0x"+t.map(l).join("").toLowerCase()}}},90329:function(t,e,r){var n=r(48764).Buffer,i=r(13550),o=r(83206),s=r(57458),a=r(92730),u=r(46877),{keccak256:c}=r(82192),l=function(t){return i.isBN(t)},h=function(t){return t&&t.constructor&&"BigNumber"===t.constructor.name},d=function(t){try{return o.apply(null,arguments)}catch(e){throw Error(e+' Given value: "'+t+'"')}},f=function(t){return!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!!(/^(0x|0X)?[0-9a-f]{40}$/.test(t)||/^(0x|0X)?[0-9A-F]{40}$/.test(t))||p(t))},p=function(t){for(var e=M((t=t.replace(/^0x/i,"")).toLowerCase()).replace(/^0x/i,""),r=0;r<40;r++)if(parseInt(e[r],16)>7&&t[r].toUpperCase()!==t[r]||7>=parseInt(e[r],16)&&t[r].toLowerCase()!==t[r])return!1;return!0},m=function(t){t=s.encode(t);var e="";t=(t=(t=(t=t.replace(/^(?:\u0000)*/,"")).split("").reverse().join("")).replace(/^(?:\u0000)*/,"")).split("").reverse().join("");for(var r=0;r<t.length;r++){var n=t.charCodeAt(r).toString(16);e+=n.length<2?"0"+n:n}return"0x"+e},g=function(t,e=!1){if(!t)return t;if("string"==typeof t&&!w(t))throw Error('Given value "'+t+'" is not a valid hex string.');let r=d(t);return e&&(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)?BigInt(r):r.toNumber()},y=function(t){if(null==t)return t;if(!isFinite(t)&&!w(t))throw Error('Given input "'+t+'" is not a number.');var e=d(t),r=e.toString(16);return e.lt(new i(0))?"-0x"+r.slice(1):"0x"+r},v=function(t,e){if(f(t))return e?"address":"0x"+t.toLowerCase().replace(/^0x/i,"");if("boolean"==typeof t)return e?"bool":t?"0x01":"0x00";if(n.isBuffer(t))return"0x"+t.toString("hex");if("object"==typeof t&&t&&!h(t)&&!l(t))return e?"string":m(JSON.stringify(t));if("string"==typeof t){if(0===t.indexOf("-0x")||0===t.indexOf("-0X"))return e?"int256":y(t);if(0===t.indexOf("0x")||0===t.indexOf("0X"))return e?"bytes":t;if(!isFinite(t))return e?"string":m(t)}return e?t<0?"int256":"uint256":y(t)},w=function(t){return("string"==typeof t||"number"==typeof t)&&/^(-)?0x[0-9a-f]*$/i.test(t)},b=function(t){return("string"==typeof t||"number"==typeof t)&&/^(-0x|0x)?[0-9a-f]*$/i.test(t)},_="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",M=function(t){l(t)&&(t=t.toString()),w(t)&&/^0x/i.test(t.toString())?t=a.toBuffer(t):"string"==typeof t&&(t=n.from(t,"utf-8"));var e=a.bufferToHex(c(t));return e===_?null:e};M._Hash=c;var E=function(t){if(!("string"==typeof t&&t.includes("0x")))return new i(t);{let[e,r]=t.toLocaleLowerCase().startsWith("-")?["-",t.slice(3)]:["",t.slice(2)];return new i(e+r,16)}};Object.setPrototypeOf(E,i),Object.setPrototypeOf(E.prototype,i.prototype),t.exports={BN:E,isBN:l,isBigNumber:h,toBN:d,isAddress:f,isBloom:function(t){return u.isBloom(t)},isUserEthereumAddressInBloom:function(t,e){return u.isUserEthereumAddressInBloom(t,e)},isContractAddressInBloom:function(t,e){return u.isContractAddressInBloom(t,e)},isTopic:function(t){return u.isTopic(t)},isTopicInBloom:function(t,e){return u.isTopicInBloom(t,e)},isInBloom:function(t,e){return u.isInBloom(t,e)},checkAddressChecksum:p,utf8ToHex:m,hexToUtf8:function(t){if(!w(t))throw Error('The parameter "'+t+'" must be a valid HEX string.');for(var e="",r=(t=(t=(t=(t=(t=t.replace(/^0x/i,"")).replace(/^(?:00)*/,"")).split("").reverse().join("")).replace(/^(?:00)*/,"")).split("").reverse().join("")).length,n=0;n<r;n+=2)e+=String.fromCharCode(parseInt(t.slice(n,n+2),16));return s.decode(e)},hexToNumber:g,hexToNumberString:function(t){if(!t)return t;if("string"==typeof t&&!w(t))throw Error('Given value "'+t+'" is not a valid hex string.');return d(t).toString(10)},numberToHex:y,toHex:v,hexToBytes:function(t){if(!w(t=t.toString(16)))throw Error('Given value "'+t+'" is not a valid hex string.');t=t.replace(/^0x/i,"");for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.slice(r,r+2),16));return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return"0x"+e.join("")},isHex:b,isHexStrict:w,stripHexPrefix:function(t){return 0!==t&&b(t)?t.replace(/^(-)?0x/i,"$1"):t},leftPad:function(t,e,r){return(/^0x/i.test(t)||"number"==typeof t?"0x":"")+Array(e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0).join(r||"0")+t},rightPad:function(t,e,r){var n=/^0x/i.test(t)||"number"==typeof t,i=e-(t=t.toString(16).replace(/^0x/i,"")).length+1>=0?e-t.length+1:0;return(n?"0x":"")+t+Array(i).join(r||"0")},toTwosComplement:function(t){return"0x"+d(t).toTwos(256).toString(16,64)},sha3:M,sha3Raw:function(t){return null===(t=M(t))?_:t},toNumber:function(t,e=!1){return"number"==typeof t?t:g(v(t),e)}}},34639:function(t){"use strict";t.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},79731:function(t){"use strict";t.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},85398:function(t){"use strict";t.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},62458:function(t){"use strict";t.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},93099:function(t){"use strict";t.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},18365:function(t){"use strict";t.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},67590:function(t){"use strict";t.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},4533:function(t){"use strict";t.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},15722:function(t){"use strict";t.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},50657:function(t){"use strict";t.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},74106:function(t){"use strict";t.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},73085:function(t){"use strict";t.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},72945:function(t){"use strict";t.exports=JSON.parse('{"schema":{"BadUTF16":{"name":"BadUTF16","subtypes":[],"props":{}},"BadUTF8":{"name":"BadUTF8","subtypes":[],"props":{}},"BalanceExceeded":{"name":"BalanceExceeded","subtypes":[],"props":{}},"BreakpointTrap":{"name":"BreakpointTrap","subtypes":[],"props":{}},"CacheError":{"name":"CacheError","subtypes":["ReadError","WriteError","DeserializationError","SerializationError"],"props":{}},"CallIndirectOOB":{"name":"CallIndirectOOB","subtypes":[],"props":{}},"CannotAppendActionToJointPromise":{"name":"CannotAppendActionToJointPromise","subtypes":[],"props":{}},"CannotReturnJointPromise":{"name":"CannotReturnJointPromise","subtypes":[],"props":{}},"CodeDoesNotExist":{"name":"CodeDoesNotExist","subtypes":[],"props":{"account_id":""}},"CompilationError":{"name":"CompilationError","subtypes":["CodeDoesNotExist","PrepareError","WasmerCompileError"],"props":{}},"ContractSizeExceeded":{"name":"ContractSizeExceeded","subtypes":[],"props":{"limit":"","size":""}},"Deprecated":{"name":"Deprecated","subtypes":[],"props":{"method_name":""}},"Deserialization":{"name":"Deserialization","subtypes":[],"props":{}},"DeserializationError":{"name":"DeserializationError","subtypes":[],"props":{}},"EmptyMethodName":{"name":"EmptyMethodName","subtypes":[],"props":{}},"FunctionCallError":{"name":"FunctionCallError","subtypes":["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],"props":{}},"GasExceeded":{"name":"GasExceeded","subtypes":[],"props":{}},"GasInstrumentation":{"name":"GasInstrumentation","subtypes":[],"props":{}},"GasLimitExceeded":{"name":"GasLimitExceeded","subtypes":[],"props":{}},"GenericTrap":{"name":"GenericTrap","subtypes":[],"props":{}},"GuestPanic":{"name":"GuestPanic","subtypes":[],"props":{"panic_msg":""}},"HostError":{"name":"HostError","subtypes":["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],"props":{}},"IllegalArithmetic":{"name":"IllegalArithmetic","subtypes":[],"props":{}},"IncorrectCallIndirectSignature":{"name":"IncorrectCallIndirectSignature","subtypes":[],"props":{}},"Instantiate":{"name":"Instantiate","subtypes":[],"props":{}},"IntegerOverflow":{"name":"IntegerOverflow","subtypes":[],"props":{}},"InternalMemoryDeclared":{"name":"InternalMemoryDeclared","subtypes":[],"props":{}},"InvalidAccountId":{"name":"InvalidAccountId","subtypes":[],"props":{"account_id":""}},"InvalidIteratorIndex":{"name":"InvalidIteratorIndex","subtypes":[],"props":{"iterator_index":""}},"InvalidMethodName":{"name":"InvalidMethodName","subtypes":[],"props":{}},"InvalidPromiseIndex":{"name":"InvalidPromiseIndex","subtypes":[],"props":{"promise_idx":""}},"InvalidPromiseResultIndex":{"name":"InvalidPromiseResultIndex","subtypes":[],"props":{"result_idx":""}},"InvalidPublicKey":{"name":"InvalidPublicKey","subtypes":[],"props":{}},"InvalidReceiptIndex":{"name":"InvalidReceiptIndex","subtypes":[],"props":{"receipt_index":""}},"InvalidRegisterId":{"name":"InvalidRegisterId","subtypes":[],"props":{"register_id":""}},"IteratorWasInvalidated":{"name":"IteratorWasInvalidated","subtypes":[],"props":{"iterator_index":""}},"KeyLengthExceeded":{"name":"KeyLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"LinkError":{"name":"LinkError","subtypes":[],"props":{"msg":""}},"Memory":{"name":"Memory","subtypes":[],"props":{}},"MemoryAccessViolation":{"name":"MemoryAccessViolation","subtypes":[],"props":{}},"MemoryOutOfBounds":{"name":"MemoryOutOfBounds","subtypes":[],"props":{}},"MethodEmptyName":{"name":"MethodEmptyName","subtypes":[],"props":{}},"MethodInvalidSignature":{"name":"MethodInvalidSignature","subtypes":[],"props":{}},"MethodNotFound":{"name":"MethodNotFound","subtypes":[],"props":{}},"MethodResolveError":{"name":"MethodResolveError","subtypes":["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],"props":{}},"MethodUTF8Error":{"name":"MethodUTF8Error","subtypes":[],"props":{}},"MisalignedAtomicAccess":{"name":"MisalignedAtomicAccess","subtypes":[],"props":{}},"NumberInputDataDependenciesExceeded":{"name":"NumberInputDataDependenciesExceeded","subtypes":[],"props":{"limit":"","number_of_input_data_dependencies":""}},"NumberOfLogsExceeded":{"name":"NumberOfLogsExceeded","subtypes":[],"props":{"limit":""}},"NumberPromisesExceeded":{"name":"NumberPromisesExceeded","subtypes":[],"props":{"limit":"","number_of_promises":""}},"PrepareError":{"name":"PrepareError","subtypes":["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],"props":{}},"ProhibitedInView":{"name":"ProhibitedInView","subtypes":[],"props":{"method_name":""}},"ReadError":{"name":"ReadError","subtypes":[],"props":{}},"ReturnedValueLengthExceeded":{"name":"ReturnedValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Serialization":{"name":"Serialization","subtypes":[],"props":{}},"SerializationError":{"name":"SerializationError","subtypes":[],"props":{"hash":""}},"StackHeightInstrumentation":{"name":"StackHeightInstrumentation","subtypes":[],"props":{}},"StackOverflow":{"name":"StackOverflow","subtypes":[],"props":{}},"TotalLogLengthExceeded":{"name":"TotalLogLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"Unreachable":{"name":"Unreachable","subtypes":[],"props":{}},"ValueLengthExceeded":{"name":"ValueLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"WasmTrap":{"name":"WasmTrap","subtypes":["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],"props":{}},"WasmUnknownError":{"name":"WasmUnknownError","subtypes":[],"props":{}},"WasmerCompileError":{"name":"WasmerCompileError","subtypes":[],"props":{"msg":""}},"WriteError":{"name":"WriteError","subtypes":[],"props":{}},"AccessKeyNotFound":{"name":"AccessKeyNotFound","subtypes":[],"props":{"account_id":"","public_key":""}},"AccountAlreadyExists":{"name":"AccountAlreadyExists","subtypes":[],"props":{"account_id":""}},"AccountDoesNotExist":{"name":"AccountDoesNotExist","subtypes":[],"props":{"account_id":""}},"ActionError":{"name":"ActionError","subtypes":["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],"props":{"index":""}},"ActionsValidationError":{"name":"ActionsValidationError","subtypes":["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],"props":{}},"ActorNoPermission":{"name":"ActorNoPermission","subtypes":[],"props":{"account_id":"","actor_id":""}},"AddKeyAlreadyExists":{"name":"AddKeyAlreadyExists","subtypes":[],"props":{"account_id":"","public_key":""}},"AddKeyMethodNameLengthExceeded":{"name":"AddKeyMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"AddKeyMethodNamesNumberOfBytesExceeded":{"name":"AddKeyMethodNamesNumberOfBytesExceeded","subtypes":[],"props":{"limit":"","total_number_of_bytes":""}},"BalanceMismatchError":{"name":"BalanceMismatchError","subtypes":[],"props":{"final_accounts_balance":"","final_postponed_receipts_balance":"","incoming_receipts_balance":"","incoming_validator_rewards":"","initial_accounts_balance":"","initial_postponed_receipts_balance":"","new_delayed_receipts_balance":"","other_burnt_amount":"","outgoing_receipts_balance":"","processed_delayed_receipts_balance":"","slashed_burnt_amount":"","tx_burnt_amount":""}},"CostOverflow":{"name":"CostOverflow","subtypes":[],"props":{}},"CreateAccountNotAllowed":{"name":"CreateAccountNotAllowed","subtypes":[],"props":{"account_id":"","predecessor_id":""}},"CreateAccountOnlyByRegistrar":{"name":"CreateAccountOnlyByRegistrar","subtypes":[],"props":{"account_id":"","predecessor_id":"","registrar_account_id":""}},"DeleteAccountStaking":{"name":"DeleteAccountStaking","subtypes":[],"props":{"account_id":""}},"DeleteActionMustBeFinal":{"name":"DeleteActionMustBeFinal","subtypes":[],"props":{}},"DeleteKeyDoesNotExist":{"name":"DeleteKeyDoesNotExist","subtypes":[],"props":{"account_id":"","public_key":""}},"DepositWithFunctionCall":{"name":"DepositWithFunctionCall","subtypes":[],"props":{}},"Expired":{"name":"Expired","subtypes":[],"props":{}},"FunctionCallArgumentsLengthExceeded":{"name":"FunctionCallArgumentsLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallMethodNameLengthExceeded":{"name":"FunctionCallMethodNameLengthExceeded","subtypes":[],"props":{"length":"","limit":""}},"FunctionCallZeroAttachedGas":{"name":"FunctionCallZeroAttachedGas","subtypes":[],"props":{}},"InsufficientStake":{"name":"InsufficientStake","subtypes":[],"props":{"account_id":"","minimum_stake":"","stake":""}},"InvalidAccessKeyError":{"name":"InvalidAccessKeyError","subtypes":["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],"props":{}},"InvalidChain":{"name":"InvalidChain","subtypes":[],"props":{}},"InvalidDataReceiverId":{"name":"InvalidDataReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidNonce":{"name":"InvalidNonce","subtypes":[],"props":{"ak_nonce":"","tx_nonce":""}},"InvalidPredecessorId":{"name":"InvalidPredecessorId","subtypes":[],"props":{"account_id":""}},"InvalidReceiverId":{"name":"InvalidReceiverId","subtypes":[],"props":{"account_id":""}},"InvalidSignature":{"name":"InvalidSignature","subtypes":[],"props":{}},"InvalidSignerId":{"name":"InvalidSignerId","subtypes":[],"props":{"account_id":""}},"InvalidTxError":{"name":"InvalidTxError","subtypes":["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],"props":{}},"LackBalanceForState":{"name":"LackBalanceForState","subtypes":[],"props":{"account_id":"","amount":""}},"MethodNameMismatch":{"name":"MethodNameMismatch","subtypes":[],"props":{"method_name":""}},"NotEnoughAllowance":{"name":"NotEnoughAllowance","subtypes":[],"props":{"account_id":"","allowance":"","cost":"","public_key":""}},"NotEnoughBalance":{"name":"NotEnoughBalance","subtypes":[],"props":{"balance":"","cost":"","signer_id":""}},"OnlyImplicitAccountCreationAllowed":{"name":"OnlyImplicitAccountCreationAllowed","subtypes":[],"props":{"account_id":""}},"ReceiptValidationError":{"name":"ReceiptValidationError","subtypes":["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],"props":{}},"ReceiverMismatch":{"name":"ReceiverMismatch","subtypes":[],"props":{"ak_receiver":"","tx_receiver":""}},"RequiresFullAccess":{"name":"RequiresFullAccess","subtypes":[],"props":{}},"SignerDoesNotExist":{"name":"SignerDoesNotExist","subtypes":[],"props":{"signer_id":""}},"TotalNumberOfActionsExceeded":{"name":"TotalNumberOfActionsExceeded","subtypes":[],"props":{"limit":"","total_number_of_actions":""}},"TotalPrepaidGasExceeded":{"name":"TotalPrepaidGasExceeded","subtypes":[],"props":{"limit":"","total_prepaid_gas":""}},"TriesToStake":{"name":"TriesToStake","subtypes":[],"props":{"account_id":"","balance":"","locked":"","stake":""}},"TriesToUnstake":{"name":"TriesToUnstake","subtypes":[],"props":{"account_id":""}},"TxExecutionError":{"name":"TxExecutionError","subtypes":["ActionError","InvalidTxError"],"props":{}},"UnsuitableStakingKey":{"name":"UnsuitableStakingKey","subtypes":[],"props":{"public_key":""}},"Closed":{"name":"Closed","subtypes":[],"props":{}},"InternalError":{"name":"InternalError","subtypes":[],"props":{}},"ServerError":{"name":"ServerError","subtypes":["TxExecutionError","Timeout","Closed","InternalError"],"props":{}},"Timeout":{"name":"Timeout","subtypes":[],"props":{}}}}')},66174:function(t){"use strict";t.exports=JSON.parse('{"GasLimitExceeded":"Exceeded the maximum amount of gas allowed to burn per contract","MethodEmptyName":"Method name is empty","WasmerCompileError":"Wasmer compilation error: {{msg}}","GuestPanic":"Smart contract panicked: {{panic_msg}}","Memory":"Error creating Wasm memory","GasExceeded":"Exceeded the prepaid gas","MethodUTF8Error":"Method name is not valid UTF8 string","BadUTF16":"String encoding is bad UTF-16 sequence","WasmTrap":"WebAssembly trap: {{msg}}","GasInstrumentation":"Gas instrumentation failed or contract has denied instructions.","InvalidPromiseIndex":"{{promise_idx}} does not correspond to existing promises","InvalidPromiseResultIndex":"Accessed invalid promise result index: {{result_idx}}","Deserialization":"Error happened while deserializing the module","MethodNotFound":"Contract method is not found","InvalidRegisterId":"Accessed invalid register id: {{register_id}}","InvalidReceiptIndex":"VM Logic returned an invalid receipt index: {{receipt_index}}","EmptyMethodName":"Method name is empty in contract call","CannotReturnJointPromise":"Returning joint promise is currently prohibited","StackHeightInstrumentation":"Stack instrumentation failed","CodeDoesNotExist":"Cannot find contract code for account {{account_id}}","MethodInvalidSignature":"Invalid method signature","IntegerOverflow":"Integer overflow happened during contract execution","MemoryAccessViolation":"MemoryAccessViolation","InvalidIteratorIndex":"Iterator index {{iterator_index}} does not exist","IteratorWasInvalidated":"Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie","InvalidAccountId":"VM Logic returned an invalid account id","Serialization":"Error happened while serializing the module","CannotAppendActionToJointPromise":"Actions can only be appended to non-joint promise.","InternalMemoryDeclared":"Internal memory declaration has been found in the module","Instantiate":"Error happened during instantiation","ProhibitedInView":"{{method_name}} is not allowed in view calls","InvalidMethodName":"VM Logic returned an invalid method name","BadUTF8":"String encoding is bad UTF-8 sequence","BalanceExceeded":"Exceeded the account balance","LinkError":"Wasm contract link error: {{msg}}","InvalidPublicKey":"VM Logic provided an invalid public key","ActorNoPermission":"Actor {{actor_id}} doesn\'t have permission to account {{account_id}} to complete the action","LackBalanceForState":"The account {{account_id}} wouldn\'t have enough balance to cover storage, required to have {{amount}} yoctoNEAR more","ReceiverMismatch":"Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.","CostOverflow":"Transaction gas or balance cost is too high","InvalidSignature":"Transaction is not signed with the given public key","AccessKeyNotFound":"Signer \\"{{account_id}}\\" doesn\'t have access key with the given public_key {{public_key}}","NotEnoughBalance":"Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}","NotEnoughAllowance":"Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}","Expired":"Transaction has expired","DeleteAccountStaking":"Account {{account_id}} is staking and can not be deleted","SignerDoesNotExist":"Signer {{signer_id}} does not exist","TriesToStake":"Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}","AddKeyAlreadyExists":"The public key {{public_key}} is already used for an existing access key","InvalidSigner":"Invalid signer account ID {{signer_id}} according to requirements","CreateAccountNotAllowed":"The new account_id {{account_id}} can\'t be created by {{predecessor_id}}","RequiresFullAccess":"The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key","TriesToUnstake":"Account {{account_id}} is not yet staked, but tried to unstake","InvalidNonce":"Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}","AccountAlreadyExists":"Can\'t create a new account {{account_id}}, because it already exists","InvalidChain":"Transaction parent block hash doesn\'t belong to the current chain","AccountDoesNotExist":"Can\'t complete the action because account {{account_id}} doesn\'t exist","MethodNameMismatch":"Transaction method name {{method_name}} isn\'t allowed by the access key","DeleteAccountHasRent":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent","DeleteAccountHasEnoughBalance":"Account {{account_id}} can\'t be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it\'s storage","InvalidReceiver":"Invalid receiver account ID {{receiver_id}} according to requirements","DeleteKeyDoesNotExist":"Account {{account_id}} tries to remove an access key that doesn\'t exist","Timeout":"Timeout exceeded","Closed":"Connection closed"}')},7597:function(t){"use strict";t.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","306":"(Unused)","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')}}]);